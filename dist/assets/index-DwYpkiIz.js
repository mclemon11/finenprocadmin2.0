function GT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function QT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _y={exports:{}},Eu={},wy={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),XT=Symbol.for("react.portal"),YT=Symbol.for("react.fragment"),JT=Symbol.for("react.strict_mode"),ZT=Symbol.for("react.profiler"),e0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),r0=Symbol.for("react.suspense"),s0=Symbol.for("react.memo"),i0=Symbol.for("react.lazy"),Lm=Symbol.iterator;function o0(t){return t===null||typeof t!="object"?null:(t=Lm&&t[Lm]||t["@@iterator"],typeof t=="function"?t:null)}var Ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iy=Object.assign,Ty={};function gi(t,e,n){this.props=t,this.context=e,this.refs=Ty,this.updater=n||Ey}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sy(){}Sy.prototype=gi.prototype;function Oh(t,e,n){this.props=t,this.context=e,this.refs=Ty,this.updater=n||Ey}var Vh=Oh.prototype=new Sy;Vh.constructor=Oh;Iy(Vh,gi.prototype);Vh.isPureReactComponent=!0;var Mm=Array.isArray,xy=Object.prototype.hasOwnProperty,Lh={current:null},Ay={key:!0,ref:!0,__self:!0,__source:!0};function Ny(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)xy.call(e,r)&&!Ay.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ea,type:t,key:i,ref:o,props:s,_owner:Lh.current}}function a0(t,e){return{$$typeof:ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ea}function l0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fm=/\/+/g;function kc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?l0(""+t.key):e.toString(36)}function dl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ea:case XT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+kc(o,0):r,Mm(s)?(n="",t!=null&&(n=t.replace(Fm,"$&/")+"/"),dl(s,e,n,"",function(d){return d})):s!=null&&(Mh(s)&&(s=a0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Fm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Mm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+kc(i,l);o+=dl(i,e,n,u,s)}else if(u=o0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+kc(i,l++),o+=dl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ba(t,e,n){if(t==null)return t;var r=[],s=0;return dl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function u0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},hl={transition:null},c0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:hl,ReactCurrentOwner:Lh};function Ry(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ba,forEach:function(t,e,n){Ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ba(t,function(){e++}),e},toArray:function(t){return Ba(t,function(e){return e})||[]},only:function(t){if(!Mh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=gi;ee.Fragment=YT;ee.Profiler=ZT;ee.PureComponent=Oh;ee.StrictMode=JT;ee.Suspense=r0;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c0;ee.act=Ry;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Iy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Lh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)xy.call(e,u)&&!Ay.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ea,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:t0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:e0,_context:t},t.Consumer=t};ee.createElement=Ny;ee.createFactory=function(t){var e=Ny.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:n0,render:t}};ee.isValidElement=Mh;ee.lazy=function(t){return{$$typeof:i0,_payload:{_status:-1,_result:t},_init:u0}};ee.memo=function(t,e){return{$$typeof:s0,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=hl.transition;hl.transition={};try{t()}finally{hl.transition=e}};ee.unstable_act=Ry;ee.useCallback=function(t,e){return _t.current.useCallback(t,e)};ee.useContext=function(t){return _t.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ee.useEffect=function(t,e){return _t.current.useEffect(t,e)};ee.useId=function(){return _t.current.useId()};ee.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return _t.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ee.useRef=function(t){return _t.current.useRef(t)};ee.useState=function(t){return _t.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return _t.current.useTransition()};ee.version="18.3.1";wy.exports=ee;var j=wy.exports;const Fh=QT(j),d0=GT({__proto__:null,default:Fh},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=j,f0=Symbol.for("react.element"),p0=Symbol.for("react.fragment"),m0=Object.prototype.hasOwnProperty,g0=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v0={key:!0,ref:!0,__self:!0,__source:!0};function Cy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)m0.call(e,r)&&!v0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:f0,type:t,key:i,ref:o,props:s,_owner:g0.current}}Eu.Fragment=p0;Eu.jsx=Cy;Eu.jsxs=Cy;_y.exports=Eu;var c=_y.exports,Py={exports:{}},Dt={},ky={exports:{}},jy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var J=$.length;$.push(G);e:for(;0<J;){var pe=J-1>>>1,ue=$[pe];if(0<s(ue,G))$[pe]=G,$[J]=ue,J=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],J=$.pop();if(J!==G){$[0]=J;e:for(var pe=0,ue=$.length,Ie=ue>>>1;pe<Ie;){var Ht=2*(pe+1)-1,Vt=$[Ht],At=Ht+1,me=$[At];if(0>s(Vt,J))At<ue&&0>s(me,Vt)?($[pe]=me,$[At]=J,pe=At):($[pe]=Vt,$[Ht]=J,pe=Ht);else if(At<ue&&0>s(me,J))$[pe]=me,$[At]=J,pe=At;else break e}}return G}function s($,G){var J=$.sortIndex-G.sortIndex;return J!==0?J:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,y=!1,x=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(d)}}function k($){if(N=!1,T($),!x)if(n(u)!==null)x=!0,Fr(D);else{var G=n(d);G!==null&&ln(k,G.startTime-$)}}function D($,G){x=!1,N&&(N=!1,v(w),w=-1),y=!0;var J=g;try{for(T(G),p=n(u);p!==null&&(!(p.expirationTime>G)||$&&!A());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var ue=pe(p.expirationTime<=G);G=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),T(G)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var Ht=n(d);Ht!==null&&ln(k,Ht.startTime-G),Ie=!1}return Ie}finally{p=null,g=J,y=!1}}var M=!1,R=null,w=-1,S=5,_=-1;function A(){return!(t.unstable_now()-_<S)}function b(){if(R!==null){var $=t.unstable_now();_=$;var G=!0;try{G=R(!0,$)}finally{G?C():(M=!1,R=null)}}else M=!1}var C;if(typeof I=="function")C=function(){I(b)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,fe=ie.port2;ie.port1.onmessage=b,C=function(){fe.postMessage(null)}}else C=function(){P(b,0)};function Fr($){R=$,M||(M=!0,C())}function ln($,G){w=P(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Fr(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var J=g;g=G;try{return $()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return G()}finally{g=J}},t.unstable_scheduleCallback=function($,G,J){var pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=J+ue,$={id:f++,callback:G,priorityLevel:$,startTime:J,expirationTime:ue,sortIndex:-1},J>pe?($.sortIndex=J,e(d,$),n(u)===null&&$===n(d)&&(N?(v(w),w=-1):N=!0,ln(k,J-pe))):($.sortIndex=ue,e(u,$),x||y||(x=!0,Fr(D))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var G=g;return function(){var J=g;g=G;try{return $.apply(this,arguments)}finally{g=J}}}})(jy);ky.exports=jy;var y0=ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _0=j,bt=y0;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var by=new Set,wo={};function ms(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(wo[t]=e,t=0;t<e.length;t++)by.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=Object.prototype.hasOwnProperty,w0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Um={},Bm={};function E0(t){return md.call(Bm,t)?!0:md.call(Um,t)?!1:w0.test(t)?Bm[t]=!0:(Um[t]=!0,!1)}function I0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T0(t,e,n,r){if(e===null||typeof e>"u"||I0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uh=/[\-:]([a-z])/g;function Bh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uh,Bh);Je[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uh,Bh);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uh,Bh);Je[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zh(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T0(e,n,s,r)&&(n=null),r||s===null?E0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=_0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,za=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),$h=Symbol.for("react.strict_mode"),gd=Symbol.for("react.profiler"),Dy=Symbol.for("react.provider"),Oy=Symbol.for("react.context"),Wh=Symbol.for("react.forward_ref"),vd=Symbol.for("react.suspense"),yd=Symbol.for("react.suspense_list"),qh=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),Vy=Symbol.for("react.offscreen"),zm=Symbol.iterator;function Fi(t){return t===null||typeof t!="object"?null:(t=zm&&t[zm]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,jc;function Qi(t){if(jc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jc=e&&e[1]||""}return`
`+jc+t}var bc=!1;function Dc(t,e){if(!t||bc)return"";bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qi(t):""}function S0(t){switch(t.tag){case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 2:case 15:return t=Dc(t.type,!1),t;case 11:return t=Dc(t.type.render,!1),t;case 1:return t=Dc(t.type,!0),t;default:return""}}function _d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case Cs:return"Portal";case gd:return"Profiler";case $h:return"StrictMode";case vd:return"Suspense";case yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Oy:return(t.displayName||"Context")+".Consumer";case Dy:return(t._context.displayName||"Context")+".Provider";case Wh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qh:return e=t.displayName||null,e!==null?e:_d(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return _d(t(e))}catch{}}return null}function x0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _d(e);case 8:return e===$h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ly(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function A0(t){var e=Ly(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $a(t){t._valueTracker||(t._valueTracker=A0(t))}function My(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ly(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fy(t,e){e=e.checked,e!=null&&zh(t,"checked",e,!1)}function Ed(t,e){Fy(t,e);var n=Tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Id(t,e.type,n):e.hasOwnProperty("defaultValue")&&Id(t,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Id(t,e,n){(e!=="number"||jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xi=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Td(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Xi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tr(n)}}function Uy(t,e){var n=Tr(e.value),r=Tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function By(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?By(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wa,zy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wa=Wa||document.createElement("div"),Wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N0=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){N0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),so[e]=so[t]})});function $y(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||so.hasOwnProperty(t)&&so[t]?(""+e).trim():e+"px"}function Wy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$y(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var R0=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xd(t,e){if(e){if(R0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Ad(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=null;function Hh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rd=null,$s=null,Ws=null;function Km(t){if(t=ra(t)){if(typeof Rd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Au(e),Rd(t.stateNode,t.type,e))}}function qy(t){$s?Ws?Ws.push(t):Ws=[t]:$s=t}function Hy(){if($s){var t=$s,e=Ws;if(Ws=$s=null,Km(t),e)for(t=0;t<e.length;t++)Km(e[t])}}function Ky(t,e){return t(e)}function Gy(){}var Oc=!1;function Qy(t,e,n){if(Oc)return t(e,n);Oc=!0;try{return Ky(t,e,n)}finally{Oc=!1,($s!==null||Ws!==null)&&(Gy(),Hy())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=Au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Cd=!1;if(Dn)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){Cd=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{Cd=!1}function C0(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var io=!1,bl=null,Dl=!1,Pd=null,P0={onError:function(t){io=!0,bl=t}};function k0(t,e,n,r,s,i,o,l,u){io=!1,bl=null,C0.apply(P0,arguments)}function j0(t,e,n,r,s,i,o,l,u){if(k0.apply(this,arguments),io){if(io){var d=bl;io=!1,bl=null}else throw Error(U(198));Dl||(Dl=!0,Pd=d)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gm(t){if(gs(t)!==t)throw Error(U(188))}function b0(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Gm(s),t;if(i===r)return Gm(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Yy(t){return t=b0(t),t!==null?Jy(t):null}function Jy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jy(t);if(e!==null)return e;t=t.sibling}return null}var Zy=bt.unstable_scheduleCallback,Qm=bt.unstable_cancelCallback,D0=bt.unstable_shouldYield,O0=bt.unstable_requestPaint,je=bt.unstable_now,V0=bt.unstable_getCurrentPriorityLevel,Kh=bt.unstable_ImmediatePriority,e_=bt.unstable_UserBlockingPriority,Ol=bt.unstable_NormalPriority,L0=bt.unstable_LowPriority,t_=bt.unstable_IdlePriority,Iu=null,hn=null;function M0(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:B0,F0=Math.log,U0=Math.LN2;function B0(t){return t>>>=0,t===0?32:31-(F0(t)/U0|0)|0}var qa=64,Ha=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yi(l):(i&=o,i!==0&&(r=Yi(i)))}else o=n&~s,o!==0?r=Yi(o):i!==0&&(r=Yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function z0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=z0(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n_(){var t=qa;return qa<<=1,!(qa&4194240)&&(qa=64),t}function Vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function W0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ce=0;function r_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s_,Qh,i_,o_,a_,jd=!1,Ka=[],dr=null,hr=null,fr=null,To=new Map,So=new Map,er=[],q0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xm(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(e.pointerId)}}function Bi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ra(e),e!==null&&Qh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H0(t,e,n,r,s){switch(e){case"focusin":return dr=Bi(dr,t,e,n,r,s),!0;case"dragenter":return hr=Bi(hr,t,e,n,r,s),!0;case"mouseover":return fr=Bi(fr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return To.set(i,Bi(To.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,So.set(i,Bi(So.get(i)||null,t,e,n,r,s)),!0}return!1}function l_(t){var e=Gr(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=Xy(n),e!==null){t.blockedOn=e,a_(t.priority,function(){i_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nd=r,n.target.dispatchEvent(r),Nd=null}else return e=ra(n),e!==null&&Qh(e),t.blockedOn=n,!1;e.shift()}return!0}function Ym(t,e,n){fl(t)&&n.delete(e)}function K0(){jd=!1,dr!==null&&fl(dr)&&(dr=null),hr!==null&&fl(hr)&&(hr=null),fr!==null&&fl(fr)&&(fr=null),To.forEach(Ym),So.forEach(Ym)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,jd||(jd=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,K0)))}function xo(t){function e(s){return zi(s,t)}if(0<Ka.length){zi(Ka[0],t);for(var n=1;n<Ka.length;n++){var r=Ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dr!==null&&zi(dr,t),hr!==null&&zi(hr,t),fr!==null&&zi(fr,t),To.forEach(e),So.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)l_(n),n.blockedOn===null&&er.shift()}var qs=zn.ReactCurrentBatchConfig,Ll=!0;function G0(t,e,n,r){var s=ce,i=qs.transition;qs.transition=null;try{ce=1,Xh(t,e,n,r)}finally{ce=s,qs.transition=i}}function Q0(t,e,n,r){var s=ce,i=qs.transition;qs.transition=null;try{ce=4,Xh(t,e,n,r)}finally{ce=s,qs.transition=i}}function Xh(t,e,n,r){if(Ll){var s=bd(t,e,n,r);if(s===null)Hc(t,e,r,Ml,n),Xm(t,r);else if(H0(s,t,e,n,r))r.stopPropagation();else if(Xm(t,r),e&4&&-1<q0.indexOf(t)){for(;s!==null;){var i=ra(s);if(i!==null&&s_(i),i=bd(t,e,n,r),i===null&&Hc(t,e,r,Ml,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hc(t,e,r,null,n)}}var Ml=null;function bd(t,e,n,r){if(Ml=null,t=Hh(r),t=Gr(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ml=t,null}function u_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(V0()){case Kh:return 1;case e_:return 4;case Ol:case L0:return 16;case t_:return 536870912;default:return 16}default:return 16}}var ar=null,Yh=null,pl=null;function c_(){if(pl)return pl;var t,e=Yh,n=e.length,r,s="value"in ar?ar.value:ar.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return pl=s.slice(t,1<r?1-r:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ga(){return!0}function Jm(){return!1}function Ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ga:Jm,this.isPropagationStopped=Jm,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jh=Ot(vi),na=Ae({},vi,{view:0,detail:0}),X0=Ot(na),Lc,Mc,$i,Tu=Ae({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$i&&($i&&t.type==="mousemove"?(Lc=t.screenX-$i.screenX,Mc=t.screenY-$i.screenY):Mc=Lc=0,$i=t),Lc)},movementY:function(t){return"movementY"in t?t.movementY:Mc}}),Zm=Ot(Tu),Y0=Ae({},Tu,{dataTransfer:0}),J0=Ot(Y0),Z0=Ae({},na,{relatedTarget:0}),Fc=Ot(Z0),eS=Ae({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=Ot(eS),nS=Ae({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rS=Ot(nS),sS=Ae({},vi,{data:0}),eg=Ot(sS),iS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aS[t])?!!e[t]:!1}function Zh(){return lS}var uS=Ae({},na,{key:function(t){if(t.key){var e=iS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zh,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cS=Ot(uS),dS=Ae({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tg=Ot(dS),hS=Ae({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zh}),fS=Ot(hS),pS=Ae({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=Ot(pS),gS=Ae({},Tu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vS=Ot(gS),yS=[9,13,27,32],ef=Dn&&"CompositionEvent"in window,oo=null;Dn&&"documentMode"in document&&(oo=document.documentMode);var _S=Dn&&"TextEvent"in window&&!oo,d_=Dn&&(!ef||oo&&8<oo&&11>=oo),ng=" ",rg=!1;function h_(t,e){switch(t){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function wS(t,e){switch(t){case"compositionend":return f_(e);case"keypress":return e.which!==32?null:(rg=!0,ng);case"textInput":return t=e.data,t===ng&&rg?null:t;default:return null}}function ES(t,e){if(ks)return t==="compositionend"||!ef&&h_(t,e)?(t=c_(),pl=Yh=ar=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d_&&e.locale!=="ko"?null:e.data;default:return null}}var IS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IS[t.type]:e==="textarea"}function p_(t,e,n,r){qy(r),e=Fl(e,"onChange"),0<e.length&&(n=new Jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,Ao=null;function TS(t){x_(t,0)}function Su(t){var e=Ds(t);if(My(e))return t}function SS(t,e){if(t==="change")return e}var m_=!1;if(Dn){var Uc;if(Dn){var Bc="oninput"in document;if(!Bc){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),Bc=typeof ig.oninput=="function"}Uc=Bc}else Uc=!1;m_=Uc&&(!document.documentMode||9<document.documentMode)}function og(){ao&&(ao.detachEvent("onpropertychange",g_),Ao=ao=null)}function g_(t){if(t.propertyName==="value"&&Su(Ao)){var e=[];p_(e,Ao,t,Hh(t)),Qy(TS,e)}}function xS(t,e,n){t==="focusin"?(og(),ao=e,Ao=n,ao.attachEvent("onpropertychange",g_)):t==="focusout"&&og()}function AS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(Ao)}function NS(t,e){if(t==="click")return Su(e)}function RS(t,e){if(t==="input"||t==="change")return Su(e)}function CS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:CS;function No(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!md.call(e,s)||!on(t[s],e[s]))return!1}return!0}function ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lg(t,e){var n=ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ag(n)}}function v_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y_(){for(var t=window,e=jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jl(t.document)}return e}function tf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PS(t){var e=y_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v_(n.ownerDocument.documentElement,n)){if(r!==null&&tf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=lg(n,i);var o=lg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kS=Dn&&"documentMode"in document&&11>=document.documentMode,js=null,Dd=null,lo=null,Od=!1;function ug(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Od||js==null||js!==jl(r)||(r=js,"selectionStart"in r&&tf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&No(lo,r)||(lo=r,r=Fl(Dd,"onSelect"),0<r.length&&(e=new Jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=js)))}function Qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},zc={},__={};Dn&&(__=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function xu(t){if(zc[t])return zc[t];if(!bs[t])return t;var e=bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in __)return zc[t]=e[n];return t}var w_=xu("animationend"),E_=xu("animationiteration"),I_=xu("animationstart"),T_=xu("transitionend"),S_=new Map,cg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){S_.set(t,e),ms(e,[t])}for(var $c=0;$c<cg.length;$c++){var Wc=cg[$c],jS=Wc.toLowerCase(),bS=Wc[0].toUpperCase()+Wc.slice(1);Cr(jS,"on"+bS)}Cr(w_,"onAnimationEnd");Cr(E_,"onAnimationIteration");Cr(I_,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(T_,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ji));function dg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,j0(r,e,void 0,t),t.currentTarget=null}function x_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;dg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;dg(s,l,d),i=u}}}if(Dl)throw t=Pd,Dl=!1,Pd=null,t}function ye(t,e){var n=e[Ud];n===void 0&&(n=e[Ud]=new Set);var r=t+"__bubble";n.has(r)||(A_(e,t,2,!1),n.add(r))}function qc(t,e,n){var r=0;e&&(r|=4),A_(n,t,r,e)}var Xa="_reactListening"+Math.random().toString(36).slice(2);function Ro(t){if(!t[Xa]){t[Xa]=!0,by.forEach(function(n){n!=="selectionchange"&&(DS.has(n)||qc(n,!1,t),qc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xa]||(e[Xa]=!0,qc("selectionchange",!1,e))}}function A_(t,e,n,r){switch(u_(e)){case 1:var s=G0;break;case 4:s=Q0;break;default:s=Xh}n=s.bind(null,e,n,t),s=void 0,!Cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Gr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Qy(function(){var d=i,f=Hh(n),p=[];e:{var g=S_.get(t);if(g!==void 0){var y=Jh,x=t;switch(t){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":y=cS;break;case"focusin":x="focus",y=Fc;break;case"focusout":x="blur",y=Fc;break;case"beforeblur":case"afterblur":y=Fc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Zm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=J0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=fS;break;case w_:case E_:case I_:y=tS;break;case T_:y=mS;break;case"scroll":y=X0;break;case"wheel":y=vS;break;case"copy":case"cut":case"paste":y=rS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=tg}var N=(e&4)!==0,P=!N&&t==="scroll",v=N?g!==null?g+"Capture":null:g;N=[];for(var I=d,T;I!==null;){T=I;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,v!==null&&(k=Io(I,v),k!=null&&N.push(Co(I,k,T)))),P)break;I=I.return}0<N.length&&(g=new y(g,x,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Nd&&(x=n.relatedTarget||n.fromElement)&&(Gr(x)||x[On]))break e;if((y||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=d,x=x?Gr(x):null,x!==null&&(P=gs(x),x!==P||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=d),y!==x)){if(N=Zm,k="onMouseLeave",v="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(N=tg,k="onPointerLeave",v="onPointerEnter",I="pointer"),P=y==null?g:Ds(y),T=x==null?g:Ds(x),g=new N(k,I+"leave",y,n,f),g.target=P,g.relatedTarget=T,k=null,Gr(f)===d&&(N=new N(v,I+"enter",x,n,f),N.target=T,N.relatedTarget=P,k=N),P=k,y&&x)t:{for(N=y,v=x,I=0,T=N;T;T=As(T))I++;for(T=0,k=v;k;k=As(k))T++;for(;0<I-T;)N=As(N),I--;for(;0<T-I;)v=As(v),T--;for(;I--;){if(N===v||v!==null&&N===v.alternate)break t;N=As(N),v=As(v)}N=null}else N=null;y!==null&&hg(p,g,y,N,!1),x!==null&&P!==null&&hg(p,P,x,N,!0)}}e:{if(g=d?Ds(d):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var D=SS;else if(sg(g))if(m_)D=RS;else{D=AS;var M=xS}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=NS);if(D&&(D=D(t,d))){p_(p,D,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Id(g,"number",g.value)}switch(M=d?Ds(d):window,t){case"focusin":(sg(M)||M.contentEditable==="true")&&(js=M,Dd=d,lo=null);break;case"focusout":lo=Dd=js=null;break;case"mousedown":Od=!0;break;case"contextmenu":case"mouseup":case"dragend":Od=!1,ug(p,n,f);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":ug(p,n,f)}var R;if(ef)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ks?h_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(d_&&n.locale!=="ko"&&(ks||w!=="onCompositionStart"?w==="onCompositionEnd"&&ks&&(R=c_()):(ar=f,Yh="value"in ar?ar.value:ar.textContent,ks=!0)),M=Fl(d,w),0<M.length&&(w=new eg(w,t,null,n,f),p.push({event:w,listeners:M}),R?w.data=R:(R=f_(n),R!==null&&(w.data=R)))),(R=_S?wS(t,n):ES(t,n))&&(d=Fl(d,"onBeforeInput"),0<d.length&&(f=new eg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=R))}x_(p,e)})}function Co(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(Co(t,i,s)),i=Io(t,e),i!=null&&r.push(Co(t,i,s))),t=t.return}return r}function As(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Io(n,i),u!=null&&o.unshift(Co(n,u,l))):s||(u=Io(n,i),u!=null&&o.push(Co(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OS=/\r\n?/g,VS=/\u0000|\uFFFD/g;function fg(t){return(typeof t=="string"?t:""+t).replace(OS,`
`).replace(VS,"")}function Ya(t,e,n){if(e=fg(e),fg(t)!==e&&n)throw Error(U(425))}function Ul(){}var Vd=null,Ld=null;function Md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,LS=typeof clearTimeout=="function"?clearTimeout:void 0,pg=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof pg<"u"?function(t){return pg.resolve(null).then(t).catch(FS)}:Fd;function FS(t){setTimeout(function(){throw t})}function Kc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xo(e)}function pr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function mg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),dn="__reactFiber$"+yi,Po="__reactProps$"+yi,On="__reactContainer$"+yi,Ud="__reactEvents$"+yi,US="__reactListeners$"+yi,BS="__reactHandles$"+yi;function Gr(t){var e=t[dn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[dn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=mg(t);t!==null;){if(n=t[dn])return n;t=mg(t)}return e}t=n,n=t.parentNode}return null}function ra(t){return t=t[dn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Au(t){return t[Po]||null}var Bd=[],Os=-1;function Pr(t){return{current:t}}function we(t){0>Os||(t.current=Bd[Os],Bd[Os]=null,Os--)}function ge(t,e){Os++,Bd[Os]=t.current,t.current=e}var Sr={},ht=Pr(Sr),Tt=Pr(!1),rs=Sr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function St(t){return t=t.childContextTypes,t!=null}function Bl(){we(Tt),we(ht)}function gg(t,e,n){if(ht.current!==Sr)throw Error(U(168));ge(ht,e),ge(Tt,n)}function N_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,x0(t)||"Unknown",s));return Ae({},n,r)}function zl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,rs=ht.current,ge(ht,t),ge(Tt,Tt.current),!0}function vg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=N_(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,we(Tt),we(ht),ge(ht,t)):we(Tt),ge(Tt,n)}var xn=null,Nu=!1,Gc=!1;function R_(t){xn===null?xn=[t]:xn.push(t)}function zS(t){Nu=!0,R_(t)}function kr(){if(!Gc&&xn!==null){Gc=!0;var t=0,e=ce;try{var n=xn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,Nu=!1}catch(s){throw xn!==null&&(xn=xn.slice(t+1)),Zy(Kh,kr),s}finally{ce=e,Gc=!1}}return null}var Vs=[],Ls=0,$l=null,Wl=0,Mt=[],Ft=0,ss=null,Nn=1,Rn="";function qr(t,e){Vs[Ls++]=Wl,Vs[Ls++]=$l,$l=t,Wl=e}function C_(t,e,n){Mt[Ft++]=Nn,Mt[Ft++]=Rn,Mt[Ft++]=ss,ss=t;var r=Nn;t=Rn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nn=1<<32-tn(e)+s|n<<s|r,Rn=i+t}else Nn=1<<i|n<<s|r,Rn=t}function nf(t){t.return!==null&&(qr(t,1),C_(t,1,0))}function rf(t){for(;t===$l;)$l=Vs[--Ls],Vs[Ls]=null,Wl=Vs[--Ls],Vs[Ls]=null;for(;t===ss;)ss=Mt[--Ft],Mt[Ft]=null,Rn=Mt[--Ft],Mt[Ft]=null,Nn=Mt[--Ft],Mt[Ft]=null}var kt=null,Ct=null,Ee=!1,Yt=null;function P_(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,Ct=pr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,Ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:Nn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,Ct=null,!0):!1;default:return!1}}function zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $d(t){if(Ee){var e=Ct;if(e){var n=e;if(!yg(t,e)){if(zd(t))throw Error(U(418));e=pr(n.nextSibling);var r=kt;e&&yg(t,e)?P_(r,n):(t.flags=t.flags&-4097|2,Ee=!1,kt=t)}}else{if(zd(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ee=!1,kt=t}}}function _g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function Ja(t){if(t!==kt)return!1;if(!Ee)return _g(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Md(t.type,t.memoizedProps)),e&&(e=Ct)){if(zd(t))throw k_(),Error(U(418));for(;e;)P_(t,e),e=pr(e.nextSibling)}if(_g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ct=pr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ct=null}}else Ct=kt?pr(t.stateNode.nextSibling):null;return!0}function k_(){for(var t=Ct;t;)t=pr(t.nextSibling)}function ti(){Ct=kt=null,Ee=!1}function sf(t){Yt===null?Yt=[t]:Yt.push(t)}var $S=zn.ReactCurrentBatchConfig;function Wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wg(t){var e=t._init;return e(t._payload)}function j_(t){function e(v,I){if(t){var T=v.deletions;T===null?(v.deletions=[I],v.flags|=16):T.push(I)}}function n(v,I){if(!t)return null;for(;I!==null;)e(v,I),I=I.sibling;return null}function r(v,I){for(v=new Map;I!==null;)I.key!==null?v.set(I.key,I):v.set(I.index,I),I=I.sibling;return v}function s(v,I){return v=yr(v,I),v.index=0,v.sibling=null,v}function i(v,I,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<I?(v.flags|=2,I):T):(v.flags|=2,I)):(v.flags|=1048576,I)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,I,T,k){return I===null||I.tag!==6?(I=td(T,v.mode,k),I.return=v,I):(I=s(I,T),I.return=v,I)}function u(v,I,T,k){var D=T.type;return D===Ps?f(v,I,T.props.children,k,T.key):I!==null&&(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Jn&&wg(D)===I.type)?(k=s(I,T.props),k.ref=Wi(v,I,T),k.return=v,k):(k=Il(T.type,T.key,T.props,null,v.mode,k),k.ref=Wi(v,I,T),k.return=v,k)}function d(v,I,T,k){return I===null||I.tag!==4||I.stateNode.containerInfo!==T.containerInfo||I.stateNode.implementation!==T.implementation?(I=nd(T,v.mode,k),I.return=v,I):(I=s(I,T.children||[]),I.return=v,I)}function f(v,I,T,k,D){return I===null||I.tag!==7?(I=es(T,v.mode,k,D),I.return=v,I):(I=s(I,T),I.return=v,I)}function p(v,I,T){if(typeof I=="string"&&I!==""||typeof I=="number")return I=td(""+I,v.mode,T),I.return=v,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case za:return T=Il(I.type,I.key,I.props,null,v.mode,T),T.ref=Wi(v,null,I),T.return=v,T;case Cs:return I=nd(I,v.mode,T),I.return=v,I;case Jn:var k=I._init;return p(v,k(I._payload),T)}if(Xi(I)||Fi(I))return I=es(I,v.mode,T,null),I.return=v,I;Za(v,I)}return null}function g(v,I,T,k){var D=I!==null?I.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:l(v,I,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case za:return T.key===D?u(v,I,T,k):null;case Cs:return T.key===D?d(v,I,T,k):null;case Jn:return D=T._init,g(v,I,D(T._payload),k)}if(Xi(T)||Fi(T))return D!==null?null:f(v,I,T,k,null);Za(v,T)}return null}function y(v,I,T,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(T)||null,l(I,v,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case za:return v=v.get(k.key===null?T:k.key)||null,u(I,v,k,D);case Cs:return v=v.get(k.key===null?T:k.key)||null,d(I,v,k,D);case Jn:var M=k._init;return y(v,I,T,M(k._payload),D)}if(Xi(k)||Fi(k))return v=v.get(T)||null,f(I,v,k,D,null);Za(I,k)}return null}function x(v,I,T,k){for(var D=null,M=null,R=I,w=I=0,S=null;R!==null&&w<T.length;w++){R.index>w?(S=R,R=null):S=R.sibling;var _=g(v,R,T[w],k);if(_===null){R===null&&(R=S);break}t&&R&&_.alternate===null&&e(v,R),I=i(_,I,w),M===null?D=_:M.sibling=_,M=_,R=S}if(w===T.length)return n(v,R),Ee&&qr(v,w),D;if(R===null){for(;w<T.length;w++)R=p(v,T[w],k),R!==null&&(I=i(R,I,w),M===null?D=R:M.sibling=R,M=R);return Ee&&qr(v,w),D}for(R=r(v,R);w<T.length;w++)S=y(R,v,w,T[w],k),S!==null&&(t&&S.alternate!==null&&R.delete(S.key===null?w:S.key),I=i(S,I,w),M===null?D=S:M.sibling=S,M=S);return t&&R.forEach(function(A){return e(v,A)}),Ee&&qr(v,w),D}function N(v,I,T,k){var D=Fi(T);if(typeof D!="function")throw Error(U(150));if(T=D.call(T),T==null)throw Error(U(151));for(var M=D=null,R=I,w=I=0,S=null,_=T.next();R!==null&&!_.done;w++,_=T.next()){R.index>w?(S=R,R=null):S=R.sibling;var A=g(v,R,_.value,k);if(A===null){R===null&&(R=S);break}t&&R&&A.alternate===null&&e(v,R),I=i(A,I,w),M===null?D=A:M.sibling=A,M=A,R=S}if(_.done)return n(v,R),Ee&&qr(v,w),D;if(R===null){for(;!_.done;w++,_=T.next())_=p(v,_.value,k),_!==null&&(I=i(_,I,w),M===null?D=_:M.sibling=_,M=_);return Ee&&qr(v,w),D}for(R=r(v,R);!_.done;w++,_=T.next())_=y(R,v,w,_.value,k),_!==null&&(t&&_.alternate!==null&&R.delete(_.key===null?w:_.key),I=i(_,I,w),M===null?D=_:M.sibling=_,M=_);return t&&R.forEach(function(b){return e(v,b)}),Ee&&qr(v,w),D}function P(v,I,T,k){if(typeof T=="object"&&T!==null&&T.type===Ps&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case za:e:{for(var D=T.key,M=I;M!==null;){if(M.key===D){if(D=T.type,D===Ps){if(M.tag===7){n(v,M.sibling),I=s(M,T.props.children),I.return=v,v=I;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Jn&&wg(D)===M.type){n(v,M.sibling),I=s(M,T.props),I.ref=Wi(v,M,T),I.return=v,v=I;break e}n(v,M);break}else e(v,M);M=M.sibling}T.type===Ps?(I=es(T.props.children,v.mode,k,T.key),I.return=v,v=I):(k=Il(T.type,T.key,T.props,null,v.mode,k),k.ref=Wi(v,I,T),k.return=v,v=k)}return o(v);case Cs:e:{for(M=T.key;I!==null;){if(I.key===M)if(I.tag===4&&I.stateNode.containerInfo===T.containerInfo&&I.stateNode.implementation===T.implementation){n(v,I.sibling),I=s(I,T.children||[]),I.return=v,v=I;break e}else{n(v,I);break}else e(v,I);I=I.sibling}I=nd(T,v.mode,k),I.return=v,v=I}return o(v);case Jn:return M=T._init,P(v,I,M(T._payload),k)}if(Xi(T))return x(v,I,T,k);if(Fi(T))return N(v,I,T,k);Za(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,I!==null&&I.tag===6?(n(v,I.sibling),I=s(I,T),I.return=v,v=I):(n(v,I),I=td(T,v.mode,k),I.return=v,v=I),o(v)):n(v,I)}return P}var ni=j_(!0),b_=j_(!1),ql=Pr(null),Hl=null,Ms=null,of=null;function af(){of=Ms=Hl=null}function lf(t){var e=ql.current;we(ql),t._currentValue=e}function Wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){Hl=t,of=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(of!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Hl===null)throw Error(U(308));Ms=t,Hl.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Qr=null;function uf(t){Qr===null?Qr=[t]:Qr.push(t)}function D_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}function Eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kl(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,y=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,N=l;switch(g=e,y=n,N.tag){case 1:if(x=N.payload,typeof x=="function"){p=x.call(y,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=N.payload,g=typeof x=="function"?x.call(y,p,g):x,g==null)break e;p=Ae({},p,g);break e;case 2:Zn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else y={eventTime:y,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=y,u=p):f=f.next=y,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=p}}function Ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var sa={},fn=Pr(sa),ko=Pr(sa),jo=Pr(sa);function Xr(t){if(t===sa)throw Error(U(174));return t}function df(t,e){switch(ge(jo,e),ge(ko,t),ge(fn,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sd(e,t)}we(fn),ge(fn,e)}function ri(){we(fn),we(ko),we(jo)}function V_(t){Xr(jo.current);var e=Xr(fn.current),n=Sd(e,t.type);e!==n&&(ge(ko,t),ge(fn,n))}function hf(t){ko.current===t&&(we(fn),we(ko))}var Te=Pr(0);function Gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qc=[];function ff(){for(var t=0;t<Qc.length;t++)Qc[t]._workInProgressVersionPrimary=null;Qc.length=0}var vl=zn.ReactCurrentDispatcher,Xc=zn.ReactCurrentBatchConfig,is=0,Se=null,Le=null,Be=null,Ql=!1,uo=!1,bo=0,WS=0;function st(){throw Error(U(321))}function pf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function mf(t,e,n,r,s,i){if(is=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?GS:QS,t=n(r,s),uo){i=0;do{if(uo=!1,bo=0,25<=i)throw Error(U(301));i+=1,Be=Le=null,e.updateQueue=null,vl.current=XS,t=n(r,s)}while(uo)}if(vl.current=Xl,e=Le!==null&&Le.next!==null,is=0,Be=Le=Se=null,Ql=!1,e)throw Error(U(300));return t}function gf(){var t=bo!==0;return bo=0,t}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=t:Be=Be.next=t,Be}function $t(){if(Le===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?Se.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(U(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?Se.memoizedState=Be=t:Be=Be.next=t}return Be}function Do(t,e){return typeof e=="function"?e(t):e}function Yc(t){var e=$t(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((is&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Se.lanes|=f,os|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,on(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,os|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jc(t){var e=$t(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function L_(){}function M_(t,e){var n=Se,r=$t(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,vf(B_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Oo(9,U_.bind(null,n,r,s,e),void 0,null),We===null)throw Error(U(349));is&30||F_(n,e,s)}return s}function F_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function U_(t,e,n,r){e.value=n,e.getSnapshot=r,z_(e)&&$_(t)}function B_(t,e,n){return n(function(){z_(e)&&$_(t)})}function z_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function $_(t){var e=Vn(t,1);e!==null&&nn(e,t,1,-1)}function Tg(t){var e=cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:t},e.queue=t,t=t.dispatch=KS.bind(null,Se,t),[e.memoizedState,t]}function Oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function W_(){return $t().memoizedState}function yl(t,e,n,r){var s=cn();Se.flags|=t,s.memoizedState=Oo(1|e,n,void 0,r===void 0?null:r)}function Ru(t,e,n,r){var s=$t();r=r===void 0?null:r;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,r!==null&&pf(r,o.deps)){s.memoizedState=Oo(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Oo(1|e,n,i,r)}function Sg(t,e){return yl(8390656,8,t,e)}function vf(t,e){return Ru(2048,8,t,e)}function q_(t,e){return Ru(4,2,t,e)}function H_(t,e){return Ru(4,4,t,e)}function K_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G_(t,e,n){return n=n!=null?n.concat([t]):null,Ru(4,4,K_.bind(null,e,t),n)}function yf(){}function Q_(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X_(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Y_(t,e,n){return is&21?(on(n,e)||(n=n_(),Se.lanes|=n,os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function qS(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=Xc.transition;Xc.transition={};try{t(!1),e()}finally{ce=n,Xc.transition=r}}function J_(){return $t().memoizedState}function HS(t,e,n){var r=vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z_(t))ew(e,n);else if(n=D_(t,e,n,r),n!==null){var s=yt();nn(n,t,r,s),tw(n,e,r)}}function KS(t,e,n){var r=vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z_(t))ew(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var u=e.interleaved;u===null?(s.next=s,uf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=D_(t,e,s,r),n!==null&&(s=yt(),nn(n,t,r,s),tw(n,e,r))}}function Z_(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function ew(t,e){uo=Ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gh(t,n)}}var Xl={readContext:zt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},GS={readContext:zt,useCallback:function(t,e){return cn().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:Sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yl(4194308,4,K_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return yl(4,2,t,e)},useMemo:function(t,e){var n=cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HS.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=cn();return t={current:t},e.memoizedState=t},useState:Tg,useDebugValue:yf,useDeferredValue:function(t){return cn().memoizedState=t},useTransition:function(){var t=Tg(!1),e=t[0];return t=qS.bind(null,t[1]),cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=cn();if(Ee){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),We===null)throw Error(U(349));is&30||F_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Sg(B_.bind(null,r,i,t),[t]),r.flags|=2048,Oo(9,U_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cn(),e=We.identifierPrefix;if(Ee){var n=Rn,r=Nn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QS={readContext:zt,useCallback:Q_,useContext:zt,useEffect:vf,useImperativeHandle:G_,useInsertionEffect:q_,useLayoutEffect:H_,useMemo:X_,useReducer:Yc,useRef:W_,useState:function(){return Yc(Do)},useDebugValue:yf,useDeferredValue:function(t){var e=$t();return Y_(e,Le.memoizedState,t)},useTransition:function(){var t=Yc(Do)[0],e=$t().memoizedState;return[t,e]},useMutableSource:L_,useSyncExternalStore:M_,useId:J_,unstable_isNewReconciler:!1},XS={readContext:zt,useCallback:Q_,useContext:zt,useEffect:vf,useImperativeHandle:G_,useInsertionEffect:q_,useLayoutEffect:H_,useMemo:X_,useReducer:Jc,useRef:W_,useState:function(){return Jc(Do)},useDebugValue:yf,useDeferredValue:function(t){var e=$t();return Le===null?e.memoizedState=t:Y_(e,Le.memoizedState,t)},useTransition:function(){var t=Jc(Do)[0],e=$t().memoizedState;return[t,e]},useMutableSource:L_,useSyncExternalStore:M_,useId:J_,unstable_isNewReconciler:!1};function Qt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cu={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=vr(t),i=jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(nn(e,t,s,r),gl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=vr(t),i=jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=mr(t,i,s),e!==null&&(nn(e,t,s,r),gl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=vr(t),s=jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=mr(t,s,r),e!==null&&(nn(e,t,r,n),gl(e,t,r))}};function xg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!No(n,r)||!No(s,i):!0}function nw(t,e,n){var r=!1,s=Sr,i=e.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=St(e)?rs:ht.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function Hd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},cf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=St(e)?rs:ht.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cu.enqueueReplaceState(s,s.state,null),Kl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=S0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YS=typeof WeakMap=="function"?WeakMap:Map;function rw(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jl||(Jl=!0,rh=r),Kd(t,e)},n}function sw(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Kd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kd(t,e),typeof r!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ng(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dx.bind(null,t,e,n),e.then(t,t))}function Rg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,mr(n,e,1))),n.lanes|=1),t)}var JS=zn.ReactCurrentOwner,It=!1;function gt(t,e,n,r){e.child=t===null?b_(e,null,n,r):ni(e,t.child,n,r)}function Pg(t,e,n,r,s){n=n.render;var i=e.ref;return Hs(e,s),r=mf(t,e,n,r,i,s),n=gf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Ee&&n&&nf(e),e.flags|=1,gt(t,e,r,s),e.child)}function kg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Af(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iw(t,e,i,r,s)):(t=Il(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:No,n(o,r)&&t.ref===e.ref)return Ln(t,e,s)}return e.flags|=1,t=yr(i,r),t.ref=e.ref,t.return=e,e.child=t}function iw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(No(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Ln(t,e,s)}return Gd(t,e,n,r,s)}function ow(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Us,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Us,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(Us,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(Us,Rt),Rt|=r;return gt(t,e,s,n),e.child}function aw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gd(t,e,n,r,s){var i=St(n)?rs:ht.current;return i=ei(e,i),Hs(e,s),n=mf(t,e,n,r,i,s),r=gf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ln(t,e,s)):(Ee&&r&&nf(e),e.flags|=1,gt(t,e,n,s),e.child)}function jg(t,e,n,r,s){if(St(n)){var i=!0;zl(e)}else i=!1;if(Hs(e,s),e.stateNode===null)_l(t,e),nw(e,n,r),Hd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=St(n)?rs:ht.current,d=ei(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Ag(e,o,r,d),Zn=!1;var g=e.memoizedState;o.state=g,Kl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Tt.current||Zn?(typeof f=="function"&&(qd(e,n,f,r),u=e.memoizedState),(l=Zn||xg(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,O_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Qt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=zt(u):(u=St(n)?rs:ht.current,u=ei(e,u));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Ag(e,o,r,u),Zn=!1,g=e.memoizedState,o.state=g,Kl(e,r,o,s);var x=e.memoizedState;l!==p||g!==x||Tt.current||Zn?(typeof y=="function"&&(qd(e,n,y,r),x=e.memoizedState),(d=Zn||xg(e,n,d,r,g,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Qd(t,e,n,r,i,s)}function Qd(t,e,n,r,s,i){aw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&vg(e,n,!1),Ln(t,e,i);r=e.stateNode,JS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,l,i)):gt(t,e,l,i),e.memoizedState=r.state,s&&vg(e,n,!0),e.child}function lw(t){var e=t.stateNode;e.pendingContext?gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gg(t,e.context,!1),df(t,e.containerInfo)}function bg(t,e,n,r,s){return ti(),sf(s),e.flags|=256,gt(t,e,n,r),e.child}var Xd={dehydrated:null,treeContext:null,retryLane:0};function Yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function uw(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Te,s&1),t===null)return $d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ju(o,r,0,null),t=es(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Yd(n),e.memoizedState=Xd,t):_f(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ZS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=yr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=yr(l,i):(i=es(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Yd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Xd,r}return i=t.child,t=i.sibling,r=yr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function _f(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&sf(r),ni(e,t.child,null,n),t=_f(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zc(Error(U(422))),el(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ju({mode:"visible",children:r.children},s,0,null),i=es(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=Yd(o),e.memoizedState=Xd,i);if(!(e.mode&1))return el(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=Zc(i,r,void 0),el(t,e,o,r)}if(l=(o&t.childLanes)!==0,It||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),nn(r,t,s,-1))}return xf(),r=Zc(Error(U(421))),el(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ct=pr(s.nextSibling),kt=e,Ee=!0,Yt=null,t!==null&&(Mt[Ft++]=Nn,Mt[Ft++]=Rn,Mt[Ft++]=ss,Nn=t.id,Rn=t.overflow,ss=e),e=_f(e,r.children),e.flags|=4096,e)}function Dg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wd(t.return,e,n)}function ed(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function cw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dg(t,n,e);else if(t.tag===19)Dg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ed(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ed(e,!0,n,null,i);break;case"together":ed(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ln(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ex(t,e,n){switch(e.tag){case 3:lw(e),ti();break;case 5:V_(e);break;case 1:St(e.type)&&zl(e);break;case 4:df(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?uw(t,e,n):(ge(Te,Te.current&1),t=Ln(t,e,n),t!==null?t.sibling:null);ge(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,ow(t,e,n)}return Ln(t,e,n)}var dw,Jd,hw,fw;dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jd=function(){};hw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xr(fn.current);var i=null;switch(n){case"input":s=wd(t,s),r=wd(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Td(t,s),r=Td(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ul)}xd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ye("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};fw=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tx(t,e,n){var r=e.pendingProps;switch(rf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return St(e.type)&&Bl(),it(e),null;case 3:return r=e.stateNode,ri(),we(Tt),we(ht),ff(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(oh(Yt),Yt=null))),Jd(t,e),it(e),null;case 5:hf(e);var s=Xr(jo.current);if(n=e.type,t!==null&&e.stateNode!=null)hw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return it(e),null}if(t=Xr(fn.current),Ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[dn]=e,r[Po]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<Ji.length;s++)ye(Ji[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":$m(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":qm(r,i),ye("invalid",r)}xd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),s=["children",""+l]):wo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":$a(r),Wm(r,i,!0);break;case"textarea":$a(r),Hm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ul)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=By(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[dn]=e,t[Po]=r,dw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ad(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ji.length;s++)ye(Ji[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":$m(t,r),s=wd(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),ye("invalid",t);break;case"textarea":qm(t,r),s=Td(t,r),ye("invalid",t);break;default:s=r}xd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Wy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zy(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Eo(t,u):typeof u=="number"&&Eo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ye("scroll",t):u!=null&&zh(t,i,u,o))}switch(n){case"input":$a(t),Wm(t,r,!1);break;case"textarea":$a(t),Hm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)fw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Xr(jo.current),Xr(fn.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[dn]=e,(i=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:Ya(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ya(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=e,e.stateNode=r}return it(e),null;case 13:if(we(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Ct!==null&&e.mode&1&&!(e.flags&128))k_(),ti(),e.flags|=98560,i=!1;else if(i=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[dn]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Yt!==null&&(oh(Yt),Yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Me===0&&(Me=3):xf())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return ri(),Jd(t,e),t===null&&Ro(e.stateNode.containerInfo),it(e),null;case 10:return lf(e.type._context),it(e),null;case 17:return St(e.type)&&Bl(),it(e),null;case 19:if(we(Te),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qi(i,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gl(t),o!==null){for(e.flags|=128,qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>ii&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return it(e),null}else 2*je()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Te.current,ge(Te,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return Sf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function nx(t,e){switch(rf(e),e.tag){case 1:return St(e.type)&&Bl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),we(Tt),we(ht),ff(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hf(e),null;case 13:if(we(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Te),null;case 4:return ri(),null;case 10:return lf(e.type._context),null;case 22:case 23:return Sf(),null;case 24:return null;default:return null}}var tl=!1,lt=!1,rx=typeof WeakSet=="function"?WeakSet:Set,W=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Zd(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Og=!1;function sx(t,e){if(Vd=Ll,t=y_(),tf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ld={focusedElem:t,selectionRange:n},Ll=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var N=x.memoizedProps,P=x.memoizedState,v=e.stateNode,I=v.getSnapshotBeforeUpdate(e.elementType===e.type?N:Qt(e.type,N),P);v.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){Pe(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return x=Og,Og=!1,x}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zd(e,n,i)}s=s.next}while(s!==r)}}function Pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pw(t){var e=t.alternate;e!==null&&(t.alternate=null,pw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dn],delete e[Po],delete e[Ud],delete e[US],delete e[BS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mw(t){return t.tag===5||t.tag===3||t.tag===4}function Vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ul));else if(r!==4&&(t=t.child,t!==null))for(th(t,e,n),t=t.sibling;t!==null;)th(t,e,n),t=t.sibling}function nh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nh(t,e,n),t=t.sibling;t!==null;)nh(t,e,n),t=t.sibling}var He=null,Xt=!1;function Qn(t,e,n){for(n=n.child;n!==null;)gw(t,e,n),n=n.sibling}function gw(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Iu,n)}catch{}switch(n.tag){case 5:lt||Fs(n,e);case 6:var r=He,s=Xt;He=null,Qn(t,e,n),He=r,Xt=s,He!==null&&(Xt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Xt?(t=He,n=n.stateNode,t.nodeType===8?Kc(t.parentNode,n):t.nodeType===1&&Kc(t,n),xo(t)):Kc(He,n.stateNode));break;case 4:r=He,s=Xt,He=n.stateNode.containerInfo,Xt=!0,Qn(t,e,n),He=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zd(n,e,o),s=s.next}while(s!==r)}Qn(t,e,n);break;case 1:if(!lt&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Qn(t,e,n),lt=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function Lg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rx),e.forEach(function(r){var s=fx.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Xt=!1;break e;case 3:He=l.stateNode.containerInfo,Xt=!0;break e;case 4:He=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(He===null)throw Error(U(160));gw(i,o,s),He=null,Xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vw(e,t),e=e.sibling}function vw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),un(t),r&4){try{co(3,t,t.return),Pu(3,t)}catch(N){Pe(t,t.return,N)}try{co(5,t,t.return)}catch(N){Pe(t,t.return,N)}}break;case 1:Gt(e,t),un(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Gt(e,t),un(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{Eo(s,"")}catch(N){Pe(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Fy(s,i),Ad(l,o);var d=Ad(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Wy(s,p):f==="dangerouslySetInnerHTML"?zy(s,p):f==="children"?Eo(s,p):zh(s,f,p,d)}switch(l){case"input":Ed(s,i);break;case"textarea":Uy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?zs(s,!!i.multiple,y,!1):g!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Po]=i}catch(N){Pe(t,t.return,N)}}break;case 6:if(Gt(e,t),un(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Pe(t,t.return,N)}}break;case 3:if(Gt(e,t),un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(N){Pe(t,t.return,N)}break;case 4:Gt(e,t),un(t);break;case 13:Gt(e,t),un(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(If=je())),r&4&&Lg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||f,Gt(e,t),lt=d):Gt(e,t),un(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,y=g.child,g.tag){case 0:case 11:case 14:case 15:co(4,g,g.return);break;case 1:Fs(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(N){Pe(r,n,N)}}break;case 5:Fs(g,g.return);break;case 22:if(g.memoizedState!==null){Fg(p);continue}}y!==null?(y.return=g,W=y):Fg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=$y("display",o))}catch(N){Pe(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Pe(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gt(e,t),un(t),r&4&&Lg(t);break;case 21:break;default:Gt(e,t),un(t)}}function un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Eo(s,""),r.flags&=-33);var i=Vg(t);nh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vg(t);th(t,l,o);break;default:throw Error(U(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ix(t,e,n){W=t,yw(t)}function yw(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=tl;var d=lt;if(tl=o,(lt=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Ug(s):u!==null?(u.return=o,W=u):Ug(s);for(;i!==null;)W=i,yw(i),i=i.sibling;W=s,tl=l,lt=d}Mg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Mg(t)}}function Mg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ig(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ig(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&xo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}lt||e.flags&512&&eh(e)}catch(g){Pe(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Fg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Ug(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pu(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{eh(e)}catch(u){Pe(e,i,u)}break;case 5:var o=e.return;try{eh(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var ox=Math.ceil,Yl=zn.ReactCurrentDispatcher,wf=zn.ReactCurrentOwner,Bt=zn.ReactCurrentBatchConfig,oe=0,We=null,Oe=null,Xe=0,Rt=0,Us=Pr(0),Me=0,Vo=null,os=0,ku=0,Ef=0,ho=null,Et=null,If=0,ii=1/0,Sn=null,Jl=!1,rh=null,gr=null,nl=!1,lr=null,Zl=0,fo=0,sh=null,wl=-1,El=0;function yt(){return oe&6?je():wl!==-1?wl:wl=je()}function vr(t){return t.mode&1?oe&2&&Xe!==0?Xe&-Xe:$S.transition!==null?(El===0&&(El=n_()),El):(t=ce,t!==0||(t=window.event,t=t===void 0?16:u_(t.type)),t):1}function nn(t,e,n,r){if(50<fo)throw fo=0,sh=null,Error(U(185));ta(t,n,r),(!(oe&2)||t!==We)&&(t===We&&(!(oe&2)&&(ku|=n),Me===4&&tr(t,Xe)),xt(t,r),n===1&&oe===0&&!(e.mode&1)&&(ii=je()+500,Nu&&kr()))}function xt(t,e){var n=t.callbackNode;$0(t,e);var r=Vl(t,t===We?Xe:0);if(r===0)n!==null&&Qm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qm(n),e===1)t.tag===0?zS(Bg.bind(null,t)):R_(Bg.bind(null,t)),MS(function(){!(oe&6)&&kr()}),n=null;else{switch(r_(r)){case 1:n=Kh;break;case 4:n=e_;break;case 16:n=Ol;break;case 536870912:n=t_;break;default:n=Ol}n=Aw(n,_w.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _w(t,e){if(wl=-1,El=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(Ks()&&t.callbackNode!==n)return null;var r=Vl(t,t===We?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eu(t,r);else{e=r;var s=oe;oe|=2;var i=Ew();(We!==t||Xe!==e)&&(Sn=null,ii=je()+500,Zr(t,e));do try{ux();break}catch(l){ww(t,l)}while(!0);af(),Yl.current=i,oe=s,Oe!==null?e=0:(We=null,Xe=0,e=Me)}if(e!==0){if(e===2&&(s=kd(t),s!==0&&(r=s,e=ih(t,s))),e===1)throw n=Vo,Zr(t,0),tr(t,r),xt(t,je()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ax(s)&&(e=eu(t,r),e===2&&(i=kd(t),i!==0&&(r=i,e=ih(t,i))),e===1))throw n=Vo,Zr(t,0),tr(t,r),xt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Hr(t,Et,Sn);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=If+500-je(),10<e)){if(Vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fd(Hr.bind(null,t,Et,Sn),e);break}Hr(t,Et,Sn);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ox(r/1960))-r,10<r){t.timeoutHandle=Fd(Hr.bind(null,t,Et,Sn),r);break}Hr(t,Et,Sn);break;case 5:Hr(t,Et,Sn);break;default:throw Error(U(329))}}}return xt(t,je()),t.callbackNode===n?_w.bind(null,t):null}function ih(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=eu(t,e),t!==2&&(e=Et,Et=n,e!==null&&oh(e)),t}function oh(t){Et===null?Et=t:Et.push.apply(Et,t)}function ax(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~Ef,e&=~ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function Bg(t){if(oe&6)throw Error(U(327));Ks();var e=Vl(t,0);if(!(e&1))return xt(t,je()),null;var n=eu(t,e);if(t.tag!==0&&n===2){var r=kd(t);r!==0&&(e=r,n=ih(t,r))}if(n===1)throw n=Vo,Zr(t,0),tr(t,e),xt(t,je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Et,Sn),xt(t,je()),null}function Tf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ii=je()+500,Nu&&kr())}}function as(t){lr!==null&&lr.tag===0&&!(oe&6)&&Ks();var e=oe;oe|=1;var n=Bt.transition,r=ce;try{if(Bt.transition=null,ce=1,t)return t()}finally{ce=r,Bt.transition=n,oe=e,!(oe&6)&&kr()}}function Sf(){Rt=Us.current,we(Us)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LS(n)),Oe!==null)for(n=Oe.return;n!==null;){var r=n;switch(rf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bl();break;case 3:ri(),we(Tt),we(ht),ff();break;case 5:hf(r);break;case 4:ri();break;case 13:we(Te);break;case 19:we(Te);break;case 10:lf(r.type._context);break;case 22:case 23:Sf()}n=n.return}if(We=t,Oe=t=yr(t.current,null),Xe=Rt=e,Me=0,Vo=null,Ef=ku=os=0,Et=ho=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qr=null}return t}function ww(t,e){do{var n=Oe;try{if(af(),vl.current=Xl,Ql){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ql=!1}if(is=0,Be=Le=Se=null,uo=!1,bo=0,wf.current=null,n===null||n.return===null){Me=1,Vo=e,Oe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Xe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Rg(o);if(y!==null){y.flags&=-257,Cg(y,o,l,i,e),y.mode&1&&Ng(i,d,e),e=y,u=d;var x=e.updateQueue;if(x===null){var N=new Set;N.add(u),e.updateQueue=N}else x.add(u);break e}else{if(!(e&1)){Ng(i,d,e),xf();break e}u=Error(U(426))}}else if(Ee&&l.mode&1){var P=Rg(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Cg(P,o,l,i,e),sf(si(u,l));break e}}i=u=si(u,l),Me!==4&&(Me=2),ho===null?ho=[i]:ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=rw(i,u,e);Eg(i,v);break e;case 1:l=u;var I=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof I.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(gr===null||!gr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=sw(i,l,e);Eg(i,k);break e}}i=i.return}while(i!==null)}Tw(n)}catch(D){e=D,Oe===n&&n!==null&&(Oe=n=n.return);continue}break}while(!0)}function Ew(){var t=Yl.current;return Yl.current=Xl,t===null?Xl:t}function xf(){(Me===0||Me===3||Me===2)&&(Me=4),We===null||!(os&268435455)&&!(ku&268435455)||tr(We,Xe)}function eu(t,e){var n=oe;oe|=2;var r=Ew();(We!==t||Xe!==e)&&(Sn=null,Zr(t,e));do try{lx();break}catch(s){ww(t,s)}while(!0);if(af(),oe=n,Yl.current=r,Oe!==null)throw Error(U(261));return We=null,Xe=0,Me}function lx(){for(;Oe!==null;)Iw(Oe)}function ux(){for(;Oe!==null&&!D0();)Iw(Oe)}function Iw(t){var e=xw(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?Tw(t):Oe=e,wf.current=null}function Tw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nx(n,e),n!==null){n.flags&=32767,Oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Oe=null;return}}else if(n=tx(n,e,Rt),n!==null){Oe=n;return}if(e=e.sibling,e!==null){Oe=e;return}Oe=e=t}while(e!==null);Me===0&&(Me=5)}function Hr(t,e,n){var r=ce,s=Bt.transition;try{Bt.transition=null,ce=1,cx(t,e,n,r)}finally{Bt.transition=s,ce=r}return null}function cx(t,e,n,r){do Ks();while(lr!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(W0(t,i),t===We&&(Oe=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,Aw(Ol,function(){return Ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=ce;ce=1;var l=oe;oe|=4,wf.current=null,sx(t,n),vw(n,t),PS(Ld),Ll=!!Vd,Ld=Vd=null,t.current=n,ix(n),O0(),oe=l,ce=o,Bt.transition=i}else t.current=n;if(nl&&(nl=!1,lr=t,Zl=s),i=t.pendingLanes,i===0&&(gr=null),M0(n.stateNode),xt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jl)throw Jl=!1,t=rh,rh=null,t;return Zl&1&&t.tag!==0&&Ks(),i=t.pendingLanes,i&1?t===sh?fo++:(fo=0,sh=t):fo=0,kr(),null}function Ks(){if(lr!==null){var t=r_(Zl),e=Bt.transition,n=ce;try{if(Bt.transition=null,ce=16>t?16:t,lr===null)var r=!1;else{if(t=lr,lr=null,Zl=0,oe&6)throw Error(U(331));var s=oe;for(oe|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:co(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,y=f.return;if(pw(f),f===d){W=null;break}if(g!==null){g.return=y,W=g;break}W=y}}}var x=i.alternate;if(x!==null){var N=x.child;if(N!==null){x.child=null;do{var P=N.sibling;N.sibling=null,N=P}while(N!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:co(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,W=v;break e}W=i.return}}var I=t.current;for(W=I;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=I;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pu(9,l)}}catch(D){Pe(l,l.return,D)}if(l===o){W=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,W=k;break e}W=l.return}}if(oe=s,kr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Iu,t)}catch{}r=!0}return r}finally{ce=n,Bt.transition=e}}return!1}function zg(t,e,n){e=si(n,e),e=rw(t,e,1),t=mr(t,e,1),e=yt(),t!==null&&(ta(t,1,e),xt(t,e))}function Pe(t,e,n){if(t.tag===3)zg(t,t,n);else for(;e!==null;){if(e.tag===3){zg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gr===null||!gr.has(r))){t=si(n,t),t=sw(e,t,1),e=mr(e,t,1),t=yt(),e!==null&&(ta(e,1,t),xt(e,t));break}}e=e.return}}function dx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Xe&n)===n&&(Me===4||Me===3&&(Xe&130023424)===Xe&&500>je()-If?Zr(t,0):Ef|=n),xt(t,e)}function Sw(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=yt();t=Vn(t,e),t!==null&&(ta(t,e,n),xt(t,n))}function hx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Sw(t,n)}function fx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Sw(t,n)}var xw;xw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,ex(t,e,n);It=!!(t.flags&131072)}else It=!1,Ee&&e.flags&1048576&&C_(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var s=ei(e,ht.current);Hs(e,n),s=mf(null,e,r,t,s,n);var i=gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(i=!0,zl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cf(e),s.updater=Cu,e.stateNode=s,s._reactInternals=e,Hd(e,r,t,n),e=Qd(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&nf(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mx(r),t=Qt(r,t),s){case 0:e=Gd(null,e,r,t,n);break e;case 1:e=jg(null,e,r,t,n);break e;case 11:e=Pg(null,e,r,t,n);break e;case 14:e=kg(null,e,r,Qt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),Gd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),jg(t,e,r,s,n);case 3:e:{if(lw(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,O_(t,e),Kl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(U(423)),e),e=bg(t,e,r,n,s);break e}else if(r!==s){s=si(Error(U(424)),e),e=bg(t,e,r,n,s);break e}else for(Ct=pr(e.stateNode.containerInfo.firstChild),kt=e,Ee=!0,Yt=null,n=b_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=Ln(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return V_(e),t===null&&$d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Md(r,s)?o=null:i!==null&&Md(r,i)&&(e.flags|=32),aw(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&$d(e),null;case 13:return uw(t,e,n);case 4:return df(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),Pg(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(ql,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Tt.current){e=Ln(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=jn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Wd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Wd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hs(e,n),s=zt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=Qt(r,e.pendingProps),s=Qt(r.type,s),kg(t,e,r,s,n);case 15:return iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qt(r,s),_l(t,e),e.tag=1,St(r)?(t=!0,zl(e)):t=!1,Hs(e,n),nw(e,r,s),Hd(e,r,s,n),Qd(null,e,r,!0,t,n);case 19:return cw(t,e,n);case 22:return ow(t,e,n)}throw Error(U(156,e.tag))};function Aw(t,e){return Zy(t,e)}function px(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new px(t,e,n,r)}function Af(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mx(t){if(typeof t=="function")return Af(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wh)return 11;if(t===qh)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Af(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ps:return es(n.children,s,i,e);case $h:o=8,s|=8;break;case gd:return t=Ut(12,n,e,s|2),t.elementType=gd,t.lanes=i,t;case vd:return t=Ut(13,n,e,s),t.elementType=vd,t.lanes=i,t;case yd:return t=Ut(19,n,e,s),t.elementType=yd,t.lanes=i,t;case Vy:return ju(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dy:o=10;break e;case Oy:o=9;break e;case Wh:o=11;break e;case qh:o=14;break e;case Jn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ut(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function es(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function ju(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=Vy,t.lanes=n,t.stateNode={isHidden:!1},t}function td(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function nd(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nf(t,e,n,r,s,i,o,l,u){return t=new gx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(i),t}function vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Nw(t){if(!t)return Sr;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(St(n))return N_(t,n,e)}return e}function Rw(t,e,n,r,s,i,o,l,u){return t=Nf(n,r,!0,t,s,i,o,l,u),t.context=Nw(null),n=t.current,r=yt(),s=vr(n),i=jn(r,s),i.callback=e??null,mr(n,i,s),t.current.lanes=s,ta(t,s,r),xt(t,r),t}function bu(t,e,n,r){var s=e.current,i=yt(),o=vr(s);return n=Nw(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mr(s,e,o),t!==null&&(nn(t,s,o,i),gl(t,s,o)),o}function tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rf(t,e){$g(t,e),(t=t.alternate)&&$g(t,e)}function yx(){return null}var Cw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cf(t){this._internalRoot=t}Du.prototype.render=Cf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));bu(t,e,null,null)};Du.prototype.unmount=Cf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;as(function(){bu(null,t,null,null)}),e[On]=null}};function Du(t){this._internalRoot=t}Du.prototype.unstable_scheduleHydration=function(t){if(t){var e=o_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&l_(t)}};function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wg(){}function _x(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=tu(o);i.call(d)}}var o=Rw(e,r,t,0,null,!1,!1,"",Wg);return t._reactRootContainer=o,t[On]=o.current,Ro(t.nodeType===8?t.parentNode:t),as(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=tu(u);l.call(d)}}var u=Nf(t,0,!1,null,null,!1,!1,"",Wg);return t._reactRootContainer=u,t[On]=u.current,Ro(t.nodeType===8?t.parentNode:t),as(function(){bu(e,u,n,r)}),u}function Vu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=tu(o);l.call(u)}}bu(e,o,t,s)}else o=_x(n,e,t,s,r);return tu(o)}s_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(Gh(e,n|1),xt(e,je()),!(oe&6)&&(ii=je()+500,kr()))}break;case 13:as(function(){var r=Vn(t,1);if(r!==null){var s=yt();nn(r,t,1,s)}}),Rf(t,1)}};Qh=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=yt();nn(e,t,134217728,n)}Rf(t,134217728)}};i_=function(t){if(t.tag===13){var e=vr(t),n=Vn(t,e);if(n!==null){var r=yt();nn(n,t,e,r)}Rf(t,e)}};o_=function(){return ce};a_=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Rd=function(t,e,n){switch(e){case"input":if(Ed(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Au(r);if(!s)throw Error(U(90));My(r),Ed(r,s)}}}break;case"textarea":Uy(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};Ky=Tf;Gy=as;var wx={usingClientEntryPoint:!1,Events:[ra,Ds,Au,qy,Hy,Tf]},Hi={findFiberByHostInstance:Gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ex={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yy(t),t===null?null:t.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Iu=rl.inject(Ex),hn=rl}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wx;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(e))throw Error(U(200));return vx(t,e,null,n)};Dt.createRoot=function(t,e){if(!Pf(t))throw Error(U(299));var n=!1,r="",s=Cw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nf(t,1,!1,null,null,n,!1,r,s),t[On]=e.current,Ro(t.nodeType===8?t.parentNode:t),new Cf(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Yy(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return as(t)};Dt.hydrate=function(t,e,n){if(!Ou(e))throw Error(U(200));return Vu(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!Pf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Cw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Rw(e,null,t,1,n??null,s,!1,i,o),t[On]=e.current,Ro(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Du(e)};Dt.render=function(t,e,n){if(!Ou(e))throw Error(U(200));return Vu(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!Ou(t))throw Error(U(40));return t._reactRootContainer?(as(function(){Vu(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Dt.unstable_batchedUpdates=Tf;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ou(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Vu(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pw)}catch(t){console.error(t)}}Pw(),Py.exports=Dt;var Ix=Py.exports,kw,qg=Ix;kw=qg.createRoot,qg.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lo(){return Lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lo.apply(this,arguments)}var ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ur||(ur={}));const Hg="popstate";function Tx(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return ah("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nu(s)}return xx(e,n,null,t)}function xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sx(){return Math.random().toString(36).substr(2,8)}function Kg(t,e){return{usr:t.state,key:t.key,idx:e}}function ah(t,e,n,r){return n===void 0&&(n=null),Lo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_i(e):e,{state:n,key:e&&e.key||r||Sx()})}function nu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _i(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xx(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=ur.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Lo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=ur.Pop;let P=f(),v=P==null?null:P-d;d=P,u&&u({action:l,location:N.location,delta:v})}function g(P,v){l=ur.Push;let I=ah(N.location,P,v);d=f()+1;let T=Kg(I,d),k=N.createHref(I);try{o.pushState(T,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(k)}i&&u&&u({action:l,location:N.location,delta:1})}function y(P,v){l=ur.Replace;let I=ah(N.location,P,v);d=f();let T=Kg(I,d),k=N.createHref(I);o.replaceState(T,"",k),i&&u&&u({action:l,location:N.location,delta:0})}function x(P){let v=s.location.origin!=="null"?s.location.origin:s.location.href,I=typeof P=="string"?P:nu(P);return I=I.replace(/ $/,"%20"),xe(v,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,v)}let N={get action(){return l},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Hg,p),u=P,()=>{s.removeEventListener(Hg,p),u=null}},createHref(P){return e(s,P)},createURL:x,encodeLocation(P){let v=x(P);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:g,replace:y,go(P){return o.go(P)}};return N}var Gg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gg||(Gg={}));function Ax(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?_i(e):e,s=oi(r.pathname||"/",n);if(s==null)return null;let i=bw(t);Nx(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=Mx(s);o=Vx(i[l],u)}return o}function bw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(xe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=_r([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),bw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Dx(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Dw(i.path))s(i,o,u)}),e}function Dw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Dw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Nx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ox(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Rx=/^:[\w-]+$/,Cx=3,Px=2,kx=1,jx=10,bx=-2,Qg=t=>t==="*";function Dx(t,e){let n=t.split("/"),r=n.length;return n.some(Qg)&&(r+=bx),e&&(r+=Px),n.filter(s=>!Qg(s)).reduce((s,i)=>s+(Rx.test(i)?Cx:i===""?kx:jx),r)}function Ox(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Vx(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=lh({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d);if(!f)return null;Object.assign(r,f.params);let p=l.route;i.push({params:r,pathname:_r([s,f.pathname]),pathnameBase:zx(_r([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=_r([s,f.pathnameBase]))}return i}function lh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Lx(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:y}=f;if(g==="*"){let N=l[p]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Lx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Mx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function oi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Fx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_i(t):t;return{pathname:n?n.startsWith("/")?n:Ux(n,e):e,search:$x(r),hash:Wx(s)}}function Ux(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function rd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kf(t,e){let n=Bx(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_i(t):(s=Lo({},t),xe(!s.pathname||!s.pathname.includes("?"),rd("?","pathname","search",s)),xe(!s.pathname||!s.pathname.includes("#"),rd("#","pathname","hash",s)),xe(!s.search||!s.search.includes("#"),rd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=Fx(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const _r=t=>t.join("/").replace(/\/\/+/g,"/"),zx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$x=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ow=["post","put","patch","delete"];new Set(Ow);const Hx=["get",...Ow];new Set(Hx);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}const Lu=j.createContext(null),Vw=j.createContext(null),$n=j.createContext(null),Mu=j.createContext(null),jr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Lw=j.createContext(null);function Kx(t,e){let{relative:n}=e===void 0?{}:e;wi()||xe(!1);let{basename:r,navigator:s}=j.useContext($n),{hash:i,pathname:o,search:l}=Fu(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:_r([r,o])),s.createHref({pathname:u,search:l,hash:i})}function wi(){return j.useContext(Mu)!=null}function vs(){return wi()||xe(!1),j.useContext(Mu).location}function Mw(t){j.useContext($n).static||j.useLayoutEffect(t)}function Wn(){let{isDataRoute:t}=j.useContext(jr);return t?oA():Gx()}function Gx(){wi()||xe(!1);let t=j.useContext(Lu),{basename:e,future:n,navigator:r}=j.useContext($n),{matches:s}=j.useContext(jr),{pathname:i}=vs(),o=JSON.stringify(kf(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return Mw(()=>{l.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=jf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:_r([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Fu(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext($n),{matches:s}=j.useContext(jr),{pathname:i}=vs(),o=JSON.stringify(kf(s,r.v7_relativeSplatPath));return j.useMemo(()=>jf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Qx(t,e){return Xx(t,e)}function Xx(t,e,n,r){wi()||xe(!1);let{navigator:s}=j.useContext($n),{matches:i}=j.useContext(jr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=vs(),f;if(e){var p;let P=typeof e=="string"?_i(e):e;u==="/"||(p=P.pathname)!=null&&p.startsWith(u)||xe(!1),f=P}else f=d;let g=f.pathname||"/",y=g;if(u!=="/"){let P=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=Ax(t,{pathname:y}),N=tA(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:_r([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:_r([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&N?j.createElement(Mu.Provider,{value:{location:Mo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ur.Pop}},N):N}function Yx(){let t=iA(),e=qx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const Jx=j.createElement(Yx,null);class Zx extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(jr.Provider,{value:this.props.routeContext},j.createElement(Lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eA(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Lu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(jr.Provider,{value:e},r)}function tA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id]));f>=0||xe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let y,x=!1,N=null,P=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||Jx,u&&(d<0&&g===0?(aA("route-fallback"),x=!0,P=null):d===g&&(x=!0,P=p.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,g+1)),I=()=>{let T;return y?T=N:x?T=P:p.route.Component?T=j.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,j.createElement(eA,{match:p,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(Zx,{location:n.location,revalidation:n.revalidation,component:N,error:y,children:I(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):I()},null)}var Fw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Fw||{}),Uw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Uw||{});function nA(t){let e=j.useContext(Lu);return e||xe(!1),e}function rA(t){let e=j.useContext(Vw);return e||xe(!1),e}function sA(t){let e=j.useContext(jr);return e||xe(!1),e}function Bw(t){let e=sA(),n=e.matches[e.matches.length-1];return n.route.id||xe(!1),n.route.id}function iA(){var t;let e=j.useContext(Lw),n=rA(),r=Bw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oA(){let{router:t}=nA(Fw.UseNavigateStable),e=Bw(Uw.UseNavigateStable),n=j.useRef(!1);return Mw(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mo({fromRouteId:e},i)))},[t,e])}const Xg={};function aA(t,e,n){Xg[t]||(Xg[t]=!0)}function Xn(t){let{to:e,replace:n,state:r,relative:s}=t;wi()||xe(!1);let{future:i,static:o}=j.useContext($n),{matches:l}=j.useContext(jr),{pathname:u}=vs(),d=Wn(),f=jf(e,kf(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Lt(t){xe(!1)}function lA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ur.Pop,navigator:i,static:o=!1,future:l}=t;wi()&&xe(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:o,future:Mo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=_i(r));let{pathname:f="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,N=j.useMemo(()=>{let P=oi(f,u);return P==null?null:{location:{pathname:P,search:p,hash:g,state:y,key:x},navigationType:s}},[u,f,p,g,y,x,s]);return N==null?null:j.createElement($n.Provider,{value:d},j.createElement(Mu.Provider,{children:n,value:N}))}function uA(t){let{children:e,location:n}=t;return Qx(uh(e),n)}new Promise(()=>{});function uh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,uh(r.props.children,i));return}r.type!==Lt&&xe(!1),!r.props.index||!r.props.children||xe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ru.apply(this,arguments)}function zw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dA(t,e){return t.button===0&&(!e||e==="_self")&&!cA(t)}function ch(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function hA(t,e){let n=ch(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const fA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],pA=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],mA="6";try{window.__reactRouterVersion=mA}catch{}const gA=j.createContext({isTransitioning:!1}),vA="startTransition",Yg=d0[vA];function yA(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=Tx({window:s,v5Compat:!0}));let o=i.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&Yg?Yg(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.createElement(lA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const _A=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fo=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,unstable_viewTransition:p}=e,g=zw(e,fA),{basename:y}=j.useContext($n),x,N=!1;if(typeof d=="string"&&wA.test(d)&&(x=d,_A))try{let T=new URL(window.location.href),k=d.startsWith("//")?new URL(T.protocol+d):new URL(d),D=oi(k.pathname,y);k.origin===T.origin&&D!=null?d=D+k.search+k.hash:N=!0}catch{}let P=Kx(d,{relative:s}),v=TA(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,unstable_viewTransition:p});function I(T){r&&r(T),T.defaultPrevented||v(T)}return j.createElement("a",ru({},g,{href:x||P,onClick:N||i?r:I,ref:n,target:u}))}),EA=j.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:u,unstable_viewTransition:d,children:f}=e,p=zw(e,pA),g=Fu(u,{relative:p.relative}),y=vs(),x=j.useContext(Vw),{navigator:N,basename:P}=j.useContext($n),v=x!=null&&SA(g)&&d===!0,I=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,T=y.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(T=T.toLowerCase(),k=k?k.toLowerCase():null,I=I.toLowerCase()),k&&P&&(k=oi(k,P)||k);const D=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let M=T===I||!o&&T.startsWith(I)&&T.charAt(D)==="/",R=k!=null&&(k===I||!o&&k.startsWith(I)&&k.charAt(I.length)==="/"),w={isActive:M,isPending:R,isTransitioning:v},S=M?r:void 0,_;typeof i=="function"?_=i(w):_=[i,M?"active":null,R?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(w):l;return j.createElement(Fo,ru({},p,{"aria-current":S,className:_,ref:n,style:A,to:u,unstable_viewTransition:d}),typeof f=="function"?f(w):f)});var dh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dh||(dh={}));var Jg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jg||(Jg={}));function IA(t){let e=j.useContext(Lu);return e||xe(!1),e}function TA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,u=Wn(),d=vs(),f=Fu(t,{relative:o});return j.useCallback(p=>{if(dA(p,n)){p.preventDefault();let g=r!==void 0?r:nu(d)===nu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}function bf(t){let e=j.useRef(ch(t)),n=j.useRef(!1),r=vs(),s=j.useMemo(()=>hA(r.search,n.current?null:e.current),[r.search]),i=Wn(),o=j.useCallback((l,u)=>{const d=ch(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}function SA(t,e){e===void 0&&(e={});let n=j.useContext(gA);n==null&&xe(!1);let{basename:r}=IA(dh.useViewTransitionState),s=Fu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=oi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=oi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return lh(s.pathname,o)!=null||lh(s.pathname,i)!=null}var Zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,y=d&63;u||(y=64,o||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($w(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new AA;const g=i<<2|l>>4;if(r.push(g),d!==64){const y=l<<4&240|d>>2;if(r.push(y),p!==64){const x=d<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(t){const e=$w(t);return Ww.encodeByteArray(e,!0)},su=function(t){return NA(t).replace(/\./g,"")},qw=function(t){try{return Ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>RA().__FIREBASE_DEFAULTS__,PA=()=>{if(typeof process>"u"||typeof Zg>"u")return;const t=Zg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qw(t[1]);return e&&JSON.parse(e)},Uu=()=>{try{return CA()||PA()||kA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hw=t=>{var e,n;return(n=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kw=t=>{const e=Hw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gw=()=>{var t;return(t=Uu())===null||t===void 0?void 0:t.config},Qw=t=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[su(JSON.stringify(n)),su(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function DA(){var t;const e=(t=Uu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MA(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FA(){return!DA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UA(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="FirebaseError";class wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zA,Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ia.prototype.create)}}class ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?$A(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new wn(s,l,r)}}function $A(t,e){return t.replace(WA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WA=/\{\$([^}]+)}/g;function qA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(ev(i)&&ev(o)){if(!iu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ev(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function eo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HA(t,e){const n=new KA(t,e);return n.subscribe.bind(n)}class KA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");GA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=sd),s.error===void 0&&(s.error=sd),s.complete===void 0&&(s.complete=sd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YA(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(t){return t===Kr?void 0:t}function YA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const ZA={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},eN=ne.INFO,tN={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},nN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=eN,this._logHandler=nN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const rN=(t,e)=>e.some(n=>t instanceof n);let tv,nv;function sN(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iN(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yw=new WeakMap,hh=new WeakMap,Jw=new WeakMap,id=new WeakMap,Of=new WeakMap;function oN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yw.set(n,t)}).catch(()=>{}),Of.set(e,t),e}function aN(t){if(hh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hh.set(t,e)}let fh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lN(t){fh=t(fh)}function uN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(od(this),e,...n);return Jw.set(r,e.sort?e.sort():[e]),wr(r)}:iN().includes(t)?function(...e){return t.apply(od(this),e),wr(Yw.get(this))}:function(...e){return wr(t.apply(od(this),e))}}function cN(t){return typeof t=="function"?uN(t):(t instanceof IDBTransaction&&aN(t),rN(t,sN())?new Proxy(t,fh):t)}function wr(t){if(t instanceof IDBRequest)return oN(t);if(id.has(t))return id.get(t);const e=cN(t);return e!==t&&(id.set(t,e),Of.set(e,t)),e}const od=t=>Of.get(t);function dN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=wr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(wr(o.result),u.oldVersion,u.newVersion,wr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const hN=["get","getKey","getAll","getAllKeys","count"],fN=["put","add","delete","clear"],ad=new Map;function rv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hN.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return ad.set(e,i),i}lN(t=>({...t,get:(e,n,r)=>rv(e,n)||t.get(e,n,r),has:(e,n)=>!!rv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ph="@firebase/app",sv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn=new Df("@firebase/app"),gN="@firebase/app-compat",vN="@firebase/analytics-compat",yN="@firebase/analytics",_N="@firebase/app-check-compat",wN="@firebase/app-check",EN="@firebase/auth",IN="@firebase/auth-compat",TN="@firebase/database",SN="@firebase/data-connect",xN="@firebase/database-compat",AN="@firebase/functions",NN="@firebase/functions-compat",RN="@firebase/installations",CN="@firebase/installations-compat",PN="@firebase/messaging",kN="@firebase/messaging-compat",jN="@firebase/performance",bN="@firebase/performance-compat",DN="@firebase/remote-config",ON="@firebase/remote-config-compat",VN="@firebase/storage",LN="@firebase/storage-compat",MN="@firebase/firestore",FN="@firebase/vertexai-preview",UN="@firebase/firestore-compat",BN="firebase",zN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="[DEFAULT]",$N={[ph]:"fire-core",[gN]:"fire-core-compat",[yN]:"fire-analytics",[vN]:"fire-analytics-compat",[wN]:"fire-app-check",[_N]:"fire-app-check-compat",[EN]:"fire-auth",[IN]:"fire-auth-compat",[TN]:"fire-rtdb",[SN]:"fire-data-connect",[xN]:"fire-rtdb-compat",[AN]:"fire-fn",[NN]:"fire-fn-compat",[RN]:"fire-iid",[CN]:"fire-iid-compat",[PN]:"fire-fcm",[kN]:"fire-fcm-compat",[jN]:"fire-perf",[bN]:"fire-perf-compat",[DN]:"fire-rc",[ON]:"fire-rc-compat",[VN]:"fire-gcs",[LN]:"fire-gcs-compat",[MN]:"fire-fst",[UN]:"fire-fst-compat",[FN]:"fire-vertex","fire-js":"fire-js",[BN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Map,WN=new Map,gh=new Map;function iv(t,e){try{t.container.addComponent(e)}catch(n){Mn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ls(t){const e=t.name;if(gh.has(e))return Mn.debug(`There were multiple attempts to register component ${e}.`),!1;gh.set(e,t);for(const n of Uo.values())iv(n,t);for(const n of WN.values())iv(n,t);return!0}function Bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new ia("app","Firebase",qN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=zN;function Vf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=Gw()),!n)throw Er.create("no-options");const i=Uo.get(s);if(i){if(iu(n,i.options)&&iu(r,i.config))return i;throw Er.create("duplicate-app",{appName:s})}const o=new JA(s);for(const u of gh.values())o.addComponent(u);const l=new HN(n,r,o);return Uo.set(s,l),l}function zu(t=mh){const e=Uo.get(t);if(!e&&t===mh&&Gw())return Vf();if(!e)throw Er.create("no-app",{appName:t});return e}function Zw(){return Array.from(Uo.values())}function pn(t,e,n){var r;let s=(r=$N[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mn.warn(l.join(" "));return}ls(new xr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="firebase-heartbeat-database",GN=1,Bo="firebase-heartbeat-store";let ld=null;function eE(){return ld||(ld=dN(KN,GN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),ld}async function QN(t){try{const n=(await eE()).transaction(Bo),r=await n.objectStore(Bo).get(tE(t));return await n.done,r}catch(e){if(e instanceof wn)Mn.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mn.warn(n.message)}}}async function ov(t,e){try{const r=(await eE()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,tE(t)),await r.done}catch(n){if(n instanceof wn)Mn.warn(n.message);else{const r=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mn.warn(r.message)}}}function tE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1024,YN=30*24*60*60*1e3;class JN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=av();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=YN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Mn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=av(),{heartbeatsToSend:r,unsentEntries:s}=ZN(this._heartbeatsCache.heartbeats),i=su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Mn.warn(n),""}}}function av(){return new Date().toISOString().substring(0,10)}function ZN(t,e=XN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),lv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UA()?BA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lv(t){return su(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t){ls(new xr("platform-logger",e=>new pN(e),"PRIVATE")),ls(new xr("heartbeat",e=>new JN(e),"PRIVATE")),pn(ph,sv,t),pn(ph,sv,"esm2017"),pn("fire-js","")}tR("");function Lf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nR=nE,rE=new ia("auth","Firebase",nE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=new Df("@firebase/auth");function rR(t,...e){ou.logLevel<=ne.WARN&&ou.warn(`Auth (${ys}): ${t}`,...e)}function Tl(t,...e){ou.logLevel<=ne.ERROR&&ou.error(`Auth (${ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t,...e){throw Ff(t,...e)}function rn(t,...e){return Ff(t,...e)}function Mf(t,e,n){const r=Object.assign(Object.assign({},nR()),{[e]:n});return new ia("auth","Firebase",r).create(e,{appName:t.name})}function bn(t){return Mf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wt(t,"argument-error"),Mf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ff(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rE.create(t,...e)}function X(t,e,...n){if(!t)throw Ff(e,...n)}function Cn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function Fn(t,e){t||Cn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iR(){return uv()==="http:"||uv()==="https:"}function uv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iR()||VA()||"connection"in navigator)?navigator.onLine:!0}function aR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=bA()||LA()}get(){return oR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new aa(3e4,6e4);function br(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,n,r,s={}){return iE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=oa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return OA()||(d.referrerPolicy="no-referrer"),sE.fetch()(oE(t,t.config.apiHost,n,l),d)})}async function iE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lR),e);try{const s=new dR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Mf(t,f,d);Wt(t,f)}}catch(s){if(s instanceof wn)throw s;Wt(t,"network-request-failed",{message:String(s)})}}async function la(t,e,n,r,s={}){const i=await Dr(t,e,n,r,s);return"mfaPendingCredential"in i&&Wt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function oE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Uf(t.config,s):`${t.config.apiScheme}://${s}`}function cR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rn(this.auth,"network-request-failed")),uR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rn(t,e,r);return s.customData._tokenResponse=n,s}function cv(t){return t!==void 0&&t.enterprise!==void 0}class hR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fR(t,e){return Dr(t,"GET","/v2/recaptchaConfig",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function aE(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mR(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=Bf(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:po(ud(s.auth_time)),issuedAtTime:po(ud(s.iat)),expirationTime:po(ud(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ud(t){return Number(t)*1e3}function Bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const s=qw(n);return s?JSON.parse(s):(Tl("Failed to decode base64 JWT payload"),null)}catch(s){return Tl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dv(t){const e=Bf(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wn&&gR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=po(this.lastLoginAt),this.creationTime=po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zo(t,aE(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?lE(i.providerUserInfo):[],l=_R(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new yh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function yR(t){const e=Ne(t);await au(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _R(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function lE(t){return t.map(e=>{var{providerId:n}=e,r=Lf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(t,e){const n=await iE(t,{},async()=>{const r=oa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=oE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ER(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=dv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await wR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Gs;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return Cn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Lf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zo(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mR(this,e)}reload(){return yR(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await au(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zt(this.auth.app))return Promise.reject(bn(this.auth));const e=await this.getIdToken();return await zo(this,pR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(d=n.createdAt)!==null&&d!==void 0?d:void 0,I=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:k,isAnonymous:D,providerData:M,stsTokenManager:R}=n;X(T&&R,e,"internal-error");const w=Gs.fromJSON(this.name,R);X(typeof T=="string",e,"internal-error"),Yn(p,e.name),Yn(g,e.name),X(typeof k=="boolean",e,"internal-error"),X(typeof D=="boolean",e,"internal-error"),Yn(y,e.name),Yn(x,e.name),Yn(N,e.name),Yn(P,e.name),Yn(v,e.name),Yn(I,e.name);const S=new Pn({uid:T,auth:e,email:g,emailVerified:k,displayName:p,isAnonymous:D,photoURL:x,phoneNumber:y,tenantId:N,stsTokenManager:w,createdAt:v,lastLoginAt:I});return M&&Array.isArray(M)&&(S.providerData=M.map(_=>Object.assign({},_))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gs;s.updateFromServerResponse(n);const i=new Pn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await au(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?lE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Gs;l.updateFromIdToken(r);const u=new Pn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;function kn(t){Fn(t instanceof Function,"Expected a class definition");let e=hv.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uE.type="NONE";const fv=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e,n){return`firebase:${t}:${e}:${n}`}class Qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qs(kn(fv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||kn(fv);const o=Sl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Pn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Qs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Qs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(gE(e))return"Webos";if(dE(e))return"Safari";if((e.includes("chrome/")||hE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cE(t=ft()){return/firefox\//i.test(t)}function dE(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hE(t=ft()){return/crios\//i.test(t)}function fE(t=ft()){return/iemobile/i.test(t)}function pE(t=ft()){return/android/i.test(t)}function mE(t=ft()){return/blackberry/i.test(t)}function gE(t=ft()){return/webos/i.test(t)}function zf(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IR(t=ft()){var e;return zf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TR(){return MA()&&document.documentMode===10}function vE(t=ft()){return zf(t)||pE(t)||gE(t)||mE(t)||/windows phone/i.test(t)||fE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e=[]){let n;switch(t){case"Browser":n=pv(ft());break;case"Worker":n=`${pv(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=6;class NR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:AR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mv(this),this.idTokenSubscription=new mv(this),this.beforeStateQueue=new SR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await aE(this,{idToken:e}),r=await Pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await au(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zt(this.app))return Promise.reject(bn(this));const n=e?Ne(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zt(this.app)?Promise.reject(bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zt(this.app)?Promise.reject(bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xR(this),n=new NR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ER(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Or(t){return Ne(t)}class mv{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CR(t){$u=t}function _E(t){return $u.loadJS(t)}function PR(){return $u.recaptchaEnterpriseScript}function kR(){return $u.gapiScript}function jR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const bR="recaptcha-enterprise",DR="NO_RECAPTCHA";class OR{constructor(e){this.type=bR,this.auth=Or(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{fR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new hR(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;cv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(DR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&cv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PR();u.length!==0&&(u+=l),_E(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function gv(t,e,n,r=!1){const s=new OR(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _h(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await gv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){const n=Bu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(iu(i,e??{}))return s;Wt(s,"already-initialized")}return n.initialize({options:e})}function LR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MR(t,e,n){const r=Or(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=wE(e),{host:o,port:l}=FR(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),UR()}function wE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FR(t){const e=wE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:vv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:vv(o)}}}function vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,n){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}}async function BR(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e){return la(t,"POST","/v1/accounts:signInWithPassword",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(t,e){return la(t,"POST","/v1/accounts:signInWithEmailLink",br(t,e))}async function WR(t,e){return la(t,"POST","/v1/accounts:signInWithEmailLink",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends $f{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $o(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $o(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _h(e,n,"signInWithPassword",zR);case"emailLink":return $R(e,{email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _h(e,r,"signUpPassword",BR);case"emailLink":return WR(e,{idToken:n,email:this._email,oobCode:this._password});default:Wt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return la(t,"POST","/v1/accounts:signInWithIdp",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="http://localhost";class us extends $f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Lf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new us(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:qR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KR(t){const e=Zi(eo(t)).link,n=e?Zi(eo(e)).deep_link_id:null,r=Zi(eo(t)).deep_link_id;return(r?Zi(eo(r)).link:null)||r||n||e||t}class Wf{constructor(e){var n,r,s,i,o,l;const u=Zi(eo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=HR((s=u.mode)!==null&&s!==void 0?s:null);X(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=KR(e);try{return new Wf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.providerId=Ei.PROVIDER_ID}static credential(e,n){return $o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Wf.parseLink(n);return X(r,"argument-error"),$o._fromEmailAndCode(e,r.code,r.tenantId)}}Ei.PROVIDER_ID="password";Ei.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ei.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends qf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ua{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return An.credential(n,r)}catch{return null}}}An.GOOGLE_SIGN_IN_METHOD="google.com";An.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends ua{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ua{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){return la(t,"POST","/v1/accounts:signUp",br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Pn._fromIdTokenResponse(e,r,s),o=yv(r);return new cs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yv(r);return new cs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends wn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lu(e,n,r,s)}}function EE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lu._fromErrorAndOperation(t,i,e,r):i})}async function QR(t,e,n=!1){const r=await zo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e,n=!1){const{auth:r}=t;if(Zt(r.app))return Promise.reject(bn(r));const s="reauthenticate";try{const i=await zo(t,EE(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=Bf(i.idToken);X(o,r,"internal-error");const{sub:l}=o;return X(t.uid===l,r,"user-mismatch"),cs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(t,e,n=!1){if(Zt(t.app))return Promise.reject(bn(t));const r="signIn",s=await EE(t,r,e),i=await cs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function YR(t,e){return IE(Or(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(t){const e=Or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JR(t,e,n){if(Zt(t.app))return Promise.reject(bn(t));const r=Or(t),o=await _h(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GR).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&TE(t),u}),l=await cs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function ZR(t,e,n){return Zt(t.app)?Promise.reject(bn(t)):YR(Ne(t),Ei.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TE(t),r})}function eC(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function tC(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function nC(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function ts(t){return Ne(t).signOut()}async function rC(t){return Ne(t).delete()}const uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uu,"1"),this.storage.removeItem(uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=1e3,iC=10;class xE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,iC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xE.type="LOCAL";const oC=xE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}AE.type="SESSION";const NE=AE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await aC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Hf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return window}function uC(t){mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return typeof mn().WorkerGlobalScope<"u"&&typeof mn().importScripts=="function"}async function cC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hC(){return RE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebaseLocalStorageDb",fC=1,cu="firebaseLocalStorage",PE="fbase_key";class ca{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qu(t,e){return t.transaction([cu],e?"readwrite":"readonly").objectStore(cu)}function pC(){const t=indexedDB.deleteDatabase(CE);return new ca(t).toPromise()}function wh(){const t=indexedDB.open(CE,fC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cu,{keyPath:PE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cu)?e(r):(r.close(),await pC(),e(await wh()))})})}async function _v(t,e,n){const r=qu(t,!0).put({[PE]:e,value:n});return new ca(r).toPromise()}async function mC(t,e){const n=qu(t,!1).get(e),r=await new ca(n).toPromise();return r===void 0?null:r.value}function wv(t,e){const n=qu(t,!0).delete(e);return new ca(n).toPromise()}const gC=800,vC=3;class kE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wu._getInstance(hC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cC(),!this.activeServiceWorker)return;this.sender=new lC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wh();return await _v(e,uu,"1"),await wv(e,uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_v(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qu(s,!1).getAll();return new ca(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kE.type="LOCAL";const yC=kE;new aa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t,e){return e?kn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _C(t){return IE(t.auth,new Kf(t),t.bypassAuthState)}function wC(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),XR(n,new Kf(t),t.bypassAuthState)}async function EC(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),QR(n,new Kf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _C;case"linkViaPopup":case"linkViaRedirect":return EC;case"reauthViaPopup":case"reauthViaRedirect":return wC;default:Wt(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new aa(2e3,1e4);async function TC(t,e,n){if(Zt(t.app))return Promise.reject(rn(t,"operation-not-supported-in-this-environment"));const r=Or(t);sR(t,e,qf);const s=jE(r,n);return new Yr(r,"signInViaPopup",e,s).executeNotNull()}class Yr extends bE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Yr.currentPopupAction&&Yr.currentPopupAction.cancel(),Yr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IC.get())};e()}}Yr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",xl=new Map;class xC extends bE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xl.get(this.auth._key());if(!e){try{const r=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xl.set(this.auth._key(),e)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(t,e){const n=CC(e),r=RC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function NC(t,e){xl.set(t._key(),e)}function RC(t){return kn(t._redirectPersistence)}function CC(t){return Sl(SC,t.config.apiKey,t.name)}async function PC(t,e,n=!1){if(Zt(t.app))return Promise.reject(bn(t));const r=Or(t),s=jE(r,e),o=await new xC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(e))}saveEventToCache(e){this.cachedEventUids.add(Ev(e)),this.lastProcessedEventTime=Date.now()}}function Ev(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VC=/^https?/;async function LC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await DC(t);for(const n of e)try{if(MC(n))return}catch{}Wt(t,"unauthorized-domain")}function MC(t){const e=vh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VC.test(n))return!1;if(OC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new aa(3e4,6e4);function Iv(){const t=mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function UC(t){return new Promise((e,n)=>{var r,s,i;function o(){Iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iv(),n(rn(t,"network-request-failed"))},timeout:FC.get()})}if(!((s=(r=mn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=mn().gapi)===null||i===void 0)&&i.load)o();else{const l=jR("iframefcb");return mn()[l]=()=>{gapi.load?o():n(rn(t,"network-request-failed"))},_E(`${kR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Al=null,e})}let Al=null;function BC(t){return Al=Al||UC(t),Al}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new aa(5e3,15e3),$C="__/auth/iframe",WC="emulator/auth/iframe",qC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KC(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Uf(e,WC):`https://${t.config.authDomain}/${$C}`,r={apiKey:e.apiKey,appName:t.name,v:ys},s=HC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${oa(r).slice(1)}`}async function GC(t){const e=await BC(t),n=mn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:KC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rn(t,"network-request-failed"),l=mn().setTimeout(()=>{i(o)},zC.get());function u(){mn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XC=500,YC=600,JC="_blank",ZC="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eP(t,e,n,r=XC,s=YC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},QC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ft().toLowerCase();n&&(l=hE(d)?JC:n),cE(d)&&(e=e||ZC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[y,x])=>`${g}${y}=${x},`,"");if(IR(d)&&l!=="_self")return tP(e||"",l),new Tv(null);const p=window.open(e||"",l,f);X(p,t,"popup-blocked");try{p.focus()}catch{}return new Tv(p)}function tP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="__/auth/handler",rP="emulator/auth/handler",sP=encodeURIComponent("fac");async function Sv(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ys,eventId:s};if(e instanceof qf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof ua){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${sP}=${encodeURIComponent(u)}`:"";return`${iP(t)}?${oa(l).slice(1)}${d}`}function iP({config:t}){return t.emulator?Uf(t,rP):`https://${t.authDomain}/${nP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="webStorageSupport";class oP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NE,this._completeRedirectFn=PC,this._overrideRedirectResult=NC}async _openPopup(e,n,r,s){var i;Fn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Sv(e,n,r,vh(),s);return eP(e,o,Hf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Sv(e,n,r,vh(),s);return uC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await GC(e),r=new jC(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cd,{type:cd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[cd];o!==void 0&&n(!!o),Wt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vE()||dE()||zf()}}const aP=oP;var xv="@firebase/auth",Av="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cP(t){ls(new xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yE(t)},d=new RR(r,s,i,u);return LR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ls(new xr("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(r=>new lP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(xv,Av,uP(t)),pn(xv,Av,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=5*60,hP=Qw("authIdTokenMaxAge")||dP;let Nv=null;const fP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hP)return;const s=n==null?void 0:n.token;Nv!==s&&(Nv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function OE(t=zu()){const e=Bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VR(t,{popupRedirectResolver:aP,persistence:[yC,oC,NE]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=fP(i.toString());tC(n,o,()=>o(n.currentUser)),eC(n,l=>o(l))}}const s=Hw("auth");return s&&MR(n,`http://${s}`),n}function pP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",pP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cP("Browser");var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,VE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function S(){}S.prototype=w.prototype,R.D=w.prototype,R.prototype=new S,R.prototype.constructor=R,R.C=function(_,A,b){for(var C=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)C[ie-2]=arguments[ie];return w.prototype[A].apply(_,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,w,S){S||(S=0);var _=Array(16);if(typeof w=="string")for(var A=0;16>A;++A)_[A]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(A=0;16>A;++A)_[A]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=R.g[0],S=R.g[1],A=R.g[2];var b=R.g[3],C=w+(b^S&(A^b))+_[0]+3614090360&4294967295;w=S+(C<<7&4294967295|C>>>25),C=b+(A^w&(S^A))+_[1]+3905402710&4294967295,b=w+(C<<12&4294967295|C>>>20),C=A+(S^b&(w^S))+_[2]+606105819&4294967295,A=b+(C<<17&4294967295|C>>>15),C=S+(w^A&(b^w))+_[3]+3250441966&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(b^S&(A^b))+_[4]+4118548399&4294967295,w=S+(C<<7&4294967295|C>>>25),C=b+(A^w&(S^A))+_[5]+1200080426&4294967295,b=w+(C<<12&4294967295|C>>>20),C=A+(S^b&(w^S))+_[6]+2821735955&4294967295,A=b+(C<<17&4294967295|C>>>15),C=S+(w^A&(b^w))+_[7]+4249261313&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(b^S&(A^b))+_[8]+1770035416&4294967295,w=S+(C<<7&4294967295|C>>>25),C=b+(A^w&(S^A))+_[9]+2336552879&4294967295,b=w+(C<<12&4294967295|C>>>20),C=A+(S^b&(w^S))+_[10]+4294925233&4294967295,A=b+(C<<17&4294967295|C>>>15),C=S+(w^A&(b^w))+_[11]+2304563134&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(b^S&(A^b))+_[12]+1804603682&4294967295,w=S+(C<<7&4294967295|C>>>25),C=b+(A^w&(S^A))+_[13]+4254626195&4294967295,b=w+(C<<12&4294967295|C>>>20),C=A+(S^b&(w^S))+_[14]+2792965006&4294967295,A=b+(C<<17&4294967295|C>>>15),C=S+(w^A&(b^w))+_[15]+1236535329&4294967295,S=A+(C<<22&4294967295|C>>>10),C=w+(A^b&(S^A))+_[1]+4129170786&4294967295,w=S+(C<<5&4294967295|C>>>27),C=b+(S^A&(w^S))+_[6]+3225465664&4294967295,b=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(b^w))+_[11]+643717713&4294967295,A=b+(C<<14&4294967295|C>>>18),C=S+(b^w&(A^b))+_[0]+3921069994&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^b&(S^A))+_[5]+3593408605&4294967295,w=S+(C<<5&4294967295|C>>>27),C=b+(S^A&(w^S))+_[10]+38016083&4294967295,b=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(b^w))+_[15]+3634488961&4294967295,A=b+(C<<14&4294967295|C>>>18),C=S+(b^w&(A^b))+_[4]+3889429448&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^b&(S^A))+_[9]+568446438&4294967295,w=S+(C<<5&4294967295|C>>>27),C=b+(S^A&(w^S))+_[14]+3275163606&4294967295,b=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(b^w))+_[3]+4107603335&4294967295,A=b+(C<<14&4294967295|C>>>18),C=S+(b^w&(A^b))+_[8]+1163531501&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(A^b&(S^A))+_[13]+2850285829&4294967295,w=S+(C<<5&4294967295|C>>>27),C=b+(S^A&(w^S))+_[2]+4243563512&4294967295,b=w+(C<<9&4294967295|C>>>23),C=A+(w^S&(b^w))+_[7]+1735328473&4294967295,A=b+(C<<14&4294967295|C>>>18),C=S+(b^w&(A^b))+_[12]+2368359562&4294967295,S=A+(C<<20&4294967295|C>>>12),C=w+(S^A^b)+_[5]+4294588738&4294967295,w=S+(C<<4&4294967295|C>>>28),C=b+(w^S^A)+_[8]+2272392833&4294967295,b=w+(C<<11&4294967295|C>>>21),C=A+(b^w^S)+_[11]+1839030562&4294967295,A=b+(C<<16&4294967295|C>>>16),C=S+(A^b^w)+_[14]+4259657740&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^b)+_[1]+2763975236&4294967295,w=S+(C<<4&4294967295|C>>>28),C=b+(w^S^A)+_[4]+1272893353&4294967295,b=w+(C<<11&4294967295|C>>>21),C=A+(b^w^S)+_[7]+4139469664&4294967295,A=b+(C<<16&4294967295|C>>>16),C=S+(A^b^w)+_[10]+3200236656&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^b)+_[13]+681279174&4294967295,w=S+(C<<4&4294967295|C>>>28),C=b+(w^S^A)+_[0]+3936430074&4294967295,b=w+(C<<11&4294967295|C>>>21),C=A+(b^w^S)+_[3]+3572445317&4294967295,A=b+(C<<16&4294967295|C>>>16),C=S+(A^b^w)+_[6]+76029189&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(S^A^b)+_[9]+3654602809&4294967295,w=S+(C<<4&4294967295|C>>>28),C=b+(w^S^A)+_[12]+3873151461&4294967295,b=w+(C<<11&4294967295|C>>>21),C=A+(b^w^S)+_[15]+530742520&4294967295,A=b+(C<<16&4294967295|C>>>16),C=S+(A^b^w)+_[2]+3299628645&4294967295,S=A+(C<<23&4294967295|C>>>9),C=w+(A^(S|~b))+_[0]+4096336452&4294967295,w=S+(C<<6&4294967295|C>>>26),C=b+(S^(w|~A))+_[7]+1126891415&4294967295,b=w+(C<<10&4294967295|C>>>22),C=A+(w^(b|~S))+_[14]+2878612391&4294967295,A=b+(C<<15&4294967295|C>>>17),C=S+(b^(A|~w))+_[5]+4237533241&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~b))+_[12]+1700485571&4294967295,w=S+(C<<6&4294967295|C>>>26),C=b+(S^(w|~A))+_[3]+2399980690&4294967295,b=w+(C<<10&4294967295|C>>>22),C=A+(w^(b|~S))+_[10]+4293915773&4294967295,A=b+(C<<15&4294967295|C>>>17),C=S+(b^(A|~w))+_[1]+2240044497&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~b))+_[8]+1873313359&4294967295,w=S+(C<<6&4294967295|C>>>26),C=b+(S^(w|~A))+_[15]+4264355552&4294967295,b=w+(C<<10&4294967295|C>>>22),C=A+(w^(b|~S))+_[6]+2734768916&4294967295,A=b+(C<<15&4294967295|C>>>17),C=S+(b^(A|~w))+_[13]+1309151649&4294967295,S=A+(C<<21&4294967295|C>>>11),C=w+(A^(S|~b))+_[4]+4149444226&4294967295,w=S+(C<<6&4294967295|C>>>26),C=b+(S^(w|~A))+_[11]+3174756917&4294967295,b=w+(C<<10&4294967295|C>>>22),C=A+(w^(b|~S))+_[2]+718787259&4294967295,A=b+(C<<15&4294967295|C>>>17),C=S+(b^(A|~w))+_[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+b&4294967295}r.prototype.u=function(R,w){w===void 0&&(w=R.length);for(var S=w-this.blockSize,_=this.B,A=this.h,b=0;b<w;){if(A==0)for(;b<=S;)s(this,R,b),b+=this.blockSize;if(typeof R=="string"){for(;b<w;)if(_[A++]=R.charCodeAt(b++),A==this.blockSize){s(this,_),A=0;break}}else for(;b<w;)if(_[A++]=R[b++],A==this.blockSize){s(this,_),A=0;break}}this.h=A,this.o+=w},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;var S=8*this.o;for(w=R.length-8;w<R.length;++w)R[w]=S&255,S/=256;for(this.u(R),R=Array(16),w=S=0;4>w;++w)for(var _=0;32>_;_+=8)R[S++]=this.g[w]>>>_&255;return R};function i(R,w){var S=l;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=w(R)}function o(R,w){this.h=w;for(var S=[],_=!0,A=R.length-1;0<=A;A--){var b=R[A]|0;_&&b==w||(S[A]=b,_=!1)}this.g=S}var l={};function u(R){return-128<=R&&128>R?i(R,function(w){return new o([w|0],0>w?-1:0)}):new o([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return P(d(-R));for(var w=[],S=1,_=0;R>=S;_++)w[_]=R/S|0,S*=4294967296;return new o(w,0)}function f(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return P(f(R.substring(1),w));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(w,8)),_=p,A=0;A<R.length;A+=8){var b=Math.min(8,R.length-A),C=parseInt(R.substring(A,A+b),w);8>b?(b=d(Math.pow(w,b)),_=_.j(b).add(d(C))):(_=_.j(S),_=_.add(d(C)))}return _}var p=u(0),g=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();for(var R=0,w=1,S=0;S<this.g.length;S++){var _=this.i(S);R+=(0<=_?_:4294967296+_)*w,w*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x(this))return"0";if(N(this))return"-"+P(this).toString(R);for(var w=d(Math.pow(R,6)),S=this,_="";;){var A=k(S,w).g;S=v(S,A.j(w));var b=((0<S.g.length?S.g[0]:S.h)>>>0).toString(R);if(S=A,x(S))return b+_;for(;6>b.length;)b="0"+b;_=b+_}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function x(R){if(R.h!=0)return!1;for(var w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function N(R){return R.h==-1}t.l=function(R){return R=v(this,R),N(R)?-1:x(R)?0:1};function P(R){for(var w=R.g.length,S=[],_=0;_<w;_++)S[_]=~R.g[_];return new o(S,~R.h).add(g)}t.abs=function(){return N(this)?P(this):this},t.add=function(R){for(var w=Math.max(this.g.length,R.g.length),S=[],_=0,A=0;A<=w;A++){var b=_+(this.i(A)&65535)+(R.i(A)&65535),C=(b>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);_=C>>>16,b&=65535,C&=65535,S[A]=C<<16|b}return new o(S,S[S.length-1]&-2147483648?-1:0)};function v(R,w){return R.add(P(w))}t.j=function(R){if(x(this)||x(R))return p;if(N(this))return N(R)?P(this).j(P(R)):P(P(this).j(R));if(N(R))return P(this.j(P(R)));if(0>this.l(y)&&0>R.l(y))return d(this.m()*R.m());for(var w=this.g.length+R.g.length,S=[],_=0;_<2*w;_++)S[_]=0;for(_=0;_<this.g.length;_++)for(var A=0;A<R.g.length;A++){var b=this.i(_)>>>16,C=this.i(_)&65535,ie=R.i(A)>>>16,fe=R.i(A)&65535;S[2*_+2*A]+=C*fe,I(S,2*_+2*A),S[2*_+2*A+1]+=b*fe,I(S,2*_+2*A+1),S[2*_+2*A+1]+=C*ie,I(S,2*_+2*A+1),S[2*_+2*A+2]+=b*ie,I(S,2*_+2*A+2)}for(_=0;_<w;_++)S[_]=S[2*_+1]<<16|S[2*_];for(_=w;_<2*w;_++)S[_]=0;return new o(S,0)};function I(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function T(R,w){this.g=R,this.h=w}function k(R,w){if(x(w))throw Error("division by zero");if(x(R))return new T(p,p);if(N(R))return w=k(P(R),w),new T(P(w.g),P(w.h));if(N(w))return w=k(R,P(w)),new T(P(w.g),w.h);if(30<R.g.length){if(N(R)||N(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,_=w;0>=_.l(R);)S=D(S),_=D(_);var A=M(S,1),b=M(_,1);for(_=M(_,2),S=M(S,2);!x(_);){var C=b.add(_);0>=C.l(R)&&(A=A.add(S),b=C),_=M(_,1),S=M(S,1)}return w=v(R,A.j(w)),new T(A,w)}for(A=p;0<=R.l(w);){for(S=Math.max(1,Math.floor(R.m()/w.m())),_=Math.ceil(Math.log(S)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),b=d(S),C=b.j(w);N(C)||0<C.l(R);)S-=_,b=d(S),C=b.j(w);x(b)&&(b=g),A=A.add(b),R=v(R,C)}return new T(A,R)}t.A=function(R){return k(this,R).h},t.and=function(R){for(var w=Math.max(this.g.length,R.g.length),S=[],_=0;_<w;_++)S[_]=this.i(_)&R.i(_);return new o(S,this.h&R.h)},t.or=function(R){for(var w=Math.max(this.g.length,R.g.length),S=[],_=0;_<w;_++)S[_]=this.i(_)|R.i(_);return new o(S,this.h|R.h)},t.xor=function(R){for(var w=Math.max(this.g.length,R.g.length),S=[],_=0;_<w;_++)S[_]=this.i(_)^R.i(_);return new o(S,this.h^R.h)};function D(R){for(var w=R.g.length+1,S=[],_=0;_<w;_++)S[_]=R.i(_)<<1|R.i(_-1)>>>31;return new o(S,R.h)}function M(R,w){var S=w>>5;w%=32;for(var _=R.g.length-S,A=[],b=0;b<_;b++)A[b]=0<w?R.i(b+S)>>>w|R.i(b+S+1)<<32-w:R.i(b+S);return new o(A,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ns=o}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LE,to,ME,Nl,Eh,FE,UE,BE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var E=0;E<a.length-1;E++){var O=a[E];if(!(O in m))break e;m=m[O]}a=a[a.length-1],E=m[a],h=h(E),h!=E&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,E=!1,O={next:function(){if(!E&&m<a.length){var V=m++;return{value:h(V,a[V]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),a.apply(h,O)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function y(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function x(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(E,O,V){for(var B=Array(arguments.length-2),he=2;he<arguments.length;he++)B[he-2]=arguments[he];return h.prototype[O].apply(E,B)}}function N(a){const h=a.length;if(0<h){const m=Array(h);for(let E=0;E<h;E++)m[E]=a[E];return m}return[]}function P(a,h){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const O=a.length||0,V=E.length||0;a.length=O+V;for(let B=0;B<V;B++)a[O+B]=E[B]}else a.push(E)}}class v{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function I(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(a,h,m){for(const E in a)h.call(m,a[E],E,a)}function R(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function w(a){const h={};for(const m in a)h[m]=a[m];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(a,h){let m,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(m in E)a[m]=E[m];for(let V=0;V<S.length;V++)m=S[V],Object.prototype.hasOwnProperty.call(E,m)&&(a[m]=E[m])}}function A(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function b(a){l.setTimeout(()=>{throw a},0)}function C(){var a=G;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class ie{constructor(){this.h=this.g=null}add(h,m){const E=fe.get();E.set(h,m),this.h?this.h.next=E:this.g=E,this.h=E}}var fe=new v(()=>new Fr,a=>a.reset());class Fr{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ln,$=!1,G=new ie,J=()=>{const a=l.Promise.resolve(void 0);ln=()=>{a.then(pe)}};var pe=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(m){b(m)}var h=fe;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Ht=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Vt(a,h){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(D){e:{try{k(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:At[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Vt.aa.h.call(this)}}x(Vt,Ie);var At={2:"touch",3:"pen",4:"mouse"};Vt.prototype.h=function(){Vt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),et=0;function Ia(a,h,m,E,O){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!E,this.ha=O,this.key=++et,this.da=this.fa=!1}function Ta(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Sa(a){this.src=a,this.g={},this.h=0}Sa.prototype.add=function(a,h,m,E,O){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var B=uc(a,h,E,O);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new Ia(h,this.src,V,!!E,O),h.fa=m,a.push(h)),h};function lc(a,h){var m=h.type;if(m in a.g){var E=a.g[m],O=Array.prototype.indexOf.call(E,h,void 0),V;(V=0<=O)&&Array.prototype.splice.call(E,O,1),V&&(Ta(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function uc(a,h,m,E){for(var O=0;O<a.length;++O){var V=a[O];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==E)return O}return-1}var cc="closure_lm_"+(1e6*Math.random()|0),dc={};function Mp(a,h,m,E,O){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Mp(a,h[V],m,E,O);return null}return m=Bp(m),a&&a[me]?a.K(h,m,d(E)?!!E.capture:!1,O):_T(a,h,m,!1,E,O)}function _T(a,h,m,E,O,V){if(!h)throw Error("Invalid event type");var B=d(O)?!!O.capture:!!O,he=fc(a);if(he||(a[cc]=he=new Sa(a)),m=he.add(h,m,E,B,V),m.proxy)return m;if(E=wT(),m.proxy=E,E.src=a,E.listener=m,a.addEventListener)Ht||(O=B),O===void 0&&(O=!1),a.addEventListener(h.toString(),E,O);else if(a.attachEvent)a.attachEvent(Up(h.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function wT(){function a(m){return h.call(a.src,a.listener,m)}const h=ET;return a}function Fp(a,h,m,E,O){if(Array.isArray(h))for(var V=0;V<h.length;V++)Fp(a,h[V],m,E,O);else E=d(E)?!!E.capture:!!E,m=Bp(m),a&&a[me]?(a=a.i,h=String(h).toString(),h in a.g&&(V=a.g[h],m=uc(V,m,E,O),-1<m&&(Ta(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete a.g[h],a.h--)))):a&&(a=fc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=uc(h,m,E,O)),(m=-1<a?h[a]:null)&&hc(m))}function hc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[me])lc(h.i,a);else{var m=a.type,E=a.proxy;h.removeEventListener?h.removeEventListener(m,E,a.capture):h.detachEvent?h.detachEvent(Up(m),E):h.addListener&&h.removeListener&&h.removeListener(E),(m=fc(h))?(lc(m,a),m.h==0&&(m.src=null,h[cc]=null)):Ta(a)}}}function Up(a){return a in dc?dc[a]:dc[a]="on"+a}function ET(a,h){if(a.da)a=!0;else{h=new Vt(h,this);var m=a.listener,E=a.ha||a.src;a.fa&&hc(a),a=m.call(E,h)}return a}function fc(a){return a=a[cc],a instanceof Sa?a:null}var pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bp(a){return typeof a=="function"?a:(a[pc]||(a[pc]=function(h){return a.handleEvent(h)}),a[pc])}function tt(){ue.call(this),this.i=new Sa(this),this.M=this,this.F=null}x(tt,ue),tt.prototype[me]=!0,tt.prototype.removeEventListener=function(a,h,m,E){Fp(this,a,h,m,E)};function pt(a,h){var m,E=a.F;if(E)for(m=[];E;E=E.F)m.push(E);if(a=a.M,E=h.type||h,typeof h=="string")h=new Ie(h,a);else if(h instanceof Ie)h.target=h.target||a;else{var O=h;h=new Ie(E,a),_(h,O)}if(O=!0,m)for(var V=m.length-1;0<=V;V--){var B=h.g=m[V];O=xa(B,E,!0,h)&&O}if(B=h.g=a,O=xa(B,E,!0,h)&&O,O=xa(B,E,!1,h)&&O,m)for(V=0;V<m.length;V++)B=h.g=m[V],O=xa(B,E,!1,h)&&O}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],E=0;E<m.length;E++)Ta(m[E]);delete a.g[h],a.h--}}this.F=null},tt.prototype.K=function(a,h,m,E){return this.i.add(String(a),h,!1,m,E)},tt.prototype.L=function(a,h,m,E){return this.i.add(String(a),h,!0,m,E)};function xa(a,h,m,E){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,V=0;V<h.length;++V){var B=h[V];if(B&&!B.da&&B.capture==m){var he=B.listener,qe=B.ha||B.src;B.fa&&lc(a.i,B),O=he.call(qe,E)!==!1&&O}}return O&&!E.defaultPrevented}function zp(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function $p(a){a.g=zp(()=>{a.g=null,a.i&&(a.i=!1,$p(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class IT extends ue{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:$p(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ai(a){ue.call(this),this.h=a,this.g={}}x(Ai,ue);var Wp=[];function qp(a){M(a.g,function(h,m){this.g.hasOwnProperty(m)&&hc(h)},a),a.g={}}Ai.prototype.N=function(){Ai.aa.N.call(this),qp(this)},Ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mc=l.JSON.stringify,TT=l.JSON.parse,ST=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function gc(){}gc.prototype.h=null;function Hp(a){return a.h||(a.h=a.i())}function Kp(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vc(){Ie.call(this,"d")}x(vc,Ie);function yc(){Ie.call(this,"c")}x(yc,Ie);var Ur={},Gp=null;function Aa(){return Gp=Gp||new tt}Ur.La="serverreachability";function Qp(a){Ie.call(this,Ur.La,a)}x(Qp,Ie);function Ri(a){const h=Aa();pt(h,new Qp(h))}Ur.STAT_EVENT="statevent";function Xp(a,h){Ie.call(this,Ur.STAT_EVENT,a),this.stat=h}x(Xp,Ie);function mt(a){const h=Aa();pt(h,new Xp(h,a))}Ur.Ma="timingevent";function Yp(a,h){Ie.call(this,Ur.Ma,a),this.size=h}x(Yp,Ie);function Ci(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Pi(){this.g=!0}Pi.prototype.xa=function(){this.g=!1};function xT(a,h,m,E,O,V){a.info(function(){if(a.g)if(V)for(var B="",he=V.split("&"),qe=0;qe<he.length;qe++){var ae=he[qe].split("=");if(1<ae.length){var nt=ae[0];ae=ae[1];var rt=nt.split("_");B=2<=rt.length&&rt[1]=="type"?B+(nt+"="+ae+"&"):B+(nt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+h+`
`+m+`
`+B})}function AT(a,h,m,E,O,V,B){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+h+`
`+m+`
`+V+" "+B})}function Is(a,h,m,E){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+RT(a,m)+(E?" "+E:"")})}function NT(a,h){a.info(function(){return"TIMEOUT: "+h})}Pi.prototype.info=function(){};function RT(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var E=m[a];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<O.length;B++)O[B]=""}}}}return mc(m)}catch{return h}}var Na={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_c;function Ra(){}x(Ra,gc),Ra.prototype.g=function(){return new XMLHttpRequest},Ra.prototype.i=function(){return{}},_c=new Ra;function Hn(a,h,m,E){this.j=a,this.i=h,this.l=m,this.R=E||1,this.U=new Ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zp}function Zp(){this.i=null,this.g="",this.h=!1}var em={},wc={};function Ec(a,h,m){a.L=1,a.v=ja(In(h)),a.m=m,a.P=!0,tm(a,null)}function tm(a,h){a.F=Date.now(),Ca(a),a.A=In(a.v);var m=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),mm(m.i,"t",E),a.C=0,m=a.j.J,a.h=new Zp,a.g=bm(a.j,m?h:null,!a.m),0<a.O&&(a.M=new IT(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,E=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(Wp[0]=O.toString()),O=Wp);for(var V=0;V<O.length;V++){var B=Mp(m,O[V],E||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Ri(),xT(a.i,a.u,a.A,a.l,a.R,a.m)}Hn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Tn(a)==3?h.j():this.Y(a)},Hn.prototype.Y=function(a){try{if(a==this.g)e:{const rt=Tn(this.g);var h=this.g.Ba();const xs=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||Im(this.g)))){this.J||rt!=4||h==7||(h==8||0>=xs?Ri(3):Ri(2)),Ic(this);var m=this.g.Z();this.X=m;t:if(nm(this)){var E=Im(this.g);a="";var O=E.length,V=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),ki(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,a+=this.h.i.decode(E[h],{stream:!(V&&h==O-1)});E.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,AT(this.i,this.u,this.A,this.l,this.R,rt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var he,qe=this.g;if((he=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(he)){var ae=he;break t}}ae=null}if(m=ae)Is(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tc(this,m);else{this.o=!1,this.s=3,mt(12),Br(this),ki(this);break e}}if(this.P){m=!0;let Kt;for(;!this.J&&this.C<B.length;)if(Kt=CT(this,B),Kt==wc){rt==4&&(this.s=4,mt(14),m=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==em){this.s=4,mt(15),Is(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Is(this.i,this.l,Kt,null),Tc(this,Kt);if(nm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||B.length!=0||this.h.h||(this.s=1,mt(16),m=!1),this.o=this.o&&m,!m)Is(this.i,this.l,B,"[Invalid Chunked Response]"),Br(this),ki(this);else if(0<B.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Cc(nt),nt.M=!0,mt(11))}}else Is(this.i,this.l,B,null),Tc(this,B);rt==4&&Br(this),this.o&&!this.J&&(rt==4?Cm(this.j,this):(this.o=!1,Ca(this)))}else HT(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Br(this),ki(this)}}}catch{}finally{}};function nm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function CT(a,h){var m=a.C,E=h.indexOf(`
`,m);return E==-1?wc:(m=Number(h.substring(m,E)),isNaN(m)?em:(E+=1,E+m>h.length?wc:(h=h.slice(E,E+m),a.C=E+m,h)))}Hn.prototype.cancel=function(){this.J=!0,Br(this)};function Ca(a){a.S=Date.now()+a.I,rm(a,a.I)}function rm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ci(g(a.ba,a),h)}function Ic(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Hn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(NT(this.i,this.A),this.L!=2&&(Ri(),mt(17)),Br(this),this.s=2,ki(this)):rm(this,this.S-a)};function ki(a){a.j.G==0||a.J||Cm(a.j,a)}function Br(a){Ic(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,qp(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Tc(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||Sc(m.h,a))){if(!a.K&&Sc(m.h,a)&&m.G==3){try{var E=m.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Ma(m),Va(m);else break e;Rc(m),mt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ci(g(m.Za,m),6e3));if(1>=om(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else $r(m,11)}else if((a.K||m.g==a)&&Ma(m),!I(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let ae=O[h];if(m.T=ae[0],ae=ae[1],m.G==2)if(ae[0]=="c"){m.K=ae[1],m.ia=ae[2];const nt=ae[3];nt!=null&&(m.la=nt,m.j.info("VER="+m.la));const rt=ae[4];rt!=null&&(m.Aa=rt,m.j.info("SVER="+m.Aa));const xs=ae[5];xs!=null&&typeof xs=="number"&&0<xs&&(E=1.5*xs,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Kt=a.g;if(Kt){const Ua=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var V=E.h;V.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(xc(V,V.h),V.h=null))}if(E.D){const Pc=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Pc&&(E.ya=Pc,ve(E.I,E.D,Pc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var B=a;if(E.qa=jm(E,E.J?E.ia:null,E.W),B.K){am(E.h,B);var he=B,qe=E.L;qe&&(he.I=qe),he.B&&(Ic(he),Ca(he)),E.g=B}else Nm(E);0<m.i.length&&La(m)}else ae[0]!="stop"&&ae[0]!="close"||$r(m,7);else m.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?$r(m,7):Nc(m):ae[0]!="noop"&&m.l&&m.l.ta(ae),m.v=0)}}Ri(4)}catch{}}var PT=class{constructor(a,h){this.g=a,this.map=h}};function sm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function im(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function om(a){return a.h?1:a.g?a.g.size:0}function Sc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function xc(a,h){a.g?a.g.add(h):a.h=h}function am(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}sm.prototype.cancel=function(){if(this.i=lm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function lm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return N(a.i)}function kT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,E=0;E<m;E++)h.push(a[E]);return h}h=[],m=0;for(E in a)h[m++]=a[E];return h}function jT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const E in a)h[m++]=E;return h}}}function um(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=jT(a),E=kT(a),O=E.length,V=0;V<O;V++)h.call(void 0,E[V],m&&m[V],a)}var cm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bT(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var E=a[m].indexOf("="),O=null;if(0<=E){var V=a[m].substring(0,E);O=a[m].substring(E+1)}else V=a[m];h(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,Pa(this,a.j),this.o=a.o,this.g=a.g,ka(this,a.s),this.l=a.l;var h=a.i,m=new Di;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),dm(this,m),this.m=a.m}else a&&(h=String(a).match(cm))?(this.h=!1,Pa(this,h[1]||"",!0),this.o=ji(h[2]||""),this.g=ji(h[3]||"",!0),ka(this,h[4]),this.l=ji(h[5]||"",!0),dm(this,h[6]||"",!0),this.m=ji(h[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}zr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(bi(h,hm,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(bi(h,hm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(bi(m,m.charAt(0)=="/"?VT:OT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",bi(m,MT)),a.join("")};function In(a){return new zr(a)}function Pa(a,h,m){a.j=m?ji(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ka(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function dm(a,h,m){h instanceof Di?(a.i=h,FT(a.i,a.h)):(m||(h=bi(h,LT)),a.i=new Di(h,a.h))}function ve(a,h,m){a.i.set(h,m)}function ja(a){return ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ji(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bi(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,DT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function DT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hm=/[#\/\?@]/g,OT=/[#\?:]/g,VT=/[#\?]/g,LT=/[#\?@]/g,MT=/#/g;function Di(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Kn(a){a.g||(a.g=new Map,a.h=0,a.i&&bT(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Di.prototype,t.add=function(a,h){Kn(this),this.i=null,a=Ts(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function fm(a,h){Kn(a),h=Ts(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function pm(a,h){return Kn(a),h=Ts(a,h),a.g.has(h)}t.forEach=function(a,h){Kn(this),this.g.forEach(function(m,E){m.forEach(function(O){a.call(h,O,E,this)},this)},this)},t.na=function(){Kn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let E=0;E<h.length;E++){const O=a[E];for(let V=0;V<O.length;V++)m.push(h[E])}return m},t.V=function(a){Kn(this);let h=[];if(typeof a=="string")pm(this,a)&&(h=h.concat(this.g.get(Ts(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return Kn(this),this.i=null,a=Ts(this,a),pm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function mm(a,h,m){fm(a,h),0<m.length&&(a.i=null,a.g.set(Ts(a,h),N(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var E=h[m];const V=encodeURIComponent(String(E)),B=this.V(E);for(E=0;E<B.length;E++){var O=V;B[E]!==""&&(O+="="+encodeURIComponent(String(B[E]))),a.push(O)}}return this.i=a.join("&")};function Ts(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function FT(a,h){h&&!a.j&&(Kn(a),a.i=null,a.g.forEach(function(m,E){var O=E.toLowerCase();E!=O&&(fm(this,E),mm(this,O,m))},a)),a.j=h}function UT(a,h){const m=new Pi;if(l.Image){const E=new Image;E.onload=y(Gn,m,"TestLoadImage: loaded",!0,h,E),E.onerror=y(Gn,m,"TestLoadImage: error",!1,h,E),E.onabort=y(Gn,m,"TestLoadImage: abort",!1,h,E),E.ontimeout=y(Gn,m,"TestLoadImage: timeout",!1,h,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else h(!1)}function BT(a,h){const m=new Pi,E=new AbortController,O=setTimeout(()=>{E.abort(),Gn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:E.signal}).then(V=>{clearTimeout(O),V.ok?Gn(m,"TestPingServer: ok",!0,h):Gn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Gn(m,"TestPingServer: error",!1,h)})}function Gn(a,h,m,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(m)}catch{}}function zT(){this.g=new ST}function $T(a,h,m){const E=m||"";try{um(a,function(O,V){let B=O;d(O)&&(B=mc(O)),h.push(E+V+"="+encodeURIComponent(B))})}catch(O){throw h.push(E+"type="+encodeURIComponent("_badmap")),O}}function ba(a){this.l=a.Ub||null,this.j=a.eb||!1}x(ba,gc),ba.prototype.g=function(){return new Da(this.l,this.j)},ba.prototype.i=function(a){return function(){return a}}({});function Da(a,h){tt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Da,tt),t=Da.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Vi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function gm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Oi(this):Vi(this),this.readyState==3&&gm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Oi(this))},t.Qa=function(a){this.g&&(this.response=a,Oi(this))},t.ga=function(){this.g&&Oi(this)};function Oi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Vi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Vi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function vm(a){let h="";return M(a,function(m,E){h+=E,h+=":",h+=m,h+=`\r
`}),h}function Ac(a,h,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=vm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):ve(a,h,m))}function Ce(a){tt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ce,tt);var WT=/^https?$/i,qT=["POST","PUT"];t=Ce.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_c.g(),this.v=this.o?Hp(this.o):Hp(_c),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(V){ym(this,V);return}if(a=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)m.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())m.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qT,h,void 0))||E||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of m)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Em(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){ym(this,V)}};function ym(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,_m(a),Oa(a)}function _m(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,pt(this,"complete"),pt(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wm(this):this.bb())},t.bb=function(){wm(this)};function wm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tn(a)!=4||a.Z()!=2)){if(a.u&&Tn(a)==4)zp(a.Ea,0,a);else if(pt(a,"readystatechange"),Tn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var E;if(E=B===0){var O=String(a.D).match(cm)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),E=!WT.test(O?O.toLowerCase():"")}m=E}if(m)pt(a,"complete"),pt(a,"success");else{a.m=6;try{var V=2<Tn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",_m(a)}}finally{Oa(a)}}}}function Oa(a,h){if(a.g){Em(a);const m=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||pt(a,"ready");try{m.onreadystatechange=E}catch{}}}function Em(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),TT(h)}};function Im(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function HT(a){const h={};a=(a.g&&2<=Tn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(I(a[E]))continue;var m=A(a[E]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[O]||[];h[O]=V,V.push(m)}R(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Tm(a){this.Aa=0,this.i=[],this.j=new Pi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Li("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Li("baseRetryDelayMs",5e3,a),this.cb=Li("retryDelaySeedMs",1e4,a),this.Wa=Li("forwardChannelMaxRetries",2,a),this.wa=Li("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new sm(a&&a.concurrentRequestLimit),this.Da=new zT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tm.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,E){mt(0),this.W=a,this.H=h||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=jm(this,null,this.W),La(this)};function Nc(a){if(Sm(a),a.G==3){var h=a.U++,m=In(a.I);if(ve(m,"SID",a.K),ve(m,"RID",h),ve(m,"TYPE","terminate"),Mi(a,m),h=new Hn(a,a.j,h),h.L=2,h.v=ja(In(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=bm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ca(h)}km(a)}function Va(a){a.g&&(Cc(a),a.g.cancel(),a.g=null)}function Sm(a){Va(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ma(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function La(a){if(!im(a.h)&&!a.s){a.s=!0;var h=a.Ga;ln||J(),$||(ln(),$=!0),G.add(h,a),a.B=0}}function KT(a,h){return om(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ci(g(a.Ga,a,h),Pm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Hn(this,this.j,a);let V=this.o;if(this.S&&(V?(V=w(V),_(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Am(this,O,h),m=In(this.I),ve(m,"RID",a),ve(m,"CVER",22),this.D&&ve(m,"X-HTTP-Session-Id",this.D),Mi(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(vm(V)))+"&"+h:this.m&&Ac(m,this.m,V)),xc(this.h,O),this.Ua&&ve(m,"TYPE","init"),this.P?(ve(m,"$req",h),ve(m,"SID","null"),O.T=!0,Ec(O,m,null)):Ec(O,m,h),this.G=2}}else this.G==3&&(a?xm(this,a):this.i.length==0||im(this.h)||xm(this))};function xm(a,h){var m;h?m=h.l:m=a.U++;const E=In(a.I);ve(E,"SID",a.K),ve(E,"RID",m),ve(E,"AID",a.T),Mi(a,E),a.m&&a.o&&Ac(E,a.m,a.o),m=new Hn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Am(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),xc(a.h,m),Ec(m,E,h)}function Mi(a,h){a.H&&M(a.H,function(m,E){ve(h,E,m)}),a.l&&um({},function(m,E){ve(h,E,m)})}function Am(a,h,m){m=Math.min(a.i.length,m);var E=a.l?g(a.l.Na,a.l,a):null;e:{var O=a.i;let V=-1;for(;;){const B=["count="+m];V==-1?0<m?(V=O[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let he=!0;for(let qe=0;qe<m;qe++){let ae=O[qe].g;const nt=O[qe].map;if(ae-=V,0>ae)V=Math.max(0,O[qe].g-100),he=!1;else try{$T(nt,B,"req"+ae+"_")}catch{E&&E(nt)}}if(he){E=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,E}function Nm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;ln||J(),$||(ln(),$=!0),G.add(h,a),a.v=0}}function Rc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ci(g(a.Fa,a),Pm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Rm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ci(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Va(this),Rm(this))};function Cc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Rm(a){a.g=new Hn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=In(a.qa);ve(h,"RID","rpc"),ve(h,"SID",a.K),ve(h,"AID",a.T),ve(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ve(h,"TO",a.ja),ve(h,"TYPE","xmlhttp"),Mi(a,h),a.m&&a.o&&Ac(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ja(In(h)),m.m=null,m.P=!0,tm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),Rc(this),mt(19))};function Ma(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Cm(a,h){var m=null;if(a.g==h){Ma(a),Cc(a),a.g=null;var E=2}else if(Sc(a.h,h))m=h.D,am(a.h,h),E=1;else return;if(a.G!=0){if(h.o)if(E==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=a.B;E=Aa(),pt(E,new Yp(E,m)),La(a)}else Nm(a);else if(O=h.s,O==3||O==0&&0<h.X||!(E==1&&KT(a,h)||E==2&&Rc(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),O){case 1:$r(a,5);break;case 4:$r(a,10);break;case 3:$r(a,6);break;default:$r(a,2)}}}function Pm(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function $r(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),E=a.Xa;const O=!E;E=new zr(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Pa(E,"https"),ja(E),O?UT(E.toString(),m):BT(E.toString(),m)}else mt(2);a.G=0,a.l&&a.l.sa(h),km(a),Sm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function km(a){if(a.G=0,a.ka=[],a.l){const h=lm(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ka,h),P(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function jm(a,h,m){var E=m instanceof zr?In(m):new zr(m);if(E.g!="")h&&(E.g=h+"."+E.g),ka(E,E.s);else{var O=l.location;E=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var V=new zr(null);E&&Pa(V,E),h&&(V.g=h),O&&ka(V,O),m&&(V.l=m),E=V}return m=a.D,h=a.ya,m&&h&&ve(E,m,h),ve(E,"VER",a.la),Mi(a,E),E}function bm(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ce(new ba({eb:m})):new Ce(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dm(){}t=Dm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(a,h){return new Nt(a,h)};function Nt(a,h){tt.call(this),this.g=new Tm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!I(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ss(this)}x(Nt,tt),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Nc(this.g)},Nt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=mc(a),a=m);h.i.push(new PT(h.Ya++,a)),h.G==3&&La(h)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,Nt.aa.N.call(this)};function Om(a){vc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}x(Om,vc);function Vm(){yc.call(this),this.status=1}x(Vm,yc);function Ss(a){this.g=a}x(Ss,Dm),Ss.prototype.ua=function(){pt(this.g,"a")},Ss.prototype.ta=function(a){pt(this.g,new Om(a))},Ss.prototype.sa=function(a){pt(this.g,new Vm)},Ss.prototype.ra=function(){pt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,BE=function(){return new Fa},UE=function(){return Aa()},FE=Ur,Eh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Na.NO_ERROR=0,Na.TIMEOUT=8,Na.HTTP_ERROR=6,Nl=Na,Jp.COMPLETE="complete",ME=Jp,Kp.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",tt.prototype.listen=tt.prototype.K,to=Kp,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,LE=Ce}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new Df("@firebase/firestore");function Ki(){return ds.logLevel}function q(t,...e){if(ds.logLevel<=ne.DEBUG){const n=e.map(Gf);ds.debug(`Firestore (${Ii}): ${t}`,...n)}}function Un(t,...e){if(ds.logLevel<=ne.ERROR){const n=e.map(Gf);ds.error(`Firestore (${Ii}): ${t}`,...n)}}function ai(t,...e){if(ds.logLevel<=ne.WARN){const n=e.map(Gf);ds.warn(`Firestore (${Ii}): ${t}`,...n)}}function Gf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t="Unexpected state"){const e=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function se(t,e){t||K()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class gP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vP{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new zE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new at(e)}}class yP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _P{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){se(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string"),this.R=n.token,new wP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=IP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function li(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Q(e)}static min(){return new Q(new Fe(0,0))}static max(){return new Q(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends Wo{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const TP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ge extends Wo{construct(e,n,r){return new Ge(e,n,r)}static isValidIdentifier(e){return TP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ge.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ge(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ge(n)}static emptyPath(){return new Ge([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(de.fromString(e))}static fromName(e){return new H(de.fromString(e).popFirst(5))}static empty(){return new H(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new de(e.slice()))}}function SP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Q.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Ar(s,H.empty(),e)}function xP(t){return new Ar(t.readTime,t.key,-1)}class Ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ar(Q.min(),H.empty(),-1)}static max(){return new Ar(Q.max(),H.empty(),-1)}}function AP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==NP)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ha(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qf.oe=-1;function fa(t){return t==null}function du(t){return t===0&&1/t==-1/0}function PP(t){return typeof t=="number"&&Number.isInteger(t)&&!du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kP(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function WE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new Ye(Ge.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qE("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const jP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(se(!!t),typeof t=="string"){let e=0;const n=jP.exec(t);if(se(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xf(t){const e=t.mapValue.fields.__previous_value__;return Hu(e)?Xf(e):e}function qo(t){const e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Ho{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{}};function fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hu(t)?4:OP(t)?9007199254740991:DP(t)?10:11:K()}function vn(t,e){if(t===e)return!0;const n=fs(t);if(n!==fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Nr(s.timestampValue),l=Nr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hs(s.bytesValue).isEqual(hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),l=ke(i.doubleValue);return o===l?du(o)===du(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return li(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Pv(o)!==Pv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!vn(o[u],l[u])))return!1;return!0}(t,e);default:return K()}}function Ko(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=fs(t),r=fs(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ke(i.integerValue||i.doubleValue),u=ke(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return jv(t.timestampValue,e.timestampValue);case 4:return jv(qo(t),qo(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(i,o){const l=hs(i),u=hs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(ke(i.latitude),ke(o.latitude));return l!==0?l:le(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=le(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:bv(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===al.mapValue&&o===al.mapValue)return 0;if(i===al.mapValue)return 1;if(o===al.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=le(u[p],f[p]);if(g!==0)return g;const y=ui(l[u[p]],d[f[p]]);if(y!==0)return y}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw K()}}function jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Nr(t),r=Nr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function bv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function ci(t){return Ih(t)}function Ih(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ih(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ih(n.fields[o])}`;return s+"}"}(t.mapValue):K()}function hu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Th(t){return!!t&&"integerValue"in t}function Yf(t){return!!t&&"arrayValue"in t}function Dv(t){return!!t&&"nullValue"in t}function Ov(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rl(t){return!!t&&"mapValue"in t}function DP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _s(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mo(n)}setAll(e){let n=Ge.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=mo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Rl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Rl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_s(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt(mo(this.value))}}function HE(t){const e=[];return _s(t.fields,(n,r)=>{const s=new Ge([n]);if(Rl(r)){const i=HE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ze(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ze(e,1,n,Q.min(),r,s,0)}static newNoDocument(e,n){return new ze(e,2,n,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new ze(e,3,n,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.position=e,this.inclusive=n}}function Vv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n="asc"){this.field=e,this.dir=n}}function VP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class Ve extends KE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MP(e,n,r):n==="array-contains"?new BP(e,r):n==="in"?new zP(e,r):n==="not-in"?new $P(e,r):n==="array-contains-any"?new WP(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FP(e,r):new UP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&fs(this.value)===fs(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends KE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new an(e,n)}matches(e){return GE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function GE(t){return t.op==="and"}function QE(t){return LP(t)&&GE(t)}function LP(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function Sh(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(QE(t))return t.filters.map(e=>Sh(e)).join(",");{const e=t.filters.map(n=>Sh(n)).join(",");return`${t.op}(${e})`}}function XE(t,e){return t instanceof Ve?function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&vn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&XE(o,s.filters[l]),!0):!1}(t,e):void K()}function YE(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(YE).join(" ,")+"}"}(t):"Filter"}class MP extends Ve{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class FP extends Ve{constructor(e,n){super(e,"in",n),this.keys=JE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UP extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=JE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class BP extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yf(n)&&Ko(n.arrayValue,this.value)}}class zP extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ko(this.value.arrayValue,n)}}class $P extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ko(this.value.arrayValue,n)}}class WP extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ko(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Mv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new qP(t,e,n,r,s,i,o)}function Jf(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),fa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.ue=n}return e.ue}function Zf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Lv(t.startAt,e.startAt)&&Lv(t.endAt,e.endAt)}function xh(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HP(t,e,n,r,s,i,o,l){return new ws(t,e,n,r,s,i,o,l)}function ep(t){return new ws(t)}function Fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tp(t){return t.collectionGroup!==null}function Ys(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ye(Ge.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Go(i,r))}),n.has(Ge.keyField().canonicalString())||e.ce.push(new Go(Ge.keyField(),r))}return e.ce}function gn(t){const e=Y(t);return e.le||(e.le=ZE(e,Ys(t))),e.le}function KP(t){const e=Y(t);return e.he||(e.he=ZE(e,t.explicitOrderBy)),e.he}function ZE(t,e){if(t.limitType==="F")return Mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Go(s.field,i)});const n=t.endAt?new di(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new di(t.startAt.position,t.startAt.inclusive):null;return Mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ah(t,e){const n=t.filters.concat([e]);return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fu(t,e,n){return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ku(t,e){return Zf(gn(t),gn(e))&&t.limitType===e.limitType}function eI(t){return`${Jf(gn(t))}|lt:${t.limitType}`}function Ns(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>YE(s)).join(", ")}]`),fa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Gu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ys(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Vv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Ys(r),s)||r.endAt&&!function(o,l,u){const d=Vv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Ys(r),s))}(t,e)}function GP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tI(t){return(e,n)=>{let r=!1;for(const s of Ys(t)){const i=QP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QP(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?ui(u,d):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return WE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Re(H.comparator);function Bn(){return XP}const nI=new Re(H.comparator);function no(...t){let e=nI;for(const n of t)e=e.insert(n.key,n);return e}function rI(t){let e=nI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return go()}function sI(){return go()}function go(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const YP=new Re(H.comparator),JP=new Ye(H.comparator);function te(...t){let e=JP;for(const n of t)e=e.add(n);return e}const ZP=new Ye(le);function ek(){return ZP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function iI(t){return{integerValue:""+t}}function oI(t,e){return PP(e)?iI(e):np(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this._=void 0}}function tk(t,e,n){return t instanceof Qo?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hu(i)&&(i=Xf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Xo?lI(t,e):t instanceof Yo?uI(t,e):function(s,i){const o=aI(s,i),l=Uv(o)+Uv(s.Pe);return Th(o)&&Th(s.Pe)?iI(l):np(s.serializer,l)}(t,e)}function nk(t,e,n){return t instanceof Xo?lI(t,e):t instanceof Yo?uI(t,e):n}function aI(t,e){return t instanceof Jo?function(r){return Th(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qo extends Qu{}class Xo extends Qu{constructor(e){super(),this.elements=e}}function lI(t,e){const n=cI(e);for(const r of t.elements)n.some(s=>vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yo extends Qu{constructor(e){super(),this.elements=e}}function uI(t,e){let n=cI(e);for(const r of t.elements)n=n.filter(s=>!vn(s,r));return{arrayValue:{values:n}}}class Jo extends Qu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Uv(t){return ke(t.integerValue||t.doubleValue)}function cI(t){return Yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.field=e,this.transform=n}}function rk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xo&&s instanceof Xo||r instanceof Yo&&s instanceof Yo?li(r.elements,s.elements,vn):r instanceof Jo&&s instanceof Jo?vn(r.Pe,s.Pe):r instanceof Qo&&s instanceof Qo}(t.transform,e.transform)}class sk{constructor(e,n){this.version=e,this.transformResults=n}}class ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ut}static exists(e){return new ut(void 0,e)}static updateTime(e){return new ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xu{}function hI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,ut.none()):new pa(t.key,t.data,ut.none());{const n=t.data,r=vt.empty();let s=new Ye(Ge.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Vr(t.key,r,new Pt(s.toArray()),ut.none())}}function ik(t,e,n){t instanceof pa?function(s,i,o){const l=s.value.clone(),u=zv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Vr?function(s,i,o){if(!Cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(fI(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vo(t,e,n,r){return t instanceof pa?function(i,o,l,u){if(!Cl(i.precondition,o))return l;const d=i.value.clone(),f=$v(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vr?function(i,o,l,u){if(!Cl(i.precondition,o))return l;const d=$v(i.fieldTransforms,u,o),f=o.data;return f.setAll(fI(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ok(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=aI(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function Bv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&li(r,s,(i,o)=>rk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vr extends Xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zv(t,e,n){const r=new Map;se(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,nk(o,l,n[s]))}return r}function $v(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,tk(i,o,e))}return r}class rp extends Xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pI extends Xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ik(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=hI(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(n,r)=>Bv(n,r))&&li(this.baseMutations,e.baseMutations,(n,r)=>Bv(n,r))}}class sp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){se(e.mutations.length===r.length);let s=function(){return YP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new sp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,re;function mI(t){switch(t){default:return K();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function gI(t){if(t===void 0)return Un("GRPC error has no .code"),L.UNKNOWN;switch(t){case De.OK:return L.OK;case De.CANCELLED:return L.CANCELLED;case De.UNKNOWN:return L.UNKNOWN;case De.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case De.INTERNAL:return L.INTERNAL;case De.UNAVAILABLE:return L.UNAVAILABLE;case De.UNAUTHENTICATED:return L.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case De.NOT_FOUND:return L.NOT_FOUND;case De.ALREADY_EXISTS:return L.ALREADY_EXISTS;case De.PERMISSION_DENIED:return L.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case De.ABORTED:return L.ABORTED;case De.OUT_OF_RANGE:return L.OUT_OF_RANGE;case De.UNIMPLEMENTED:return L.UNIMPLEMENTED;case De.DATA_LOSS:return L.DATA_LOSS;default:return K()}}(re=De||(De={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=new ns([4294967295,4294967295],0);function Wv(t){const e=dk().encode(t),n=new VE;return n.update(e),new Uint8Array(n.digest())}function qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ns([n,r],0),new ns([s,i],0)]}class ip{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ro(`Invalid padding: ${n}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ns.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ns.fromNumber(r)));return s.compare(hk)===1&&(s=new ns([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Wv(e),[r,s]=qv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ip(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Wv(e),[r,s]=qv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ro extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yu(Q.min(),s,new Re(le),Bn(),te())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class vI{constructor(e,n){this.targetId=e,this.me=n}}class yI{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hv{constructor(){this.fe=0,this.ge=Gv(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K()}}),new ma(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Gv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Bn(),this.qe=Kv(),this.Qe=new Re(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(xh(i))if(r===0){const o=new H(i.path);this.Ue(n,o,ze.newNoDocument(o,Q.min()))}else se(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=hs(r).toUint8Array()}catch(u){if(u instanceof qE)return ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ip(o,s,i)}catch(u){return ai(u instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&xh(l.target)){const u=new H(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ze.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Yu(e,n,this.Qe,this.ke,r);return this.ke=Bn(),this.qe=Kv(),this.Qe=new Re(le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Hv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Hv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Kv(){return new Re(H.comparator)}function Gv(){return new Re(H.comparator)}const pk={asc:"ASCENDING",desc:"DESCENDING"},mk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gk={and:"AND",or:"OR"};class vk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nh(t,e){return t.useProto3Json||fa(e)?e:{value:e}}function pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _I(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yk(t,e){return pu(t,e.toTimestamp())}function jt(t){return se(!!t),Q.fromTimestamp(function(n){const r=Nr(n);return new Fe(r.seconds,r.nanos)}(t))}function op(t,e){return Rh(t,e).canonicalString()}function Rh(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wI(t){const e=de.fromString(t);return se(NI(e)),e}function mu(t,e){return op(t.databaseId,e.path)}function yo(t,e){const n=wI(e);if(n.get(1)!==t.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(II(n))}function EI(t,e){return op(t.databaseId,e)}function _k(t){const e=wI(t);return e.length===4?de.emptyPath():II(e)}function Ch(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function II(t){return se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qv(t,e,n){return{name:mu(t,e),fields:n.value.mapValue.fields}}function wk(t,e){return"found"in e?function(r,s){se(!!s.found),s.found.name,s.found.updateTime;const i=yo(r,s.found.name),o=jt(s.found.updateTime),l=s.found.createTime?jt(s.found.createTime):Q.min(),u=new vt({mapValue:{fields:s.found.fields}});return ze.newFoundDocument(i,o,l,u)}(t,e):"missing"in e?function(r,s){se(!!s.missing),se(!!s.readTime);const i=yo(r,s.missing),o=jt(s.readTime);return ze.newNoDocument(i,o)}(t,e):K()}function Ek(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(se(f===void 0||typeof f=="string"),Ze.fromBase64String(f||"")):(se(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?L.UNKNOWN:gI(d.code);return new z(f,d.message||"")}(o);n=new yI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=yo(t,r.document.name),i=jt(r.document.updateTime),o=r.document.createTime?jt(r.document.createTime):Q.min(),l=new vt({mapValue:{fields:r.document.fields}}),u=ze.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Pl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=yo(t,r.document),i=r.readTime?jt(r.readTime):Q.min(),o=ze.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Pl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=yo(t,r.document),i=r.removedTargetIds||[];n=new Pl([],i,s,null)}else{if(!("filter"in e))return K();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new ck(s,i),l=r.targetId;n=new vI(l,o)}}return n}function TI(t,e){let n;if(e instanceof pa)n={update:Qv(t,e.key,e.value)};else if(e instanceof rp)n={delete:mu(t,e.key)};else if(e instanceof Vr)n={update:Qv(t,e.key,e.data),updateMask:Pk(e.fieldMask)};else{if(!(e instanceof pI))return K();n={verify:mu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Qo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:yk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(t,e.precondition)),n}function Ik(t,e){return t&&t.length>0?(se(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?jt(s.updateTime):jt(i);return o.isEqual(Q.min())&&(o=jt(i)),new sk(o,s.transformResults||[])}(n,e))):[]}function Tk(t,e){return{documents:[EI(t,e.path)]}}function SI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EI(t,s);const i=function(d){if(d.length!==0)return AI(an.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:ir(g.field),direction:Nk(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Nh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function Sk(t,e,n,r){const{_t:s,parent:i}=SI(t,e),o={},l=[];let u=0;return n.forEach(d=>{const f="aggregate_"+u++;o[f]=d.alias,d.aggregateType==="count"?l.push({alias:f,count:{}}):d.aggregateType==="avg"?l.push({alias:f,avg:{field:ir(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:f,sum:{field:ir(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function xk(t){let e=_k(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){se(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=xI(p);return g instanceof an&&QE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(x){return new Go(Rs(x.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,fa(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,y=p.values||[];return new di(y,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new di(y,g)}(n.endAt)),HP(e,s,o,i,l,"F",u,d)}function Ak(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Rs(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Rs(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Rs(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rs(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(Rs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>xI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function Nk(t){return pk[t]}function Rk(t){return mk[t]}function Ck(t){return gk[t]}function ir(t){return{fieldPath:t.canonicalString()}}function Rs(t){return Ge.fromServerFormat(t.fieldPath)}function AI(t){return t instanceof Ve?function(n){if(n.op==="=="){if(Ov(n.value))return{unaryFilter:{field:ir(n.field),op:"IS_NAN"}};if(Dv(n.value))return{unaryFilter:{field:ir(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ov(n.value))return{unaryFilter:{field:ir(n.field),op:"IS_NOT_NAN"}};if(Dv(n.value))return{unaryFilter:{field:ir(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ir(n.field),op:Rk(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>AI(s));return r.length===1?r[0]:{compositeFilter:{op:Ck(n.op),filters:r}}}(t):K()}function Pk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,s,i=Q.min(),o=Q.min(),l=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.ct=e}}function jk(t){const e=xk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.un=new Dk}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ar.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ar.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Dk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hi(0)}static kn(){return new hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vo(r.mutation,s,Pt.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=Jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=no();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Bn();const o=go(),l=function(){return go()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Vr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),vo(f.mutation,d,f.mutation.getFieldMask(),Fe.now())):o.set(d.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new Vk(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=go();let s=new Re((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Pt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||te()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=sI();f.forEach(g=>{if(!i.has(g)){const y=hI(n.get(g),r.get(g));y!==null&&p.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Jr());let l=-1,u=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,te())).next(f=>({batchId:l,changes:rI(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=no();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=no();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const d=function(p,g){return new ws(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ze.newInvalidDocument(f)))});let l=no();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&vo(f.mutation,d,Pt.empty(),Fe.now()),Gu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jt(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:jk(s.bundledQuery),readTime:jt(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.overlays=new Re(H.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Jr(),i=n.length+1,o=new H(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Jr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Jr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lk(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.Tr=new Ye(Ue.Er),this.dr=new Ye(Ue.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ue(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ue(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new de([])),r=new Ue(n,e),s=new Ue(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new de([])),r=new Ue(n,e),s=new Ue(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ue(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ue{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(Ue.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ak(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ue(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ue(n,0),s=new Ue(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(le);return n.forEach(s=>{const i=new Ue(s,0),o=new Ue(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Ue(new H(i),0);let l=new Ye(le);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Ue(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ue(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.Mr=e,this.docs=function(){return new Re(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ze.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,l=new H(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AP(xP(f),r)<=0||(s.has(f.key)||Gu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $k(this)}getSize(e){return F.resolve(this.size)}}class $k extends Ok{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.persistence=e,this.Nr=new Ti(n=>Jf(n),Zf),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ap,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Qf(0),this.Kr=!1,this.Kr=!0,this.$r=new Uk,this.referenceDelegate=e(this),this.Ur=new Wk(this),this.indexManager=new bk,this.remoteDocumentCache=function(s){return new zk(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kk(n),this.Gr=new Mk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Bk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new Hk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Hk extends RP{constructor(e){super(),this.currentSequenceNumber=e}}class lp{constructor(e){this.persistence=e,this.Jr=new ap,this.Yr=null}static Zr(e){return new lp(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=H.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Q.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new up(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FA()?8:CP(ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Kk;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ki()<=ne.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Ki()<=ne.DEBUG&&q("QueryEngine","Query:",Ns(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ki()<=ne.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):F.resolve())}Yi(e,n){if(Fv(n))return F.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fu(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,fu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Fv(n)||s.isEqual(Q.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Ki()<=ne.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ns(n)),this.rs(e,o,n,SP(s,-1)).next(l=>l))})}ts(e,n){let r=new Ye(tI(e));return n.forEach((s,i)=>{Gu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ki()<=ne.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Ns(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ar.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Re(le),this._s=new Ti(i=>Jf(i),Zf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Xk(t,e,n,r){return new Qk(t,e,n,r)}async function RI(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=te();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Yk(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let y=F.resolve();return g.forEach(x=>{y=y.next(()=>f.getEntry(u,x)).next(N=>{const P=d.docVersions.get(x);se(P!==null),N.version.compareTo(P)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function CI(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Jk(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ze.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),s=s.insert(p,y),function(N,P,v){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(g,y,f)&&l.push(n.Ur.updateTargetData(i,y))});let u=Bn(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Zk(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Q.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function Zk(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Q.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function e1(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t1(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ph(t,e,n){const r=Y(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ha(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Xv(t,e,n){const r=Y(t);let s=Q.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=Y(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,gn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Q.min(),n?i:te())).next(l=>(n1(r,GP(e),l),{documents:l,Ts:i})))}function n1(t,e,n){let r=t.us.get(e)||Q.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Yv{constructor(){this.activeTargetIds=ek()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r1{constructor(){this.so=new Yv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function dd(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class a1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=dd(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ai("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ii}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=i1[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=dd();return new Promise((o,l)=>{const u=new LE;u.setWithCredentials(!0),u.listenOnce(ME.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nl.NO_ERROR:const f=u.getResponseJson();q(ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Nl.TIMEOUT:q(ot,`RPC '${e}' ${i} timed out`),l(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const p=u.getStatus();if(q(ot,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const x=function(P){const v=P.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(y.status);l(new z(x,y.message))}else l(new z(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(L.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{q(ot,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);q(ot,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=dd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BE(),l=UE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(ot,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,y=!1;const x=new o1({Io:P=>{y?q(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(q(ot,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),q(ot,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},To:()=>p.close()}),N=(P,v,I)=>{P.listen(v,T=>{try{I(T)}catch(k){setTimeout(()=>{throw k},0)}})};return N(p,to.EventType.OPEN,()=>{y||(q(ot,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),N(p,to.EventType.CLOSE,()=>{y||(y=!0,q(ot,`RPC '${e}' stream ${s} transport closed`),x.So())}),N(p,to.EventType.ERROR,P=>{y||(y=!0,ai(ot,`RPC '${e}' stream ${s} transport errored:`,P),x.So(new z(L.UNAVAILABLE,"The operation could not be completed")))}),N(p,to.EventType.MESSAGE,P=>{var v;if(!y){const I=P.data[0];se(!!I);const T=I,k=T.error||((v=T[0])===null||v===void 0?void 0:v.error);if(k){q(ot,`RPC '${e}' stream ${s} received error:`,k);const D=k.status;let M=function(S){const _=De[S];if(_!==void 0)return gI(_)}(D),R=k.message;M===void 0&&(M=L.INTERNAL,R="Unknown error status: "+D+" with message "+k.message),y=!0,x.So(new z(M,R)),p.close()}else q(ot,`RPC '${e}' stream ${s} received:`,I),x.bo(I)}}),N(l,FE.STAT_EVENT,P=>{P.stat===Eh.PROXY?q(ot,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Eh.NOPROXY&&q(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return new vk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l1 extends PI{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Ek(this.serializer,e),r=function(i){if(!("targetChange"in i))return Q.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?jt(o.readTime):Q.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ch(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=xh(u)?{documents:Tk(i,u)}:{query:SI(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=_I(i,o.resumeToken);const d=Nh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Q.min())>0){l.readTime=pu(i,o.snapshotVersion.toTimestamp());const d=Nh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=Ak(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ch(this.serializer),n.removeTarget=e,this.a_(n)}}class u1 extends PI{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ik(e.writeResults,e.commitTime),r=jt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ch(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TI(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Rh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(L.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Rh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class d1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Un(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Es(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Y(u);d.L_.add(4),await ga(d),d.q_.set("Unknown"),d.L_.delete(4),await Zu(d)}(this))})}),this.q_=new d1(r,s)}}async function Zu(t){if(Es(t))for(const e of t.B_)await e(!0)}async function ga(t){for(const e of t.B_)await e(!1)}function kI(t,e){const n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pp(n)?fp(n):Si(n).r_()&&hp(n,e))}function dp(t,e){const n=Y(t),r=Si(n);n.N_.delete(e),r.r_()&&jI(n,e),n.N_.size===0&&(r.r_()?r.o_():Es(n)&&n.q_.set("Unknown"))}function hp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).A_(e)}function jI(t,e){t.Q_.xe(e),Si(t).R_(e)}function fp(t){t.Q_=new fk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.q_.v_()}function pp(t){return Es(t)&&!Si(t).n_()&&t.N_.size>0}function Es(t){return Y(t).L_.size===0}function bI(t){t.Q_=void 0}async function f1(t){t.q_.set("Online")}async function p1(t){t.N_.forEach((e,n)=>{hp(t,e)})}async function m1(t,e){bI(t),pp(t)?(t.q_.M_(e),fp(t)):t.q_.set("Unknown")}async function g1(t,e,n){if(t.q_.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof Pl?t.Q_.Ke(e):e instanceof vI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Q.min()))try{const r=await CI(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Ze.EMPTY_BYTE_STRING,f.snapshotVersion)),jI(i,u);const p=new cr(f.target,u,d,f.sequenceNumber);hp(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!ha(e))throw e;t.L_.add(1),await ga(t),t.q_.set("Offline"),n||(n=()=>CI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Zu(t)})}function DI(t,e){return e().catch(n=>gu(t,n,e))}async function ec(t){const e=Y(t),n=Rr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;v1(e);)try{const s=await e1(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,y1(e,s)}catch(s){await gu(e,s)}OI(e)&&VI(e)}function v1(t){return Es(t)&&t.O_.length<10}function y1(t,e){t.O_.push(e);const n=Rr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OI(t){return Es(t)&&!Rr(t).n_()&&t.O_.length>0}function VI(t){Rr(t).start()}async function _1(t){Rr(t).p_()}async function w1(t){const e=Rr(t);for(const n of t.O_)e.m_(n.mutations)}async function E1(t,e,n){const r=t.O_.shift(),s=sp.from(r,e,n);await DI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ec(t)}async function I1(t,e){e&&Rr(t).V_&&await async function(r,s){if(function(o){return mI(o)&&o!==L.ABORTED}(s.code)){const i=r.O_.shift();Rr(r).s_(),await DI(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ec(r)}}(t,e),OI(t)&&VI(t)}async function Zv(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Es(n);n.L_.add(3),await ga(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Zu(n)}async function T1(t,e){const n=Y(t);e?(n.L_.delete(2),await Zu(n)):e||(n.L_.add(2),await ga(n),n.q_.set("Unknown"))}function Si(t){return t.K_||(t.K_=function(n,r,s){const i=Y(n);return i.w_(),new l1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:f1.bind(null,t),Ro:p1.bind(null,t),mo:m1.bind(null,t),d_:g1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pp(t)?fp(t):t.q_.set("Unknown")):(await t.K_.stop(),bI(t))})),t.K_}function Rr(t){return t.U_||(t.U_=function(n,r,s){const i=Y(n);return i.w_(),new u1(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_1.bind(null,t),mo:I1.bind(null,t),f_:w1.bind(null,t),g_:E1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ec(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new mp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(t,e){if(Un("AsyncQueue",`${e}: ${t}`),ha(t))return new z(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=no(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new Js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.W_=new Re(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class fi{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new fi(e,n,Js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class x1{constructor(){this.queries=ty(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=ty(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new z(L.ABORTED,"Firestore shutting down"))}}function ty(){return new Ti(t=>eI(t),Ku)}async function LI(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new S1,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=gp(o,`Initialization of query '${Ns(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&vp(n)}async function MI(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A1(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&vp(n)}function N1(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function vp(t){t.Y_.forEach(e=>{e.next()})}var kh,ny;(ny=kh||(kh={})).ea="default",ny.Cache="cache";class FI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.key=e}}class BI{constructor(e){this.key=e}}class R1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=tI(e),this.Ra=new Js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ey,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),y=Gu(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;g&&y?g.data.isEqual(y.data)?x!==N&&(r.track({type:3,doc:y}),P=!0):this.ga(g,y)||(r.track({type:2,doc:y}),P=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(l=!0)):!g&&y?(r.track({type:0,doc:y}),P=!0):g&&!y&&(r.track({type:1,doc:g}),P=!0,(u||d)&&(l=!0)),P&&(y?(o=o.add(y),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(y,x){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return N(y)-N(x)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new fi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ey,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new BI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new UI(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class C1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class P1{constructor(e){this.key=e,this.va=!1}}class k1{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ti(l=>eI(l),Ku),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(H.comparator),this.Na=new Map,this.La=new ap,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function j1(t,e,n=!0){const r=KI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await zI(r,e,n,!0),s}async function b1(t,e){const n=KI(t);await zI(n,e,!0,!1)}async function zI(t,e,n,r){const s=await t1(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await D1(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&kI(t.remoteStore,s),l}async function D1(t,e,n,r,s){t.Ka=(p,g,y)=>async function(N,P,v,I){let T=P.view.ma(v);T.ns&&(T=await Xv(N.localStore,P.query,!1).then(({documents:R})=>P.view.ma(R,T)));const k=I&&I.targetChanges.get(P.targetId),D=I&&I.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(T,N.isPrimaryClient,k,D);return sy(N,P.targetId,M.wa),M.snapshot}(t,p,g,y);const i=await Xv(t.localStore,e,!0),o=new R1(e,i.Ts),l=o.ma(i.documents),u=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);sy(t,n,d.wa);const f=new C1(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function O1(t,e,n){const r=Y(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ku(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&dp(r.remoteStore,s.targetId),jh(r,s.targetId)}).catch(da)):(jh(r,s.targetId),await Ph(r.localStore,s.targetId,!0))}async function V1(t,e){const n=Y(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dp(n.remoteStore,r.targetId))}async function L1(t,e,n){const r=W1(t);try{const s=await function(o,l){const u=Y(o),d=Fe.now(),f=l.reduce((y,x)=>y.add(x.key),te());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=Bn(),N=te();return u.cs.getEntries(y,f).next(P=>{x=P,x.forEach((v,I)=>{I.isValidDocument()||(N=N.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,x)).next(P=>{p=P;const v=[];for(const I of l){const T=ok(I,p.get(I.key).overlayedDocument);T!=null&&v.push(new Vr(I.key,T,HE(T.value.mapValue),ut.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,v,l)}).next(P=>{g=P;const v=P.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,P.batchId,v)})}).then(()=>({batchId:g.batchId,changes:rI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Re(le)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await va(r,s.changes),await ec(r.remoteStore)}catch(s){const i=gp(s,"Failed to persist write");n.reject(i)}}async function $I(t,e){const n=Y(t);try{const r=await Jk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?se(o.va):s.removedDocuments.size>0&&(se(o.va),o.va=!1))}),await va(n,r,e)}catch(r){await da(r)}}function ry(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&vp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M1(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Re(H.comparator);o=o.insert(i,ze.newNoDocument(i,Q.min()));const l=te().add(i),u=new Yu(Q.min(),new Map,new Re(le),o,l);await $I(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),yp(r)}else await Ph(r.localStore,e,!1).then(()=>jh(r,e,n)).catch(da)}async function F1(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await Yk(n.localStore,e);qI(n,r,null),WI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,s)}catch(s){await da(s)}}async function U1(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(se(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);qI(r,e,n),WI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,s)}catch(s){await da(s)}}function WI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function qI(t,e,n){const r=Y(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||HI(t,r)})}function HI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),yp(t))}function sy(t,e,n){for(const r of n)r instanceof UI?(t.La.addReference(r.key,e),B1(t,r)):r instanceof BI?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||HI(t,r.key)):K()}function B1(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),yp(t))}function yp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(de.fromString(e)),r=t.qa.next();t.Na.set(r,new P1(n)),t.Oa=t.Oa.insert(n,r),kI(t.remoteStore,new cr(gn(ep(n.path)),r,"TargetPurposeLimboResolution",Qf.oe))}}async function va(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=up.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=Y(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>F.forEach(g.Ui,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ha(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=f.os.get(g),x=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(g,N)}}}(r.localStore,i))}async function z1(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await RI(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new z(L.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.hs)}}function $1(t,e){const n=Y(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function KI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$I.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M1.bind(null,e),e.Ca.d_=A1.bind(null,e.eventManager),e.Ca.$a=N1.bind(null,e.eventManager),e}function W1(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U1.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Xk(this.persistence,new Gk,e.initialUser,this.serializer)}Ga(e){return new qk(lp.Zr,this.serializer)}Wa(e){return new r1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class bh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ry(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z1.bind(null,this.syncEngine),await T1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x1}()}createDatastore(e){const n=Ju(e.databaseInfo.databaseId),r=function(i){return new a1(i)}(e.databaseInfo);return function(i,o,l,u){return new c1(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new h1(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>ry(this.syncEngine,n,0),function(){return Jv.D()?new Jv:new s1}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new k1(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ga(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bh.provider={build:()=>new bh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Y(s),l={documents:i.map(p=>mu(o.serializer,p))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,de.emptyPath(),l,i.length),d=new Map;u.forEach(p=>{const g=wk(o.serializer,p);d.set(g.key.toString(),g)});const f=[];return i.forEach(p=>{const g=d.get(p.toString());se(!!g),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=H.fromPath(r);this.mutations.push(new pI(s,this.precondition(s)))}),await async function(r,s){const i=Y(r),o={writes:s.map(l=>TI(i.serializer,l))};await i.Mo("Commit",i.serializer.databaseId,de.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K();n=Q.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Q.min())?ut.exists(!1):ut.updateTime(n):ut.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Q.min()))throw new z(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(n)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new cp(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new q1(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!fa(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!mI(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=$E.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=gp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function fd(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await RI(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await G1(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Zv(e.remoteStore,s)),t._onlineComponents=e}async function G1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await fd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),await fd(t,new vu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await fd(t,new vu);return t._offlineComponents}async function _p(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await iy(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await iy(t,new bh))),t._onlineComponents}function Q1(t){return _p(t).then(e=>e.syncEngine)}function QI(t){return _p(t).then(e=>e.datastore)}async function XI(t){const e=await _p(t),n=e.eventManager;return n.onListen=j1.bind(null,e.syncEngine),n.onUnlisten=O1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V1.bind(null,e.syncEngine),n}function X1(t,e,n={}){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new GI({next:g=>{f.Za(),o.enqueueAndForget(()=>MI(i,p));const y=g.docs.has(l);!y&&g.fromCache?d.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?d.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new FI(ep(l.path),f,{includeMetadataChanges:!0,_a:!0});return LI(i,p)}(await XI(t),t.asyncQueue,e,n,r)),r.promise}function Y1(t,e,n={}){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new GI({next:g=>{f.Za(),o.enqueueAndForget(()=>MI(i,p)),g.fromCache&&u.source==="server"?d.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new FI(l,f,{includeMetadataChanges:!0,_a:!0});return LI(i,p)}(await XI(t),t.asyncQueue,e,n,r)),r.promise}function J1(t,e,n){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await QI(t);r.resolve(async function(o,l,u){var d;const f=Y(o),{request:p,ut:g,parent:y}=Sk(f.serializer,KP(l),u);f.connection.Fo||delete p.parent;const x=(await f.Lo("RunAggregationQuery",f.serializer.databaseId,y,p,1)).filter(P=>!!P.result);se(x.length===1);const N=(d=x[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(N).reduce((P,v)=>(P[g[v]]=N[v],P),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e,n){if(!n)throw new z(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z1(t,e,n,r){if(e===!0&&r===!0)throw new z(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ay(t){if(!H.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ly(t){if(H.isDocumentKey(t))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tc(t);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ej(t,e){if(e<=0)throw new z(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mP;switch(r.type){case"firstParty":return new _P(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=oy.get(n);r&&(q("ComponentProvider","Removing Datastore"),oy.delete(n),r.terminate())}(this),Promise.resolve()}}function tj(t,e,n,r={}){var s;const i=(t=qt(t,nc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=at.MOCK_USER;else{l=Xw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(d)}t._authCredentials=new gP(new zE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qn(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class Ir extends qn{constructor(e,n,r){super(e,n,ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new H(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function _e(t,e,...n){if(t=Ne(t),JI("collection","path",e),t instanceof nc){const r=de.fromString(e,...n);return ly(r),new Ir(t,null,r)}{if(!(t instanceof dt||t instanceof Ir))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return ly(r),new Ir(t.firestore,null,r)}}function be(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=$E.newId()),JI("doc","path",e),t instanceof nc){const r=de.fromString(e,...n);return ay(r),new dt(t,null,new H(r))}{if(!(t instanceof dt||t instanceof Ir))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return ay(r),new dt(t.firestore,t instanceof Ir?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cp(this,"async_queue_retry"),this.Vu=()=>{const r=hd();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ha(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Un("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=mp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&K()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Lr extends nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new cy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cy(e),this._firestoreClient=void 0,await e}}}function nj(t,e){const n=typeof t=="object"?t:zu(),r=typeof t=="string"?t:"(default)",s=Bu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Kw("firestore");i&&tj(s,...i)}return s}function ya(t){if(t._terminated)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rj(t),t._firestoreClient}function rj(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new bP(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,YI(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new K1(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class ij{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(Ze.fromBase64String(e))}catch(n){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ps(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=/^__.*__$/;class aj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class ZI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function eT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Ip{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eT(this.Cu)&&oj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ju(e)}Qu(e,n,r,s=!1){return new Ip({Cu:e,methodName:n,qu:r,path:Ge.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xi(t){const e=t._freezeSettings(),n=Ju(t._databaseId);return new lj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tp(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Ap("Data must be an object, but it was:",o,r);const l=sT(r,o);let u,d;if(i.merge)u=new Pt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=Dh(e,p,n);if(!o.contains(g))throw new z(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);oT(f,g)||f.push(g)}u=new Pt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new aj(new vt(l),u,d)}class rc extends wa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rc}}class Sp extends wa{_toFieldTransform(e){return new dI(e.path,new Qo)}isEqual(e){return e instanceof Sp}}class xp extends wa{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Jo(e.serializer,oI(e.serializer,this.$u));return new dI(e.path,n)}isEqual(e){return e instanceof xp&&this.$u===e.$u}}function tT(t,e,n,r){const s=t.Qu(1,e,n);Ap("Data must be an object, but it was:",s,r);const i=[],o=vt.empty();_s(r,(u,d)=>{const f=Np(e,u,n);d=Ne(d);const p=s.Nu(f);if(d instanceof rc)i.push(f);else{const g=Ea(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Pt(i);return new ZI(o,l,s.fieldTransforms)}function nT(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Dh(e,r,n)],u=[s];if(i.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Dh(e,i[g])),u.push(i[g+1]);const d=[],f=vt.empty();for(let g=l.length-1;g>=0;--g)if(!oT(d,l[g])){const y=l[g];let x=u[g];x=Ne(x);const N=o.Nu(y);if(x instanceof rc)d.push(y);else{const P=Ea(x,N);P!=null&&(d.push(y),f.set(y,P))}}const p=new Pt(d);return new ZI(f,p,o.fieldTransforms)}function rT(t,e,n,r=!1){return Ea(n,t.Qu(r?4:3,e))}function Ea(t,e){if(iT(t=Ne(t)))return Ap("Unsupported field value:",e,t),sT(t,e);if(t instanceof wa)return function(r,s){if(!eT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Ea(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:pu(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pu(s.serializer,i)}}if(r instanceof wp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ps)return{bytesValue:_I(s.serializer,r._byteString)};if(r instanceof dt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:op(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ep)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return np(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${tc(r)}`)}(t,e)}function sT(t,e){const n={};return WE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(t,(r,s)=>{const i=Ea(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function iT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof wp||t instanceof ps||t instanceof dt||t instanceof wa||t instanceof Ep)}function Ap(t,e,n){if(!iT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=tc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Dh(t,e,n){if((e=Ne(e))instanceof _a)return e._internalPath;if(typeof e=="string")return Np(t,e);throw yu("Field path arguments must be of type string or ",t,!1,void 0,n)}const uj=new RegExp("[~\\*/\\[\\]]");function Np(t,e,n){if(e.search(uj)>=0)throw yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _a(...e.split("."))._internalPath}catch{throw yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(L.INVALID_ARGUMENT,l+t+u)}function oT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cj extends Zo{data(){return super.data()}}function sc(t,e){return typeof e=="string"?Np(t,e):e instanceof _a?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class ic extends Rp{}function $e(t,e,...n){let r=[];e instanceof Rp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Cp).length,l=i.filter(u=>u instanceof oc).length;if(o>1||o>0&&l>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class oc extends ic{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oc(e,n,r)}_apply(e){const n=this._parse(e);return aT(e._query,n),new qn(e.firestore,e.converter,Ah(e._query,n))}_parse(e){const n=xi(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){hy(p,f);const y=[];for(const x of p)y.push(dy(u,i,x));g={arrayValue:{values:y}}}else g=dy(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||hy(p,f),g=rT(l,o,p,f==="in"||f==="not-in");return Ve.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ct(t,e,n){const r=e,s=sc("where",t);return oc._create(s,r,n)}class Cp extends Rp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)aT(o,u),o=Ah(o,u)}(e._query,n),new qn(e.firestore,e.converter,Ah(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pp extends ic{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(i,o)}(e._query,this._field,this._direction);return new qn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ws(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Mr(t,e="asc"){const n=e,r=sc("orderBy",t);return Pp._create(r,n)}class kp extends ic{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kp(e,n,r)}_apply(e){return new qn(e.firestore,e.converter,fu(e._query,this._limit,this._limitType))}}function hj(t){return ej("limit",t),kp._create("limit",t,"F")}class jp extends ic{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jp(e,n,r)}_apply(e){const n=pj(e,this.type,this._docOrFields,this._inclusive);return new qn(e.firestore,e.converter,function(s,i){return new ws(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function fj(...t){return jp._create("startAfter",t,!1)}function pj(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof Zo)return function(i,o,l,u,d){if(!u)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const p of Ys(i))if(p.field.isKeyField())f.push(hu(o,u.key));else{const g=u.data.field(p.field);if(Hu(g))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const y=p.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}f.push(g)}return new di(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=xi(t.firestore);return function(o,l,u,d,f,p){const g=o.explicitOrderBy;if(f.length>g.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let x=0;x<f.length;x++){const N=f[x];if(g[x].field.isKeyField()){if(typeof N!="string")throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof N}`);if(!tp(o)&&N.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${N}' contains a slash.`);const P=o.path.child(de.fromString(N));if(!H.isDocumentKey(P))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const v=new H(P);y.push(hu(l,v))}else{const P=rT(u,d,N);y.push(P)}}return new di(y,p)}(t._query,t.firestore._databaseId,s,e,n,r)}}function dy(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tp(e)&&n.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!H.isDocumentKey(r))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hu(t,new H(r))}if(n instanceof dt)return hu(t,n._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tc(n)}.`)}function hy(t,e){if(!Array.isArray(t)||t.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lT{convertValue(e,n="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _s(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new Ep(i)}convertGeoPoint(e){return new wp(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);se(NI(r));const s=new Ho(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class mj extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function gj(){return new sj("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dp extends Zo{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kl extends Dp{data(e={}){return super.data(e)}}class vj{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Bs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kl(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new kl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new kl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:yj(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){t=qt(t,dt);const e=qt(t.firestore,Lr);return X1(ya(e),t._key).then(n=>wj(e,t,n))}class ac extends lT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function Qe(t){t=qt(t,qn);const e=qt(t.firestore,Lr),n=ya(e),r=new ac(e);return dj(t._query),Y1(n,t._query).then(s=>new vj(e,r,t,s))}function _j(t,e,n){t=qt(t,dt);const r=qt(t.firestore,Lr),s=bp(t.converter,e,n);return Op(r,[Tp(xi(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ut.none())])}function pi(t,e,n,...r){t=qt(t,dt);const s=qt(t.firestore,Lr),i=xi(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof _a?nT(i,"updateDoc",t._key,e,n,r):tT(i,"updateDoc",t._key,e),Op(s,[o.toMutation(t._key,ut.exists(!0))])}function mi(t,e){const n=qt(t.firestore,Lr),r=be(t),s=bp(t.converter,e);return Op(n,[Tp(xi(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function Op(t,e){return function(r,s){const i=new sn;return r.asyncQueue.enqueueAndForget(async()=>L1(await Q1(r),s,i)),i.promise}(ya(t),e)}function wj(t,e,n){const r=n.docs.get(e._key),s=new ac(t);return new Dp(t,s,e._key,r,new Bs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){return Ej(t,{count:gj()})}function Ej(t,e){const n=qt(t.firestore,Lr),r=ya(n),s=kP(e,(i,o)=>new uk(o,i.aggregateType,i._internalFieldPath));return J1(r,t._query,s).then(i=>function(l,u,d){const f=new ac(l);return new ij(u,f,d)}(n,t,i))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={maxAttempts:5};function Gi(t,e){if((t=Ne(t)).firestore!==e)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=xi(n)}get(n){const r=Gi(n,this._firestore),s=new mj(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return K();const o=i[0];if(o.isFoundDocument())return new Zo(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new Zo(this._firestore,s,r._key,null,r.converter);throw K()})}set(n,r,s){const i=Gi(n,this._firestore),o=bp(i.converter,r,s),l=Tp(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,l),this}update(n,r,s,...i){const o=Gi(n,this._firestore);let l;return l=typeof(r=Ne(r))=="string"||r instanceof _a?nT(this._dataReader,"Transaction.update",o._key,r,s,i):tT(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=Gi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Gi(e,this._firestore),r=new ac(this._firestore);return super.get(e).then(s=>new Dp(this._firestore,r,n._key,s._document,new Bs(!1,!1),n.converter))}}function Sj(t,e,n){t=qt(t,Lr);const r=Object.assign(Object.assign({},Ij),n);return function(i){if(i.maxAttempts<1)throw new z(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const u=new sn;return i.asyncQueue.enqueueAndForget(async()=>{const d=await QI(i);new H1(i.asyncQueue,d,l,o,u).au()}),u.promise}(ya(t),s=>e(new Tj(t,s)),r)}function Jt(){return new Sp("serverTimestamp")}function uT(t){return new xp("increment",t)}(function(e,n=!0){(function(s){Ii=s})(ys),ls(new xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Lr(new vP(r.getProvider("auth-internal")),new EP(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pn(Cv,"4.7.3",e),pn(Cv,"4.7.3","esm2017")})();var xj="firebase",Aj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(xj,Aj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="firebasestorage.googleapis.com",Nj="storageBucket",Rj=2*60*1e3,Cj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends wn{constructor(e,n,r=0){super(pd(e),`Firebase Storage: ${n} (${pd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,En.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _n;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_n||(_n={}));function pd(t){return"storage/"+t}function Pj(){const t="An unknown error occurred, please check the error payload for server response.";return new En(_n.UNKNOWN,t)}function kj(){return new En(_n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jj(){return new En(_n.CANCELED,"User canceled the upload/download.")}function bj(t){return new En(_n.INVALID_URL,"Invalid URL '"+t+"'.")}function Dj(t){return new En(_n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fy(t){return new En(_n.INVALID_ARGUMENT,t)}function dT(){return new En(_n.APP_DELETED,"The Firebase app was deleted.")}function Oj(t){return new En(_n.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=en.makeFromUrl(e,n)}catch{return new en(e,"")}if(r.path==="")return r;throw Dj(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),x={bucket:1,path:3},N=n===cT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",v=new RegExp(`^https?://${N}/${s}/${P}`,"i"),T=[{regex:l,indices:u,postModify:i},{regex:y,indices:x,postModify:d},{regex:v,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<T.length;k++){const D=T[k],M=D.regex.exec(e);if(M){const R=M[D.indices.bucket];let w=M[D.indices.path];w||(w=""),r=new en(R,w),D.postModify(r);break}}if(r==null)throw bj(e);return r}}class Vj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...P){d||(d=!0,e.apply(null,P))}function p(P){s=setTimeout(()=>{s=null,t(y,u())},P)}function g(){i&&clearTimeout(i)}function y(P,...v){if(d){g();return}if(P){g(),f.call(null,P,...v);return}if(u()||o){g(),f.call(null,P,...v);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,p(T)}let x=!1;function N(P){x||(x=!0,g(),!d&&(s!==null?(P||(l=2),clearTimeout(s),p(0)):P||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function Mj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t){return t!==void 0}function py(t,e,n,r){if(r<e)throw fy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fy(`Invalid value for '${t}'. Expected ${n} or less.`)}function Uj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var _u;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_u||(_u={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,s,i,o,l,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,x)=>{this.resolve_=y,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new cl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===_u.NO_ERROR,u=i.getStatus();if(!l||Bj(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===_u.ABORT;r(!1,new cl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new cl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Fj(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=Pj();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?dT():jj();o(u)}else{const u=kj();o(u)}};this.canceled_?n(!1,new cl(!1,null,!0)):this.backoffId_=Lj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Mj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $j(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Wj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Kj(t,e,n,r,s,i,o=!0){const l=Uj(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return qj(d,e),$j(d,n),Wj(d,i),Hj(d,r),new zj(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Qj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this._service=e,n instanceof en?this._location=n:this._location=en.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wu(e,n)}get root(){const e=new en(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qj(this._location.path)}get storage(){return this._service}get parent(){const e=Gj(this._location.path);if(e===null)return null;const n=new en(this._location.bucket,e);return new wu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Oj(e)}}function my(t,e){const n=e==null?void 0:e[Nj];return n==null?null:en.makeFromBucketSpec(n,t)}function Xj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Xw(s,t.app.options.projectId))}class Yj{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=cT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Rj,this._maxUploadRetryTime=Cj,this._requests=new Set,s!=null?this._bucket=en.makeFromBucketSpec(s,this._host):this._bucket=my(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=en.makeFromBucketSpec(this._url,e):this._bucket=my(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){py("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Vj(dT());{const o=Kj(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const gy="@firebase/storage",vy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="storage";function Jj(t=zu(),e){t=Ne(t);const r=Bu(t,hT).getImmediate({identifier:e}),s=Kw("storage");return s&&Zj(r,...s),r}function Zj(t,e,n,r={}){Xj(t,e,n,r)}function eb(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Yj(n,r,s,e,ys)}function tb(){ls(new xr(hT,eb,"PUBLIC").setMultipleInstances(!0)),pn(gy,vy,""),pn(gy,vy,"esm2017")}tb();const _o={apiKey:"AIzaSyCWZYQhVFQIE_36SciDNuaDsSV3cA_VAhg",authDomain:"finenproc-ag.firebaseapp.com",projectId:"finenproc-ag",storageBucket:"finenproc-ag.firebasestorage.app",messagingSenderId:"342590603143",appId:"1:342590603143:web:41684e65fb75b5845b9d22"},Vp=Zw().length?zu():Vf(_o),or=OE(Vp),Z=nj(Vp),nb=Jj(Vp),yy="provisioning",rb=()=>Zw().find(e=>e.name===yy)||Vf(_o,yy),sb=()=>OE(rb());try{const t=Object.entries(_o).filter(([e,n])=>!n).map(([e])=>e);t.length&&console.warn("Firebase env variables missing:",t),console.log("Firebase initialized",{projectId:_o.projectId,authDomain:_o.authDomain,hasAuth:!!or,hasDb:!!Z,hasStorage:!!nb})}catch(t){console.warn("Firebase init debug failed:",t)}function fT(){const[t,e]=j.useState(!0),[n,r]=j.useState(!1),[s,i]=j.useState(null);return j.useEffect(()=>{const o=nC(or,async l=>{var u,d;if(e(!0),!l){i(null),r(!1),e(!1);return}try{const f=l.uid,p=be(Z,"users",f),g=await yn(p),y=(u=g==null?void 0:g.data())==null?void 0:u.role,x=(d=g==null?void 0:g.data())==null?void 0:d.status;console.log("ADMIN AUTH CHECK",{uid:f,userExists:g.exists(),role:y,status:x});const N=!!(g.exists()&&y==="admin"&&x==="active");r(N),i({uid:f,email:l.email,role:y,status:x})}catch(f){console.error("useAdminAuth error",f),r(!1),i(null)}finally{e(!1)}});return()=>o()},[]),{loading:t,isAdmin:n,user:s}}function ib(){const t=({to:e,children:n,disabled:r,icon:s})=>r?c.jsxs("div",{className:"sidebar-item disabled",children:[s&&c.jsx("span",{className:"sidebar-icon",children:s}),n]}):c.jsxs(EA,{to:e,className:({isActive:i})=>i?"sidebar-item active":"sidebar-item",children:[s&&c.jsx("span",{className:"sidebar-icon",children:s}),n]});return c.jsxs("aside",{className:"admin-sidebar",children:[c.jsx("div",{className:"brand",children:"FINENPROC"}),c.jsxs("nav",{children:[c.jsx(t,{to:"/admin",icon:"",children:"Panel"}),c.jsx(t,{to:"/admin/usuarios",icon:"",children:"Usuarios"}),c.jsx("div",{className:"nav-section-title",children:"Operaciones"}),c.jsx(t,{to:"/admin/operaciones/recargas",icon:"",children:"Recargas"}),c.jsx(t,{to:"/admin/operaciones/retiros",icon:"",children:"Retiros"}),c.jsx(t,{to:"/admin/operaciones/inversiones",icon:"",children:"Inversiones"}),c.jsx("div",{className:"nav-section-title",children:"Otros"}),c.jsx(t,{to:"/admin/proyectos",icon:"",children:"Proyectos"}),c.jsx(t,{disabled:!0,icon:"",children:"Configuracin"})]}),c.jsx("div",{className:"sidebar-footer",children:"Admin Panel"})]})}function ob({admin:t}){const e=Wn(),n=async()=>{try{await ts(or),e("/")}catch(r){console.error("Logout error",r)}};return c.jsxs("header",{className:"admin-header",children:[c.jsx("div",{className:"header-left",children:c.jsxs("h1",{children:[c.jsx("span",{className:"header-title-main",children:"FINENPROC"}),c.jsx("span",{className:"header-title-badge",children:"ADMIN"})]})}),c.jsxs("div",{className:"header-right",children:[(t==null?void 0:t.email)&&c.jsx("div",{className:"admin-email",children:t.email}),c.jsx("button",{className:"btn-ghost",onClick:n,children:"Cerrar sesin"})]})]})}function Wr({children:t,admin:e}){return c.jsxs("div",{className:"admin-root",children:[c.jsx(ib,{}),c.jsxs("div",{className:"admin-main",children:[c.jsx(ob,{admin:e}),c.jsx("main",{className:"admin-content",children:t})]})]})}function ab({title:t,children:e,className:n=""}){return c.jsxs("div",{className:"card "+n,children:[t&&c.jsx("div",{className:"card-title",children:t}),c.jsx("div",{className:"card-body",children:e})]})}function lb(){const[t,e]=j.useState({totalUsers:0,activeUsers:0,pendingTopups:0,approvedTopups:0,rejectedTopups:0,totalTopups:0,pendingWithdrawals:0,activeInvestments:0,totalInvested:0,recentTransactions:[]}),[n,r]=j.useState(!0),[s,i]=j.useState(null),o=async()=>{try{r(!0),i(null);const d=(await Qe(_e(Z,"users"))).docs.map(C=>C.data()),f=d.length,p=d.filter(C=>C.status==="active").length,y=(await Qe(_e(Z,"topups"))).docs.map(C=>C.data()),x=y.filter(C=>C.status==="pending").length,N=y.filter(C=>C.status==="approved").length,P=y.filter(C=>C.status==="rejected").length,v=y.length,k=(await Qe(_e(Z,"withdrawals"))).docs.map(C=>C.data()).filter(C=>C.status==="pending").length,D=$e(_e(Z,"investments"),ct("status","==","active")),R=(await Qe(D)).docs.map(C=>C.data()),w=R.length,S=R.reduce((C,ie)=>C+(ie.amount||0),0),_=$e(_e(Z,"transactions"),Mr("createdAt","desc")),b=(await Qe(_)).docs.slice(0,10).map(C=>({id:C.id,...C.data()}));e({totalUsers:f,activeUsers:p,pendingTopups:x,approvedTopups:N,rejectedTopups:P,totalTopups:v,pendingWithdrawals:k,activeInvestments:w,totalInvested:S,recentTransactions:b})}catch(u){console.error("Error en useDashboardKPIs:",u),i(u.message)}finally{r(!1)}};return j.useEffect(()=>{o()},[]),{kpis:t,loading:n,error:s,refetch:()=>o()}}function ub({children:t,variant:e="default"}){return c.jsx("span",{className:"badge badge-"+e,children:t})}function cb({open:t,onClose:e,children:n}){return t?c.jsx("div",{className:"modal-backdrop",onClick:e,children:c.jsx("div",{className:"modal",onClick:r=>r.stopPropagation(),children:n})}):null}const db=async(t={})=>{var e;try{const n=[Mr("createdAt","desc")];t.status&&n.unshift(ct("status","==",t.status)),t.userId&&n.unshift(ct("userId","==",t.userId));const r=$e(_e(Z,"topups"),...n),s=await Qe(r),i=[];for(const o of s.docs){const l=o.data();let u=null;if(l.userId){const f=be(Z,"users",l.userId),p=await yn(f);p.exists()&&(u={uid:p.id,email:p.data().email,displayName:p.data().displayName||"Sin nombre"})}let d=null;if(l.methodId){const f=be(Z,"rechargeMethods",l.methodId),p=await yn(f);p.exists()&&(d={id:p.id,name:p.data().name,icon:p.data().icon})}i.push({topupId:o.id,id:o.id,amount:l.amount,status:l.status,createdAt:(e=l.createdAt)==null?void 0:e.toDate(),user:u,method:d,receiptUrl:l.receiptUrl,userId:l.userId,methodId:l.methodId})}return{success:!0,data:i}}catch(n){return console.error("Error fetching topups:",n),{success:!1,error:n.message}}},hb=()=>{const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,i]=j.useState({status:"",searchQuery:""}),[o,l]=j.useState(!0),[u,d]=j.useState(null);return j.useEffect(()=>{(async()=>{l(!0),d(null);const g=await db({});g.success?e(g.data||[]):(e([]),d(g.error||"Error al cargar recargas")),l(!1)})()},[]),j.useEffect(()=>{let p=t;if(s.status&&(p=p.filter(g=>g.status===s.status)),s.searchQuery.trim()){const g=s.searchQuery.toLowerCase();p=p.filter(y=>{var x,N,P,v;return((N=(x=y.user)==null?void 0:x.email)==null?void 0:N.toLowerCase().includes(g))||((v=(P=y.user)==null?void 0:P.displayName)==null?void 0:v.toLowerCase().includes(g))})}r(p)},[t,s.status,s.searchQuery]),{allTopups:t,topups:n,filters:s,setFilters:{status:p=>i(g=>({...g,status:p})),searchQuery:p=>{i(g=>({...g,searchQuery:p}))}},loading:o,error:u}};function fb(){var x,N,P;const[t,e]=j.useState(null),{allTopups:n,topups:r,filters:s,setFilters:i,loading:o,error:l}=hb(),u=s.status?s.status:"all",d=[{value:"all",label:"Todas",count:n.length},{value:"pending",label:"Pendientes",count:n.filter(v=>v.status==="pending").length},{value:"approved",label:"Aprobadas",count:n.filter(v=>v.status==="approved").length},{value:"rejected",label:"Rechazadas",count:n.filter(v=>v.status==="rejected").length}],f=v=>{const I={pending:{variant:"pending",label:"Pendiente"},approved:{variant:"success",label:"Aprobada"},rejected:{variant:"rejected",label:"Rechazada"}},T=I[v]||I.pending;return c.jsx(ub,{variant:T.variant,children:T.label})},p=v=>new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v),g=v=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(v),y=(filter==="all",r);return c.jsxs("div",{className:"admin-topups",children:[c.jsx("div",{className:"topups-header",children:c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Gestin de Recargas"}),c.jsx("p",{className:"page-subtitle",children:"Administra y revisa todas las solicitudes de recarga"})]})}),c.jsx("div",{className:"topups-filters",children:d.map(v=>c.jsxs("button",{className:`filter-btn ${u===v.value?"active":""}`,onClick:()=>i.status(v.value==="all"?"":v.value),children:[v.label,c.jsx("span",{className:"filter-count",children:v.count})]},v.value))}),c.jsx(ab,{className:"topups-table-card",children:o?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("div",{className:"empty-state-title",children:"Cargando recargas"}),c.jsx("div",{className:"empty-state-text",children:"Obteniendo datos de Firestore"})]}):l?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("div",{className:"empty-state-title",children:"Error al cargar"}),c.jsx("div",{className:"empty-state-text",children:l})]}):y.length>0?c.jsx("div",{className:"table-wrap",children:c.jsxs("table",{className:"table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Usuario"}),c.jsx("th",{children:"Mtodo"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"}),c.jsx("th",{children:"Acciones"})]})}),c.jsx("tbody",{children:y.map(v=>{var I,T,k,D,M,R;return c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"user-cell",children:[c.jsx("div",{className:"user-avatar",children:(((I=v.user)==null?void 0:I.displayName)||((T=v.user)==null?void 0:T.email)||"U")[0]}),c.jsxs("div",{children:[c.jsx("div",{className:"user-name",children:((k=v.user)==null?void 0:k.displayName)||"Sin nombre"}),c.jsx("div",{className:"user-email",children:((D=v.user)==null?void 0:D.email)||"Email no disponible"})]})]})}),c.jsx("td",{children:c.jsxs("div",{className:"method-cell",children:[c.jsx("span",{className:"method-icon",children:((M=v.method)==null?void 0:M.icon)||""}),((R=v.method)==null?void 0:R.name)||"Mtodo no disponible"]})}),c.jsx("td",{className:"amount-cell",children:g(v.amount)}),c.jsx("td",{children:f(v.status)}),c.jsx("td",{className:"date-cell",children:p(v.createdAt||new Date)}),c.jsx("td",{children:c.jsx("button",{className:"btn-ghost btn-sm",onClick:()=>e(v),children:"Ver detalles"})})]},v.id)})})]})}):c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("div",{className:"empty-state-title",children:"No hay recargas"}),c.jsx("div",{className:"empty-state-text",children:"No se encontraron recargas con el filtro seleccionado"})]})}),t&&c.jsxs(cb,{open:!!t,onClose:()=>e(null),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{className:"modal-title",children:"Detalles de Recarga"}),c.jsx("button",{className:"modal-close",onClick:()=>e(null),children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"ID de transaccin"}),c.jsx("span",{className:"detail-value",children:t.id})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Usuario"}),c.jsx("span",{className:"detail-value",children:((x=t.user)==null?void 0:x.displayName)||"Sin nombre"})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Email"}),c.jsx("span",{className:"detail-value",children:((N=t.user)==null?void 0:N.email)||"Email no disponible"})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Monto"}),c.jsx("span",{className:"detail-value",children:g(t.amount)})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Mtodo"}),c.jsx("span",{className:"detail-value",children:((P=t.method)==null?void 0:P.name)||"Mtodo no disponible"})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Estado"}),c.jsx("span",{className:"detail-value",children:f(t.status)})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Fecha"}),c.jsx("span",{className:"detail-value",children:p(t.createdAt||new Date)})]})]}),c.jsx("div",{className:"modal-footer",children:c.jsx("button",{className:"btn btn-secondary",onClick:()=>e(null),children:"Cerrar"})})]})]})}function pb(){return c.jsxs("div",{className:"admin-not-authorized",children:[c.jsx("h2",{children:"No Autorizado"}),c.jsx("p",{children:"No tienes permiso para acceder al rea de administracin."}),c.jsxs("p",{children:[c.jsx(Fo,{to:"/login",children:"Ir a Login"})," o ",c.jsx(Fo,{to:"/register",children:"Registrarse"})]})]})}function mb(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(null),[o,l]=j.useState(!1),u=Wn(),d=async g=>{const y=be(Z,"users",g.uid),x=await yn(y);if(!x.exists())throw await ts(or),new Error("Perfil de usuario no encontrado en Firestore");const{role:N,status:P}=x.data();if(N!=="admin")throw await ts(or),new Error("No tienes permisos de administrador");if(P!=="active")throw await ts(or),new Error("Tu cuenta no est activa");u("/admin",{replace:!0}),console.log(" Login exitoso:",{uid:g.uid,role:N,status:P})},f=async g=>{g.preventDefault(),l(!0),i(null);try{const y=await ZR(or,t.trim(),n);await d(y.user)}catch(y){i(y.message),console.error("Error en login:",y)}finally{l(!1)}},p=async()=>{l(!0),i(null);try{const g=new An,y=await TC(or,g);await d(y.user)}catch(g){i(g.message),console.error("Error en login Google:",g)}finally{l(!1)}};return c.jsx("div",{className:"auth-wrap",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("h1",{className:"auth-title",children:"Iniciar Sesin (Admin)"}),c.jsx("p",{className:"auth-subtitle",children:"Accede con tus credenciales de administrador"}),c.jsxs("form",{onSubmit:f,className:"auth-form",children:[c.jsxs("label",{children:[c.jsx("span",{children:"Email"}),c.jsx("input",{type:"email",value:t,onChange:g=>e(g.target.value),required:!0})]}),c.jsxs("label",{children:[c.jsx("span",{children:"Contrasea"}),c.jsx("input",{type:"password",value:n,onChange:g=>r(g.target.value),required:!0})]}),s&&c.jsx("div",{className:"auth-error",children:s}),c.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Accediendo":"Iniciar Sesin"})]}),c.jsx("div",{className:"auth-divider",children:"o"}),c.jsx("button",{className:"btn btn-secondary",onClick:p,disabled:o,children:"Continuar con Google"}),c.jsx("div",{className:"auth-links",children:c.jsx(Fo,{to:"/register",children:"No tienes cuenta? Regstrate"})})]})})}function gb(){const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(null),[o,l]=j.useState(!1),[u,d]=j.useState(!1),f=Wn(),{loading:p,isAdmin:g}=fT(),y=async x=>{if(x.preventDefault(),p)return;if(!g){i("Solo un administrador puede crear cuentas de administrador. Inicia sesin como admin y vuelve a intentar.");return}l(!0),i(null),d(!1);let N=null;const P=sb();try{N=await JR(P,t.trim(),n);const v=N.user;console.log(" Usuario creado en Auth:",v.uid);try{await _j(be(Z,"users",v.uid),{uid:v.uid,email:v.email,role:"admin",status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log(" Documento Firestore creado exitosamente"),d(!0),await ts(P),setTimeout(()=>f("/admin",{replace:!0}),1500)}catch(I){console.error(" Error al crear documento Firestore:",I);try{await rC(v)}catch(T){console.error(" Error al eliminar usuario recin creado:",T)}throw await ts(P),new Error("Error al crear perfil en Firestore. Revisa permisos/reglas.")}}catch(v){console.error("Error en registro:",v),i(v.message||"Error desconocido en el registro"),await ts(P).catch(I=>console.error("Error en signOut provisioning:",I))}finally{l(!1)}};return c.jsx("div",{className:"auth-wrap",children:c.jsxs("div",{className:"auth-card",children:[c.jsx("h1",{className:"auth-title",children:"Registrar Cuenta (Admin)"}),c.jsx("p",{className:"auth-subtitle",children:"Crea una cuenta con rol de administrador"}),u&&c.jsx("div",{className:"auth-success",children:"Usuario admin registrado exitosamente! Sers redirigido..."}),c.jsxs("form",{onSubmit:y,className:"auth-form",children:[c.jsxs("label",{children:[c.jsx("span",{children:"Email"}),c.jsx("input",{type:"email",value:t,onChange:x=>e(x.target.value),required:!0})]}),c.jsxs("label",{children:[c.jsx("span",{children:"Contrasea"}),c.jsx("input",{type:"password",value:n,onChange:x=>r(x.target.value),required:!0})]}),s&&c.jsx("div",{className:"auth-error",children:s}),c.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,children:o?"Registrando":"Registrar"})]}),c.jsx("div",{className:"auth-links",children:c.jsx(Fo,{to:"/login",children:"Ya tienes cuenta? Inicia sesin"})})]})})}function vb(){const{kpis:t,loading:e}=lb();Wn();const n=s=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(s||0),r=s=>s?new Date(s).toLocaleDateString("es-MX",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-";return e?c.jsx("div",{className:"dashboard-loading",children:c.jsx("div",{children:"Cargando dashboard..."})}):c.jsxs("div",{className:"admin-dashboard-page",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"dashboard-title",children:"Panel de Administracin"}),c.jsx("p",{className:"dashboard-subtitle",children:"Resumen general del sistema"})]}),c.jsx("div",{className:"dashboard-meta",children:c.jsx("span",{className:"last-updated",children:"Actualizado: Hoy"})})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Usuarios"}),c.jsxs("div",{className:"kpi-grid kpi-grid-2",children:[c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Usuarios Totales"}),c.jsx("div",{className:"kpi-value",children:t.totalUsers})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Usuarios Activos"}),c.jsx("div",{className:"kpi-value",style:{color:"#22c55e"},children:t.activeUsers})]})]})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Recargas"}),c.jsxs("div",{className:"kpi-grid kpi-grid-3",children:[c.jsxs("div",{className:"kpi-card alert",children:[c.jsx("div",{className:"kpi-label",children:"Pendientes"}),c.jsx("div",{className:"kpi-value",style:{color:"#f59e0b"},children:t.pendingTopups})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Aprobadas"}),c.jsx("div",{className:"kpi-value",style:{color:"#22c55e"},children:t.approvedTopups})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Total"}),c.jsx("div",{className:"kpi-value",children:t.totalTopups})]})]})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Retiros"}),c.jsx("div",{className:"kpi-grid kpi-grid-1",children:c.jsxs("div",{className:"kpi-card alert",children:[c.jsx("div",{className:"kpi-label",children:"Retiros Pendientes"}),c.jsx("div",{className:"kpi-value",style:{color:"#f59e0b"},children:t.pendingWithdrawals})]})})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Inversiones"}),c.jsxs("div",{className:"kpi-grid kpi-grid-2",children:[c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Inversiones Activas"}),c.jsx("div",{className:"kpi-value",children:t.activeInvestments})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Capital Invertido"}),c.jsx("div",{className:"kpi-value-currency",children:n(t.totalInvested)})]})]})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Transacciones Recientes"}),c.jsx("div",{className:"transactions-card",children:t.recentTransactions.length>0?c.jsx("div",{className:"table-wrapper",children:c.jsxs("table",{className:"transactions-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Tipo"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Usuario"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:t.recentTransactions.map(s=>c.jsxs("tr",{children:[c.jsx("td",{children:c.jsx("span",{className:"tx-type",children:s.type||"transfer"})}),c.jsx("td",{className:"amount",children:n(s.amount)}),c.jsx("td",{className:"user-email",children:s.userEmail||"Usuario no disponible"}),c.jsx("td",{className:"date",children:r(s.createdAt)})]},s.id))})]})}):c.jsx("div",{className:"empty-state",children:"No hay transacciones recientes"})})]}),c.jsxs("div",{className:"kpi-section",children:[c.jsx("h2",{className:"section-title",children:" Alertas Operativas"}),c.jsxs("div",{className:"alerts-container",children:[t.pendingTopups>0&&c.jsxs("div",{className:"alert-item alert-warning",children:[c.jsx("span",{className:"alert-icon",children:""}),c.jsxs("span",{className:"alert-text",children:[t.pendingTopups," recarga(s) pendiente(s) de aprobacin"]})]}),t.pendingWithdrawals>0&&c.jsxs("div",{className:"alert-item alert-warning",children:[c.jsx("span",{className:"alert-icon",children:""}),c.jsxs("span",{className:"alert-text",children:[t.pendingWithdrawals," retiro(s) pendiente(s) de aprobacin"]})]}),t.activeInvestments>0&&c.jsxs("div",{className:"alert-item alert-info",children:[c.jsx("span",{className:"alert-icon",children:""}),c.jsxs("span",{className:"alert-text",children:[t.activeInvestments," inversin(es) activa(s) en el sistema"]})]}),t.pendingTopups===0&&t.pendingWithdrawals===0&&c.jsxs("div",{className:"alert-item alert-success",children:[c.jsx("span",{className:"alert-icon",children:""}),c.jsx("span",{className:"alert-text",children:"Sistema operativo. No hay operaciones pendientes."})]})]})]})]})}function yb(t={}){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(0),d=async()=>{try{s(!0),o(null);let p=[];t.status&&t.status!=="all"&&p.push(ct("status","==",t.status));const g=$e(_e(Z,"users"),...p,Mr("createdAt","desc")),x=(await Qe(g)).docs.map(P=>({uid:P.id,...P.data()}));let N=x;if(t.search){const P=t.search.toLowerCase();N=x.filter(v=>{var I,T;return((I=v.email)==null?void 0:I.toLowerCase().includes(P))||((T=v.displayName)==null?void 0:T.toLowerCase().includes(P))})}n(N),u(N.length)}catch(p){console.error("Error en useAdminUsers:",p),o(p.message)}finally{s(!1)}};return j.useEffect(()=>{d()},[t.status]),{users:e,loading:r,error:i,total:l,refetch:()=>d()}}function _b(t){const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState([]),[l,u]=j.useState([]),[d,f]=j.useState([]),[p,g]=j.useState([]),[y,x]=j.useState(!0),[N,P]=j.useState(null),v=async()=>{if(!t){x(!1);return}try{x(!0),P(null);const T=be(Z,"users",t),k=await yn(T);if(!k.exists()){P("Usuario no encontrado"),x(!1);return}n({uid:t,...k.data()});const D=be(Z,"users",t,"wallets",t),M=await yn(D);M.exists()&&s(M.data());const R=$e(_e(Z,"investments"),ct("userId","==",t)),w=await Qe(R);o(w.docs.map(fe=>({id:fe.id,...fe.data()})));const S=$e(_e(Z,"topups"),ct("userId","==",t)),_=await Qe(S);u(_.docs.map(fe=>({id:fe.id,...fe.data()})));const A=$e(_e(Z,"withdrawals"),ct("userId","==",t)),b=await Qe(A);f(b.docs.map(fe=>({id:fe.id,...fe.data()})));const C=$e(_e(Z,"transactions"),ct("userId","==",t)),ie=await Qe(C);g(ie.docs.map(fe=>({id:fe.id,...fe.data()})))}catch(T){console.error("Error en useUserDetail:",T),P(T.message)}finally{x(!1)}};return j.useEffect(()=>{v()},[t]),{user:e,wallet:r,investments:i,topups:l,withdrawals:d,transactions:p,loading:y,error:N,refetch:()=>v()}}function wb({users:t,loading:e,onSelectUser:n}){if(e)return c.jsx("div",{className:"usuarios-table-loading",children:c.jsx("div",{children:"Cargando usuarios..."})});if(t.length===0)return c.jsx("div",{className:"usuarios-table-empty",children:c.jsx("div",{children:"No hay usuarios encontrados"})});const r=s=>s?new Date(s).toLocaleDateString("es-MX"):"-";return c.jsx("div",{className:"usuarios-table-wrapper",children:c.jsxs("table",{className:"usuarios-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Email"}),c.jsx("th",{children:"Nombre"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Rol"}),c.jsx("th",{children:"Fecha Registro"}),c.jsx("th",{children:"Accin"})]})}),c.jsx("tbody",{children:t.map(s=>c.jsxs("tr",{className:"usuario-row",children:[c.jsx("td",{className:"email-cell",children:s.email}),c.jsx("td",{children:s.displayName||"-"}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${s.status}`,children:s.status==="active"?"Activo":"Inactivo"})}),c.jsx("td",{children:s.role||"investor"}),c.jsx("td",{children:r(s.createdAt)}),c.jsx("td",{children:c.jsx("button",{className:"btn-view-detail",onClick:()=>n(s.uid),children:"Ver detalle"})})]},s.uid))})]})})}function pT(){const[t,e]=j.useState(!1),[n,r]=j.useState(null);return{approve:async(i,o,l)=>{try{return e(!0),r(null),await Sj(Z,async u=>{const d=be(Z,"topups",i),f=await u.get(d);if(!f.exists())throw new Error("Topup no encontrado");const p=f.data(),g=p==null?void 0:p.status;if(g==="approved")return;if(g!=="pending")throw new Error(`No se puede aprobar un topup con status: ${g}`);const y=p==null?void 0:p.userId,x=Number(p==null?void 0:p.amount);if(!y)throw new Error("Topup invlido: falta userId");if(!Number.isFinite(x)||x<=0)throw new Error("Topup invlido: amount debe ser > 0");const N=be(Z,"users",y,"wallets",y);(await u.get(N)).exists()?u.update(N,{balance:uT(x),updatedAt:Jt()}):u.set(N,{uid:y,balance:x,createdAt:Jt(),updatedAt:Jt()}),u.update(d,{status:"approved",approvedAt:Jt(),approvedBy:o});const v=be(_e(Z,"auditLogs"));u.set(v,{action:"APPROVE_TOPUP",adminUid:o,adminEmail:l,targetUserId:y,targetId:i,status:"SUCCESS",metadata:{amount:x,topupId:i},timestamp:Jt()})}),console.log(" Recarga aprobada:",i),!0}catch(u){return console.error(" Error al aprobar recarga:",u),r((u==null?void 0:u.message)||String(u)),!1}finally{e(!1)}},loading:t,error:n}}function mT(){const[t,e]=j.useState(!1),[n,r]=j.useState(null);return{reject:async(i,o,l,u,d)=>{try{e(!0),r(null);const f=be(Z,"topups",i);return await pi(f,{status:"rejected",rejectedAt:new Date().toISOString(),rejectedBy:u,rejectionReason:l}),await mi(_e(Z,"auditLogs"),{action:"REJECT_TOPUP",adminUid:u,adminEmail:d,targetUserId:o,targetId:i,status:"SUCCESS",reason:l,timestamp:new Date().toISOString()}),console.log(" Recarga rechazada:",i),!0}catch(f){return console.error(" Error al rechazar recarga:",f),r(f.message),!1}finally{e(!1)}},loading:t,error:n}}function Lp({isOpen:t,title:e,message:n,actionLabel:r,onConfirm:s,onCancel:i,loading:o,showReasonInput:l,reasonPlaceholder:u}){const[d,f]=j.useState(""),p=()=>{if(l&&!d.trim()){alert("Por favor ingresa una razn");return}s(d),f("")};return t?c.jsx("div",{className:"action-modal-overlay",onClick:i,children:c.jsxs("div",{className:"action-modal",onClick:g=>g.stopPropagation(),children:[c.jsx("h2",{className:"action-modal-title",children:e}),c.jsx("p",{className:"action-modal-message",children:n}),l&&c.jsx("textarea",{className:"action-modal-textarea",placeholder:u||"Ingresa una razn...",value:d,onChange:g=>f(g.target.value),disabled:o}),c.jsxs("div",{className:"action-modal-footer",children:[c.jsx("button",{className:"btn-cancel",onClick:i,disabled:o,children:"Cancelar"}),c.jsx("button",{className:"btn-confirm",onClick:p,disabled:o,children:o?"Procesando...":r})]})]})}):null}function Eb({isOpen:t,user:e,wallet:n,investments:r,topups:s,withdrawals:i,transactions:o,loading:l,onClose:u,adminData:d,onActionComplete:f}){const[p,g]=j.useState("perfil"),[y,x]=j.useState(null),[N,P]=j.useState({isOpen:!1,type:null}),{approve:v,loading:I}=pT(),{reject:T,loading:k}=mT();if(!t)return null;const D=async S=>{if(!y)return;await v(y.id,d.uid,d.email)&&(P({isOpen:!1,type:null}),x(null),f==null||f())},M=async S=>{if(!y)return;await T(y.id,e.uid,S,d.uid,d.email)&&(P({isOpen:!1,type:null}),x(null),f==null||f())},R=S=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(S||0),w=S=>S?new Date(S).toLocaleDateString("es-MX"):"-";return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"usuario-detail-overlay",onClick:u}),c.jsxs("div",{className:"usuario-detail-drawer",children:[c.jsxs("div",{className:"drawer-header",children:[c.jsx("h2",{children:"Detalle de Usuario"}),c.jsx("button",{className:"btn-close",onClick:u,children:""})]}),l?c.jsx("div",{className:"drawer-loading",children:"Cargando detalle..."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"drawer-tabs",children:["perfil","wallet","inversiones","recargas","retiros","transacciones"].map(S=>c.jsx("button",{className:`tab-btn ${p===S?"active":""}`,onClick:()=>g(S),children:S.charAt(0).toUpperCase()+S.slice(1)},S))}),c.jsxs("div",{className:"drawer-content",children:[p==="perfil"&&e&&c.jsx("div",{className:"tab-pane",children:c.jsxs("div",{className:"info-group",children:[c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"Email:"}),c.jsx("span",{className:"info-value",children:e.email})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"Nombre:"}),c.jsx("span",{className:"info-value",children:e.displayName||"-"})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"Estado:"}),c.jsx("span",{className:`status-badge status-${e.status}`,children:e.status==="active"?"Activo":"Inactivo"})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"Rol:"}),c.jsx("span",{className:"info-value",children:e.role||"investor"})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"Fecha de Registro:"}),c.jsx("span",{className:"info-value",children:w(e.createdAt)})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"UID:"}),c.jsx("span",{className:"info-value uid-value",children:e.uid})]})]})}),p==="wallet"&&c.jsx("div",{className:"tab-pane",children:n?c.jsxs("div",{className:"info-group",children:[c.jsxs("div",{className:"wallet-card",children:[c.jsx("div",{className:"wallet-label",children:"Balance Actual"}),c.jsx("div",{className:"wallet-amount",children:R(n.balance)})]}),c.jsxs("div",{className:"info-row",children:[c.jsx("span",{className:"info-label",children:"ltima Actualizacin:"}),c.jsx("span",{className:"info-value",children:w(n.updatedAt)})]})]}):c.jsx("div",{className:"empty-state",children:"Sin informacin de wallet"})}),p==="inversiones"&&c.jsx("div",{className:"tab-pane",children:r.length>0?c.jsx("div",{className:"table-responsive",children:c.jsxs("table",{className:"mini-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"ID"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:r.map(S=>c.jsxs("tr",{children:[c.jsxs("td",{className:"id-cell",children:[S.id.substring(0,8),"..."]}),c.jsx("td",{children:R(S.amount)}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${S.status}`,children:S.status})}),c.jsx("td",{children:w(S.createdAt)})]},S.id))})]})}):c.jsx("div",{className:"empty-state",children:"Sin inversiones"})}),p==="recargas"&&c.jsx("div",{className:"tab-pane",children:s.length>0?c.jsx("div",{className:"table-responsive",children:c.jsxs("table",{className:"mini-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"}),c.jsx("th",{children:"Accin"})]})}),c.jsx("tbody",{children:s.map(S=>c.jsxs("tr",{children:[c.jsx("td",{children:R(S.amount)}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${S.status}`,children:S.status})}),c.jsx("td",{children:w(S.createdAt)}),c.jsx("td",{children:S.status==="pending"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn-action btn-approve",onClick:()=>{x(S),P({isOpen:!0,type:"approve"})},children:""}),c.jsx("button",{className:"btn-action btn-reject",onClick:()=>{x(S),P({isOpen:!0,type:"reject"})},children:""})]})})]},S.id))})]})}):c.jsx("div",{className:"empty-state",children:"Sin recargas"})}),p==="retiros"&&c.jsx("div",{className:"tab-pane",children:i.length>0?c.jsx("div",{className:"table-responsive",children:c.jsxs("table",{className:"mini-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:i.map(S=>c.jsxs("tr",{children:[c.jsx("td",{children:R(S.amount)}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${S.status}`,children:S.status})}),c.jsx("td",{children:w(S.createdAt)})]},S.id))})]})}):c.jsx("div",{className:"empty-state",children:"Sin retiros"})}),p==="transacciones"&&c.jsx("div",{className:"tab-pane",children:o.length>0?c.jsx("div",{className:"table-responsive",children:c.jsxs("table",{className:"mini-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Tipo"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:o.map(S=>c.jsxs("tr",{children:[c.jsx("td",{children:S.type||"transfer"}),c.jsx("td",{children:R(S.amount)}),c.jsx("td",{children:w(S.createdAt)})]},S.id))})]})}):c.jsx("div",{className:"empty-state",children:"Sin transacciones"})})]})]})]}),c.jsx(Lp,{isOpen:N.isOpen,title:N.type==="approve"?"Aprobar Recarga":"Rechazar Recarga",message:`${N.type==="approve"?"Aprobar":"Rechazar"} recarga de ${y?R(y.amount):""}?`,actionLabel:N.type==="approve"?"Aprobar":"Rechazar",showReasonInput:N.type==="reject",reasonPlaceholder:"Razn del rechazo...",loading:I||k,onConfirm:N.type==="approve"?D:M,onCancel:()=>{P({isOpen:!1,type:null}),x(null)}})]})}function Ib({adminData:t}){const[e]=bf(),[n,r]=j.useState({status:"all",search:""}),[s,i]=j.useState(null),{users:o,loading:l,refetch:u}=yb(n),{user:d,wallet:f,investments:p,topups:g,withdrawals:y,transactions:x,loading:N,refetch:P}=_b(s),v=()=>{u(),P()};return j.useEffect(()=>{const I=e.get("uid");I&&i(I)},[e]),c.jsxs("div",{className:"usuarios-page",children:[c.jsx("div",{className:"page-header",children:c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Gestin de Usuarios"}),c.jsx("p",{className:"page-subtitle",children:"Administra todos los usuarios del sistema"})]})}),c.jsxs("div",{className:"usuarios-filters-section",children:[c.jsx("div",{className:"filter-group",children:c.jsx("input",{type:"text",placeholder:"Buscar por email o nombre...",className:"filter-input",value:n.search,onChange:I=>r({...n,search:I.target.value})})}),c.jsx("div",{className:"filter-group",children:c.jsxs("select",{className:"filter-select",value:n.status,onChange:I=>r({...n,status:I.target.value}),children:[c.jsx("option",{value:"all",children:"Todos los estados"}),c.jsx("option",{value:"active",children:"Activos"}),c.jsx("option",{value:"inactive",children:"Inactivos"})]})})]}),c.jsxs("div",{className:"usuarios-card",children:[c.jsx("div",{className:"card-header",children:c.jsxs("h3",{children:["Total de usuarios: ",o.length]})}),c.jsx(wb,{users:o,loading:l,onSelectUser:i})]}),c.jsx(Eb,{isOpen:!!s,user:d,wallet:f,investments:p,topups:g,withdrawals:y,transactions:x,loading:N,onClose:()=>i(null),adminData:t,onActionComplete:v})]})}function Tb(t={}){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(0),d=async()=>{try{s(!0),o(null);let p=[];t.status&&t.status!=="all"&&p.push(ct("status","==",t.status));const g=$e(_e(Z,"topups"),...p,Mr("createdAt","desc")),x=(await Qe(g)).docs.map(k=>({id:k.id,...k.data()})),N=k=>k?typeof k=="string"?k:k!=null&&k.toDate?k.toDate().toISOString():k instanceof Date?k.toISOString():null:null,P=[...new Set(x.map(k=>k.userId).filter(Boolean))],v=await Promise.all(P.map(async k=>{const D=await yn(be(Z,"users",k));return[k,D.exists()?D.data():null]})),I=Object.fromEntries(v),T=x.map(k=>{const D=I[k.userId]||null;return{...k,userEmail:k.userEmail||(D==null?void 0:D.email)||null,userName:k.userName||(D==null?void 0:D.displayName)||(D==null?void 0:D.fullName)||null,createdAt:N(k.createdAt)||k.createdAt}});n(T),u(T.length)}catch(p){console.error("Error en useAdminTopups:",p),o(p.message)}finally{s(!1)}};return j.useEffect(()=>{d()},[t.status]),{topups:e,loading:r,error:i,total:l,refetch:()=>d()}}function Sb({adminData:t}){const[e,n]=j.useState("all"),[r,s]=j.useState(null),[i,o]=j.useState({isOpen:!1,type:null}),{topups:l,loading:u,refetch:d}=Tb({status:e}),{approve:f,loading:p}=pT(),{reject:g,loading:y}=mT(),x=[{value:"all",label:"Todas"},{value:"pending",label:"Pendientes"},{value:"approved",label:"Aprobadas"},{value:"rejected",label:"Rechazadas"}],N=async()=>{if(!r)return;await f(r.id,t.uid,t.email)&&(o({isOpen:!1,type:null}),s(null),d())},P=async T=>{if(!r)return;await g(r.id,r.userId,T,t.uid,t.email)&&(o({isOpen:!1,type:null}),s(null),d())},v=T=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(T||0),I=T=>{if(!T)return"-";const k=T!=null&&T.toDate?T.toDate():new Date(T);return Number.isNaN(k.getTime())?"-":k.toLocaleDateString("es-MX")};return c.jsxs("div",{className:"recargas-page",children:[c.jsx("div",{className:"page-header",children:c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Gestin de Recargas"}),c.jsx("p",{className:"page-subtitle",children:"Administra todas las solicitudes de recarga de usuarios"})]})}),c.jsx("div",{className:"recargas-filters",children:x.map(T=>c.jsxs("button",{className:`filter-btn ${e===T.value?"active":""}`,onClick:()=>n(T.value),children:[T.label,c.jsx("span",{className:"filter-count",children:T.value==="all"?l.length:l.filter(k=>k.status===T.value).length})]},T.value))}),c.jsxs("div",{className:"recargas-card",children:[c.jsx("div",{className:"card-header",children:c.jsxs("h3",{children:["Total de recargas: ",l.length]})}),u?c.jsx("div",{className:"loading-state",children:"Cargando recargas..."}):l.length===0?c.jsx("div",{className:"empty-state",children:"No hay recargas en este estado"}):c.jsx("div",{className:"table-wrapper",children:c.jsxs("table",{className:"recargas-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Usuario"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Mtodo"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"}),c.jsx("th",{children:"Accin"})]})}),c.jsx("tbody",{children:l.map(T=>c.jsxs("tr",{children:[c.jsx("td",{className:"email-cell",children:T.userEmail||T.userId||"Email no disponible"}),c.jsx("td",{className:"amount-cell",children:v(T.amount)}),c.jsx("td",{children:T.method||"-"}),c.jsx("td",{children:c.jsxs("span",{className:`status-badge status-${T.status}`,children:[T.status==="pending"&&"Pendiente",T.status==="approved"&&"Aprobada",T.status==="rejected"&&"Rechazada"]})}),c.jsx("td",{children:I(T.createdAt)}),c.jsx("td",{children:T.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"btn-action btn-approve",onClick:()=>{s(T),o({isOpen:!0,type:"approve"})},title:"Aprobar",children:""}),c.jsx("button",{className:"btn-action btn-reject",onClick:()=>{s(T),o({isOpen:!0,type:"reject"})},title:"Rechazar",children:""})]})})]},T.id))})]})})]}),c.jsx(Lp,{isOpen:i.isOpen,title:i.type==="approve"?"Aprobar Recarga":"Rechazar Recarga",message:`${i.type==="approve"?"Aprobar":"Rechazar"} recarga de ${r?v(r.amount):""} del usuario ${(r==null?void 0:r.userEmail)||(r==null?void 0:r.userId)}?`,actionLabel:i.type==="approve"?"Aprobar":"Rechazar",showReasonInput:i.type==="reject",reasonPlaceholder:"Razn del rechazo...",loading:p||y,onConfirm:i.type==="approve"?N:P,onCancel:()=>{o({isOpen:!1,type:null}),s(null)}})]})}function xb(t={}){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(0),[d,f]=j.useState({all:0,pending:0,approved:0,rejected:0}),[p,g]=j.useState(t.pageSize||25),[y,x]=j.useState(1),[N,P]=j.useState([]),[v,I]=j.useState(!1),T=t.status||"all",k=A=>A?typeof A=="string"?A:A!=null&&A.toDate?A.toDate().toISOString():A instanceof Date?A.toISOString():null:null,D=async()=>{try{const A=_e(Z,"withdrawals"),[b,C,ie,fe]=await Promise.all([ul($e(A)),ul($e(A,ct("status","==","pending"))),ul($e(A,ct("status","==","approved"))),ul($e(A,ct("status","==","rejected")))]);f({all:b.data().count,pending:C.data().count,approved:ie.data().count,rejected:fe.data().count})}catch(A){console.warn("useAdminWithdrawals counts error",A)}},M=async({nextPageSize:A=p,nextPage:b=y,nextCursors:C=N}={})=>{try{s(!0),o(null);const ie=[];T&&T!=="all"&&ie.push(ct("status","==",T));const fe=b>1?C[b-2]:null;fe&&ie.push(fj(fe));const Fr=$e(_e(Z,"withdrawals"),...ie,Mr("createdAt","desc"),hj(Number(A)+1)),$=(await Qe(Fr)).docs,G=$.length>Number(A),J=G?$.slice(0,Number(A)):$;if(I(G),J.length){const me=J[J.length-1];P(et=>{const Ia=[...et];return Ia[b-1]=me,Ia})}const pe=J.map(me=>({id:me.id,...me.data()})),ue=[...new Set(pe.map(me=>me.userId).filter(Boolean))],Ie=await Promise.all(ue.map(async me=>{const et=await yn(be(Z,"users",me));return[me,et.exists()?et.data():null]})),Ht=Object.fromEntries(Ie),Vt=pe.map(me=>{const et=Ht[me.userId]||null;return{...me,userEmail:me.userEmail||(et==null?void 0:et.email)||null,userName:me.userName||(et==null?void 0:et.displayName)||(et==null?void 0:et.fullName)||null,createdAt:k(me.createdAt)||me.createdAt}});n(Vt);const At=T==="pending"?d.pending:T==="approved"?d.approved:T==="rejected"?d.rejected:d.all;u(Number.isFinite(At)&&At>0?At:Vt.length)}catch(ie){console.error("Error en useAdminWithdrawals:",ie),o(ie.message)}finally{s(!1)}};j.useEffect(()=>{x(1),P([]),t.pageSize&&g(t.pageSize),D(),M({nextPage:1,nextCursors:[]})},[T]),j.useEffect(()=>{x(1),P([]),M({nextPageSize:p,nextPage:1,nextCursors:[]})},[p]),j.useEffect(()=>{M({nextPage:w})},[y]);const R=()=>{D(),M({nextPage:y})},w=()=>{v&&x(A=>A+1)};return{withdrawals:e,loading:r,error:i,total:l,counts:d,page:y,pageSize:p,hasNextPage:v,nextPage:w,prevPage:()=>{x(A=>Math.max(1,A-1))},setPageSize:A=>{const b=Number(A);!Number.isFinite(b)||b<=0||g(b)},refetch:R}}function Ab(){const[t,e]=j.useState(!1),[n,r]=j.useState(null);return{approve:async(i,o,l,u,d)=>{try{e(!0),r(null);const f=be(Z,"withdrawals",i);await pi(f,{status:"approved",approvedAt:new Date().toISOString(),approvedBy:u});const p=be(Z,"users",o,"wallets",o);return await pi(p,{balance:uT(-l),updatedAt:new Date().toISOString()}),await mi(_e(Z,"auditLogs"),{action:"APPROVE_WITHDRAWAL",adminUid:u,adminEmail:d,targetUserId:o,targetId:i,status:"SUCCESS",metadata:{amount:l,withdrawalId:i},timestamp:new Date().toISOString()}),console.log(" Retiro aprobado:",i),!0}catch(f){return console.error(" Error al aprobar retiro:",f),r(f.message),!1}finally{e(!1)}},loading:t,error:n}}function Nb(){const[t,e]=j.useState(!1),[n,r]=j.useState(null);return{reject:async(i,o,l,u,d)=>{try{e(!0),r(null);const f=be(Z,"withdrawals",i);return await pi(f,{status:"rejected",rejectedAt:new Date().toISOString(),rejectedBy:u,rejectionReason:l}),await mi(_e(Z,"auditLogs"),{action:"REJECT_WITHDRAWAL",adminUid:u,adminEmail:d,targetUserId:o,targetId:i,status:"SUCCESS",reason:l,timestamp:new Date().toISOString()}),console.log(" Retiro rechazado:",i),!0}catch(f){return console.error(" Error al rechazar retiro:",f),r(f.message),!1}finally{e(!1)}},loading:t,error:n}}function Rb({adminData:t}){const[e,n]=j.useState("all"),[r,s]=j.useState(25),[i,o]=j.useState(null),[l,u]=j.useState({isOpen:!1,type:null}),{withdrawals:d,loading:f,refetch:p,counts:g,page:y,hasNextPage:x,nextPage:N,prevPage:P,setPageSize:v}=xb({status:e,pageSize:r}),{approve:I,loading:T}=Ab(),{reject:k,loading:D}=Nb(),M=[{value:"all",label:"Todos"},{value:"pending",label:"Pendientes"},{value:"approved",label:"Aprobados"},{value:"rejected",label:"Rechazados"}],R=async()=>{if(!i)return;await I(i.id,i.userId,i.amount,t.uid,t.email)&&(u({isOpen:!1,type:null}),o(null),p())},w=async A=>{if(!i)return;await k(i.id,i.userId,A,t.uid,t.email)&&(u({isOpen:!1,type:null}),o(null),p())},S=A=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(A||0),_=A=>{if(!A)return"-";const b=A!=null&&A.toDate?A.toDate():new Date(A);return Number.isNaN(b.getTime())?"-":b.toLocaleDateString("es-MX")};return c.jsxs("div",{className:"retiros-page",children:[c.jsx("div",{className:"page-header",children:c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Gestin de Retiros"}),c.jsx("p",{className:"page-subtitle",children:"Administra todas las solicitudes de retiro de usuarios"})]})}),c.jsx("div",{className:"retiros-filters",children:M.map(A=>c.jsxs("button",{className:`filter-btn ${e===A.value?"active":""}`,onClick:()=>{n(A.value)},children:[A.label,c.jsx("span",{className:"filter-count",children:A.value==="all"?(g==null?void 0:g.all)??0:(g==null?void 0:g[A.value])??0})]},A.value))}),c.jsxs("div",{className:"retiros-controls",children:[c.jsxs("div",{className:"retiros-control",children:[c.jsx("span",{className:"retiros-control-label",children:"Mostrar"}),c.jsxs("select",{className:"retiros-page-size",value:r,onChange:A=>{const b=Number(A.target.value);s(b),v(b)},children:[c.jsx("option",{value:10,children:"10"}),c.jsx("option",{value:25,children:"25"}),c.jsx("option",{value:50,children:"50"}),c.jsx("option",{value:100,children:"100"})]}),c.jsx("span",{className:"retiros-control-label",children:"por pgina"})]}),c.jsxs("div",{className:"retiros-pagination",children:[c.jsx("button",{className:"pagination-btn",onClick:P,disabled:f||y<=1,children:" Anterior"}),c.jsxs("span",{className:"pagination-status",children:["Pgina ",y]}),c.jsx("button",{className:"pagination-btn",onClick:N,disabled:f||!x,children:"Siguiente "})]})]}),c.jsxs("div",{className:"retiros-card",children:[c.jsx("div",{className:"card-header",children:c.jsxs("h3",{children:["Total de retiros: ",d.length]})}),f?c.jsx("div",{className:"loading-state",children:"Cargando retiros..."}):d.length===0?c.jsx("div",{className:"empty-state",children:"No hay retiros en este estado"}):c.jsx("div",{className:"table-wrapper",children:c.jsxs("table",{className:"retiros-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Usuario"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"Mtodo"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"}),c.jsx("th",{children:"Accin"})]})}),c.jsx("tbody",{children:d.map(A=>c.jsxs("tr",{children:[c.jsx("td",{className:"email-cell",children:A.userEmail||A.userId||"Email no disponible"}),c.jsx("td",{className:"amount-cell",children:S(A.amount)}),c.jsx("td",{children:A.method||"-"}),c.jsx("td",{children:c.jsxs("span",{className:`status-badge status-${A.status}`,children:[A.status==="pending"&&"Pendiente",A.status==="approved"&&"Aprobado",A.status==="rejected"&&"Rechazado"]})}),c.jsx("td",{children:_(A.createdAt)}),c.jsx("td",{children:A.status==="pending"&&c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"btn-action btn-approve",onClick:()=>{o(A),u({isOpen:!0,type:"approve"})},title:"Aprobar",children:""}),c.jsx("button",{className:"btn-action btn-reject",onClick:()=>{o(A),u({isOpen:!0,type:"reject"})},title:"Rechazar",children:""})]})})]},A.id))})]})})]}),c.jsx(Lp,{isOpen:l.isOpen,title:l.type==="approve"?"Aprobar Retiro":"Rechazar Retiro",message:`${l.type==="approve"?"Aprobar":"Rechazar"} retiro de ${i?S(i.amount):""} del usuario ${(i==null?void 0:i.userEmail)||(i==null?void 0:i.userId)}?`,actionLabel:l.type==="approve"?"Aprobar":"Rechazar",showReasonInput:l.type==="reject",reasonPlaceholder:"Razn del rechazo...",loading:T||D,onConfirm:l.type==="approve"?R:w,onCancel:()=>{u({isOpen:!1,type:null}),o(null)}})]})}function gT(t={}){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(null),[l,u]=j.useState(0),[d,f]=j.useState(0),p=async()=>{try{s(!0),o(null);let y=[];t.status&&t.status!=="all"&&y.push(ct("status","==",t.status)),t.projectId&&y.push(ct("projectId","==",t.projectId)),t.userId&&y.push(ct("userId","==",t.userId));const x=$e(_e(Z,"investments"),...y,Mr("createdAt","desc")),P=(await Qe(x)).docs.map(_=>({id:_.id,..._.data()})),v=[...new Set(P.map(_=>_.userId).filter(Boolean))],I=[...new Set(P.map(_=>_.projectId).filter(Boolean))],[T,k]=await Promise.all([Promise.all(v.map(async _=>{const A=await yn(be(Z,"users",_));return[_,A.exists()?A.data():null]})),Promise.all(I.map(async _=>{const A=await yn(be(Z,"projects",_));return[_,A.exists()?A.data():null]}))]),D=Object.fromEntries(T),M=Object.fromEntries(k),R=(_,A)=>!_||!A?null:Number(((A-_)/_*100).toFixed(2)),w=P.map(_=>{const A=D[_.userId]||{},b=M[_.projectId]||{};return{..._,userEmail:A.email||"",userName:A.displayName||A.fullName||"",projectName:b.name||"",expectedROI:R(_.amount,_.expectedReturn),actualROI:R(_.amount,_.actualReturn||_.realizedReturn||_.payout)}});n(w),u(w.length);const S=w.reduce((_,A)=>_+(A.amount||0),0);f(S)}catch(y){console.error("Error en useAdminInvestments:",y),o(y.message)}finally{s(!1)}};return j.useEffect(()=>{p()},[t.status,t.projectId,t.userId]),{investments:e,loading:r,error:i,total:l,totalAmount:d,refetch:()=>p()}}function vT(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),o=async()=>{try{r(!0),i(null);const u=_e(Z,"projects"),d=$e(u,Mr("createdAt","desc")),g=(await Qe(d)).docs.map(y=>({id:y.id,...y.data()})).map(y=>{const x=y.type==="fixed",N=Number(y.targetAmount||0),P=Number(y.totalInvested||0),v=x&&N>0&&P>=N,I=v?"funded":y.status||"draft",T=I==="active"&&!v&&y.status!=="paused"&&y.status!=="closed";return{...y,computedStatus:I,progress:N>0?Math.min(100,Number((P/N*100).toFixed(2))):null,isTargetReached:v,investable:T}});e(g)}catch(u){console.error("Error en useAdminProjects:",u),i(u.message)}finally{r(!1)}};return j.useEffect(()=>{o()},[]),{projects:t,loading:n,error:s,refetch:()=>o()}}function Cb(){const t=Wn(),[e]=bf(),n=e.get("projectId")||"",r=e.get("userId")||"",[s,i]=j.useState({status:"all",projectId:n,userId:r,search:""}),{projects:o}=vT(),{investments:l,loading:u,totalAmount:d}=gT({status:s.status,projectId:s.projectId||void 0,userId:s.userId||void 0});j.useEffect(()=>{i(v=>({...v,projectId:n,userId:r}))},[n,r]);const f=[{value:"all",label:"Todas"},{value:"active",label:"Activas"},{value:"completed",label:"Completadas"},{value:"cancelled",label:"Canceladas"}],p=v=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(v||0),g=v=>v?new Date(v).toLocaleDateString("es-MX"):"",y=v=>v==null?"":`${v.toFixed(2)}%`,x=j.useMemo(()=>{const v=s.search.toLowerCase();return l.filter(I=>{var k,D;return v?((k=I.userEmail)==null?void 0:k.toLowerCase().includes(v))||((D=I.userName)==null?void 0:D.toLowerCase().includes(v)):!0})},[l,s.search]),N=v=>{v&&t(`/admin/usuarios?uid=${v}`)},P=v=>{v&&t(`/admin/proyectos?projectId=${v}`)};return c.jsxs("div",{className:"inversiones-page",children:[c.jsx("div",{className:"page-header",children:c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Gestin de Inversiones"}),c.jsx("p",{className:"page-subtitle",children:"Contexto completo: usuario, proyecto y ROI real vs esperado"})]})}),c.jsxs("div",{className:"inversiones-summary",children:[c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-label",children:"Total Invertido"}),c.jsx("div",{className:"summary-value",children:p(d)})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-label",children:"Inversiones Activas"}),c.jsx("div",{className:"summary-value",children:l.filter(v=>v.status==="active").length})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-label",children:"Total de Inversiones"}),c.jsx("div",{className:"summary-value",children:l.length})]})]}),c.jsxs("div",{className:"inversiones-filters",children:[f.map(v=>c.jsxs("button",{className:`filter-btn ${s.status===v.value?"active":""}`,onClick:()=>i({...s,status:v.value}),children:[v.label,c.jsx("span",{className:"filter-count",children:v.value==="all"?l.length:l.filter(I=>I.status===v.value).length})]},v.value)),c.jsxs("select",{className:"filter-select",value:s.projectId,onChange:v=>i({...s,projectId:v.target.value}),children:[c.jsx("option",{value:"",children:"Todos los proyectos"}),o.map(v=>c.jsx("option",{value:v.id,children:v.name||"Proyecto sin nombre"},v.id))]}),c.jsx("input",{type:"text",className:"filter-input",placeholder:"Buscar usuario (email/nombre)",value:s.search,onChange:v=>i({...s,search:v.target.value})})]}),c.jsxs("div",{className:"inversiones-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Inversiones"})}),u?c.jsx("div",{className:"loading-state",children:"Cargando inversiones..."}):x.length===0?c.jsx("div",{className:"empty-state",children:"No hay inversiones con estos filtros"}):c.jsx("div",{className:"table-wrapper",children:c.jsxs("table",{className:"inversiones-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Usuario"}),c.jsx("th",{children:"Proyecto"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"ROI Esperado"}),c.jsx("th",{children:"ROI Real"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"}),c.jsx("th",{children:"Acciones"})]})}),c.jsx("tbody",{children:x.map(v=>c.jsxs("tr",{children:[c.jsxs("td",{children:[c.jsx("div",{className:"cell-title",children:v.userName||"Usuario sin datos"}),c.jsx("div",{className:"cell-subtle",children:v.userEmail||"Email no disponible"})]}),c.jsxs("td",{children:[c.jsx("div",{className:"cell-title",children:v.projectName||"Proyecto sin nombre"}),c.jsx("div",{className:"cell-subtle",children:v.expectedReturn?"Con retorno esperado":"Retorno no definido"})]}),c.jsx("td",{className:"amount-cell",children:p(v.amount)}),c.jsx("td",{children:c.jsx("span",{className:`roi-badge ${Number(v.expectedROI)>=0?"roi-positive":"roi-negative"}`,children:y(v.expectedROI)})}),c.jsx("td",{children:c.jsx("span",{className:`roi-badge ${Number(v.actualROI)>=0?"roi-positive":"roi-negative"}`,children:y(v.actualROI)})}),c.jsx("td",{children:c.jsxs("span",{className:`status-badge status-${v.status}`,children:[v.status==="active"&&"Activa",v.status==="completed"&&"Completada",v.status==="cancelled"&&"Cancelada"]})}),c.jsx("td",{children:g(v.createdAt)}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"link-btn",onClick:()=>N(v.userId),children:"Ver usuario"}),c.jsx("button",{className:"link-btn",onClick:()=>P(v.projectId),disabled:!v.projectId,children:"Ver proyecto"})]})]},v.id))})]})})]})]})}function Pb({isOpen:t,onClose:e,onSuccess:n}){const[r,s]=j.useState({name:"",type:"fixed",category:"",riskLevel:"medium",expectedROI:"",durationMonths:"",targetAmount:"",minInvestment:"",maxInvestment:"",drawdown:"",performance:"",manualControl:!0}),[i,o]=j.useState(!1),[l,u]=j.useState(null),d=()=>{s({name:"",type:"fixed",category:"",riskLevel:"medium",expectedROI:"",durationMonths:"",targetAmount:"",minInvestment:"",maxInvestment:"",drawdown:"",performance:"",manualControl:!0}),u(null)},f=()=>{d(),e()},p=async g=>{if(g.preventDefault(),!r.name){u("El nombre es obligatorio");return}try{o(!0),u(null);const y=r.type==="fixed",x={name:r.name,type:r.type,category:r.category||null,riskLevel:r.riskLevel||"medium",expectedROI:r.expectedROI?Number(r.expectedROI):null,duration:r.durationMonths?Number(r.durationMonths):null,status:"draft",targetAmount:y&&r.targetAmount?Number(r.targetAmount):null,totalInvested:0,minInvestment:y&&r.minInvestment?Number(r.minInvestment):null,maxInvestment:y&&r.maxInvestment?Number(r.maxInvestment):null,autoLockOnTarget:y?!0:null,drawdown:!y&&r.drawdown?Number(r.drawdown):null,performance:!y&&r.performance?Number(r.performance):null,manualControl:r.manualControl,createdAt:Jt(),updatedAt:Jt()};await mi(_e(Z,"projects"),x),d(),n==null||n(),e()}catch(y){console.error("Error creando proyecto",y),u("No se pudo crear el proyecto")}finally{o(!1)}};return t?c.jsx("div",{className:"project-modal-overlay",onClick:f,children:c.jsxs("div",{className:"project-modal",onClick:g=>g.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Crear Proyecto Financiero"}),c.jsx("button",{className:"close-btn",onClick:f,children:""})]}),c.jsxs("form",{className:"modal-form",onSubmit:p,children:[c.jsx("div",{className:"form-row",children:c.jsxs("label",{children:["Nombre del proyecto *",c.jsx("input",{type:"text",value:r.name,onChange:g=>s({...r,name:g.target.value}),placeholder:"Fondo Deuda MXN 12%",required:!0})]})}),c.jsxs("div",{className:"form-row form-row-2",children:[c.jsxs("label",{children:["Tipo de proyecto *",c.jsxs("select",{value:r.type,onChange:g=>s({...r,type:g.target.value}),children:[c.jsx("option",{value:"fixed",children:"Fijo (meta de capital)"}),c.jsx("option",{value:"variable",children:"Variable (trading/crypto)"})]})]}),c.jsxs("label",{children:["Categora",c.jsx("input",{type:"text",value:r.category,onChange:g=>s({...r,category:g.target.value}),placeholder:"Energa, Trading, Crypto"})]})]}),c.jsxs("div",{className:"form-row form-row-3",children:[c.jsxs("label",{children:["Nivel de riesgo *",c.jsxs("select",{value:r.riskLevel,onChange:g=>s({...r,riskLevel:g.target.value}),children:[c.jsx("option",{value:"low",children:"Bajo"}),c.jsx("option",{value:"medium",children:"Medio"}),c.jsx("option",{value:"high",children:"Alto"})]})]}),c.jsxs("label",{children:["ROI esperado (%)",c.jsx("input",{type:"number",step:"0.01",value:r.expectedROI,onChange:g=>s({...r,expectedROI:g.target.value}),placeholder:"12"})]}),c.jsxs("label",{children:["Duracin (meses)",c.jsx("input",{type:"number",value:r.durationMonths,onChange:g=>s({...r,durationMonths:g.target.value}),placeholder:"12"})]})]}),r.type==="fixed"&&c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Configuracin de Proyecto Fijo"}),c.jsxs("div",{className:"form-row form-row-3",children:[c.jsxs("label",{children:["Capital objetivo (MXN)",c.jsx("input",{type:"number",value:r.targetAmount,onChange:g=>s({...r,targetAmount:g.target.value}),placeholder:"500000"})]}),c.jsxs("label",{children:["Inversin mnima (MXN)",c.jsx("input",{type:"number",value:r.minInvestment,onChange:g=>s({...r,minInvestment:g.target.value}),placeholder:"1000"})]}),c.jsxs("label",{children:["Inversin mxima (MXN)",c.jsx("input",{type:"number",value:r.maxInvestment,onChange:g=>s({...r,maxInvestment:g.target.value}),placeholder:"50000"})]})]})]}),r.type==="variable"&&c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Mtricas de Proyecto Variable"}),c.jsxs("div",{className:"form-row form-row-2",children:[c.jsxs("label",{children:["Drawdown (%)",c.jsx("input",{type:"number",step:"0.01",value:r.drawdown,onChange:g=>s({...r,drawdown:g.target.value}),placeholder:"-5"})]}),c.jsxs("label",{children:["Performance (%)",c.jsx("input",{type:"number",step:"0.01",value:r.performance,onChange:g=>s({...r,performance:g.target.value}),placeholder:"8"})]})]}),c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:r.manualControl,onChange:g=>s({...r,manualControl:g.target.checked})}),"Control manual del estado (permite pausar/reanudar)"]})]}),l&&c.jsx("div",{className:"form-error",children:l}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",className:"cancel-btn",onClick:f,disabled:i,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:i,children:i?"Guardando...":"Crear proyecto"})]})]})]})}):null}function yT(t){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(null),l=async()=>{if(!t){n([]),s(!1);return}try{s(!0),o(null);const p=_e(Z,"projects",t,"timeline"),g=$e(p,Mr("createdAt","desc")),x=(await Qe(g)).docs.map(N=>({id:N.id,...N.data()}));n(x)}catch(p){console.error("Error en useProjectTimeline:",p),o(p.message)}finally{s(!1)}};j.useEffect(()=>{l()},[t]);const u=async p=>{if(!t)return null;try{const g=_e(Z,"projects",t,"timeline"),y={type:p.type||"update",title:p.title||"",description:p.description||"",visibility:p.visibility||"admin",createdBy:p.createdBy||null,metadata:p.metadata||null,createdAt:Jt()},x=await mi(g,y);return(y.visibility==="investors"||y.visibility==="all")&&await d(t,x.id,y),await l(),x.id}catch(g){throw console.error("Error creando evento timeline:",g),g}},d=async(p,g,y)=>{try{const x=_e(Z,"investments"),N=$e(x),P=await Qe(N),v=new Set;P.docs.forEach(k=>{const D=k.data();D.projectId===p&&(D.status==="active"||D.status==="completed")&&v.add(D.userId)});const I=_e(Z,"notifications"),T=Array.from(v).map(k=>mi(I,{userId:k,projectId:p,eventId:g,type:"project_update",title:y.title,message:y.description||y.title,read:!1,createdAt:Jt()}));await Promise.all(T)}catch(x){console.error("Error creando notificaciones:",x)}};return{events:e,loading:r,error:i,addEvent:u,refetch:()=>l()}}function kb({project:t,isOpen:e,onClose:n,onSuccess:r,onTimelineEvent:s}){const[i,o]=j.useState({name:(t==null?void 0:t.name)||"",category:(t==null?void 0:t.category)||"",expectedROI:(t==null?void 0:t.expectedROI)||"",duration:(t==null?void 0:t.duration)||"",drawdown:(t==null?void 0:t.drawdown)||"",performance:(t==null?void 0:t.performance)||""}),[l,u]=j.useState(!1),[d,f]=j.useState(null);Fh.useEffect(()=>{t&&o({name:t.name||"",category:t.category||"",expectedROI:t.expectedROI||"",duration:t.duration||"",drawdown:t.drawdown||"",performance:t.performance||""})},[t]);const p=()=>{f(null),n()},g=async y=>{if(y.preventDefault(),!!(t!=null&&t.id))try{u(!0),f(null);const x=[];i.name!==t.name&&x.push(`Nombre: "${t.name}"  "${i.name}"`),i.category!==t.category&&x.push(`Categora: "${t.category||"N/A"}"  "${i.category}"`),Number(i.expectedROI)!==Number(t.expectedROI)&&x.push(`ROI esperado: ${t.expectedROI}%  ${i.expectedROI}%`),Number(i.duration)!==Number(t.duration)&&x.push(`Duracin: ${t.duration}  ${i.duration} meses`),t.type==="variable"&&(Number(i.drawdown)!==Number(t.drawdown)&&x.push(`Drawdown: ${t.drawdown}%  ${i.drawdown}%`),Number(i.performance)!==Number(t.performance)&&x.push(`Performance: ${t.performance}%  ${i.performance}%`));const N={name:i.name,category:i.category||null,expectedROI:i.expectedROI?Number(i.expectedROI):null,duration:i.duration?Number(i.duration):null,updatedAt:Jt()};t.type==="variable"&&(N.drawdown=i.drawdown?Number(i.drawdown):null,N.performance=i.performance?Number(i.performance):null),await pi(be(Z,"projects",t.id),N),x.length>0&&s&&await s({type:"system",title:"Proyecto actualizado",description:`Se editaron los siguientes campos:
${x.join(`
`)}`,visibility:"admin",metadata:{changes:x}}),r==null||r(),p()}catch(x){console.error("Error actualizando proyecto:",x),f("No se pudo actualizar el proyecto")}finally{u(!1)}};return!e||!t?null:c.jsx("div",{className:"edit-modal-overlay",onClick:p,children:c.jsxs("div",{className:"edit-modal",onClick:y=>y.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Editar Proyecto"}),c.jsx("button",{className:"close-btn",onClick:p,children:""})]}),c.jsxs("form",{className:"modal-form",onSubmit:g,children:[c.jsxs("label",{children:["Nombre del proyecto",c.jsx("input",{type:"text",value:i.name,onChange:y=>o({...i,name:y.target.value}),required:!0})]}),c.jsxs("label",{children:["Categora",c.jsx("input",{type:"text",value:i.category,onChange:y=>o({...i,category:y.target.value}),placeholder:"Energa, Trading, Crypto"})]}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("label",{children:["ROI esperado (%)",c.jsx("input",{type:"number",step:"0.01",value:i.expectedROI,onChange:y=>o({...i,expectedROI:y.target.value})})]}),c.jsxs("label",{children:["Duracin (meses)",c.jsx("input",{type:"number",value:i.duration,onChange:y=>o({...i,duration:y.target.value})})]})]}),t.type==="variable"&&c.jsxs("div",{className:"form-section",children:[c.jsx("h3",{children:"Mtricas Variables"}),c.jsxs("div",{className:"form-row-2",children:[c.jsxs("label",{children:["Drawdown (%)",c.jsx("input",{type:"number",step:"0.01",value:i.drawdown,onChange:y=>o({...i,drawdown:y.target.value})})]}),c.jsxs("label",{children:["Performance (%)",c.jsx("input",{type:"number",step:"0.01",value:i.performance,onChange:y=>o({...i,performance:y.target.value})})]})]})]}),c.jsxs("div",{className:"info-box",children:[c.jsx("strong",{children:"Campos no editables:"})," Tipo, Riesgo, Target, Estado. Para cambios crticos, contacta al administrador del sistema."]}),d&&c.jsx("div",{className:"form-error",children:d}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",className:"cancel-btn",onClick:p,disabled:l,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:l,children:l?"Guardando...":"Guardar cambios"})]})]})]})})}function jb({projectId:t,adminData:e}){const{events:n,loading:r,addEvent:s}=yT(t),[i,o]=j.useState(!1),[l,u]=j.useState({type:"update",title:"",description:"",visibility:"admin"}),[d,f]=j.useState(!1),p=async N=>{if(N.preventDefault(),!!l.title)try{f(!0),await s({...l,createdBy:(e==null?void 0:e.uid)||null}),u({type:"update",title:"",description:"",visibility:"admin"}),o(!1)}catch(P){console.error("Error creando evento:",P)}finally{f(!1)}},g=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString("es-MX",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",y=N=>({milestone:"",update:"",notice:"",system:""})[N]||"",x=N=>{const P={investors:{label:"Inversionistas",class:"badge-investors"},all:{label:"Pblico",class:"badge-all"},admin:{label:"Admin",class:"badge-admin"}};return P[N]||P.admin};return c.jsxs("div",{className:"project-timeline",children:[c.jsxs("div",{className:"timeline-header",children:[c.jsx("h3",{children:"Lnea de Tiempo"}),!i&&c.jsx("button",{className:"add-event-btn",onClick:()=>o(!0),children:"+ Agregar evento"})]}),i&&c.jsxs("form",{className:"event-form",onSubmit:p,children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("label",{children:["Tipo de evento",c.jsxs("select",{value:l.type,onChange:N=>u({...l,type:N.target.value}),children:[c.jsx("option",{value:"milestone",children:"Hito (Milestone)"}),c.jsx("option",{value:"update",children:"Actualizacin"}),c.jsx("option",{value:"notice",children:"Aviso"}),c.jsx("option",{value:"system",children:"Sistema"})]})]}),c.jsxs("label",{children:["Visibilidad",c.jsxs("select",{value:l.visibility,onChange:N=>u({...l,visibility:N.target.value}),children:[c.jsx("option",{value:"admin",children:"Solo admin"}),c.jsx("option",{value:"investors",children:"Inversionistas"}),c.jsx("option",{value:"all",children:"Todos"})]})]})]}),c.jsxs("label",{children:["Ttulo",c.jsx("input",{type:"text",value:l.title,onChange:N=>u({...l,title:N.target.value}),placeholder:"Ej: Primer desembolso realizado",required:!0})]}),c.jsxs("label",{children:["Descripcin",c.jsx("textarea",{value:l.description,onChange:N=>u({...l,description:N.target.value}),placeholder:"Detalla el evento...",rows:3})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>o(!1),disabled:d,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:d,children:d?"Guardando...":"Publicar"})]})]}),r?c.jsx("div",{className:"timeline-loading",children:"Cargando eventos..."}):n.length===0?c.jsx("div",{className:"timeline-empty",children:"No hay eventos en la lnea de tiempo"}):c.jsx("div",{className:"timeline-list",children:n.map(N=>{const P=x(N.visibility);return c.jsxs("div",{className:"timeline-item",children:[c.jsx("div",{className:"timeline-icon",children:y(N.type)}),c.jsxs("div",{className:"timeline-content",children:[c.jsxs("div",{className:"timeline-header-row",children:[c.jsx("h4",{className:"timeline-title",children:N.title}),c.jsx("span",{className:`visibility-badge ${P.class}`,children:P.label})]}),N.description&&c.jsx("p",{className:"timeline-description",children:N.description}),c.jsxs("div",{className:"timeline-meta",children:[c.jsx("span",{className:"timeline-date",children:g(N.createdAt)}),N.type&&c.jsx("span",{className:"timeline-type",children:N.type})]})]})]},N.id)})})]})}function bb({project:t,isOpen:e,onClose:n,onRefresh:r,adminData:s}){const[i,o]=j.useState("overview"),[l,u]=j.useState(!1),{investments:d,loading:f}=gT({projectId:t==null?void 0:t.id}),{events:p,addEvent:g,refetch:y}=yT(t==null?void 0:t.id),x=D=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0,maximumFractionDigits:0}).format(D||0),N=D=>D?(D.toDate?D.toDate():new Date(D)).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"}):"",P=D=>D?(D.toDate?D.toDate():new Date(D)).toLocaleString("es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=()=>{r(),y()},I=async D=>{await g(D),y()},T=j.useMemo(()=>p.filter(D=>D.type==="system"||D.visibility==="admin"),[p]),k=j.useMemo(()=>{const D=d.length,M=d.filter(w=>w.status==="active").length,R=d.reduce((w,S)=>w+(S.amount||0),0);return{total:D,active:M,totalAmount:R}},[d]);return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`drawer-overlay ${e?"open":""}`,onClick:n}),c.jsxs("div",{className:`project-drawer ${e?"open":""}`,children:[c.jsxs("div",{className:"drawer-header",children:[c.jsxs("div",{className:"drawer-header-top",children:[c.jsx("button",{className:"close-drawer-btn",onClick:n,children:" Volver a proyectos"}),c.jsxs("div",{className:"drawer-actions",children:[c.jsx("button",{className:"action-btn secondary",onClick:()=>u(!0),children:"Editar"}),c.jsx("button",{className:"action-btn primary",onClick:()=>o("timeline"),children:"Publicar evento"})]})]}),c.jsxs("div",{className:"drawer-header-content",children:[c.jsxs("div",{className:"project-title-section",children:[c.jsx("h1",{className:"drawer-title",children:t.name}),c.jsxs("div",{className:"drawer-badges",children:[c.jsx("span",{className:`badge type-badge type-${t.type}`,children:t.type==="variable"?"Variable":"Fijo"}),c.jsxs("span",{className:`badge risk-badge risk-${t.riskLevel}`,children:[t.riskLevel==="low"&&"Riesgo Bajo",t.riskLevel==="medium"&&"Riesgo Medio",t.riskLevel==="high"&&"Riesgo Alto"]}),c.jsxs("span",{className:`badge status-badge status-${t.computedStatus}`,children:[t.computedStatus==="funded"&&"Funded",t.computedStatus==="active"&&"Activo",t.computedStatus==="paused"&&"Pausado",t.computedStatus==="closed"&&"Cerrado",t.computedStatus==="draft"&&"Borrador"]})]}),t.category&&c.jsxs("div",{className:"project-meta",children:[" ",t.category]})]}),t.type==="fixed"&&t.targetAmount&&c.jsxs("div",{className:"header-progress",children:[c.jsxs("div",{className:"progress-label",children:[c.jsxs("span",{children:["Capital: ",x(t.totalInvested)]}),c.jsxs("span",{className:"progress-percent",children:[t.progress||0,"%"]}),c.jsxs("span",{children:["Meta: ",x(t.targetAmount)]})]}),c.jsx("div",{className:"progress-bar-header",children:c.jsx("div",{className:"progress-fill-header",style:{width:`${t.progress||0}%`}})})]})]}),c.jsxs("div",{className:"drawer-tabs",children:[c.jsx("button",{className:`drawer-tab ${i==="overview"?"active":""}`,onClick:()=>o("overview"),children:"Resumen"}),c.jsxs("button",{className:`drawer-tab ${i==="investments"?"active":""}`,onClick:()=>o("investments"),children:["Inversiones (",k.total,")"]}),c.jsxs("button",{className:`drawer-tab ${i==="timeline"?"active":""}`,onClick:()=>o("timeline"),children:["Timeline (",p.length,")"]}),c.jsxs("button",{className:`drawer-tab ${i==="activity"?"active":""}`,onClick:()=>o("activity"),children:["Actividad (",T.length,")"]})]})]}),c.jsxs("div",{className:"drawer-content",children:[i==="overview"&&c.jsxs("div",{className:"overview-section",children:[c.jsxs("div",{className:"overview-grid",children:[c.jsxs("div",{className:"kpi-box",children:[c.jsx("div",{className:"kpi-icon",children:""}),c.jsxs("div",{className:"kpi-data",children:[c.jsx("div",{className:"kpi-label",children:"Total Invertido"}),c.jsx("div",{className:"kpi-value",children:x(k.totalAmount)})]})]}),c.jsxs("div",{className:"kpi-box",children:[c.jsx("div",{className:"kpi-icon",children:""}),c.jsxs("div",{className:"kpi-data",children:[c.jsx("div",{className:"kpi-label",children:"Inversionistas"}),c.jsx("div",{className:"kpi-value",children:k.total}),c.jsxs("div",{className:"kpi-sublabel",children:[k.active," activos"]})]})]}),c.jsxs("div",{className:"kpi-box",children:[c.jsx("div",{className:"kpi-icon",children:""}),c.jsxs("div",{className:"kpi-data",children:[c.jsx("div",{className:"kpi-label",children:"ROI Esperado"}),c.jsx("div",{className:"kpi-value",children:t.expectedROI?`${t.expectedROI}%`:""})]})]}),c.jsxs("div",{className:"kpi-box",children:[c.jsx("div",{className:"kpi-icon",children:""}),c.jsxs("div",{className:"kpi-data",children:[c.jsx("div",{className:"kpi-label",children:"Duracin"}),c.jsx("div",{className:"kpi-value",children:t.duration?`${t.duration}m`:""})]})]})]}),c.jsxs("div",{className:"info-sections",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{className:"section-title",children:"Informacin General"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Fecha de creacin"}),c.jsx("span",{className:"info-val",children:N(t.createdAt)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"ltima actualizacin"}),c.jsx("span",{className:"info-val",children:N(t.updatedAt)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Estado"}),c.jsx("span",{className:"info-val",children:t.investable?" Abierto a inversiones":" Cerrado"})]})]})]}),t.type==="fixed"&&c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{className:"section-title",children:"Configuracin Fija"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Capital objetivo"}),c.jsx("span",{className:"info-val bold",children:x(t.targetAmount)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Inversin mnima"}),c.jsx("span",{className:"info-val",children:x(t.minInvestment)})]}),t.maxInvestment&&c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Inversin mxima"}),c.jsx("span",{className:"info-val",children:x(t.maxInvestment)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-key",children:"Auto-lock al alcanzar meta"}),c.jsx("span",{className:"info-val",children:t.autoLockOnTarget?"S":"No"})]})]})]}),t.type==="variable"&&c.jsxs("div",{className:"info-section",children:[c.jsx("h3",{className:"section-title",children:"Mtricas Variables"}),c.jsxs("div",{className:"metrics-cards",children:[c.jsxs("div",{className:"metric-card performance",children:[c.jsx("div",{className:"metric-label",children:"Performance"}),c.jsx("div",{className:"metric-value",children:t.performance!==void 0?`${t.performance}%`:""})]}),c.jsxs("div",{className:"metric-card drawdown",children:[c.jsx("div",{className:"metric-label",children:"Drawdown"}),c.jsx("div",{className:"metric-value",children:t.drawdown!==void 0?`${t.drawdown}%`:""})]})]})]})]})]}),i==="investments"&&c.jsx("div",{className:"investments-section",children:f?c.jsx("div",{className:"loading-state",children:"Cargando inversiones..."}):d.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("div",{className:"empty-title",children:"Sin inversiones"}),c.jsx("div",{className:"empty-subtitle",children:"Este proyecto an no tiene inversionistas"})]}):c.jsx("div",{className:"investments-table-wrapper",children:c.jsxs("table",{className:"investments-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Inversionista"}),c.jsx("th",{children:"Monto"}),c.jsx("th",{children:"ROI Esperado"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:d.map(D=>c.jsxs("tr",{children:[c.jsx("td",{children:c.jsxs("div",{className:"investor-cell",children:[c.jsx("div",{className:"investor-name",children:D.userName||"Usuario"}),c.jsx("div",{className:"investor-email",children:D.userEmail})]})}),c.jsx("td",{className:"amount-cell",children:x(D.amount)}),c.jsx("td",{children:c.jsx("span",{className:"roi-badge",children:D.expectedROI!==null?`${D.expectedROI}%`:""})}),c.jsx("td",{children:c.jsxs("span",{className:`badge status-badge status-${D.status}`,children:[D.status==="active"&&"Activa",D.status==="completed"&&"Completada",D.status==="cancelled"&&"Cancelada"]})}),c.jsx("td",{className:"date-cell",children:N(D.createdAt)})]},D.id))})]})})}),i==="timeline"&&c.jsx("div",{className:"timeline-section",children:c.jsx(jb,{projectId:t.id,adminData:s})}),i==="activity"&&c.jsx("div",{className:"activity-section",children:T.length===0?c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("div",{className:"empty-title",children:"Sin actividad"}),c.jsx("div",{className:"empty-subtitle",children:"No hay eventos del sistema registrados"})]}):c.jsx("div",{className:"activity-list",children:T.map(D=>c.jsxs("div",{className:"activity-item",children:[c.jsx("div",{className:"activity-icon",children:D.type==="system"?"":""}),c.jsxs("div",{className:"activity-content",children:[c.jsxs("div",{className:"activity-header",children:[c.jsx("span",{className:"activity-title",children:D.title}),c.jsx("span",{className:"activity-date",children:P(D.createdAt)})]}),D.description&&c.jsx("div",{className:"activity-description",children:D.description}),c.jsx("div",{className:"activity-meta",children:c.jsxs("span",{className:`badge visibility-badge visibility-${D.visibility}`,children:[D.visibility==="admin"&&"Solo admin",D.visibility==="investors"&&"Inversionistas",D.visibility==="all"&&"Todos"]})})]})]},D.id))})})]})]}),c.jsx(kb,{project:t,isOpen:l,onClose:()=>u(!1),onSuccess:v,onTimelineEvent:I})]}):null}function Db({adminData:t}){const e=Wn(),[n]=bf(),r=n.get("projectId")||"",{projects:s,loading:i,refetch:o}=vT(),[l,u]=j.useState(!1),[d,f]=j.useState(!1),[p,g]=j.useState(null),[y,x]=j.useState({type:"all",category:"all",status:"all",risk:"all"}),[N,P]=j.useState(null),v=()=>{o()},I=async(_,A)=>{if(!(!_||!A))try{P(_),await pi(be(Z,"projects",_),{status:A,updatedAt:Jt()}),o()}catch(b){console.error("Error actualizando estado",b)}finally{P(null)}},T=_=>{_&&e(`/admin/operaciones/inversiones?projectId=${_}`)},k=_=>{g(_),f(!0)},D=()=>{f(!1),g(null)},M=j.useMemo(()=>{const _=new Set;return s.forEach(A=>A.category&&_.add(A.category)),["all",...Array.from(_)]},[s]),R=j.useMemo(()=>s.filter(_=>!(y.type!=="all"&&_.type!==y.type||y.category!=="all"&&_.category!==y.category||y.status!=="all"&&_.computedStatus!==y.status||y.risk!=="all"&&_.riskLevel!==y.risk)),[s,y]),w=j.useMemo(()=>{const _=s.length,A=s.filter(ie=>ie.computedStatus==="active").length,b=s.filter(ie=>ie.computedStatus==="funded").length,C=s.filter(ie=>ie.type==="fixed").reduce((ie,fe)=>ie+Number(fe.totalInvested||0),0);return{total:_,active:A,funded:b,totalCapital:C}},[s]),S=_=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(_||0);return c.jsxs("div",{className:"proyectos-page",children:[c.jsxs("div",{className:"page-header",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"page-title",children:"Catlogo de Proyectos"}),c.jsx("p",{className:"page-subtitle",children:"Gestin y control de productos financieros"})]}),c.jsx("button",{className:"create-btn",onClick:()=>u(!0),children:"+ Crear proyecto"})]}),c.jsxs("div",{className:"kpis-section",children:[c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Proyectos Totales"}),c.jsx("div",{className:"kpi-value",children:w.total})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Activos"}),c.jsx("div",{className:"kpi-value kpi-success",children:w.active})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Funded"}),c.jsx("div",{className:"kpi-value kpi-info",children:w.funded})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-label",children:"Capital Total"}),c.jsx("div",{className:"kpi-value kpi-currency",children:S(w.totalCapital)})]})]}),c.jsxs("div",{className:"filters-section",children:[c.jsxs("select",{className:"filter-select",value:y.type,onChange:_=>x({...y,type:_.target.value}),children:[c.jsx("option",{value:"all",children:"Todos los tipos"}),c.jsx("option",{value:"fixed",children:"Fijos"}),c.jsx("option",{value:"variable",children:"Variables"})]}),c.jsxs("select",{className:"filter-select",value:y.category,onChange:_=>x({...y,category:_.target.value}),children:[c.jsx("option",{value:"all",children:"Todas las categoras"}),M.filter(_=>_!=="all").map(_=>c.jsx("option",{value:_,children:_},_))]}),c.jsxs("select",{className:"filter-select",value:y.status,onChange:_=>x({...y,status:_.target.value}),children:[c.jsx("option",{value:"all",children:"Todos los estados"}),c.jsx("option",{value:"draft",children:"Borrador"}),c.jsx("option",{value:"active",children:"Activo"}),c.jsx("option",{value:"paused",children:"Pausado"}),c.jsx("option",{value:"funded",children:"Funded"}),c.jsx("option",{value:"closed",children:"Cerrado"})]}),c.jsxs("select",{className:"filter-select",value:y.risk,onChange:_=>x({...y,risk:_.target.value}),children:[c.jsx("option",{value:"all",children:"Todos los riesgos"}),c.jsx("option",{value:"low",children:"Bajo"}),c.jsx("option",{value:"medium",children:"Medio"}),c.jsx("option",{value:"high",children:"Alto"})]})]}),c.jsxs("div",{className:"proyectos-card",children:[c.jsx("div",{className:"card-header",children:c.jsxs("h3",{children:[R.length," proyectos"]})}),i?c.jsx("div",{className:"loading-state",children:"Cargando proyectos..."}):R.length===0?c.jsx("div",{className:"empty-state",children:"No hay proyectos con estos filtros"}):c.jsx("div",{className:"table-wrapper",children:c.jsxs("table",{className:"proyectos-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Proyecto"}),c.jsx("th",{children:"Tipo"}),c.jsx("th",{children:"Riesgo"}),c.jsx("th",{children:"Estado"}),c.jsx("th",{children:"Capital / Mtricas"}),c.jsx("th",{children:"Acciones"})]})}),c.jsx("tbody",{children:R.map(_=>c.jsxs("tr",{className:_.id===r?"highlight":"",children:[c.jsxs("td",{children:[c.jsx("div",{className:"cell-title",children:_.name||"Proyecto sin nombre"}),c.jsx("div",{className:"cell-subtle",children:_.createdAt?"Creado":"Sin fecha"})]}),c.jsx("td",{children:c.jsx("span",{className:`type-badge type-${_.type||"fixed"}`,children:_.type==="variable"?"Variable":"Fijo"})}),c.jsx("td",{children:c.jsxs("span",{className:`risk-badge risk-${_.riskLevel||"medium"}`,children:[_.riskLevel==="low"&&"Bajo",_.riskLevel==="medium"&&"Medio",_.riskLevel==="high"&&"Alto"]})}),c.jsx("td",{children:c.jsxs("span",{className:`status-badge status-${_.computedStatus||"draft"}`,children:[_.computedStatus==="funded"&&"Funded",_.computedStatus==="active"&&"Activo",_.computedStatus==="paused"&&"Pausado",_.computedStatus==="closed"&&"Cerrado",_.computedStatus==="draft"&&"Borrador"]})}),c.jsx("td",{children:_.type==="fixed"?c.jsxs("div",{className:"progress-col",children:[c.jsx("div",{className:"progress-top",children:_.totalInvested?`MXN ${_.totalInvested}`:"Sin inversiones"}),_.targetAmount?c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${_.progress||0}%`}})}):c.jsx("div",{className:"cell-subtle",children:"Sin target definido"}),_.targetAmount&&c.jsxs("div",{className:"progress-foot",children:[_.progress||0,"% de MXN ",_.targetAmount]})]}):c.jsxs("div",{className:"metrics-col",children:[c.jsxs("div",{className:"metric-line",children:["Performance: ",_.performance!==void 0&&_.performance!==null?`${_.performance}%`:""]}),c.jsxs("div",{className:"metric-line",children:["Drawdown: ",_.drawdown!==void 0&&_.drawdown!==null?`${_.drawdown}%`:""]})]})}),c.jsxs("td",{className:"actions-cell",children:[c.jsx("button",{className:"link-btn primary-link",onClick:()=>k(_),children:"Ver detalle"}),c.jsx("button",{className:"link-btn",onClick:()=>T(_.id),children:"Ver inversiones"}),!_.investable&&c.jsx("span",{className:"cell-subtle",children:"Bloqueado para nuevas inversiones"}),_.computedStatus==="draft"&&c.jsx("button",{className:"link-btn",disabled:!!N,onClick:()=>I(_.id,"active"),children:"Activar"}),_.computedStatus==="active"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"link-btn",disabled:!!N,onClick:()=>I(_.id,"paused"),children:"Pausar"}),c.jsx("button",{className:"link-btn",disabled:!!N,onClick:()=>I(_.id,"closed"),children:"Cerrar"})]}),_.computedStatus==="paused"&&c.jsx("button",{className:"link-btn",disabled:!!N,onClick:()=>I(_.id,"active"),children:"Reanudar"}),_.computedStatus==="funded"&&c.jsx("button",{className:"link-btn",disabled:!!N,onClick:()=>I(_.id,"closed"),children:"Cerrar"}),_.computedStatus==="closed"&&c.jsx("span",{className:"cell-subtle",children:"Cerrado"})]})]},_.id))})]})})]}),c.jsx(bb,{project:p,isOpen:d,onClose:D,onRefresh:o,adminData:t}),c.jsx(Pb,{isOpen:l,onClose:()=>u(!1),onSuccess:v})]})}function Ob(){const{loading:t,isAdmin:e,user:n}=fT();return t?c.jsxs("div",{className:"admin-router-loading",children:[c.jsx("div",{className:"admin-router-loading-message",children:"Verificando permisos"}),c.jsx("div",{className:"admin-router-loading-submessage",children:"Validando credenciales en Firestore"})]}):c.jsxs(uA,{children:[c.jsx(Lt,{path:"/login",element:c.jsx(mb,{})}),c.jsx(Lt,{path:"/register",element:c.jsx(gb,{})}),c.jsx(Lt,{path:"/admin",element:e?c.jsx(Wr,{admin:n,children:c.jsx(vb,{})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/usuarios",element:e?c.jsx(Wr,{admin:n,children:c.jsx(Ib,{adminData:n})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/operaciones/recargas",element:e?c.jsx(Wr,{admin:n,children:c.jsx(Sb,{adminData:n})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/operaciones/retiros",element:e?c.jsx(Wr,{admin:n,children:c.jsx(Rb,{adminData:n})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/operaciones/inversiones",element:e?c.jsx(Wr,{admin:n,children:c.jsx(Cb,{adminData:n})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/proyectos",element:e?c.jsx(Wr,{admin:n,children:c.jsx(Db,{adminData:n})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/topups",element:e?c.jsx(Wr,{admin:n,children:c.jsx(fb,{})}):c.jsx(Xn,{to:"/admin/not-authorized",replace:!0})}),c.jsx(Lt,{path:"/admin/not-authorized",element:c.jsx(pb,{})}),c.jsx(Lt,{path:"/",element:c.jsx(Xn,{to:"/login",replace:!0})})]})}function Vb(){return c.jsx(yA,{children:c.jsx(Ob,{})})}kw(document.getElementById("root")).render(c.jsx(Fh.StrictMode,{children:c.jsx(Vb,{})}));
