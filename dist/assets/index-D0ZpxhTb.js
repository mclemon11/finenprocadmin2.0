function HN(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function qN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kx={exports:{}},vd={},Rx={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),KN=Symbol.for("react.portal"),QN=Symbol.for("react.fragment"),YN=Symbol.for("react.strict_mode"),XN=Symbol.for("react.profiler"),JN=Symbol.for("react.provider"),ZN=Symbol.for("react.context"),eC=Symbol.for("react.forward_ref"),tC=Symbol.for("react.suspense"),nC=Symbol.for("react.memo"),sC=Symbol.for("react.lazy"),Ty=Symbol.iterator;function rC(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var Dx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ox=Object.assign,Mx={};function Da(t,e,n){this.props=t,this.context=e,this.refs=Mx,this.updater=n||Dx}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lx(){}Lx.prototype=Da.prototype;function dp(t,e,n){this.props=t,this.context=e,this.refs=Mx,this.updater=n||Dx}var hp=dp.prototype=new Lx;hp.constructor=dp;Ox(hp,Da.prototype);hp.isPureReactComponent=!0;var Sy=Array.isArray,Vx=Object.prototype.hasOwnProperty,fp={current:null},Fx={key:!0,ref:!0,__self:!0,__source:!0};function Ux(t,e,n){var s,r={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Vx.call(e,s)&&!Fx.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:kl,type:t,key:i,ref:a,props:r,_owner:fp.current}}function iC(t,e){return{$$typeof:kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===kl}function aC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ny=/\/+/g;function Lh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aC(""+t.key):e.toString(36)}function qc(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case kl:case KN:a=!0}}if(a)return a=t,r=r(a),t=s===""?"."+Lh(a,0):s,Sy(r)?(n="",t!=null&&(n=t.replace(Ny,"$&/")+"/"),qc(r,e,n,"",function(d){return d})):r!=null&&(mp(r)&&(r=iC(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ny,"$&/")+"/")+t)),e.push(r)),1;if(a=0,s=s===""?".":s+":",Sy(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+Lh(i,l);a+=qc(i,e,n,c,r)}else if(c=rC(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+Lh(i,l++),a+=qc(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _c(t,e,n){if(t==null)return t;var s=[],r=0;return qc(t,s,"","",function(i){return e.call(n,i,r++)}),s}function oC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},Kc={transition:null},lC={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:fp};function zx(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:_c,forEach:function(t,e,n){_c(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _c(t,function(){e++}),e},toArray:function(t){return _c(t,function(e){return e})||[]},only:function(t){if(!mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Da;me.Fragment=QN;me.Profiler=XN;me.PureComponent=dp;me.StrictMode=YN;me.Suspense=tC;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lC;me.act=zx;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Ox({},t.props),r=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=fp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Vx.call(e,c)&&!Fx.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:kl,type:t.type,key:r,ref:i,props:s,_owner:a}};me.createContext=function(t){return t={$$typeof:ZN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JN,_context:t},t.Consumer=t};me.createElement=Ux;me.createFactory=function(t){var e=Ux.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:eC,render:t}};me.isValidElement=mp;me.lazy=function(t){return{$$typeof:sC,_payload:{_status:-1,_result:t},_init:oC}};me.memo=function(t,e){return{$$typeof:nC,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Kc.transition;Kc.transition={};try{t()}finally{Kc.transition=e}};me.unstable_act=zx;me.useCallback=function(t,e){return Yt.current.useCallback(t,e)};me.useContext=function(t){return Yt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Yt.current.useEffect(t,e)};me.useId=function(){return Yt.current.useId()};me.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Yt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};me.useRef=function(t){return Yt.current.useRef(t)};me.useState=function(t){return Yt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Yt.current.useTransition()};me.version="18.3.1";Rx.exports=me;var R=Rx.exports;const nt=qN(R),cC=HN({__proto__:null,default:nt},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=R,dC=Symbol.for("react.element"),hC=Symbol.for("react.fragment"),fC=Object.prototype.hasOwnProperty,mC=uC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pC={key:!0,ref:!0,__self:!0,__source:!0};function Bx(t,e,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)fC.call(e,s)&&!pC.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:dC,type:t,key:i,ref:a,props:r,_owner:mC.current}}vd.Fragment=hC;vd.jsx=Bx;vd.jsxs=Bx;kx.exports=vd;var o=kx.exports,$x={exports:{}},yn={},Wx={exports:{}},Gx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,W){var K=M.length;M.push(W);e:for(;0<K;){var U=K-1>>>1,te=M[U];if(0<r(te,W))M[U]=W,M[K]=te,K=U;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var W=M[0],K=M.pop();if(K!==W){M[0]=K;e:for(var U=0,te=M.length,he=te>>>1;U<he;){var Fe=2*(U+1)-1,je=M[Fe],et=Fe+1,Ee=M[et];if(0>r(je,K))et<te&&0>r(Ee,je)?(M[U]=Ee,M[et]=K,U=et):(M[U]=je,M[Fe]=K,U=Fe);else if(et<te&&0>r(Ee,K))M[U]=Ee,M[et]=K,U=et;else break e}}return W}function r(M,W){var K=M.sortIndex-W.sortIndex;return K!==0?K:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,p=!1,y=!1,b=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var W=n(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=M)s(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function j(M){if(b=!1,S(M),!y)if(n(c)!==null)y=!0,ee(P);else{var W=n(d);W!==null&&z(j,W.startTime-M)}}function P(M,W){y=!1,b&&(b=!1,x(v),v=-1),p=!0;var K=m;try{for(S(W),f=n(c);f!==null&&(!(f.expirationTime>W)||M&&!A());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var te=U(f.expirationTime<=W);W=t.unstable_now(),typeof te=="function"?f.callback=te:f===n(c)&&s(c),S(W)}else s(c);f=n(c)}if(f!==null)var he=!0;else{var Fe=n(d);Fe!==null&&z(j,Fe.startTime-W),he=!1}return he}finally{f=null,m=K,p=!1}}var O=!1,_=null,v=-1,C=5,E=-1;function A(){return!(t.unstable_now()-E<C)}function D(){if(_!==null){var M=t.unstable_now();E=M;var W=!0;try{W=_(!0,M)}finally{W?N():(O=!1,_=null)}}else O=!1}var N;if(typeof w=="function")N=function(){w(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,L=F.port2;F.port1.onmessage=D,N=function(){L.postMessage(null)}}else N=function(){T(D,0)};function ee(M){_=M,O||(O=!0,N())}function z(M,W){v=T(function(){M(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,ee(P))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var K=m;m=W;try{return M()}finally{m=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=m;m=M;try{return W()}finally{m=K}},t.unstable_scheduleCallback=function(M,W,K){var U=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?U+K:U):K=U,M){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=K+te,M={id:h++,callback:W,priorityLevel:M,startTime:K,expirationTime:te,sortIndex:-1},K>U?(M.sortIndex=K,e(d,M),n(c)===null&&M===n(d)&&(b?(x(v),v=-1):b=!0,z(j,K-U))):(M.sortIndex=te,e(c,M),y||p||(y=!0,ee(P))),M},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(M){var W=m;return function(){var K=m;m=W;try{return M.apply(this,arguments)}finally{m=K}}}})(Gx);Wx.exports=Gx;var gC=Wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC=R,pn=gC;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hx=new Set,Yo={};function xi(t,e){pa(t,e),pa(t+"Capture",e)}function pa(t,e){for(Yo[t]=e,t=0;t<e.length;t++)Hx.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vf=Object.prototype.hasOwnProperty,yC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Ay={};function wC(t){return Vf.call(Ay,t)?!0:Vf.call(Cy,t)?!1:yC.test(t)?Ay[t]=!0:(Cy[t]=!0,!1)}function _C(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xC(t,e,n,s){if(e===null||typeof e>"u"||_C(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,s,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var pp=/[\-:]([a-z])/g;function gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pp,gp);Ct[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pp,gp);Ct[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pp,gp);Ct[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vp(t,e,n,s){var r=Ct.hasOwnProperty(e)?Ct[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xC(e,n,r,s)&&(n=null),s||r===null?wC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Ds=vC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xc=Symbol.for("react.element"),$i=Symbol.for("react.portal"),Wi=Symbol.for("react.fragment"),yp=Symbol.for("react.strict_mode"),Ff=Symbol.for("react.profiler"),qx=Symbol.for("react.provider"),Kx=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),Uf=Symbol.for("react.suspense"),zf=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),Qx=Symbol.for("react.offscreen"),jy=Symbol.iterator;function uo(t){return t===null||typeof t!="object"?null:(t=jy&&t[jy]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Vh;function Eo(t){if(Vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||""}return`
`+Vh+t}var Fh=!1;function Uh(t,e){if(!t||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eo(t):""}function bC(t){switch(t.tag){case 5:return Eo(t.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return t=Uh(t.type,!1),t;case 11:return t=Uh(t.type.render,!1),t;case 1:return t=Uh(t.type,!0),t;default:return""}}function Bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wi:return"Fragment";case $i:return"Portal";case Ff:return"Profiler";case yp:return"StrictMode";case Uf:return"Suspense";case zf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kx:return(t.displayName||"Context")+".Consumer";case qx:return(t._context.displayName||"Context")+".Provider";case wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _p:return e=t.displayName||null,e!==null?e:Bf(t.type)||"Memo";case Ks:e=t._payload,t=t._init;try{return Bf(t(e))}catch{}}return null}function EC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(e);case 8:return e===yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IC(t){var e=Yx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bc(t){t._valueTracker||(t._valueTracker=IC(t))}function Xx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Yx(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $f(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Py(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jx(t,e){e=e.checked,e!=null&&vp(t,"checked",e,!1)}function Wf(t,e){Jx(t,e);var n=br(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gf(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ky(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gf(t,e,n){(e!=="number"||gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Io=Array.isArray;function ta(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Hf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ry(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Io(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function Zx(t,e){var n=br(e.value),s=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ec,tb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ec=Ec||document.createElement("div"),Ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TC=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(t){TC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ro[e]=Ro[t]})});function nb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ro.hasOwnProperty(t)&&Ro[t]?(""+e).trim():e+"px"}function sb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=nb(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var SC=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kf(t,e){if(e){if(SC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Qf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yf=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xf=null,na=null,sa=null;function Oy(t){if(t=Ol(t)){if(typeof Xf!="function")throw Error(q(280));var e=t.stateNode;e&&(e=bd(e),Xf(t.stateNode,t.type,e))}}function rb(t){na?sa?sa.push(t):sa=[t]:na=t}function ib(){if(na){var t=na,e=sa;if(sa=na=null,Oy(t),e)for(t=0;t<e.length;t++)Oy(e[t])}}function ab(t,e){return t(e)}function ob(){}var zh=!1;function lb(t,e,n){if(zh)return t(e,n);zh=!0;try{return ab(t,e,n)}finally{zh=!1,(na!==null||sa!==null)&&(ob(),ib())}}function Jo(t,e){var n=t.stateNode;if(n===null)return null;var s=bd(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Jf=!1;if(Ss)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Jf=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Jf=!1}function NC(t,e,n,s,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Do=!1,vu=null,yu=!1,Zf=null,CC={onError:function(t){Do=!0,vu=t}};function AC(t,e,n,s,r,i,a,l,c){Do=!1,vu=null,NC.apply(CC,arguments)}function jC(t,e,n,s,r,i,a,l,c){if(AC.apply(this,arguments),Do){if(Do){var d=vu;Do=!1,vu=null}else throw Error(q(198));yu||(yu=!0,Zf=d)}}function bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function My(t){if(bi(t)!==t)throw Error(q(188))}function PC(t){var e=t.alternate;if(!e){if(e=bi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return My(r),t;if(i===s)return My(r),e;i=i.sibling}throw Error(q(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==s)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function ub(t){return t=PC(t),t!==null?db(t):null}function db(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=db(t);if(e!==null)return e;t=t.sibling}return null}var hb=pn.unstable_scheduleCallback,Ly=pn.unstable_cancelCallback,kC=pn.unstable_shouldYield,RC=pn.unstable_requestPaint,rt=pn.unstable_now,DC=pn.unstable_getCurrentPriorityLevel,bp=pn.unstable_ImmediatePriority,fb=pn.unstable_UserBlockingPriority,wu=pn.unstable_NormalPriority,OC=pn.unstable_LowPriority,mb=pn.unstable_IdlePriority,yd=null,Jn=null;function MC(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(yd,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:FC,LC=Math.log,VC=Math.LN2;function FC(t){return t>>>=0,t===0?32:31-(LC(t)/VC|0)|0}var Ic=64,Tc=4194304;function To(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _u(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=To(l):(i&=a,i!==0&&(s=To(i)))}else a=n&~r,a!==0?s=To(a):i!==0&&(s=To(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Fn(e),r=1<<n,s|=t[n],e&=~r;return s}function UC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zC(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Fn(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=UC(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pb(){var t=Ic;return Ic<<=1,!(Ic&4194240)&&(Ic=64),t}function Bh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function BC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Fn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Ep(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Fn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Re=0;function gb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var vb,Ip,yb,wb,_b,tm=!1,Sc=[],dr=null,hr=null,fr=null,Zo=new Map,el=new Map,Ys=[],$C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":el.delete(e.pointerId)}}function fo(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Ol(e),e!==null&&Ip(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function WC(t,e,n,s,r){switch(e){case"focusin":return dr=fo(dr,t,e,n,s,r),!0;case"dragenter":return hr=fo(hr,t,e,n,s,r),!0;case"mouseover":return fr=fo(fr,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Zo.set(i,fo(Zo.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,el.set(i,fo(el.get(i)||null,t,e,n,s,r)),!0}return!1}function xb(t){var e=Kr(t.target);if(e!==null){var n=bi(e);if(n!==null){if(e=n.tag,e===13){if(e=cb(n),e!==null){t.blockedOn=e,_b(t.priority,function(){yb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Yf=s,n.target.dispatchEvent(s),Yf=null}else return e=Ol(n),e!==null&&Ip(e),t.blockedOn=n,!1;e.shift()}return!0}function Fy(t,e,n){Qc(t)&&n.delete(e)}function GC(){tm=!1,dr!==null&&Qc(dr)&&(dr=null),hr!==null&&Qc(hr)&&(hr=null),fr!==null&&Qc(fr)&&(fr=null),Zo.forEach(Fy),el.forEach(Fy)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,tm||(tm=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,GC)))}function tl(t){function e(r){return mo(r,t)}if(0<Sc.length){mo(Sc[0],t);for(var n=1;n<Sc.length;n++){var s=Sc[n];s.blockedOn===t&&(s.blockedOn=null)}}for(dr!==null&&mo(dr,t),hr!==null&&mo(hr,t),fr!==null&&mo(fr,t),Zo.forEach(e),el.forEach(e),n=0;n<Ys.length;n++)s=Ys[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)xb(n),n.blockedOn===null&&Ys.shift()}var ra=Ds.ReactCurrentBatchConfig,xu=!0;function HC(t,e,n,s){var r=Re,i=ra.transition;ra.transition=null;try{Re=1,Tp(t,e,n,s)}finally{Re=r,ra.transition=i}}function qC(t,e,n,s){var r=Re,i=ra.transition;ra.transition=null;try{Re=4,Tp(t,e,n,s)}finally{Re=r,ra.transition=i}}function Tp(t,e,n,s){if(xu){var r=nm(t,e,n,s);if(r===null)Jh(t,e,s,bu,n),Vy(t,s);else if(WC(r,t,e,n,s))s.stopPropagation();else if(Vy(t,s),e&4&&-1<$C.indexOf(t)){for(;r!==null;){var i=Ol(r);if(i!==null&&vb(i),i=nm(t,e,n,s),i===null&&Jh(t,e,s,bu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Jh(t,e,s,null,n)}}var bu=null;function nm(t,e,n,s){if(bu=null,t=xp(s),t=Kr(t),t!==null)if(e=bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function bb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DC()){case bp:return 1;case fb:return 4;case wu:case OC:return 16;case mb:return 536870912;default:return 16}default:return 16}}var nr=null,Sp=null,Yc=null;function Eb(){if(Yc)return Yc;var t,e=Sp,n=e.length,s,r="value"in nr?nr.value:nr.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return Yc=r.slice(t,1<s?1-s:void 0)}function Xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function Uy(){return!1}function wn(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nc:Uy,this.isPropagationStopped=Uy,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=wn(Oa),Dl=Ke({},Oa,{view:0,detail:0}),KC=wn(Dl),$h,Wh,po,wd=Ke({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==po&&(po&&t.type==="mousemove"?($h=t.screenX-po.screenX,Wh=t.screenY-po.screenY):Wh=$h=0,po=t),$h)},movementY:function(t){return"movementY"in t?t.movementY:Wh}}),zy=wn(wd),QC=Ke({},wd,{dataTransfer:0}),YC=wn(QC),XC=Ke({},Dl,{relatedTarget:0}),Gh=wn(XC),JC=Ke({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),ZC=wn(JC),eA=Ke({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tA=wn(eA),nA=Ke({},Oa,{data:0}),By=wn(nA),sA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iA[t])?!!e[t]:!1}function Cp(){return aA}var oA=Ke({},Dl,{key:function(t){if(t.key){var e=sA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cp,charCode:function(t){return t.type==="keypress"?Xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lA=wn(oA),cA=Ke({},wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$y=wn(cA),uA=Ke({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cp}),dA=wn(uA),hA=Ke({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),fA=wn(hA),mA=Ke({},wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pA=wn(mA),gA=[9,13,27,32],Ap=Ss&&"CompositionEvent"in window,Oo=null;Ss&&"documentMode"in document&&(Oo=document.documentMode);var vA=Ss&&"TextEvent"in window&&!Oo,Ib=Ss&&(!Ap||Oo&&8<Oo&&11>=Oo),Wy=" ",Gy=!1;function Tb(t,e){switch(t){case"keyup":return gA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gi=!1;function yA(t,e){switch(t){case"compositionend":return Sb(e);case"keypress":return e.which!==32?null:(Gy=!0,Wy);case"textInput":return t=e.data,t===Wy&&Gy?null:t;default:return null}}function wA(t,e){if(Gi)return t==="compositionend"||!Ap&&Tb(t,e)?(t=Eb(),Yc=Sp=nr=null,Gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ib&&e.locale!=="ko"?null:e.data;default:return null}}var _A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_A[t.type]:e==="textarea"}function Nb(t,e,n,s){rb(s),e=Eu(e,"onChange"),0<e.length&&(n=new Np("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Mo=null,nl=null;function xA(t){Vb(t,0)}function _d(t){var e=Ki(t);if(Xx(e))return t}function bA(t,e){if(t==="change")return e}var Cb=!1;if(Ss){var Hh;if(Ss){var qh="oninput"in document;if(!qh){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),qh=typeof qy.oninput=="function"}Hh=qh}else Hh=!1;Cb=Hh&&(!document.documentMode||9<document.documentMode)}function Ky(){Mo&&(Mo.detachEvent("onpropertychange",Ab),nl=Mo=null)}function Ab(t){if(t.propertyName==="value"&&_d(nl)){var e=[];Nb(e,nl,t,xp(t)),lb(xA,e)}}function EA(t,e,n){t==="focusin"?(Ky(),Mo=e,nl=n,Mo.attachEvent("onpropertychange",Ab)):t==="focusout"&&Ky()}function IA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _d(nl)}function TA(t,e){if(t==="click")return _d(e)}function SA(t,e){if(t==="input"||t==="change")return _d(e)}function NA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:NA;function sl(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Vf.call(e,r)||!$n(t[r],e[r]))return!1}return!0}function Qy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yy(t,e){var n=Qy(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qy(n)}}function jb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pb(){for(var t=window,e=gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gu(t.document)}return e}function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CA(t){var e=Pb(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jb(n.ownerDocument.documentElement,n)){if(s!==null&&jp(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Yy(n,i);var a=Yy(n,s);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AA=Ss&&"documentMode"in document&&11>=document.documentMode,Hi=null,sm=null,Lo=null,rm=!1;function Xy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rm||Hi==null||Hi!==gu(s)||(s=Hi,"selectionStart"in s&&jp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Lo&&sl(Lo,s)||(Lo=s,s=Eu(sm,"onSelect"),0<s.length&&(e=new Np("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Hi)))}function Cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qi={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Kh={},kb={};Ss&&(kb=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function xd(t){if(Kh[t])return Kh[t];if(!qi[t])return t;var e=qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kb)return Kh[t]=e[n];return t}var Rb=xd("animationend"),Db=xd("animationiteration"),Ob=xd("animationstart"),Mb=xd("transitionend"),Lb=new Map,Jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Lb.set(t,e),xi(e,[t])}for(var Qh=0;Qh<Jy.length;Qh++){var Yh=Jy[Qh],jA=Yh.toLowerCase(),PA=Yh[0].toUpperCase()+Yh.slice(1);Ar(jA,"on"+PA)}Ar(Rb,"onAnimationEnd");Ar(Db,"onAnimationIteration");Ar(Ob,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Mb,"onTransitionEnd");pa("onMouseEnter",["mouseout","mouseover"]);pa("onMouseLeave",["mouseout","mouseover"]);pa("onPointerEnter",["pointerout","pointerover"]);pa("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kA=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Zy(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,jC(s,e,void 0,t),t.currentTarget=null}function Vb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Zy(r,l,d),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Zy(r,l,d),i=c}}}if(yu)throw t=Zf,yu=!1,Zf=null,t}function ze(t,e){var n=e[cm];n===void 0&&(n=e[cm]=new Set);var s=t+"__bubble";n.has(s)||(Fb(e,t,2,!1),n.add(s))}function Xh(t,e,n){var s=0;e&&(s|=4),Fb(n,t,s,e)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[Ac]){t[Ac]=!0,Hx.forEach(function(n){n!=="selectionchange"&&(kA.has(n)||Xh(n,!1,t),Xh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ac]||(e[Ac]=!0,Xh("selectionchange",!1,e))}}function Fb(t,e,n,s){switch(bb(e)){case 1:var r=HC;break;case 4:r=qC;break;default:r=Tp}n=r.bind(null,e,n,t),r=void 0,!Jf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Jh(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Kr(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}lb(function(){var d=i,h=xp(n),f=[];e:{var m=Lb.get(t);if(m!==void 0){var p=Np,y=t;switch(t){case"keypress":if(Xc(n)===0)break e;case"keydown":case"keyup":p=lA;break;case"focusin":y="focus",p=Gh;break;case"focusout":y="blur",p=Gh;break;case"beforeblur":case"afterblur":p=Gh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=YC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=dA;break;case Rb:case Db:case Ob:p=ZC;break;case Mb:p=fA;break;case"scroll":p=KC;break;case"wheel":p=pA;break;case"copy":case"cut":case"paste":p=tA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$y}var b=(e&4)!==0,T=!b&&t==="scroll",x=b?m!==null?m+"Capture":null:m;b=[];for(var w=d,S;w!==null;){S=w;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,x!==null&&(j=Jo(w,x),j!=null&&b.push(il(w,j,S)))),T)break;w=w.return}0<b.length&&(m=new p(m,y,null,n,h),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Yf&&(y=n.relatedTarget||n.fromElement)&&(Kr(y)||y[Ns]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=d,y=y?Kr(y):null,y!==null&&(T=bi(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(b=zy,j="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(b=$y,j="onPointerLeave",x="onPointerEnter",w="pointer"),T=p==null?m:Ki(p),S=y==null?m:Ki(y),m=new b(j,w+"leave",p,n,h),m.target=T,m.relatedTarget=S,j=null,Kr(h)===d&&(b=new b(x,w+"enter",y,n,h),b.target=S,b.relatedTarget=T,j=b),T=j,p&&y)t:{for(b=p,x=y,w=0,S=b;S;S=Vi(S))w++;for(S=0,j=x;j;j=Vi(j))S++;for(;0<w-S;)b=Vi(b),w--;for(;0<S-w;)x=Vi(x),S--;for(;w--;){if(b===x||x!==null&&b===x.alternate)break t;b=Vi(b),x=Vi(x)}b=null}else b=null;p!==null&&ew(f,m,p,b,!1),y!==null&&T!==null&&ew(f,T,y,b,!0)}}e:{if(m=d?Ki(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var P=bA;else if(Hy(m))if(Cb)P=SA;else{P=IA;var O=EA}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=TA);if(P&&(P=P(t,d))){Nb(f,P,n,h);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Gf(m,"number",m.value)}switch(O=d?Ki(d):window,t){case"focusin":(Hy(O)||O.contentEditable==="true")&&(Hi=O,sm=d,Lo=null);break;case"focusout":Lo=sm=Hi=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,Xy(f,n,h);break;case"selectionchange":if(AA)break;case"keydown":case"keyup":Xy(f,n,h)}var _;if(Ap)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Gi?Tb(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Ib&&n.locale!=="ko"&&(Gi||v!=="onCompositionStart"?v==="onCompositionEnd"&&Gi&&(_=Eb()):(nr=h,Sp="value"in nr?nr.value:nr.textContent,Gi=!0)),O=Eu(d,v),0<O.length&&(v=new By(v,t,null,n,h),f.push({event:v,listeners:O}),_?v.data=_:(_=Sb(n),_!==null&&(v.data=_)))),(_=vA?yA(t,n):wA(t,n))&&(d=Eu(d,"onBeforeInput"),0<d.length&&(h=new By("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=_))}Vb(f,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Eu(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Jo(t,n),i!=null&&s.unshift(il(t,i,r)),i=Jo(t,e),i!=null&&s.push(il(t,i,r))),t=t.return}return s}function Vi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ew(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,r?(c=Jo(n,i),c!=null&&a.unshift(il(n,c,l))):r||(c=Jo(n,i),c!=null&&a.push(il(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var RA=/\r\n?/g,DA=/\u0000|\uFFFD/g;function tw(t){return(typeof t=="string"?t:""+t).replace(RA,`
`).replace(DA,"")}function jc(t,e,n){if(e=tw(e),tw(t)!==e&&n)throw Error(q(425))}function Iu(){}var im=null,am=null;function om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(t){return nw.resolve(null).then(t).catch(LA)}:lm;function LA(t){setTimeout(function(){throw t})}function Zh(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),tl(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);tl(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ma=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Ma,al="__reactProps$"+Ma,Ns="__reactContainer$"+Ma,cm="__reactEvents$"+Ma,VA="__reactListeners$"+Ma,FA="__reactHandles$"+Ma;function Kr(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ns]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sw(t);t!==null;){if(n=t[Yn])return n;t=sw(t)}return e}t=n,n=t.parentNode}return null}function Ol(t){return t=t[Yn]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function bd(t){return t[al]||null}var um=[],Qi=-1;function jr(t){return{current:t}}function Be(t){0>Qi||(t.current=um[Qi],um[Qi]=null,Qi--)}function Le(t,e){Qi++,um[Qi]=t.current,t.current=e}var Er={},Ft=jr(Er),sn=jr(!1),ai=Er;function ga(t,e){var n=t.type.contextTypes;if(!n)return Er;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function rn(t){return t=t.childContextTypes,t!=null}function Tu(){Be(sn),Be(Ft)}function rw(t,e,n){if(Ft.current!==Er)throw Error(q(168));Le(Ft,e),Le(sn,n)}function Ub(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(q(108,EC(t)||"Unknown",r));return Ke({},n,s)}function Su(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,ai=Ft.current,Le(Ft,t),Le(sn,sn.current),!0}function iw(t,e,n){var s=t.stateNode;if(!s)throw Error(q(169));n?(t=Ub(t,e,ai),s.__reactInternalMemoizedMergedChildContext=t,Be(sn),Be(Ft),Le(Ft,t)):Be(sn),Le(sn,n)}var hs=null,Ed=!1,ef=!1;function zb(t){hs===null?hs=[t]:hs.push(t)}function UA(t){Ed=!0,zb(t)}function Pr(){if(!ef&&hs!==null){ef=!0;var t=0,e=Re;try{var n=hs;for(Re=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}hs=null,Ed=!1}catch(r){throw hs!==null&&(hs=hs.slice(t+1)),hb(bp,Pr),r}finally{Re=e,ef=!1}}return null}var Yi=[],Xi=0,Nu=null,Cu=0,En=[],In=0,oi=null,ps=1,gs="";function Gr(t,e){Yi[Xi++]=Cu,Yi[Xi++]=Nu,Nu=t,Cu=e}function Bb(t,e,n){En[In++]=ps,En[In++]=gs,En[In++]=oi,oi=t;var s=ps;t=gs;var r=32-Fn(s)-1;s&=~(1<<r),n+=1;var i=32-Fn(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,ps=1<<32-Fn(e)+r|n<<r|s,gs=i+t}else ps=1<<i|n<<r|s,gs=t}function Pp(t){t.return!==null&&(Gr(t,1),Bb(t,1,0))}function kp(t){for(;t===Nu;)Nu=Yi[--Xi],Yi[Xi]=null,Cu=Yi[--Xi],Yi[Xi]=null;for(;t===oi;)oi=En[--In],En[In]=null,gs=En[--In],En[In]=null,ps=En[--In],En[In]=null}var fn=null,dn=null,We=!1,On=null;function $b(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,dn=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:ps,overflow:gs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,dn=null,!0):!1;default:return!1}}function dm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hm(t){if(We){var e=dn;if(e){var n=e;if(!aw(t,e)){if(dm(t))throw Error(q(418));e=mr(n.nextSibling);var s=fn;e&&aw(t,e)?$b(s,n):(t.flags=t.flags&-4097|2,We=!1,fn=t)}}else{if(dm(t))throw Error(q(418));t.flags=t.flags&-4097|2,We=!1,fn=t}}}function ow(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Pc(t){if(t!==fn)return!1;if(!We)return ow(t),We=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!om(t.type,t.memoizedProps)),e&&(e=dn)){if(dm(t))throw Wb(),Error(q(418));for(;e;)$b(t,e),e=mr(e.nextSibling)}if(ow(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=fn?mr(t.stateNode.nextSibling):null;return!0}function Wb(){for(var t=dn;t;)t=mr(t.nextSibling)}function va(){dn=fn=null,We=!1}function Rp(t){On===null?On=[t]:On.push(t)}var zA=Ds.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var s=n.stateNode}if(!s)throw Error(q(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function kc(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lw(t){var e=t._init;return e(t._payload)}function Gb(t){function e(x,w){if(t){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function s(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function r(x,w){return x=yr(x,w),x.index=0,x.sibling=null,x}function i(x,w,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,S,j){return w===null||w.tag!==6?(w=lf(S,x.mode,j),w.return=x,w):(w=r(w,S),w.return=x,w)}function c(x,w,S,j){var P=S.type;return P===Wi?h(x,w,S.props.children,j,S.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ks&&lw(P)===w.type)?(j=r(w,S.props),j.ref=go(x,w,S),j.return=x,j):(j=ru(S.type,S.key,S.props,null,x.mode,j),j.ref=go(x,w,S),j.return=x,j)}function d(x,w,S,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=cf(S,x.mode,j),w.return=x,w):(w=r(w,S.children||[]),w.return=x,w)}function h(x,w,S,j,P){return w===null||w.tag!==7?(w=ti(S,x.mode,j,P),w.return=x,w):(w=r(w,S),w.return=x,w)}function f(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=lf(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xc:return S=ru(w.type,w.key,w.props,null,x.mode,S),S.ref=go(x,null,w),S.return=x,S;case $i:return w=cf(w,x.mode,S),w.return=x,w;case Ks:var j=w._init;return f(x,j(w._payload),S)}if(Io(w)||uo(w))return w=ti(w,x.mode,S,null),w.return=x,w;kc(x,w)}return null}function m(x,w,S,j){var P=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:l(x,w,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xc:return S.key===P?c(x,w,S,j):null;case $i:return S.key===P?d(x,w,S,j):null;case Ks:return P=S._init,m(x,w,P(S._payload),j)}if(Io(S)||uo(S))return P!==null?null:h(x,w,S,j,null);kc(x,S)}return null}function p(x,w,S,j,P){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(S)||null,l(w,x,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case xc:return x=x.get(j.key===null?S:j.key)||null,c(w,x,j,P);case $i:return x=x.get(j.key===null?S:j.key)||null,d(w,x,j,P);case Ks:var O=j._init;return p(x,w,S,O(j._payload),P)}if(Io(j)||uo(j))return x=x.get(S)||null,h(w,x,j,P,null);kc(w,j)}return null}function y(x,w,S,j){for(var P=null,O=null,_=w,v=w=0,C=null;_!==null&&v<S.length;v++){_.index>v?(C=_,_=null):C=_.sibling;var E=m(x,_,S[v],j);if(E===null){_===null&&(_=C);break}t&&_&&E.alternate===null&&e(x,_),w=i(E,w,v),O===null?P=E:O.sibling=E,O=E,_=C}if(v===S.length)return n(x,_),We&&Gr(x,v),P;if(_===null){for(;v<S.length;v++)_=f(x,S[v],j),_!==null&&(w=i(_,w,v),O===null?P=_:O.sibling=_,O=_);return We&&Gr(x,v),P}for(_=s(x,_);v<S.length;v++)C=p(_,x,v,S[v],j),C!==null&&(t&&C.alternate!==null&&_.delete(C.key===null?v:C.key),w=i(C,w,v),O===null?P=C:O.sibling=C,O=C);return t&&_.forEach(function(A){return e(x,A)}),We&&Gr(x,v),P}function b(x,w,S,j){var P=uo(S);if(typeof P!="function")throw Error(q(150));if(S=P.call(S),S==null)throw Error(q(151));for(var O=P=null,_=w,v=w=0,C=null,E=S.next();_!==null&&!E.done;v++,E=S.next()){_.index>v?(C=_,_=null):C=_.sibling;var A=m(x,_,E.value,j);if(A===null){_===null&&(_=C);break}t&&_&&A.alternate===null&&e(x,_),w=i(A,w,v),O===null?P=A:O.sibling=A,O=A,_=C}if(E.done)return n(x,_),We&&Gr(x,v),P;if(_===null){for(;!E.done;v++,E=S.next())E=f(x,E.value,j),E!==null&&(w=i(E,w,v),O===null?P=E:O.sibling=E,O=E);return We&&Gr(x,v),P}for(_=s(x,_);!E.done;v++,E=S.next())E=p(_,x,v,E.value,j),E!==null&&(t&&E.alternate!==null&&_.delete(E.key===null?v:E.key),w=i(E,w,v),O===null?P=E:O.sibling=E,O=E);return t&&_.forEach(function(D){return e(x,D)}),We&&Gr(x,v),P}function T(x,w,S,j){if(typeof S=="object"&&S!==null&&S.type===Wi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xc:e:{for(var P=S.key,O=w;O!==null;){if(O.key===P){if(P=S.type,P===Wi){if(O.tag===7){n(x,O.sibling),w=r(O,S.props.children),w.return=x,x=w;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ks&&lw(P)===O.type){n(x,O.sibling),w=r(O,S.props),w.ref=go(x,O,S),w.return=x,x=w;break e}n(x,O);break}else e(x,O);O=O.sibling}S.type===Wi?(w=ti(S.props.children,x.mode,j,S.key),w.return=x,x=w):(j=ru(S.type,S.key,S.props,null,x.mode,j),j.ref=go(x,w,S),j.return=x,x=j)}return a(x);case $i:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(x,w.sibling),w=r(w,S.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=cf(S,x.mode,j),w.return=x,x=w}return a(x);case Ks:return O=S._init,T(x,w,O(S._payload),j)}if(Io(S))return y(x,w,S,j);if(uo(S))return b(x,w,S,j);kc(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(x,w.sibling),w=r(w,S),w.return=x,x=w):(n(x,w),w=lf(S,x.mode,j),w.return=x,x=w),a(x)):n(x,w)}return T}var ya=Gb(!0),Hb=Gb(!1),Au=jr(null),ju=null,Ji=null,Dp=null;function Op(){Dp=Ji=ju=null}function Mp(t){var e=Au.current;Be(Au),t._currentValue=e}function fm(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){ju=t,Dp=Ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(Dp!==t)if(t={context:t,memoizedValue:e,next:null},Ji===null){if(ju===null)throw Error(q(308));Ji=t,ju.dependencies={lanes:0,firstContext:t}}else Ji=Ji.next=t;return e}var Qr=null;function Lp(t){Qr===null?Qr=[t]:Qr.push(t)}function qb(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Lp(e)):(n.next=r.next,r.next=n),e.interleaved=n,Cs(t,s)}function Cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qs=!1;function Vp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,Te&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Cs(t,n)}return r=s.interleaved,r===null?(e.next=e,Lp(s)):(e.next=r.next,r.next=e),s.interleaved=e,Cs(t,n)}function Jc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ep(t,n)}}function cw(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pu(t,e,n,s){var r=t.updateQueue;Qs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,b=l;switch(m=e,p=n,b.tag){case 1:if(y=b.payload,typeof y=="function"){f=y.call(p,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,m=typeof y=="function"?y.call(p,f,m):y,m==null)break e;f=Ke({},f,m);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=f):h=h.next=p,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);ci|=a,t.lanes=a,t.memoizedState=f}}function uw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(q(191,r));r.call(s)}}}var Ml={},Zn=jr(Ml),ol=jr(Ml),ll=jr(Ml);function Yr(t){if(t===Ml)throw Error(q(174));return t}function Fp(t,e){switch(Le(ll,e),Le(ol,t),Le(Zn,Ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qf(e,t)}Be(Zn),Le(Zn,e)}function wa(){Be(Zn),Be(ol),Be(ll)}function Qb(t){Yr(ll.current);var e=Yr(Zn.current),n=qf(e,t.type);e!==n&&(Le(ol,t),Le(Zn,n))}function Up(t){ol.current===t&&(Be(Zn),Be(ol))}var Ge=jr(0);function ku(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tf=[];function zp(){for(var t=0;t<tf.length;t++)tf[t]._workInProgressVersionPrimary=null;tf.length=0}var Zc=Ds.ReactCurrentDispatcher,nf=Ds.ReactCurrentBatchConfig,li=0,He=null,dt=null,gt=null,Ru=!1,Vo=!1,cl=0,BA=0;function Rt(){throw Error(q(321))}function Bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$n(t[n],e[n]))return!1;return!0}function $p(t,e,n,s,r,i){if(li=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zc.current=t===null||t.memoizedState===null?HA:qA,t=n(s,r),Vo){i=0;do{if(Vo=!1,cl=0,25<=i)throw Error(q(301));i+=1,gt=dt=null,e.updateQueue=null,Zc.current=KA,t=n(s,r)}while(Vo)}if(Zc.current=Du,e=dt!==null&&dt.next!==null,li=0,gt=dt=He=null,Ru=!1,e)throw Error(q(300));return t}function Wp(){var t=cl!==0;return cl=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?He.memoizedState=gt=t:gt=gt.next=t,gt}function Cn(){if(dt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?He.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?He.memoizedState=gt=t:gt=gt.next=t}return gt}function ul(t,e){return typeof e=="function"?e(t):e}function sf(t){var e=Cn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=dt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((li&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=s):c=c.next=f,He.lanes|=h,ci|=h}d=d.next}while(d!==null&&d!==i);c===null?a=s:c.next=l,$n(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,He.lanes|=i,ci|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Cn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);$n(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Yb(){}function Xb(t,e){var n=He,s=Cn(),r=e(),i=!$n(s.memoizedState,r);if(i&&(s.memoizedState=r,tn=!0),s=s.queue,Gp(eE.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,dl(9,Zb.bind(null,n,s,r,e),void 0,null),wt===null)throw Error(q(349));li&30||Jb(n,e,r)}return r}function Jb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zb(t,e,n,s){e.value=n,e.getSnapshot=s,tE(e)&&nE(t)}function eE(t,e,n){return n(function(){tE(e)&&nE(t)})}function tE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$n(t,n)}catch{return!0}}function nE(t){var e=Cs(t,1);e!==null&&Un(e,t,1,-1)}function dw(t){var e=Kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:t},e.queue=t,t=t.dispatch=GA.bind(null,He,t),[e.memoizedState,t]}function dl(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function sE(){return Cn().memoizedState}function eu(t,e,n,s){var r=Kn();He.flags|=t,r.memoizedState=dl(1|e,n,void 0,s===void 0?null:s)}function Id(t,e,n,s){var r=Cn();s=s===void 0?null:s;var i=void 0;if(dt!==null){var a=dt.memoizedState;if(i=a.destroy,s!==null&&Bp(s,a.deps)){r.memoizedState=dl(e,n,i,s);return}}He.flags|=t,r.memoizedState=dl(1|e,n,i,s)}function hw(t,e){return eu(8390656,8,t,e)}function Gp(t,e){return Id(2048,8,t,e)}function rE(t,e){return Id(4,2,t,e)}function iE(t,e){return Id(4,4,t,e)}function aE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oE(t,e,n){return n=n!=null?n.concat([t]):null,Id(4,4,aE.bind(null,e,t),n)}function Hp(){}function lE(t,e){var n=Cn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Bp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function cE(t,e){var n=Cn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Bp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function uE(t,e,n){return li&21?($n(n,e)||(n=pb(),He.lanes|=n,ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function $A(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var s=nf.transition;nf.transition={};try{t(!1),e()}finally{Re=n,nf.transition=s}}function dE(){return Cn().memoizedState}function WA(t,e,n){var s=vr(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},hE(t))fE(e,n);else if(n=qb(t,e,n,s),n!==null){var r=qt();Un(n,t,s,r),mE(n,e,s)}}function GA(t,e,n){var s=vr(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(hE(t))fE(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,$n(l,a)){var c=e.interleaved;c===null?(r.next=r,Lp(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=qb(t,e,r,s),n!==null&&(r=qt(),Un(n,t,s,r),mE(n,e,s))}}function hE(t){var e=t.alternate;return t===He||e!==null&&e===He}function fE(t,e){Vo=Ru=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mE(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ep(t,n)}}var Du={readContext:Nn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},HA={readContext:Nn,useCallback:function(t,e){return Kn().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:hw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eu(4194308,4,aE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return eu(4,2,t,e)},useMemo:function(t,e){var n=Kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Kn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=WA.bind(null,He,t),[s.memoizedState,t]},useRef:function(t){var e=Kn();return t={current:t},e.memoizedState=t},useState:dw,useDebugValue:Hp,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=dw(!1),e=t[0];return t=$A.bind(null,t[1]),Kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=He,r=Kn();if(We){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),wt===null)throw Error(q(349));li&30||Jb(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,hw(eE.bind(null,s,i,t),[t]),s.flags|=2048,dl(9,Zb.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Kn(),e=wt.identifierPrefix;if(We){var n=gs,s=ps;n=(s&~(1<<32-Fn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=cl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=BA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qA={readContext:Nn,useCallback:lE,useContext:Nn,useEffect:Gp,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:iE,useMemo:cE,useReducer:sf,useRef:sE,useState:function(){return sf(ul)},useDebugValue:Hp,useDeferredValue:function(t){var e=Cn();return uE(e,dt.memoizedState,t)},useTransition:function(){var t=sf(ul)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:dE,unstable_isNewReconciler:!1},KA={readContext:Nn,useCallback:lE,useContext:Nn,useEffect:Gp,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:iE,useMemo:cE,useReducer:rf,useRef:sE,useState:function(){return rf(ul)},useDebugValue:Hp,useDeferredValue:function(t){var e=Cn();return dt===null?e.memoizedState=t:uE(e,dt.memoizedState,t)},useTransition:function(){var t=rf(ul)[0],e=Cn().memoizedState;return[t,e]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:dE,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mm(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Td={isMounted:function(t){return(t=t._reactInternals)?bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=qt(),r=vr(t),i=bs(s,r);i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,r),e!==null&&(Un(e,t,r,s),Jc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=qt(),r=vr(t),i=bs(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pr(t,i,r),e!==null&&(Un(e,t,r,s),Jc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),s=vr(t),r=bs(n,s);r.tag=2,e!=null&&(r.callback=e),e=pr(t,r,s),e!==null&&(Un(e,t,s,n),Jc(e,t,s))}};function fw(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!sl(n,s)||!sl(r,i):!0}function pE(t,e,n){var s=!1,r=Er,i=e.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(r=rn(e)?ai:Ft.current,s=e.contextTypes,i=(s=s!=null)?ga(t,r):Er),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Td,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function mw(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Td.enqueueReplaceState(e,e.state,null)}function pm(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Vp(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Nn(i):(i=rn(e)?ai:Ft.current,r.context=ga(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mm(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Td.enqueueReplaceState(r,r.state,null),Pu(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var n="",s=e;do n+=bC(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function af(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QA=typeof WeakMap=="function"?WeakMap:Map;function gE(t,e,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Mu||(Mu=!0,Sm=s),gm(t,e)},n}function vE(t,e,n){n=bs(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){gm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gm(t,e),typeof s!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function pw(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new QA;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=cj.bind(null,t,e,n),e.then(t,t))}function gw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vw(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bs(-1,1),e.tag=2,pr(n,e,1))),n.lanes|=1),t)}var YA=Ds.ReactCurrentOwner,tn=!1;function Gt(t,e,n,s){e.child=t===null?Hb(e,null,n,s):ya(e,t.child,n,s)}function yw(t,e,n,s,r){n=n.render;var i=e.ref;return ia(e,r),s=$p(t,e,n,s,i,r),n=Wp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(We&&n&&Pp(e),e.flags|=1,Gt(t,e,s,r),e.child)}function ww(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!eg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yE(t,e,i,s,r)):(t=ru(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:sl,n(a,s)&&t.ref===e.ref)return As(t,e,r)}return e.flags|=1,t=yr(i,s),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(sl(i,s)&&t.ref===e.ref)if(tn=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,As(t,e,r)}return vm(t,e,n,s,r)}function wE(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ea,cn),cn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ea,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Le(ea,cn),cn|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Le(ea,cn),cn|=s;return Gt(t,e,r,n),e.child}function _E(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vm(t,e,n,s,r){var i=rn(n)?ai:Ft.current;return i=ga(e,i),ia(e,r),n=$p(t,e,n,s,i,r),s=Wp(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,As(t,e,r)):(We&&s&&Pp(e),e.flags|=1,Gt(t,e,n,r),e.child)}function _w(t,e,n,s,r){if(rn(n)){var i=!0;Su(e)}else i=!1;if(ia(e,r),e.stateNode===null)tu(t,e),pE(e,n,s),pm(e,n,s,r),s=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nn(d):(d=rn(n)?ai:Ft.current,d=ga(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==d)&&mw(e,a,s,d),Qs=!1;var m=e.memoizedState;a.state=m,Pu(e,s,a,r),c=e.memoizedState,l!==s||m!==c||sn.current||Qs?(typeof h=="function"&&(mm(e,n,h,s),c=e.memoizedState),(l=Qs||fw(e,n,l,s,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=d,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,Kb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Rn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nn(c):(c=rn(n)?ai:Ft.current,c=ga(e,c));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&mw(e,a,s,c),Qs=!1,m=e.memoizedState,a.state=m,Pu(e,s,a,r);var y=e.memoizedState;l!==f||m!==y||sn.current||Qs?(typeof p=="function"&&(mm(e,n,p,s),y=e.memoizedState),(d=Qs||fw(e,n,d,s,m,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),a.props=s,a.state=y,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return ym(t,e,n,s,i,r)}function ym(t,e,n,s,r,i){_E(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&iw(e,n,!1),As(t,e,i);s=e.stateNode,YA.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=ya(e,t.child,null,i),e.child=ya(e,null,l,i)):Gt(t,e,l,i),e.memoizedState=s.state,r&&iw(e,n,!0),e.child}function xE(t){var e=t.stateNode;e.pendingContext?rw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rw(t,e.context,!1),Fp(t,e.containerInfo)}function xw(t,e,n,s,r){return va(),Rp(r),e.flags|=256,Gt(t,e,n,s),e.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function _m(t){return{baseLanes:t,cachePool:null,transitions:null}}function bE(t,e,n){var s=e.pendingProps,r=Ge.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Le(Ge,r&1),t===null)return hm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,t=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Cd(a,s,0,null),t=ti(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_m(n),e.memoizedState=wm,t):qp(e,a));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return XA(t,e,a,s,l,r,n);if(i){i=s.fallback,a=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=yr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=yr(l,i):(i=ti(i,a,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=t.child.memoizedState,a=a===null?_m(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=wm,s}return i=t.child,t=i.sibling,s=yr(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function qp(t,e){return e=Cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rc(t,e,n,s){return s!==null&&Rp(s),ya(e,t.child,null,n),t=qp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XA(t,e,n,s,r,i,a){if(n)return e.flags&256?(e.flags&=-257,s=af(Error(q(422))),Rc(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=Cd({mode:"visible",children:s.children},r,0,null),i=ti(i,r,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&ya(e,t.child,null,a),e.child.memoizedState=_m(a),e.memoizedState=wm,i);if(!(e.mode&1))return Rc(t,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(q(419)),s=af(i,s,void 0),Rc(t,e,a,s)}if(l=(a&t.childLanes)!==0,tn||l){if(s=wt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Cs(t,r),Un(s,t,r,-1))}return Zp(),s=af(Error(q(421))),Rc(t,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=uj.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,dn=mr(r.nextSibling),fn=e,We=!0,On=null,t!==null&&(En[In++]=ps,En[In++]=gs,En[In++]=oi,ps=t.id,gs=t.overflow,oi=e),e=qp(e,s.children),e.flags|=4096,e)}function bw(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),fm(t.return,e,n)}function of(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function EE(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Gt(t,e,s.children,n),s=Ge.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bw(t,n,e);else if(t.tag===19)bw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Le(Ge,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ku(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),of(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ku(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}of(e,!0,n,null,i);break;case"together":of(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JA(t,e,n){switch(e.tag){case 3:xE(e),va();break;case 5:Qb(e);break;case 1:rn(e.type)&&Su(e);break;case 4:Fp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Le(Au,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Le(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?bE(t,e,n):(Le(Ge,Ge.current&1),t=As(t,e,n),t!==null?t.sibling:null);Le(Ge,Ge.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return EE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Le(Ge,Ge.current),s)break;return null;case 22:case 23:return e.lanes=0,wE(t,e,n)}return As(t,e,n)}var IE,xm,TE,SE;IE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xm=function(){};TE=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Yr(Zn.current);var i=null;switch(n){case"input":r=$f(t,r),s=$f(t,s),i=[];break;case"select":r=Ke({},r,{value:void 0}),s=Ke({},s,{value:void 0}),i=[];break;case"textarea":r=Hf(t,r),s=Hf(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Iu)}Kf(n,s);var a;n=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};SE=function(t,e,n,s){n!==s&&(e.flags|=4)};function vo(t,e){if(!We)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function ZA(t,e,n){var s=e.pendingProps;switch(kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return rn(e.type)&&Tu(),Dt(e),null;case 3:return s=e.stateNode,wa(),Be(sn),Be(Ft),zp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Am(On),On=null))),xm(t,e),Dt(e),null;case 5:Up(e);var r=Yr(ll.current);if(n=e.type,t!==null&&e.stateNode!=null)TE(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(q(166));return Dt(e),null}if(t=Yr(Zn.current),Pc(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Yn]=e,s[al]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(r=0;r<So.length;r++)ze(So[r],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":Py(s,i),ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ze("invalid",s);break;case"textarea":Ry(s,i),ze("invalid",s)}Kf(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&jc(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&jc(s.textContent,l,t),r=["children",""+l]):Yo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ze("scroll",s)}switch(n){case"input":bc(s),ky(s,i,!0);break;case"textarea":bc(s),Dy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Iu)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(n,{is:s.is}):(t=a.createElement(n),n==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,n),t[Yn]=e,t[al]=s,IE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qf(n,s),n){case"dialog":ze("cancel",t),ze("close",t),r=s;break;case"iframe":case"object":case"embed":ze("load",t),r=s;break;case"video":case"audio":for(r=0;r<So.length;r++)ze(So[r],t);r=s;break;case"source":ze("error",t),r=s;break;case"img":case"image":case"link":ze("error",t),ze("load",t),r=s;break;case"details":ze("toggle",t),r=s;break;case"input":Py(t,s),r=$f(t,s),ze("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ke({},s,{value:void 0}),ze("invalid",t);break;case"textarea":Ry(t,s),r=Hf(t,s),ze("invalid",t);break;default:r=s}Kf(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?sb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xo(t,c):typeof c=="number"&&Xo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",t):c!=null&&vp(t,i,c,a))}switch(n){case"input":bc(t),ky(t,s,!1);break;case"textarea":bc(t),Dy(t);break;case"option":s.value!=null&&t.setAttribute("value",""+br(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?ta(t,!!s.multiple,i,!1):s.defaultValue!=null&&ta(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Iu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)SE(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(q(166));if(n=Yr(ll.current),Yr(Zn.current),Pc(e)){if(s=e.stateNode,n=e.memoizedProps,s[Yn]=e,(i=s.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:jc(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Yn]=e,e.stateNode=s}return Dt(e),null;case 13:if(Be(Ge),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&dn!==null&&e.mode&1&&!(e.flags&128))Wb(),va(),e.flags|=98560,i=!1;else if(i=Pc(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Yn]=e}else va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else On!==null&&(Am(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ht===0&&(ht=3):Zp())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return wa(),xm(t,e),t===null&&rl(e.stateNode.containerInfo),Dt(e),null;case 10:return Mp(e.type._context),Dt(e),null;case 17:return rn(e.type)&&Tu(),Dt(e),null;case 19:if(Be(Ge),i=e.memoizedState,i===null)return Dt(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)vo(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ku(t),a!==null){for(e.flags|=128,vo(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ge,Ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>xa&&(e.flags|=128,s=!0,vo(i,!1),e.lanes=4194304)}else{if(!s)if(t=ku(a),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!We)return Dt(e),null}else 2*rt()-i.renderingStartTime>xa&&n!==1073741824&&(e.flags|=128,s=!0,vo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rt(),e.sibling=null,n=Ge.current,Le(Ge,s?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Jp(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?cn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function ej(t,e){switch(kp(e),e.tag){case 1:return rn(e.type)&&Tu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wa(),Be(sn),Be(Ft),zp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Up(e),null;case 13:if(Be(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ge),null;case 4:return wa(),null;case 10:return Mp(e.type._context),null;case 22:case 23:return Jp(),null;case 24:return null;default:return null}}var Dc=!1,Lt=!1,tj=typeof WeakSet=="function"?WeakSet:Set,J=null;function Zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ze(t,e,s)}else n.current=null}function bm(t,e,n){try{n()}catch(s){Ze(t,e,s)}}var Ew=!1;function nj(t,e){if(im=xu,t=Pb(),jp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||r!==0&&f.nodeType!==3||(l=a+r),f!==i||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++d===r&&(l=a),m===i&&++h===s&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(am={focusedElem:t,selectionRange:n},xu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,T=y.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Rn(e.type,b),T);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){Ze(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return y=Ew,Ew=!1,y}function Fo(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&bm(e,n,i)}r=r.next}while(r!==s)}}function Sd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Em(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function NE(t){var e=t.alternate;e!==null&&(t.alternate=null,NE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[al],delete e[cm],delete e[VA],delete e[FA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CE(t){return t.tag===5||t.tag===3||t.tag===4}function Iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Iu));else if(s!==4&&(t=t.child,t!==null))for(Im(t,e,n),t=t.sibling;t!==null;)Im(t,e,n),t=t.sibling}function Tm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Tm(t,e,n),t=t.sibling;t!==null;)Tm(t,e,n),t=t.sibling}var Et=null,Dn=!1;function Gs(t,e,n){for(n=n.child;n!==null;)AE(t,e,n),n=n.sibling}function AE(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(yd,n)}catch{}switch(n.tag){case 5:Lt||Zi(n,e);case 6:var s=Et,r=Dn;Et=null,Gs(t,e,n),Et=s,Dn=r,Et!==null&&(Dn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(Dn?(t=Et,n=n.stateNode,t.nodeType===8?Zh(t.parentNode,n):t.nodeType===1&&Zh(t,n),tl(t)):Zh(Et,n.stateNode));break;case 4:s=Et,r=Dn,Et=n.stateNode.containerInfo,Dn=!0,Gs(t,e,n),Et=s,Dn=r;break;case 0:case 11:case 14:case 15:if(!Lt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&bm(n,e,a),r=r.next}while(r!==s)}Gs(t,e,n);break;case 1:if(!Lt&&(Zi(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Ze(n,e,l)}Gs(t,e,n);break;case 21:Gs(t,e,n);break;case 22:n.mode&1?(Lt=(s=Lt)||n.memoizedState!==null,Gs(t,e,n),Lt=s):Gs(t,e,n);break;default:Gs(t,e,n)}}function Tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tj),e.forEach(function(s){var r=dj.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,Dn=!1;break e;case 3:Et=l.stateNode.containerInfo,Dn=!0;break e;case 4:Et=l.stateNode.containerInfo,Dn=!0;break e}l=l.return}if(Et===null)throw Error(q(160));AE(i,a,r),Et=null,Dn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ze(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),qn(t),s&4){try{Fo(3,t,t.return),Sd(3,t)}catch(b){Ze(t,t.return,b)}try{Fo(5,t,t.return)}catch(b){Ze(t,t.return,b)}}break;case 1:kn(e,t),qn(t),s&512&&n!==null&&Zi(n,n.return);break;case 5:if(kn(e,t),qn(t),s&512&&n!==null&&Zi(n,n.return),t.flags&32){var r=t.stateNode;try{Xo(r,"")}catch(b){Ze(t,t.return,b)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Jx(r,i),Qf(l,a);var d=Qf(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?sb(r,f):h==="dangerouslySetInnerHTML"?tb(r,f):h==="children"?Xo(r,f):vp(r,h,f,d)}switch(l){case"input":Wf(r,i);break;case"textarea":Zx(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ta(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ta(r,!!i.multiple,i.defaultValue,!0):ta(r,!!i.multiple,i.multiple?[]:"",!1))}r[al]=i}catch(b){Ze(t,t.return,b)}}break;case 6:if(kn(e,t),qn(t),s&4){if(t.stateNode===null)throw Error(q(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(b){Ze(t,t.return,b)}}break;case 3:if(kn(e,t),qn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{tl(e.containerInfo)}catch(b){Ze(t,t.return,b)}break;case 4:kn(e,t),qn(t);break;case 13:kn(e,t),qn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Yp=rt())),s&4&&Tw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(d=Lt)||h,kn(e,t),Lt=d):kn(e,t),qn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(f=J=h;J!==null;){switch(m=J,p=m.child,m.tag){case 0:case 11:case 14:case 15:Fo(4,m,m.return);break;case 1:Zi(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){s=m,n=m.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){Ze(s,n,b)}}break;case 5:Zi(m,m.return);break;case 22:if(m.memoizedState!==null){Nw(f);continue}}p!==null?(p.return=m,J=p):Nw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nb("display",a))}catch(b){Ze(t,t.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Ze(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(e,t),qn(t),s&4&&Tw(t);break;case 21:break;default:kn(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CE(n)){var s=n;break e}n=n.return}throw Error(q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Xo(r,""),s.flags&=-33);var i=Iw(t);Tm(t,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=Iw(t);Im(t,l,a);break;default:throw Error(q(161))}}catch(c){Ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sj(t,e,n){J=t,PE(t)}function PE(t,e,n){for(var s=(t.mode&1)!==0;J!==null;){var r=J,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||Dc;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Lt;l=Dc;var d=Lt;if(Dc=a,(Lt=c)&&!d)for(J=r;J!==null;)a=J,c=a.child,a.tag===22&&a.memoizedState!==null?Cw(r):c!==null?(c.return=a,J=c):Cw(r);for(;i!==null;)J=i,PE(i),i=i.sibling;J=r,Dc=l,Lt=d}Sw(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,J=i):Sw(t)}}function Sw(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Sd(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Lt)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uw(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&tl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Lt||e.flags&512&&Em(e)}catch(m){Ze(e,e.return,m)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function Nw(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function Cw(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sd(4,e)}catch(c){Ze(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Ze(e,r,c)}}var i=e.return;try{Em(e)}catch(c){Ze(e,i,c)}break;case 5:var a=e.return;try{Em(e)}catch(c){Ze(e,a,c)}}}catch(c){Ze(e,e.return,c)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var rj=Math.ceil,Ou=Ds.ReactCurrentDispatcher,Kp=Ds.ReactCurrentOwner,Sn=Ds.ReactCurrentBatchConfig,Te=0,wt=null,ot=null,Tt=0,cn=0,ea=jr(0),ht=0,hl=null,ci=0,Nd=0,Qp=0,Uo=null,en=null,Yp=0,xa=1/0,ds=null,Mu=!1,Sm=null,gr=null,Oc=!1,sr=null,Lu=0,zo=0,Nm=null,nu=-1,su=0;function qt(){return Te&6?rt():nu!==-1?nu:nu=rt()}function vr(t){return t.mode&1?Te&2&&Tt!==0?Tt&-Tt:zA.transition!==null?(su===0&&(su=pb()),su):(t=Re,t!==0||(t=window.event,t=t===void 0?16:bb(t.type)),t):1}function Un(t,e,n,s){if(50<zo)throw zo=0,Nm=null,Error(q(185));Rl(t,n,s),(!(Te&2)||t!==wt)&&(t===wt&&(!(Te&2)&&(Nd|=n),ht===4&&Xs(t,Tt)),an(t,s),n===1&&Te===0&&!(e.mode&1)&&(xa=rt()+500,Ed&&Pr()))}function an(t,e){var n=t.callbackNode;zC(t,e);var s=_u(t,t===wt?Tt:0);if(s===0)n!==null&&Ly(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Ly(n),e===1)t.tag===0?UA(Aw.bind(null,t)):zb(Aw.bind(null,t)),MA(function(){!(Te&6)&&Pr()}),n=null;else{switch(gb(s)){case 1:n=bp;break;case 4:n=fb;break;case 16:n=wu;break;case 536870912:n=mb;break;default:n=wu}n=FE(n,kE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kE(t,e){if(nu=-1,su=0,Te&6)throw Error(q(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var s=_u(t,t===wt?Tt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Vu(t,s);else{e=s;var r=Te;Te|=2;var i=DE();(wt!==t||Tt!==e)&&(ds=null,xa=rt()+500,ei(t,e));do try{oj();break}catch(l){RE(t,l)}while(!0);Op(),Ou.current=i,Te=r,ot!==null?e=0:(wt=null,Tt=0,e=ht)}if(e!==0){if(e===2&&(r=em(t),r!==0&&(s=r,e=Cm(t,r))),e===1)throw n=hl,ei(t,0),Xs(t,s),an(t,rt()),n;if(e===6)Xs(t,s);else{if(r=t.current.alternate,!(s&30)&&!ij(r)&&(e=Vu(t,s),e===2&&(i=em(t),i!==0&&(s=i,e=Cm(t,i))),e===1))throw n=hl,ei(t,0),Xs(t,s),an(t,rt()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(q(345));case 2:Hr(t,en,ds);break;case 3:if(Xs(t,s),(s&130023424)===s&&(e=Yp+500-rt(),10<e)){if(_u(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){qt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=lm(Hr.bind(null,t,en,ds),e);break}Hr(t,en,ds);break;case 4:if(Xs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var a=31-Fn(s);i=1<<a,a=e[a],a>r&&(r=a),s&=~i}if(s=r,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*rj(s/1960))-s,10<s){t.timeoutHandle=lm(Hr.bind(null,t,en,ds),s);break}Hr(t,en,ds);break;case 5:Hr(t,en,ds);break;default:throw Error(q(329))}}}return an(t,rt()),t.callbackNode===n?kE.bind(null,t):null}function Cm(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(ei(t,e).flags|=256),t=Vu(t,e),t!==2&&(e=en,en=n,e!==null&&Am(e)),t}function Am(t){en===null?en=t:en.push.apply(en,t)}function ij(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!$n(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xs(t,e){for(e&=~Qp,e&=~Nd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),s=1<<n;t[n]=-1,e&=~s}}function Aw(t){if(Te&6)throw Error(q(327));aa();var e=_u(t,0);if(!(e&1))return an(t,rt()),null;var n=Vu(t,e);if(t.tag!==0&&n===2){var s=em(t);s!==0&&(e=s,n=Cm(t,s))}if(n===1)throw n=hl,ei(t,0),Xs(t,e),an(t,rt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,en,ds),an(t,rt()),null}function Xp(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(xa=rt()+500,Ed&&Pr())}}function ui(t){sr!==null&&sr.tag===0&&!(Te&6)&&aa();var e=Te;Te|=1;var n=Sn.transition,s=Re;try{if(Sn.transition=null,Re=1,t)return t()}finally{Re=s,Sn.transition=n,Te=e,!(Te&6)&&Pr()}}function Jp(){cn=ea.current,Be(ea)}function ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OA(n)),ot!==null)for(n=ot.return;n!==null;){var s=n;switch(kp(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Tu();break;case 3:wa(),Be(sn),Be(Ft),zp();break;case 5:Up(s);break;case 4:wa();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:Mp(s.type._context);break;case 22:case 23:Jp()}n=n.return}if(wt=t,ot=t=yr(t.current,null),Tt=cn=e,ht=0,hl=null,Qp=Nd=ci=0,en=Uo=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}Qr=null}return t}function RE(t,e){do{var n=ot;try{if(Op(),Zc.current=Du,Ru){for(var s=He.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Ru=!1}if(li=0,gt=dt=He=null,Vo=!1,cl=0,Kp.current=null,n===null||n.return===null){ht=1,hl=e,ot=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gw(a);if(p!==null){p.flags&=-257,vw(p,a,l,i,e),p.mode&1&&pw(i,d,e),e=p,c=d;var y=e.updateQueue;if(y===null){var b=new Set;b.add(c),e.updateQueue=b}else y.add(c);break e}else{if(!(e&1)){pw(i,d,e),Zp();break e}c=Error(q(426))}}else if(We&&l.mode&1){var T=gw(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),vw(T,a,l,i,e),Rp(_a(c,l));break e}}i=c=_a(c,l),ht!==4&&(ht=2),Uo===null?Uo=[i]:Uo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=gE(i,c,e);cw(i,x);break e;case 1:l=c;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(gr===null||!gr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=vE(i,l,e);cw(i,j);break e}}i=i.return}while(i!==null)}ME(n)}catch(P){e=P,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function DE(){var t=Ou.current;return Ou.current=Du,t===null?Du:t}function Zp(){(ht===0||ht===3||ht===2)&&(ht=4),wt===null||!(ci&268435455)&&!(Nd&268435455)||Xs(wt,Tt)}function Vu(t,e){var n=Te;Te|=2;var s=DE();(wt!==t||Tt!==e)&&(ds=null,ei(t,e));do try{aj();break}catch(r){RE(t,r)}while(!0);if(Op(),Te=n,Ou.current=s,ot!==null)throw Error(q(261));return wt=null,Tt=0,ht}function aj(){for(;ot!==null;)OE(ot)}function oj(){for(;ot!==null&&!kC();)OE(ot)}function OE(t){var e=VE(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?ME(t):ot=e,Kp.current=null}function ME(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ej(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,ot=null;return}}else if(n=ZA(n,e,cn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ht===0&&(ht=5)}function Hr(t,e,n){var s=Re,r=Sn.transition;try{Sn.transition=null,Re=1,lj(t,e,n,s)}finally{Sn.transition=r,Re=s}return null}function lj(t,e,n,s){do aa();while(sr!==null);if(Te&6)throw Error(q(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BC(t,i),t===wt&&(ot=wt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oc||(Oc=!0,FE(wu,function(){return aa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var a=Re;Re=1;var l=Te;Te|=4,Kp.current=null,nj(t,n),jE(n,t),CA(am),xu=!!im,am=im=null,t.current=n,sj(n),RC(),Te=l,Re=a,Sn.transition=i}else t.current=n;if(Oc&&(Oc=!1,sr=t,Lu=r),i=t.pendingLanes,i===0&&(gr=null),MC(n.stateNode),an(t,rt()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Mu)throw Mu=!1,t=Sm,Sm=null,t;return Lu&1&&t.tag!==0&&aa(),i=t.pendingLanes,i&1?t===Nm?zo++:(zo=0,Nm=t):zo=0,Pr(),null}function aa(){if(sr!==null){var t=gb(Lu),e=Sn.transition,n=Re;try{if(Sn.transition=null,Re=16>t?16:t,sr===null)var s=!1;else{if(t=sr,sr=null,Lu=0,Te&6)throw Error(q(331));var r=Te;for(Te|=4,J=t.current;J!==null;){var i=J,a=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(J=d;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Fo(8,h,i)}var f=h.child;if(f!==null)f.return=h,J=f;else for(;J!==null;){h=J;var m=h.sibling,p=h.return;if(NE(h),h===d){J=null;break}if(m!==null){m.return=p,J=m;break}J=p}}}var y=i.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var T=b.sibling;b.sibling=null,b=T}while(b!==null)}}J=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,J=a;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var w=t.current;for(J=w;J!==null;){a=J;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,J=S;else e:for(a=w;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sd(9,l)}}catch(P){Ze(l,l.return,P)}if(l===a){J=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,J=j;break e}J=l.return}}if(Te=r,Pr(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(yd,t)}catch{}s=!0}return s}finally{Re=n,Sn.transition=e}}return!1}function jw(t,e,n){e=_a(n,e),e=gE(t,e,1),t=pr(t,e,1),e=qt(),t!==null&&(Rl(t,1,e),an(t,e))}function Ze(t,e,n){if(t.tag===3)jw(t,t,n);else for(;e!==null;){if(e.tag===3){jw(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gr===null||!gr.has(s))){t=_a(n,t),t=vE(e,t,1),e=pr(e,t,1),t=qt(),e!==null&&(Rl(e,1,t),an(e,t));break}}e=e.return}}function cj(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(Tt&n)===n&&(ht===4||ht===3&&(Tt&130023424)===Tt&&500>rt()-Yp?ei(t,0):Qp|=n),an(t,e)}function LE(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var n=qt();t=Cs(t,e),t!==null&&(Rl(t,e,n),an(t,n))}function uj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),LE(t,n)}function dj(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(q(314))}s!==null&&s.delete(e),LE(t,n)}var VE;VE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,JA(t,e,n);tn=!!(t.flags&131072)}else tn=!1,We&&e.flags&1048576&&Bb(e,Cu,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;tu(t,e),t=e.pendingProps;var r=ga(e,Ft.current);ia(e,n),r=$p(null,e,s,t,r,n);var i=Wp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(s)?(i=!0,Su(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Vp(e),r.updater=Td,e.stateNode=r,r._reactInternals=e,pm(e,s,t,n),e=ym(null,e,s,!0,i,n)):(e.tag=0,We&&i&&Pp(e),Gt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(tu(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=fj(s),t=Rn(s,t),r){case 0:e=vm(null,e,s,t,n);break e;case 1:e=_w(null,e,s,t,n);break e;case 11:e=yw(null,e,s,t,n);break e;case 14:e=ww(null,e,s,Rn(s.type,t),n);break e}throw Error(q(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),vm(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),_w(t,e,s,r,n);case 3:e:{if(xE(e),t===null)throw Error(q(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Kb(t,e),Pu(e,s,null,n);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=_a(Error(q(423)),e),e=xw(t,e,s,n,r);break e}else if(s!==r){r=_a(Error(q(424)),e),e=xw(t,e,s,n,r);break e}else for(dn=mr(e.stateNode.containerInfo.firstChild),fn=e,We=!0,On=null,n=Hb(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(va(),s===r){e=As(t,e,n);break e}Gt(t,e,s,n)}e=e.child}return e;case 5:return Qb(e),t===null&&hm(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,a=r.children,om(s,r)?a=null:i!==null&&om(s,i)&&(e.flags|=32),_E(t,e),Gt(t,e,a,n),e.child;case 6:return t===null&&hm(e),null;case 13:return bE(t,e,n);case 4:return Fp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ya(e,null,s,n):Gt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),yw(t,e,s,r,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,Le(Au,s._currentValue),s._currentValue=a,i!==null)if($n(i.value,a)){if(i.children===r.children&&!sn.current){e=As(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=bs(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fm(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),fm(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Gt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,ia(e,n),r=Nn(r),s=s(r),e.flags|=1,Gt(t,e,s,n),e.child;case 14:return s=e.type,r=Rn(s,e.pendingProps),r=Rn(s.type,r),ww(t,e,s,r,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Rn(s,r),tu(t,e),e.tag=1,rn(s)?(t=!0,Su(e)):t=!1,ia(e,n),pE(e,s,r),pm(e,s,r,n),ym(null,e,s,!0,t,n);case 19:return EE(t,e,n);case 22:return wE(t,e,n)}throw Error(q(156,e.tag))};function FE(t,e){return hb(t,e)}function hj(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,s){return new hj(t,e,n,s)}function eg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fj(t){if(typeof t=="function")return eg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wp)return 11;if(t===_p)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ru(t,e,n,s,r,i){var a=2;if(s=t,typeof t=="function")eg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wi:return ti(n.children,r,i,e);case yp:a=8,r|=8;break;case Ff:return t=Tn(12,n,e,r|2),t.elementType=Ff,t.lanes=i,t;case Uf:return t=Tn(13,n,e,r),t.elementType=Uf,t.lanes=i,t;case zf:return t=Tn(19,n,e,r),t.elementType=zf,t.lanes=i,t;case Qx:return Cd(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qx:a=10;break e;case Kx:a=9;break e;case wp:a=11;break e;case _p:a=14;break e;case Ks:a=16,s=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Tn(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function ti(t,e,n,s){return t=Tn(7,t,s,e),t.lanes=n,t}function Cd(t,e,n,s){return t=Tn(22,t,s,e),t.elementType=Qx,t.lanes=n,t.stateNode={isHidden:!1},t}function lf(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function cf(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mj(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bh(0),this.expirationTimes=Bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tg(t,e,n,s,r,i,a,l,c){return t=new mj(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vp(i),t}function pj(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$i,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function UE(t){if(!t)return Er;t=t._reactInternals;e:{if(bi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(rn(n))return Ub(t,n,e)}return e}function zE(t,e,n,s,r,i,a,l,c){return t=tg(n,s,!0,t,r,i,a,l,c),t.context=UE(null),n=t.current,s=qt(),r=vr(n),i=bs(s,r),i.callback=e??null,pr(n,i,r),t.current.lanes=r,Rl(t,r,s),an(t,s),t}function Ad(t,e,n,s){var r=e.current,i=qt(),a=vr(r);return n=UE(n),e.context===null?e.context=n:e.pendingContext=n,e=bs(i,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=pr(r,e,a),t!==null&&(Un(t,r,a,i),Jc(t,r,a)),a}function Fu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ng(t,e){Pw(t,e),(t=t.alternate)&&Pw(t,e)}function gj(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function sg(t){this._internalRoot=t}jd.prototype.render=sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Ad(t,e,null,null)};jd.prototype.unmount=sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){Ad(null,t,null,null)}),e[Ns]=null}};function jd(t){this._internalRoot=t}jd.prototype.unstable_scheduleHydration=function(t){if(t){var e=wb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ys.length&&e!==0&&e<Ys[n].priority;n++);Ys.splice(n,0,t),n===0&&xb(t)}};function rg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kw(){}function vj(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=Fu(a);i.call(d)}}var a=zE(e,s,t,0,null,!1,!1,"",kw);return t._reactRootContainer=a,t[Ns]=a.current,rl(t.nodeType===8?t.parentNode:t),ui(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=Fu(c);l.call(d)}}var c=tg(t,0,!1,null,null,!1,!1,"",kw);return t._reactRootContainer=c,t[Ns]=c.current,rl(t.nodeType===8?t.parentNode:t),ui(function(){Ad(e,c,n,s)}),c}function kd(t,e,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=Fu(a);l.call(c)}}Ad(e,a,t,r)}else a=vj(n,e,t,r,s);return Fu(a)}vb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=To(e.pendingLanes);n!==0&&(Ep(e,n|1),an(e,rt()),!(Te&6)&&(xa=rt()+500,Pr()))}break;case 13:ui(function(){var s=Cs(t,1);if(s!==null){var r=qt();Un(s,t,1,r)}}),ng(t,1)}};Ip=function(t){if(t.tag===13){var e=Cs(t,134217728);if(e!==null){var n=qt();Un(e,t,134217728,n)}ng(t,134217728)}};yb=function(t){if(t.tag===13){var e=vr(t),n=Cs(t,e);if(n!==null){var s=qt();Un(n,t,e,s)}ng(t,e)}};wb=function(){return Re};_b=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Xf=function(t,e,n){switch(e){case"input":if(Wf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=bd(s);if(!r)throw Error(q(90));Xx(s),Wf(s,r)}}}break;case"textarea":Zx(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};ab=Xp;ob=ui;var yj={usingClientEntryPoint:!1,Events:[Ol,Ki,bd,rb,ib,Xp]},yo={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wj={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ds.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ub(t),t===null?null:t.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||gj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{yd=Mc.inject(wj),Jn=Mc}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yj;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rg(e))throw Error(q(200));return pj(t,e,null,n)};yn.createRoot=function(t,e){if(!rg(t))throw Error(q(299));var n=!1,s="",r=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tg(t,1,!1,null,null,n,!1,s,r),t[Ns]=e.current,rl(t.nodeType===8?t.parentNode:t),new sg(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=ub(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return ui(t)};yn.hydrate=function(t,e,n){if(!Pd(e))throw Error(q(200));return kd(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!rg(t))throw Error(q(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=BE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=zE(e,null,t,1,n??null,r,!1,i,a),t[Ns]=e.current,rl(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new jd(e)};yn.render=function(t,e,n){if(!Pd(e))throw Error(q(200));return kd(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!Pd(t))throw Error(q(40));return t._reactRootContainer?(ui(function(){kd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};yn.unstable_batchedUpdates=Xp;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Pd(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return kd(t,e,n,!1,s)};yn.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$x.exports=yn;var WE=$x.exports,GE,Rw=WE;GE=Rw.createRoot,Rw.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fl(){return fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},fl.apply(this,arguments)}var rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(rr||(rr={}));const Dw="popstate";function _j(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return jm("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Uu(r)}return bj(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xj(){return Math.random().toString(36).substr(2,8)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function jm(t,e,n,s){return n===void 0&&(n=null),fl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?La(e):e,{state:n,key:e&&e.key||s||xj()})}function Uu(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function La(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function bj(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=rr.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(fl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=rr.Pop;let T=h(),x=T==null?null:T-d;d=T,c&&c({action:l,location:b.location,delta:x})}function m(T,x){l=rr.Push;let w=jm(b.location,T,x);d=h()+1;let S=Ow(w,d),j=b.createHref(w);try{a.pushState(S,"",j)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(j)}i&&c&&c({action:l,location:b.location,delta:1})}function p(T,x){l=rr.Replace;let w=jm(b.location,T,x);d=h();let S=Ow(w,d),j=b.createHref(w);a.replaceState(S,"",j),i&&c&&c({action:l,location:b.location,delta:0})}function y(T){let x=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof T=="string"?T:Uu(T);return w=w.replace(/ $/,"%20"),qe(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let b={get action(){return l},get location(){return t(r,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Dw,f),c=T,()=>{r.removeEventListener(Dw,f),c=null}},createHref(T){return e(r,T)},createURL:y,encodeLocation(T){let x=y(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(T){return a.go(T)}};return b}var Mw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mw||(Mw={}));function Ej(t,e,n){n===void 0&&(n="/");let s=typeof e=="string"?La(e):e,r=ba(s.pathname||"/",n);if(r==null)return null;let i=qE(t);Ij(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=Oj(r);a=Rj(i[l],c)}return a}function qE(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(qe(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=wr([s,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Pj(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of KE(i.path))r(i,a,c)}),e}function KE(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=KE(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ij(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kj(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Tj=/^:[\w-]+$/,Sj=3,Nj=2,Cj=1,Aj=10,jj=-2,Lw=t=>t==="*";function Pj(t,e){let n=t.split("/"),s=n.length;return n.some(Lw)&&(s+=jj),e&&(s+=Nj),n.filter(r=>!Lw(r)).reduce((r,i)=>r+(Tj.test(i)?Sj:i===""?Cj:Aj),s)}function kj(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function Rj(t,e){let{routesMeta:n}=t,s={},r="/",i=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",h=Pm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d);if(!h)return null;Object.assign(s,h.params);let f=l.route;i.push({params:s,pathname:wr([r,h.pathname]),pathnameBase:Fj(wr([r,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(r=wr([r,h.pathnameBase]))}return i}function Pm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Dj(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let b=l[f]||"";a=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[f];return p&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function Dj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function Oj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ba(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function Mj(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?La(t):t;return{pathname:n?n.startsWith("/")?n:Lj(n,e):e,search:Uj(s),hash:zj(r)}}function Lj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function uf(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ig(t,e){let n=Vj(t);return e?n.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function ag(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=La(t):(r=fl({},t),qe(!r.pathname||!r.pathname.includes("?"),uf("?","pathname","search",r)),qe(!r.pathname||!r.pathname.includes("#"),uf("#","pathname","hash",r)),qe(!r.search||!r.search.includes("#"),uf("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=Mj(r,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),Fj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Uj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Bj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QE=["post","put","patch","delete"];new Set(QE);const $j=["get",...QE];new Set($j);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ml.apply(this,arguments)}const Rd=R.createContext(null),YE=R.createContext(null),Os=R.createContext(null),Dd=R.createContext(null),kr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),XE=R.createContext(null);function Wj(t,e){let{relative:n}=e===void 0?{}:e;Va()||qe(!1);let{basename:s,navigator:r}=R.useContext(Os),{hash:i,pathname:a,search:l}=Od(t,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:wr([s,a])),r.createHref({pathname:c,search:l,hash:i})}function Va(){return R.useContext(Dd)!=null}function Ei(){return Va()||qe(!1),R.useContext(Dd).location}function JE(t){R.useContext(Os).static||R.useLayoutEffect(t)}function Ms(){let{isDataRoute:t}=R.useContext(kr);return t?sP():Gj()}function Gj(){Va()||qe(!1);let t=R.useContext(Rd),{basename:e,future:n,navigator:s}=R.useContext(Os),{matches:r}=R.useContext(kr),{pathname:i}=Ei(),a=JSON.stringify(ig(r,n.v7_relativeSplatPath)),l=R.useRef(!1);return JE(()=>{l.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=ag(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:wr([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,a,i,t])}function Od(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=R.useContext(Os),{matches:r}=R.useContext(kr),{pathname:i}=Ei(),a=JSON.stringify(ig(r,s.v7_relativeSplatPath));return R.useMemo(()=>ag(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function Hj(t,e){return qj(t,e)}function qj(t,e,n,s){Va()||qe(!1);let{navigator:r}=R.useContext(Os),{matches:i}=R.useContext(kr),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Ei(),h;if(e){var f;let T=typeof e=="string"?La(e):e;c==="/"||(f=T.pathname)!=null&&f.startsWith(c)||qe(!1),h=T}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let T=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let y=Ej(t,{pathname:p}),b=Jj(y&&y.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:wr([c,r.encodeLocation?r.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:wr([c,r.encodeLocation?r.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,s);return e&&b?R.createElement(Dd.Provider,{value:{location:ml({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:rr.Pop}},b):b}function Kj(){let t=nP(),e=Bj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:r},n):null,null)}const Qj=R.createElement(Kj,null);class Yj extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(kr.Provider,{value:this.props.routeContext},R.createElement(XE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xj(t){let{routeContext:e,match:n,children:s}=t,r=R.useContext(Rd);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(kr.Provider,{value:e},s)}function Jj(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let a=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id]));h>=0||qe(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:p}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let p,y=!1,b=null,T=null;n&&(p=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||Qj,c&&(d<0&&m===0?(rP("route-fallback"),y=!0,T=null):d===m&&(y=!0,T=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,m+1)),w=()=>{let S;return p?S=b:y?S=T:f.route.Component?S=R.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,R.createElement(Xj,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(Yj,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var ZE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZE||{}),eI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eI||{});function Zj(t){let e=R.useContext(Rd);return e||qe(!1),e}function eP(t){let e=R.useContext(YE);return e||qe(!1),e}function tP(t){let e=R.useContext(kr);return e||qe(!1),e}function tI(t){let e=tP(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function nP(){var t;let e=R.useContext(XE),n=eP(),s=tI();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function sP(){let{router:t}=Zj(ZE.UseNavigateStable),e=tI(eI.UseNavigateStable),n=R.useRef(!1);return JE(()=>{n.current=!0}),R.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ml({fromRouteId:e},i)))},[t,e])}const Vw={};function rP(t,e,n){Vw[t]||(Vw[t]=!0)}function Hs(t){let{to:e,replace:n,state:s,relative:r}=t;Va()||qe(!1);let{future:i,static:a}=R.useContext(Os),{matches:l}=R.useContext(kr),{pathname:c}=Ei(),d=Ms(),h=ag(e,ig(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return R.useEffect(()=>d(JSON.parse(f),{replace:n,state:s,relative:r}),[d,f,r,n,s]),null}function bn(t){qe(!1)}function iP(t){let{basename:e="/",children:n=null,location:s,navigationType:r=rr.Pop,navigator:i,static:a=!1,future:l}=t;Va()&&qe(!1);let c=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:i,static:a,future:ml({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=La(s));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:y="default"}=s,b=R.useMemo(()=>{let T=ba(h,c);return T==null?null:{location:{pathname:T,search:f,hash:m,state:p,key:y},navigationType:r}},[c,h,f,m,p,y,r]);return b==null?null:R.createElement(Os.Provider,{value:d},R.createElement(Dd.Provider,{children:n,value:b}))}function aP(t){let{children:e,location:n}=t;return Hj(km(e),n)}new Promise(()=>{});function km(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(s,r)=>{if(!R.isValidElement(s))return;let i=[...e,r];if(s.type===R.Fragment){n.push.apply(n,km(s.props.children,i));return}s.type!==bn&&qe(!1),!s.props.index||!s.props.children||qe(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=km(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},zu.apply(this,arguments)}function nI(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function oP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lP(t,e){return t.button===0&&(!e||e==="_self")&&!oP(t)}function Rm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function cP(t,e){let n=Rm(t);return e&&e.forEach((s,r)=>{n.has(r)||e.getAll(r).forEach(i=>{n.append(r,i)})}),n}const uP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],dP=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],hP="6";try{window.__reactRouterVersion=hP}catch{}const fP=R.createContext({isTransitioning:!1}),mP="startTransition",Fw=cC[mP];function pP(t){let{basename:e,children:n,future:s,window:r}=t,i=R.useRef();i.current==null&&(i.current=_j({window:r,v5Compat:!0}));let a=i.current,[l,c]=R.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},h=R.useCallback(f=>{d&&Fw?Fw(()=>c(f)):c(f)},[c,d]);return R.useLayoutEffect(()=>a.listen(h),[a,h]),R.createElement(iP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const gP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pl=R.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,unstable_viewTransition:f}=e,m=nI(e,uP),{basename:p}=R.useContext(Os),y,b=!1;if(typeof d=="string"&&vP.test(d)&&(y=d,gP))try{let S=new URL(window.location.href),j=d.startsWith("//")?new URL(S.protocol+d):new URL(d),P=ba(j.pathname,p);j.origin===S.origin&&P!=null?d=P+j.search+j.hash:b=!0}catch{}let T=Wj(d,{relative:r}),x=_P(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:r,unstable_viewTransition:f});function w(S){s&&s(S),S.defaultPrevented||x(S)}return R.createElement("a",zu({},m,{href:y||T,onClick:b||i?s:w,ref:n,target:c}))}),yP=R.forwardRef(function(e,n){let{"aria-current":s="page",caseSensitive:r=!1,className:i="",end:a=!1,style:l,to:c,unstable_viewTransition:d,children:h}=e,f=nI(e,dP),m=Od(c,{relative:f.relative}),p=Ei(),y=R.useContext(YE),{navigator:b,basename:T}=R.useContext(Os),x=y!=null&&xP(m)&&d===!0,w=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,S=p.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(S=S.toLowerCase(),j=j?j.toLowerCase():null,w=w.toLowerCase()),j&&T&&(j=ba(j,T)||j);const P=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let O=S===w||!a&&S.startsWith(w)&&S.charAt(P)==="/",_=j!=null&&(j===w||!a&&j.startsWith(w)&&j.charAt(w.length)==="/"),v={isActive:O,isPending:_,isTransitioning:x},C=O?s:void 0,E;typeof i=="function"?E=i(v):E=[i,O?"active":null,_?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(v):l;return R.createElement(pl,zu({},f,{"aria-current":C,className:E,ref:n,style:A,to:c,unstable_viewTransition:d}),typeof h=="function"?h(v):h)});var Dm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dm||(Dm={}));var Uw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uw||(Uw={}));function wP(t){let e=R.useContext(Rd);return e||qe(!1),e}function _P(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,unstable_viewTransition:l}=e===void 0?{}:e,c=Ms(),d=Ei(),h=Od(t,{relative:a});return R.useCallback(f=>{if(lP(f,n)){f.preventDefault();let m=s!==void 0?s:Uu(d)===Uu(h);c(t,{replace:m,state:r,preventScrollReset:i,relative:a,unstable_viewTransition:l})}},[d,c,h,s,r,n,t,i,a,l])}function og(t){let e=R.useRef(Rm(t)),n=R.useRef(!1),s=Ei(),r=R.useMemo(()=>cP(s.search,n.current?null:e.current),[s.search]),i=Ms(),a=R.useCallback((l,c)=>{const d=Rm(typeof l=="function"?l(r):l);n.current=!0,i("?"+d,c)},[i,r]);return[r,a]}function xP(t,e){e===void 0&&(e={});let n=R.useContext(fP);n==null&&qe(!1);let{basename:s}=wP(Dm.useViewTransitionState),r=Od(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ba(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=ba(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Pm(r.pathname,a)!=null||Pm(r.pathname,i)!=null}var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},bP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},rI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,l=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,p=d&63;c||(p=64,a||(m=64)),s.push(n[h],n[f],n[m],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||d==null||f==null)throw new EP;const m=i<<2|l>>4;if(s.push(m),d!==64){const p=l<<4&240|d>>2;if(s.push(p),f!==64){const y=d<<6&192|f;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IP=function(t){const e=sI(t);return rI.encodeByteArray(e,!0)},Bu=function(t){return IP(t).replace(/\./g,"")},iI=function(t){try{return rI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=()=>TP().__FIREBASE_DEFAULTS__,NP=()=>{if(typeof process>"u"||typeof zw>"u")return;const t=zw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iI(t[1]);return e&&JSON.parse(e)},Md=()=>{try{return SP()||NP()||CP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aI=t=>{var e,n;return(n=(e=Md())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oI=t=>{const e=aI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},lI=()=>{var t;return(t=Md())===null||t===void 0?void 0:t.config},cI=t=>{var e;return(e=Md())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bu(JSON.stringify(n)),Bu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function PP(){var t;const e=(t=Md())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OP(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MP(){return!PP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LP(){try{return typeof indexedDB=="object"}catch{return!1}}function VP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="FirebaseError";class as extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=FP,Object.setPrototypeOf(this,as.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ll.prototype.create)}}class Ll{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?UP(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new as(r,l,s)}}function UP(t,e){return t.replace(zP,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const zP=/\{\$([^}]+)}/g;function BP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gl(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(Bw(i)&&Bw(a)){if(!gl(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function No(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Co(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $P(t,e){const n=new WP(t,e);return n.subscribe.bind(n)}class WP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");GP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=df),r.error===void 0&&(r.error=df),r.complete===void 0&&(r.complete=df);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function df(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class Ir{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new AP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KP(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:qP(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qP(t){return t===qr?void 0:t}function KP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const YP={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},XP=_e.INFO,JP={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},ZP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=JP[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=XP,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const ek=(t,e)=>e.some(n=>t instanceof n);let $w,Ww;function tk(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nk(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dI=new WeakMap,Om=new WeakMap,hI=new WeakMap,hf=new WeakMap,cg=new WeakMap;function sk(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(_r(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&dI.set(n,t)}).catch(()=>{}),cg.set(e,t),e}function rk(t){if(Om.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Om.set(t,e)}let Mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ik(t){Mm=t(Mm)}function ak(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ff(this),e,...n);return hI.set(s,e.sort?e.sort():[e]),_r(s)}:nk().includes(t)?function(...e){return t.apply(ff(this),e),_r(dI.get(this))}:function(...e){return _r(t.apply(ff(this),e))}}function ok(t){return typeof t=="function"?ak(t):(t instanceof IDBTransaction&&rk(t),ek(t,tk())?new Proxy(t,Mm):t)}function _r(t){if(t instanceof IDBRequest)return sk(t);if(hf.has(t))return hf.get(t);const e=ok(t);return e!==t&&(hf.set(t,e),cg.set(e,t)),e}const ff=t=>cg.get(t);function lk(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),l=_r(a);return s&&a.addEventListener("upgradeneeded",c=>{s(_r(a.result),c.oldVersion,c.newVersion,_r(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ck=["get","getKey","getAll","getAllKeys","count"],uk=["put","add","delete","clear"],mf=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mf.get(e))return mf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=uk.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||ck.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return s&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),r&&c.done]))[0]};return mf.set(e,i),i}ik(t=>({...t,get:(e,n,s)=>Gw(e,n)||t.get(e,n,s),has:(e,n)=>!!Gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hk(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lm="@firebase/app",Hw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new lg("@firebase/app"),fk="@firebase/app-compat",mk="@firebase/analytics-compat",pk="@firebase/analytics",gk="@firebase/app-check-compat",vk="@firebase/app-check",yk="@firebase/auth",wk="@firebase/auth-compat",_k="@firebase/database",xk="@firebase/data-connect",bk="@firebase/database-compat",Ek="@firebase/functions",Ik="@firebase/functions-compat",Tk="@firebase/installations",Sk="@firebase/installations-compat",Nk="@firebase/messaging",Ck="@firebase/messaging-compat",Ak="@firebase/performance",jk="@firebase/performance-compat",Pk="@firebase/remote-config",kk="@firebase/remote-config-compat",Rk="@firebase/storage",Dk="@firebase/storage-compat",Ok="@firebase/firestore",Mk="@firebase/vertexai-preview",Lk="@firebase/firestore-compat",Vk="firebase",Fk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",Uk={[Lm]:"fire-core",[fk]:"fire-core-compat",[pk]:"fire-analytics",[mk]:"fire-analytics-compat",[vk]:"fire-app-check",[gk]:"fire-app-check-compat",[yk]:"fire-auth",[wk]:"fire-auth-compat",[_k]:"fire-rtdb",[xk]:"fire-data-connect",[bk]:"fire-rtdb-compat",[Ek]:"fire-fn",[Ik]:"fire-fn-compat",[Tk]:"fire-iid",[Sk]:"fire-iid-compat",[Nk]:"fire-fcm",[Ck]:"fire-fcm-compat",[Ak]:"fire-perf",[jk]:"fire-perf-compat",[Pk]:"fire-rc",[kk]:"fire-rc-compat",[Rk]:"fire-gcs",[Dk]:"fire-gcs-compat",[Ok]:"fire-fst",[Lk]:"fire-fst-compat",[Mk]:"fire-vertex","fire-js":"fire-js",[Vk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new Map,zk=new Map,Fm=new Map;function qw(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function di(t){const e=t.name;if(Fm.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,t);for(const n of vl.values())qw(n,t);for(const n of zk.values())qw(n,t);return!0}function Ld(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new Ll("app","Firebase",Bk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=Fk;function fI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Vm,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=lI()),!n)throw xr.create("no-options");const i=vl.get(r);if(i){if(gl(n,i.options)&&gl(s,i.config))return i;throw xr.create("duplicate-app",{appName:r})}const a=new QP(r);for(const c of Fm.values())a.addComponent(c);const l=new $k(n,s,a);return vl.set(r,l),l}function Vd(t=Vm){const e=vl.get(t);if(!e&&t===Vm&&lI())return fI();if(!e)throw xr.create("no-app",{appName:t});return e}function Wk(){return Array.from(vl.values())}function es(t,e,n){var s;let r=(s=Uk[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(l.join(" "));return}di(new Ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="firebase-heartbeat-database",Hk=1,yl="firebase-heartbeat-store";let pf=null;function mI(){return pf||(pf=lk(Gk,Hk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),pf}async function qk(t){try{const n=(await mI()).transaction(yl),s=await n.objectStore(yl).get(pI(t));return await n.done,s}catch(e){if(e instanceof as)js.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function Kw(t,e){try{const s=(await mI()).transaction(yl,"readwrite");await s.objectStore(yl).put(e,pI(t)),await s.done}catch(n){if(n instanceof as)js.warn(n.message);else{const s=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(s.message)}}}function pI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=1024,Qk=30*24*60*60*1e3;class Yk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=Qk}),this._storage.overwrite(this._heartbeatsCache))}catch(s){js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qw(),{heartbeatsToSend:s,unsentEntries:r}=Xk(this._heartbeatsCache.heartbeats),i=Bu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return js.warn(n),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function Xk(t,e=Kk){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Yw(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Yw(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Jk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LP()?VP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return Bu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){di(new Ir("platform-logger",e=>new dk(e),"PRIVATE")),di(new Ir("heartbeat",e=>new Yk(e),"PRIVATE")),es(Lm,Hw,t),es(Lm,Hw,"esm2017"),es("fire-js","")}Zk("");function ug(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function gI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eR=gI,vI=new Ll("auth","Firebase",gI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new lg("@firebase/auth");function tR(t,...e){$u.logLevel<=_e.WARN&&$u.warn(`Auth (${Ii}): ${t}`,...e)}function iu(t,...e){$u.logLevel<=_e.ERROR&&$u.error(`Auth (${Ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw hg(t,...e)}function zn(t,...e){return hg(t,...e)}function dg(t,e,n){const s=Object.assign(Object.assign({},eR()),{[e]:n});return new Ll("auth","Firebase",s).create(e,{appName:t.name})}function Es(t){return dg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nR(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&An(t,"argument-error"),dg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hg(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return vI.create(t,...e)}function ce(t,e,...n){if(!t)throw hg(e,...n)}function vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw iu(e),new Error(e)}function Ps(t,e){t||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sR(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sR()||RP()||"connection"in navigator)?navigator.onLine:!0}function iR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ps(n>e,"Short delay should be less than long delay!"),this.isMobile=jP()||DP()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e){Ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Fl(3e4,6e4);function Rr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,n,s,r={}){return wI(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const l=Vl(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return kP()||(d.referrerPolicy="no-referrer"),yI.fetch()(_I(t,t.config.apiHost,n,l),d)})}async function wI(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},aR),e);try{const r=new cR(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Lc(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Lc(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Lc(t,"user-disabled",a);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw dg(t,h,d);An(t,h)}}catch(r){if(r instanceof as)throw r;An(t,"network-request-failed",{message:String(r)})}}async function Ul(t,e,n,s,r={}){const i=await Dr(t,e,n,s,r);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}function _I(t,e,n,s){const r=`${e}${n}?${s}`;return t.config.emulator?fg(t.config,r):`${t.config.apiScheme}://${r}`}function lR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zn(this.auth,"network-request-failed")),oR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=zn(t,e,s);return r.customData._tokenResponse=n,r}function Jw(t){return t!==void 0&&t.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function dR(t,e){return Dr(t,"GET","/v2/recaptchaConfig",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function xI(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fR(t,e=!1){const n=Me(t),s=await n.getIdToken(e),r=mg(s);ce(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Bo(gf(r.auth_time)),issuedAtTime:Bo(gf(r.iat)),expirationTime:Bo(gf(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gf(t){return Number(t)*1e3}function mg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return iu("JWT malformed, contained fewer than 3 sections"),null;try{const r=iI(n);return r?JSON.parse(r):(iu("Failed to decode base64 JWT payload"),null)}catch(r){return iu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Zw(t){const e=mg(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof as&&mR(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function mR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,s=await t.getIdToken(),r=await wl(t,xI(n,{idToken:s}));ce(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?bI(i.providerUserInfo):[],l=vR(t.providerData,a),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new zm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function gR(t){const e=Me(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vR(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function bI(t){return t.map(e=>{var{providerId:n}=e,s=ug(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t,e){const n=await wI(t,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=_I(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",yI.fetch()(a,{method:"POST",headers:l,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wR(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=Zw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await yR(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new oa;return s&&(ce(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(ce(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(ce(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oa,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fR(this,e)}reload(){return gR(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Es(this.auth));const e=await this.getIdToken();return await wl(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,a,l,c,d,h;const f=(s=n.displayName)!==null&&s!==void 0?s:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,b=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:j,isAnonymous:P,providerData:O,stsTokenManager:_}=n;ce(S&&_,e,"internal-error");const v=oa.fromJSON(this.name,_);ce(typeof S=="string",e,"internal-error"),qs(f,e.name),qs(m,e.name),ce(typeof j=="boolean",e,"internal-error"),ce(typeof P=="boolean",e,"internal-error"),qs(p,e.name),qs(y,e.name),qs(b,e.name),qs(T,e.name),qs(x,e.name),qs(w,e.name);const C=new ys({uid:S,auth:e,email:m,emailVerified:j,displayName:f,isAnonymous:P,photoURL:y,phoneNumber:p,tenantId:b,stsTokenManager:v,createdAt:x,lastLoginAt:w});return O&&Array.isArray(O)&&(C.providerData=O.map(E=>Object.assign({},E))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,n,s=!1){const r=new oa;r.updateFromServerResponse(n);const i=new ys({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Wu(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];ce(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new oa;l.updateFromIdToken(s);const c=new ys({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new zm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;function ws(t){Ps(t instanceof Function,"Expected a class definition");let e=e_.get(t);return e?(Ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,e_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EI.type="NONE";const t_=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=au(this.userKey,r.apiKey,i),this.fullPersistenceKey=au("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new la(ws(t_),e,s);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=r[0]||ws(t_);const a=au(s,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){const f=ys._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new la(i,e,s):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new la(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(II(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AI(e))return"Blackberry";if(jI(e))return"Webos";if(TI(e))return"Safari";if((e.includes("chrome/")||SI(e))&&!e.includes("edge/"))return"Chrome";if(CI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function II(t=Ut()){return/firefox\//i.test(t)}function TI(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SI(t=Ut()){return/crios\//i.test(t)}function NI(t=Ut()){return/iemobile/i.test(t)}function CI(t=Ut()){return/android/i.test(t)}function AI(t=Ut()){return/blackberry/i.test(t)}function jI(t=Ut()){return/webos/i.test(t)}function pg(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _R(t=Ut()){var e;return pg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xR(){return OP()&&document.documentMode===10}function PI(t=Ut()){return pg(t)||CI(t)||jI(t)||AI(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e=[]){let n;switch(t){case"Browser":n=n_(Ut());break;case"Worker":n=`${n_(Ut())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ii}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",Rr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=6;class TR{constructor(e){var n,s,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:IR,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s_(this),this.idTokenSubscription=new s_(this),this.beforeStateQueue=new bR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ws(n)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xI(this,{idToken:e}),s=await ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Es(this));const n=e?Me(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ER(this),n=new TR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ll("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await wR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ws(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[ws(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Or(t){return Me(t)}class s_{constructor(e){this.auth=e,this.observer=null,this.addObserver=$P(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NR(t){Fd=t}function RI(t){return Fd.loadJS(t)}function CR(){return Fd.recaptchaEnterpriseScript}function AR(){return Fd.gapiScript}function jR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const PR="recaptcha-enterprise",kR="NO_RECAPTCHA";class RR{constructor(e){this.type=PR,this.auth=Or(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{dR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new uR(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function r(i,a,l){const c=window.grecaptcha;Jw(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(kR)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{s(this.auth).then(l=>{if(!n&&Jw(window.grecaptcha))r(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CR();c.length!==0&&(c+=l),RI(c).then(()=>{r(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function r_(t,e,n,s=!1){const r=new RR(t);let i;try{i=await r.verify(n)}catch{i=await r.verify(n,!0)}const a=Object.assign({},e);return s?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Bm(t,e,n,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await r_(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await r_(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){const n=Ld(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(gl(i,e??{}))return r;An(r,"already-initialized")}return n.initialize({options:e})}function OR(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(ws);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function MR(t,e,n){const s=Or(t);ce(s._canInitEmulator,s,"emulator-config-failed"),ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=DI(e),{host:a,port:l}=LR(e),c=l===null?"":`:${l}`;s.config.emulator={url:`${i}//${a}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})}),VR()}function DI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LR(t){const e=DI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:i_(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:i_(a)}}}function i_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function FR(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e){return Ul(t,"POST","/v1/accounts:signInWithPassword",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",Rr(t,e))}async function BR(t,e){return Ul(t,"POST","/v1/accounts:signInWithEmailLink",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends gg{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new _l(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new _l(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,n,"signInWithPassword",UR);case"emailLink":return zR(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,s,"signUpPassword",FR);case"emailLink":return BR(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return Ul(t,"POST","/v1/accounts:signInWithIdp",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class hi extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=ug(n,["providerId","signInMethod"]);if(!s||!r)return null;const a=new hi(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ca(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GR(t){const e=No(Co(t)).link,n=e?No(Co(e)).deep_link_id:null,s=No(Co(t)).deep_link_id;return(s?No(Co(s)).link:null)||s||n||e||t}class vg{constructor(e){var n,s,r,i,a,l;const c=No(Co(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(s=c.oobCode)!==null&&s!==void 0?s:null,f=WR((r=c.mode)!==null&&r!==void 0?r:null);ce(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=GR(e);try{return new vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.providerId=Fa.PROVIDER_ID}static credential(e,n){return _l._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=vg.parseLink(n);return ce(s,"argument-error"),_l._fromEmailAndCode(e,s.code,s.tenantId)}}Fa.PROVIDER_ID="password";Fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends zl{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Js.credential(e.oauthAccessToken)}catch{return null}}}Js.FACEBOOK_SIGN_IN_METHOD="facebook.com";Js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends zl{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends zl{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return er.credential(n,s)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){return Ul(t,"POST","/v1/accounts:signUp",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await ys._fromIdTokenResponse(e,s,r),a=a_(s);return new fi({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=a_(s);return new fi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function a_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends as{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Gu(e,n,s,r)}}function OI(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gu._fromErrorAndOperation(t,i,e,s):i})}async function qR(t,e,n=!1){const s=await wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(t,e,n=!1){const{auth:s}=t;if(Mn(s.app))return Promise.reject(Es(s));const r="reauthenticate";try{const i=await wl(t,OI(s,r,e,t),n);ce(i.idToken,s,"internal-error");const a=mg(i.idToken);ce(a,s,"internal-error");const{sub:l}=a;return ce(t.uid===l,s,"user-mismatch"),fi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(t,e,n=!1){if(Mn(t.app))return Promise.reject(Es(t));const s="signIn",r=await OI(t,s,e),i=await fi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function QR(t,e){return MI(Or(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(t){const e=Or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YR(t,e,n){if(Mn(t.app))return Promise.reject(Es(t));const s=Or(t),a=await Bm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HR).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&LI(t),c}),l=await fi._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function VI(t,e,n){return Mn(t.app)?Promise.reject(Es(t)):QR(Me(t),Fa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&LI(t),s})}function XR(t,e,n,s){return Me(t).onIdTokenChanged(e,n,s)}function JR(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function ZR(t,e,n,s){return Me(t).onAuthStateChanged(e,n,s)}function ou(t){return Me(t).signOut()}async function e2(t){return Me(t).delete()}const Hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hu,"1"),this.storage.removeItem(Hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=1e3,n2=10;class UI extends FI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);xR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,n2):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UI.type="LOCAL";const s2=UI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI extends FI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zI.type="SESSION";const BI=zI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Ud(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await r2(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=wg("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function a2(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function o2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function c2(){return $I()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebaseLocalStorageDb",u2=1,qu="firebaseLocalStorage",GI="fbase_key";class Bl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zd(t,e){return t.transaction([qu],e?"readwrite":"readonly").objectStore(qu)}function d2(){const t=indexedDB.deleteDatabase(WI);return new Bl(t).toPromise()}function $m(){const t=indexedDB.open(WI,u2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(qu,{keyPath:GI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(qu)?e(s):(s.close(),await d2(),e(await $m()))})})}async function o_(t,e,n){const s=zd(t,!0).put({[GI]:e,value:n});return new Bl(s).toPromise()}async function h2(t,e){const n=zd(t,!1).get(e),s=await new Bl(n).toPromise();return s===void 0?null:s.value}function l_(t,e){const n=zd(t,!0).delete(e);return new Bl(n).toPromise()}const f2=800,m2=3;class HI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>m2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $I()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ud._getInstance(c2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o2(),!this.activeServiceWorker)return;this.sender=new i2(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await o_(e,Hu,"1"),await l_(e,Hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>o_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>h2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>l_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=zd(r,!1).getAll();return new Bl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HI.type="LOCAL";const p2=HI;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e){return e?ws(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g2(t){return MI(t.auth,new _g(t),t.bypassAuthState)}function v2(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),KR(n,new _g(t),t.bypassAuthState)}async function y2(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),qR(n,new _g(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return v2;default:An(this.auth,"internal-error")}}resolve(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new Fl(2e3,1e4);async function _2(t,e,n){if(Mn(t.app))return Promise.reject(zn(t,"operation-not-supported-in-this-environment"));const s=Or(t);nR(t,e,yg);const r=qI(s,n);return new Xr(s,"signInViaPopup",e,r).executeNotNull()}class Xr extends KI{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Xr.currentPopupAction&&Xr.currentPopupAction.cancel(),Xr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Ps(this.filter.length===1,"Popup operations only handle one event");const e=wg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,w2.get())};e()}}Xr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="pendingRedirect",lu=new Map;class b2 extends KI{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=lu.get(this.auth._key());if(!e){try{const s=await E2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}lu.set(this.auth._key(),e)}return this.bypassAuthState||lu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E2(t,e){const n=S2(e),s=T2(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function I2(t,e){lu.set(t._key(),e)}function T2(t){return ws(t._redirectPersistence)}function S2(t){return au(x2,t.config.apiKey,t.name)}async function N2(t,e,n=!1){if(Mn(t.app))return Promise.reject(Es(t));const s=Or(t),r=qI(s,e),a=await new b2(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=10*60*1e3;class A2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!QI(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C2&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(e))}saveEventToCache(e){this.cachedEventUids.add(c_(e)),this.lastProcessedEventTime=Date.now()}}function c_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function j2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R2=/^https?/;async function D2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P2(t);for(const n of e)try{if(O2(n))return}catch{}An(t,"unauthorized-domain")}function O2(t){const e=Um(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!R2.test(n))return!1;if(k2.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new Fl(3e4,6e4);function u_(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L2(t){return new Promise((e,n)=>{var s,r,i;function a(){u_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u_(),n(zn(t,"network-request-failed"))},timeout:M2.get()})}if(!((r=(s=ts().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ts().gapi)===null||i===void 0)&&i.load)a();else{const l=jR("iframefcb");return ts()[l]=()=>{gapi.load?a():n(zn(t,"network-request-failed"))},RI(`${AR()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw cu=null,e})}let cu=null;function V2(t){return cu=cu||L2(t),cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Fl(5e3,15e3),U2="__/auth/iframe",z2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W2(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fg(e,z2):`https://${t.config.authDomain}/${U2}`,s={apiKey:e.apiKey,appName:t.name,v:Ii},r=$2.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Vl(s).slice(1)}`}async function G2(t){const e=await V2(t),n=ts().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:W2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=zn(t,"network-request-failed"),l=ts().setTimeout(()=>{i(a)},F2.get());function c(){ts().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q2=500,K2=600,Q2="_blank",Y2="http://localhost";class d_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function X2(t,e,n,s=q2,r=K2){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c=Object.assign(Object.assign({},H2),{width:s.toString(),height:r.toString(),top:i,left:a}),d=Ut().toLowerCase();n&&(l=SI(d)?Q2:n),II(d)&&(e=e||Y2,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[p,y])=>`${m}${p}=${y},`,"");if(_R(d)&&l!=="_self")return J2(e||"",l),new d_(null);const f=window.open(e||"",l,h);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new d_(f)}function J2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="__/auth/handler",e1="emulator/auth/handler",t1=encodeURIComponent("fac");async function h_(t,e,n,s,r,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ii,eventId:r};if(e instanceof yg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",BP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof zl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${t1}=${encodeURIComponent(c)}`:"";return`${n1(t)}?${Vl(l).slice(1)}${d}`}function n1({config:t}){return t.emulator?fg(t,e1):`https://${t.authDomain}/${Z2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class s1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BI,this._completeRedirectFn=N2,this._overrideRedirectResult=I2}async _openPopup(e,n,s,r){var i;Ps((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await h_(e,n,s,Um(),r);return X2(e,a,wg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await h_(e,n,s,Um(),r);return a2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Ps(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await G2(e),s=new A2(e);return n.register("authEvent",r=>(ce(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vf,{type:vf},r=>{var i;const a=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[vf];a!==void 0&&n(!!a),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PI()||TI()||pg()}}const r1=s1;var f_="@firebase/auth",m_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o1(t){di(new Ir("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;ce(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kI(t)},d=new SR(s,r,i,c);return OR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),di(new Ir("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(s=>new i1(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(f_,m_,a1(t)),es(f_,m_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=5*60,c1=cI("authIdTokenMaxAge")||l1;let p_=null;const u1=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>c1)return;const r=n==null?void 0:n.token;p_!==r&&(p_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function d1(t=Vd()){const e=Ld(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DR(t,{popupRedirectResolver:r1,persistence:[p2,s2,BI]}),s=cI("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=u1(i.toString());JR(n,a,()=>a(n.currentUser)),XR(n,l=>a(l))}}const r=aI("auth");return r&&MR(n,`http://${r}`),n}function h1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NR({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=zn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",h1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o1("Browser");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,YI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function C(){}C.prototype=v.prototype,_.D=v.prototype,_.prototype=new C,_.prototype.constructor=_,_.C=function(E,A,D){for(var N=Array(arguments.length-2),F=2;F<arguments.length;F++)N[F-2]=arguments[F];return v.prototype[A].apply(E,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,v,C){C||(C=0);var E=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)E[A]=v.charCodeAt(C++)|v.charCodeAt(C++)<<8|v.charCodeAt(C++)<<16|v.charCodeAt(C++)<<24;else for(A=0;16>A;++A)E[A]=v[C++]|v[C++]<<8|v[C++]<<16|v[C++]<<24;v=_.g[0],C=_.g[1],A=_.g[2];var D=_.g[3],N=v+(D^C&(A^D))+E[0]+3614090360&4294967295;v=C+(N<<7&4294967295|N>>>25),N=D+(A^v&(C^A))+E[1]+3905402710&4294967295,D=v+(N<<12&4294967295|N>>>20),N=A+(C^D&(v^C))+E[2]+606105819&4294967295,A=D+(N<<17&4294967295|N>>>15),N=C+(v^A&(D^v))+E[3]+3250441966&4294967295,C=A+(N<<22&4294967295|N>>>10),N=v+(D^C&(A^D))+E[4]+4118548399&4294967295,v=C+(N<<7&4294967295|N>>>25),N=D+(A^v&(C^A))+E[5]+1200080426&4294967295,D=v+(N<<12&4294967295|N>>>20),N=A+(C^D&(v^C))+E[6]+2821735955&4294967295,A=D+(N<<17&4294967295|N>>>15),N=C+(v^A&(D^v))+E[7]+4249261313&4294967295,C=A+(N<<22&4294967295|N>>>10),N=v+(D^C&(A^D))+E[8]+1770035416&4294967295,v=C+(N<<7&4294967295|N>>>25),N=D+(A^v&(C^A))+E[9]+2336552879&4294967295,D=v+(N<<12&4294967295|N>>>20),N=A+(C^D&(v^C))+E[10]+4294925233&4294967295,A=D+(N<<17&4294967295|N>>>15),N=C+(v^A&(D^v))+E[11]+2304563134&4294967295,C=A+(N<<22&4294967295|N>>>10),N=v+(D^C&(A^D))+E[12]+1804603682&4294967295,v=C+(N<<7&4294967295|N>>>25),N=D+(A^v&(C^A))+E[13]+4254626195&4294967295,D=v+(N<<12&4294967295|N>>>20),N=A+(C^D&(v^C))+E[14]+2792965006&4294967295,A=D+(N<<17&4294967295|N>>>15),N=C+(v^A&(D^v))+E[15]+1236535329&4294967295,C=A+(N<<22&4294967295|N>>>10),N=v+(A^D&(C^A))+E[1]+4129170786&4294967295,v=C+(N<<5&4294967295|N>>>27),N=D+(C^A&(v^C))+E[6]+3225465664&4294967295,D=v+(N<<9&4294967295|N>>>23),N=A+(v^C&(D^v))+E[11]+643717713&4294967295,A=D+(N<<14&4294967295|N>>>18),N=C+(D^v&(A^D))+E[0]+3921069994&4294967295,C=A+(N<<20&4294967295|N>>>12),N=v+(A^D&(C^A))+E[5]+3593408605&4294967295,v=C+(N<<5&4294967295|N>>>27),N=D+(C^A&(v^C))+E[10]+38016083&4294967295,D=v+(N<<9&4294967295|N>>>23),N=A+(v^C&(D^v))+E[15]+3634488961&4294967295,A=D+(N<<14&4294967295|N>>>18),N=C+(D^v&(A^D))+E[4]+3889429448&4294967295,C=A+(N<<20&4294967295|N>>>12),N=v+(A^D&(C^A))+E[9]+568446438&4294967295,v=C+(N<<5&4294967295|N>>>27),N=D+(C^A&(v^C))+E[14]+3275163606&4294967295,D=v+(N<<9&4294967295|N>>>23),N=A+(v^C&(D^v))+E[3]+4107603335&4294967295,A=D+(N<<14&4294967295|N>>>18),N=C+(D^v&(A^D))+E[8]+1163531501&4294967295,C=A+(N<<20&4294967295|N>>>12),N=v+(A^D&(C^A))+E[13]+2850285829&4294967295,v=C+(N<<5&4294967295|N>>>27),N=D+(C^A&(v^C))+E[2]+4243563512&4294967295,D=v+(N<<9&4294967295|N>>>23),N=A+(v^C&(D^v))+E[7]+1735328473&4294967295,A=D+(N<<14&4294967295|N>>>18),N=C+(D^v&(A^D))+E[12]+2368359562&4294967295,C=A+(N<<20&4294967295|N>>>12),N=v+(C^A^D)+E[5]+4294588738&4294967295,v=C+(N<<4&4294967295|N>>>28),N=D+(v^C^A)+E[8]+2272392833&4294967295,D=v+(N<<11&4294967295|N>>>21),N=A+(D^v^C)+E[11]+1839030562&4294967295,A=D+(N<<16&4294967295|N>>>16),N=C+(A^D^v)+E[14]+4259657740&4294967295,C=A+(N<<23&4294967295|N>>>9),N=v+(C^A^D)+E[1]+2763975236&4294967295,v=C+(N<<4&4294967295|N>>>28),N=D+(v^C^A)+E[4]+1272893353&4294967295,D=v+(N<<11&4294967295|N>>>21),N=A+(D^v^C)+E[7]+4139469664&4294967295,A=D+(N<<16&4294967295|N>>>16),N=C+(A^D^v)+E[10]+3200236656&4294967295,C=A+(N<<23&4294967295|N>>>9),N=v+(C^A^D)+E[13]+681279174&4294967295,v=C+(N<<4&4294967295|N>>>28),N=D+(v^C^A)+E[0]+3936430074&4294967295,D=v+(N<<11&4294967295|N>>>21),N=A+(D^v^C)+E[3]+3572445317&4294967295,A=D+(N<<16&4294967295|N>>>16),N=C+(A^D^v)+E[6]+76029189&4294967295,C=A+(N<<23&4294967295|N>>>9),N=v+(C^A^D)+E[9]+3654602809&4294967295,v=C+(N<<4&4294967295|N>>>28),N=D+(v^C^A)+E[12]+3873151461&4294967295,D=v+(N<<11&4294967295|N>>>21),N=A+(D^v^C)+E[15]+530742520&4294967295,A=D+(N<<16&4294967295|N>>>16),N=C+(A^D^v)+E[2]+3299628645&4294967295,C=A+(N<<23&4294967295|N>>>9),N=v+(A^(C|~D))+E[0]+4096336452&4294967295,v=C+(N<<6&4294967295|N>>>26),N=D+(C^(v|~A))+E[7]+1126891415&4294967295,D=v+(N<<10&4294967295|N>>>22),N=A+(v^(D|~C))+E[14]+2878612391&4294967295,A=D+(N<<15&4294967295|N>>>17),N=C+(D^(A|~v))+E[5]+4237533241&4294967295,C=A+(N<<21&4294967295|N>>>11),N=v+(A^(C|~D))+E[12]+1700485571&4294967295,v=C+(N<<6&4294967295|N>>>26),N=D+(C^(v|~A))+E[3]+2399980690&4294967295,D=v+(N<<10&4294967295|N>>>22),N=A+(v^(D|~C))+E[10]+4293915773&4294967295,A=D+(N<<15&4294967295|N>>>17),N=C+(D^(A|~v))+E[1]+2240044497&4294967295,C=A+(N<<21&4294967295|N>>>11),N=v+(A^(C|~D))+E[8]+1873313359&4294967295,v=C+(N<<6&4294967295|N>>>26),N=D+(C^(v|~A))+E[15]+4264355552&4294967295,D=v+(N<<10&4294967295|N>>>22),N=A+(v^(D|~C))+E[6]+2734768916&4294967295,A=D+(N<<15&4294967295|N>>>17),N=C+(D^(A|~v))+E[13]+1309151649&4294967295,C=A+(N<<21&4294967295|N>>>11),N=v+(A^(C|~D))+E[4]+4149444226&4294967295,v=C+(N<<6&4294967295|N>>>26),N=D+(C^(v|~A))+E[11]+3174756917&4294967295,D=v+(N<<10&4294967295|N>>>22),N=A+(v^(D|~C))+E[2]+718787259&4294967295,A=D+(N<<15&4294967295|N>>>17),N=C+(D^(A|~v))+E[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+A&4294967295,_.g[3]=_.g[3]+D&4294967295}s.prototype.u=function(_,v){v===void 0&&(v=_.length);for(var C=v-this.blockSize,E=this.B,A=this.h,D=0;D<v;){if(A==0)for(;D<=C;)r(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<v;)if(E[A++]=_.charCodeAt(D++),A==this.blockSize){r(this,E),A=0;break}}else for(;D<v;)if(E[A++]=_[D++],A==this.blockSize){r(this,E),A=0;break}}this.h=A,this.o+=v},s.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;var C=8*this.o;for(v=_.length-8;v<_.length;++v)_[v]=C&255,C/=256;for(this.u(_),_=Array(16),v=C=0;4>v;++v)for(var E=0;32>E;E+=8)_[C++]=this.g[v]>>>E&255;return _};function i(_,v){var C=l;return Object.prototype.hasOwnProperty.call(C,_)?C[_]:C[_]=v(_)}function a(_,v){this.h=v;for(var C=[],E=!0,A=_.length-1;0<=A;A--){var D=_[A]|0;E&&D==v||(C[A]=D,E=!1)}this.g=C}var l={};function c(_){return-128<=_&&128>_?i(_,function(v){return new a([v|0],0>v?-1:0)}):new a([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return T(d(-_));for(var v=[],C=1,E=0;_>=C;E++)v[E]=_/C|0,C*=4294967296;return new a(v,0)}function h(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return T(h(_.substring(1),v));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(v,8)),E=f,A=0;A<_.length;A+=8){var D=Math.min(8,_.length-A),N=parseInt(_.substring(A,A+D),v);8>D?(D=d(Math.pow(v,D)),E=E.j(D).add(d(N))):(E=E.j(C),E=E.add(d(N)))}return E}var f=c(0),m=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(b(this))return-T(this).m();for(var _=0,v=1,C=0;C<this.g.length;C++){var E=this.i(C);_+=(0<=E?E:4294967296+E)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(y(this))return"0";if(b(this))return"-"+T(this).toString(_);for(var v=d(Math.pow(_,6)),C=this,E="";;){var A=j(C,v).g;C=x(C,A.j(v));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(_);if(C=A,y(C))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function y(_){if(_.h!=0)return!1;for(var v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function b(_){return _.h==-1}t.l=function(_){return _=x(this,_),b(_)?-1:y(_)?0:1};function T(_){for(var v=_.g.length,C=[],E=0;E<v;E++)C[E]=~_.g[E];return new a(C,~_.h).add(m)}t.abs=function(){return b(this)?T(this):this},t.add=function(_){for(var v=Math.max(this.g.length,_.g.length),C=[],E=0,A=0;A<=v;A++){var D=E+(this.i(A)&65535)+(_.i(A)&65535),N=(D>>>16)+(this.i(A)>>>16)+(_.i(A)>>>16);E=N>>>16,D&=65535,N&=65535,C[A]=N<<16|D}return new a(C,C[C.length-1]&-2147483648?-1:0)};function x(_,v){return _.add(T(v))}t.j=function(_){if(y(this)||y(_))return f;if(b(this))return b(_)?T(this).j(T(_)):T(T(this).j(_));if(b(_))return T(this.j(T(_)));if(0>this.l(p)&&0>_.l(p))return d(this.m()*_.m());for(var v=this.g.length+_.g.length,C=[],E=0;E<2*v;E++)C[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<_.g.length;A++){var D=this.i(E)>>>16,N=this.i(E)&65535,F=_.i(A)>>>16,L=_.i(A)&65535;C[2*E+2*A]+=N*L,w(C,2*E+2*A),C[2*E+2*A+1]+=D*L,w(C,2*E+2*A+1),C[2*E+2*A+1]+=N*F,w(C,2*E+2*A+1),C[2*E+2*A+2]+=D*F,w(C,2*E+2*A+2)}for(E=0;E<v;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=v;E<2*v;E++)C[E]=0;return new a(C,0)};function w(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function S(_,v){this.g=_,this.h=v}function j(_,v){if(y(v))throw Error("division by zero");if(y(_))return new S(f,f);if(b(_))return v=j(T(_),v),new S(T(v.g),T(v.h));if(b(v))return v=j(_,T(v)),new S(T(v.g),v.h);if(30<_.g.length){if(b(_)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var C=m,E=v;0>=E.l(_);)C=P(C),E=P(E);var A=O(C,1),D=O(E,1);for(E=O(E,2),C=O(C,2);!y(E);){var N=D.add(E);0>=N.l(_)&&(A=A.add(C),D=N),E=O(E,1),C=O(C,1)}return v=x(_,A.j(v)),new S(A,v)}for(A=f;0<=_.l(v);){for(C=Math.max(1,Math.floor(_.m()/v.m())),E=Math.ceil(Math.log(C)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=d(C),N=D.j(v);b(N)||0<N.l(_);)C-=E,D=d(C),N=D.j(v);y(D)&&(D=m),A=A.add(D),_=x(_,N)}return new S(A,_)}t.A=function(_){return j(this,_).h},t.and=function(_){for(var v=Math.max(this.g.length,_.g.length),C=[],E=0;E<v;E++)C[E]=this.i(E)&_.i(E);return new a(C,this.h&_.h)},t.or=function(_){for(var v=Math.max(this.g.length,_.g.length),C=[],E=0;E<v;E++)C[E]=this.i(E)|_.i(E);return new a(C,this.h|_.h)},t.xor=function(_){for(var v=Math.max(this.g.length,_.g.length),C=[],E=0;E<v;E++)C[E]=this.i(E)^_.i(E);return new a(C,this.h^_.h)};function P(_){for(var v=_.g.length+1,C=[],E=0;E<v;E++)C[E]=_.i(E)<<1|_.i(E-1)>>>31;return new a(C,_.h)}function O(_,v){var C=v>>5;v%=32;for(var E=_.g.length-C,A=[],D=0;D<E;D++)A[D]=0<v?_.i(D+C)>>>v|_.i(D+C+1)<<32-v:_.i(D+C);return new a(A,_.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,YI=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ni=a}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XI,Ao,JI,uu,Wm,ZI,eT,tT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,I){return u==Array.prototype||u==Object.prototype||(u[g]=I.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var g=0;g<u.length;++g){var I=u[g];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var s=n(this);function r(u,g){if(g)e:{var I=s;u=u.split(".");for(var k=0;k<u.length-1;k++){var V=u[k];if(!(V in I))break e;I=I[V]}u=u[u.length-1],k=I[u],g=g(k),g!=k&&g!=null&&e(I,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var I=0,k=!1,V={next:function(){if(!k&&I<u.length){var B=I++;return{value:g(B,u[B]),done:!1}}return k=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(u){return u||function(){return i(this,function(g,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function d(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,I){return u.call.apply(u.bind,arguments)}function f(u,g,I){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,k),u.apply(g,V)}}return function(){return u.apply(g,arguments)}}function m(u,g,I){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function p(u,g){var I=Array.prototype.slice.call(arguments,1);return function(){var k=I.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function y(u,g){function I(){}I.prototype=g.prototype,u.aa=g.prototype,u.prototype=new I,u.prototype.constructor=u,u.Qb=function(k,V,B){for(var X=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)X[Oe-2]=arguments[Oe];return g.prototype[V].apply(k,X)}}function b(u){const g=u.length;if(0<g){const I=Array(g);for(let k=0;k<g;k++)I[k]=u[k];return I}return[]}function T(u,g){for(let I=1;I<arguments.length;I++){const k=arguments[I];if(c(k)){const V=u.length||0,B=k.length||0;u.length=V+B;for(let X=0;X<B;X++)u[V+X]=k[X]}else u.push(k)}}class x{constructor(g,I){this.i=g,this.j=I,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var P=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(u,g,I){for(const k in u)g.call(I,u[k],k,u)}function _(u,g){for(const I in u)g.call(void 0,u[I],I,u)}function v(u){const g={};for(const I in u)g[I]=u[I];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,g){let I,k;for(let V=1;V<arguments.length;V++){k=arguments[V];for(I in k)u[I]=k[I];for(let B=0;B<C.length;B++)I=C[B],Object.prototype.hasOwnProperty.call(k,I)&&(u[I]=k[I])}}function A(u){var g=1;u=u.split(":");const I=[];for(;0<g&&u.length;)I.push(u.shift()),g--;return u.length&&I.push(u.join(":")),I}function D(u){l.setTimeout(()=>{throw u},0)}function N(){var u=W;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class F{constructor(){this.h=this.g=null}add(g,I){const k=L.get();k.set(g,I),this.h?this.h.next=k:this.g=k,this.h=k}}var L=new x(()=>new ee,u=>u.reset());class ee{constructor(){this.next=this.g=this.h=null}set(g,I){this.h=g,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let z,M=!1,W=new F,K=()=>{const u=l.Promise.resolve(void 0);z=()=>{u.then(U)}};var U=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(I){D(I)}var g=L;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}M=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const I=()=>{};l.addEventListener("test",I,g),l.removeEventListener("test",I,g)}catch{}return u}();function je(u,g){if(he.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var I=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(P){e:{try{j(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else I=="mouseover"?g=u.fromElement:I=="mouseout"&&(g=u.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:et[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&je.aa.h.call(this)}}y(je,he);var et={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),mt=0;function Ri(u,g,I,k,V){this.listener=u,this.proxy=null,this.src=g,this.type=I,this.capture=!!k,this.ha=V,this.key=++mt,this.da=this.fa=!1}function ie(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,g,I,k,V){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var X=ge(u,g,k,V);return-1<X?(g=u[X],I||(g.fa=!1)):(g=new Ri(g,this.src,B,!!k,V),g.fa=I,u.push(g)),g};function fe(u,g){var I=g.type;if(I in u.g){var k=u.g[I],V=Array.prototype.indexOf.call(k,g,void 0),B;(B=0<=V)&&Array.prototype.splice.call(k,V,1),B&&(ie(g),u.g[I].length==0&&(delete u.g[I],u.h--))}}function ge(u,g,I,k){for(var V=0;V<u.length;++V){var B=u[V];if(!B.da&&B.listener==g&&B.capture==!!I&&B.ha==k)return V}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Hn={};function Fs(u,g,I,k,V){if(Array.isArray(g)){for(var B=0;B<g.length;B++)Fs(u,g[B],I,k,V);return null}return I=Av(I),u&&u[Ee]?u.K(g,I,d(k)?!!k.capture:!1,V):we(u,g,I,!1,k,V)}function we(u,g,I,k,V,B){if(!g)throw Error("Invalid event type");var X=d(V)?!!V.capture:!!V,Oe=Vr(u);if(Oe||(u[Ie]=Oe=new pe(u)),I=Oe.add(g,I,k,X,B),I.proxy)return I;if(k=ve(),I.proxy=k,k.src=u,k.listener=I,u.addEventListener)Fe||(V=X),V===void 0&&(V=!1),u.addEventListener(g.toString(),k,V);else if(u.attachEvent)u.attachEvent(zs(g.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ve(){function u(I){return g.call(u.src,u.listener,I)}const g=Lr;return u}function At(u,g,I,k,V){if(Array.isArray(g))for(var B=0;B<g.length;B++)At(u,g[B],I,k,V);else k=d(k)?!!k.capture:!!k,I=Av(I),u&&u[Ee]?(u=u.i,g=String(g).toString(),g in u.g&&(B=u.g[g],I=ge(B,I,k,V),-1<I&&(ie(B[I]),Array.prototype.splice.call(B,I,1),B.length==0&&(delete u.g[g],u.h--)))):u&&(u=Vr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ge(g,I,k,V)),(I=-1<u?g[u]:null)&&Us(I))}function Us(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ee])fe(g.i,u);else{var I=u.type,k=u.proxy;g.removeEventListener?g.removeEventListener(I,k,u.capture):g.detachEvent?g.detachEvent(zs(I),k):g.addListener&&g.removeListener&&g.removeListener(k),(I=Vr(g))?(fe(I,u),I.h==0&&(I.src=null,g[Ie]=null)):ie(u)}}}function zs(u){return u in Hn?Hn[u]:Hn[u]="on"+u}function Lr(u,g){if(u.da)u=!0;else{g=new je(g,this);var I=u.listener,k=u.ha||u.src;u.fa&&Us(u),u=I.call(k,g)}return u}function Vr(u){return u=u[Ie],u instanceof pe?u:null}var _h="__closure_events_fn_"+(1e9*Math.random()>>>0);function Av(u){return typeof u=="function"?u:(u[_h]||(u[_h]=function(g){return u.handleEvent(g)}),u[_h])}function jt(){te.call(this),this.i=new pe(this),this.M=this,this.F=null}y(jt,te),jt.prototype[Ee]=!0,jt.prototype.removeEventListener=function(u,g,I,k){At(this,u,g,I,k)};function Bt(u,g){var I,k=u.F;if(k)for(I=[];k;k=k.F)I.push(k);if(u=u.M,k=g.type||g,typeof g=="string")g=new he(g,u);else if(g instanceof he)g.target=g.target||u;else{var V=g;g=new he(k,u),E(g,V)}if(V=!0,I)for(var B=I.length-1;0<=B;B--){var X=g.g=I[B];V=rc(X,k,!0,g)&&V}if(X=g.g=u,V=rc(X,k,!0,g)&&V,V=rc(X,k,!1,g)&&V,I)for(B=0;B<I.length;B++)X=g.g=I[B],V=rc(X,k,!1,g)&&V}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var I=u.g[g],k=0;k<I.length;k++)ie(I[k]);delete u.g[g],u.h--}}this.F=null},jt.prototype.K=function(u,g,I,k){return this.i.add(String(u),g,!1,I,k)},jt.prototype.L=function(u,g,I,k){return this.i.add(String(u),g,!0,I,k)};function rc(u,g,I,k){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,B=0;B<g.length;++B){var X=g[B];if(X&&!X.da&&X.capture==I){var Oe=X.listener,bt=X.ha||X.src;X.fa&&fe(u.i,X),V=Oe.call(bt,k)!==!1&&V}}return V&&!k.defaultPrevented}function jv(u,g,I){if(typeof u=="function")I&&(u=m(u,I));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(u,g||0)}function Pv(u){u.g=jv(()=>{u.g=null,u.i&&(u.i=!1,Pv(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class _N extends te{constructor(g,I){super(),this.m=g,this.l=I,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pv(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xa(u){te.call(this),this.h=u,this.g={}}y(Xa,te);var kv=[];function Rv(u){O(u.g,function(g,I){this.g.hasOwnProperty(I)&&Us(g)},u),u.g={}}Xa.prototype.N=function(){Xa.aa.N.call(this),Rv(this)},Xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xh=l.JSON.stringify,xN=l.JSON.parse,bN=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function bh(){}bh.prototype.h=null;function Dv(u){return u.h||(u.h=u.i())}function Ov(){}var Ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eh(){he.call(this,"d")}y(Eh,he);function Ih(){he.call(this,"c")}y(Ih,he);var Fr={},Mv=null;function ic(){return Mv=Mv||new jt}Fr.La="serverreachability";function Lv(u){he.call(this,Fr.La,u)}y(Lv,he);function Za(u){const g=ic();Bt(g,new Lv(g))}Fr.STAT_EVENT="statevent";function Vv(u,g){he.call(this,Fr.STAT_EVENT,u),this.stat=g}y(Vv,he);function $t(u){const g=ic();Bt(g,new Vv(g,u))}Fr.Ma="timingevent";function Fv(u,g){he.call(this,Fr.Ma,u),this.size=g}y(Fv,he);function eo(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},g)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function EN(u,g,I,k,V,B){u.info(function(){if(u.g)if(B)for(var X="",Oe=B.split("&"),bt=0;bt<Oe.length;bt++){var Se=Oe[bt].split("=");if(1<Se.length){var Pt=Se[0];Se=Se[1];var kt=Pt.split("_");X=2<=kt.length&&kt[1]=="type"?X+(Pt+"="+Se+"&"):X+(Pt+"=redacted&")}}else X=null;else X=B;return"XMLHTTP REQ ("+k+") [attempt "+V+"]: "+g+`
`+I+`
`+X})}function IN(u,g,I,k,V,B,X){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+V+"]: "+g+`
`+I+`
`+B+" "+X})}function Di(u,g,I,k){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+SN(u,I)+(k?" "+k:"")})}function TN(u,g){u.info(function(){return"TIMEOUT: "+g})}to.prototype.info=function(){};function SN(u,g){if(!u.g)return g;if(!g)return null;try{var I=JSON.parse(g);if(I){for(u=0;u<I.length;u++)if(Array.isArray(I[u])){var k=I[u];if(!(2>k.length)){var V=k[1];if(Array.isArray(V)&&!(1>V.length)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(var X=1;X<V.length;X++)V[X]=""}}}}return xh(I)}catch{return g}}var ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Uv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Th;function oc(){}y(oc,bh),oc.prototype.g=function(){return new XMLHttpRequest},oc.prototype.i=function(){return{}},Th=new oc;function Bs(u,g,I,k){this.j=u,this.i=g,this.l=I,this.R=k||1,this.U=new Xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zv}function zv(){this.i=null,this.g="",this.h=!1}var Bv={},Sh={};function Nh(u,g,I){u.L=1,u.v=dc(ls(g)),u.m=I,u.P=!0,$v(u,null)}function $v(u,g){u.F=Date.now(),lc(u),u.A=ls(u.v);var I=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),sy(I.i,"t",k),u.C=0,I=u.j.J,u.h=new zv,u.g=xy(u.j,I?g:null,!u.m),0<u.O&&(u.M=new _N(m(u.Y,u,u.g),u.O)),g=u.U,I=u.g,k=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(kv[0]=V.toString()),V=kv);for(var B=0;B<V.length;B++){var X=Fs(I,V[B],k||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),Za(),EN(u.i,u.u,u.A,u.l,u.R,u.m)}Bs.prototype.ca=function(u){u=u.target;const g=this.M;g&&cs(u)==3?g.j():this.Y(u)},Bs.prototype.Y=function(u){try{if(u==this.g)e:{const kt=cs(this.g);var g=this.g.Ba();const Li=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||uy(this.g)))){this.J||kt!=4||g==7||(g==8||0>=Li?Za(3):Za(2)),Ch(this);var I=this.g.Z();this.X=I;t:if(Wv(this)){var k=uy(this.g);u="";var V=k.length,B=cs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ur(this),no(this);var X="";break t}this.h.i=new l.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,u+=this.h.i.decode(k[g],{stream:!(B&&g==V-1)});k.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=I==200,IN(this.i,this.u,this.A,this.l,this.R,kt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,bt=this.g;if((Oe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Oe)){var Se=Oe;break t}}Se=null}if(I=Se)Di(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ah(this,I);else{this.o=!1,this.s=3,$t(12),Ur(this),no(this);break e}}if(this.P){I=!0;let Pn;for(;!this.J&&this.C<X.length;)if(Pn=NN(this,X),Pn==Sh){kt==4&&(this.s=4,$t(14),I=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Bv){this.s=4,$t(15),Di(this.i,this.l,X,"[Invalid Chunk]"),I=!1;break}else Di(this.i,this.l,Pn,null),Ah(this,Pn);if(Wv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||X.length!=0||this.h.h||(this.s=1,$t(16),I=!1),this.o=this.o&&I,!I)Di(this.i,this.l,X,"[Invalid Chunked Response]"),Ur(this),no(this);else if(0<X.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Oh(Pt),Pt.M=!0,$t(11))}}else Di(this.i,this.l,X,null),Ah(this,X);kt==4&&Ur(this),this.o&&!this.J&&(kt==4?vy(this.j,this):(this.o=!1,lc(this)))}else WN(this.g),I==400&&0<X.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),Ur(this),no(this)}}}catch{}finally{}};function Wv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function NN(u,g){var I=u.C,k=g.indexOf(`
`,I);return k==-1?Sh:(I=Number(g.substring(I,k)),isNaN(I)?Bv:(k+=1,k+I>g.length?Sh:(g=g.slice(k,k+I),u.C=k+I,g)))}Bs.prototype.cancel=function(){this.J=!0,Ur(this)};function lc(u){u.S=Date.now()+u.I,Gv(u,u.I)}function Gv(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=eo(m(u.ba,u),g)}function Ch(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Bs.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(TN(this.i,this.A),this.L!=2&&(Za(),$t(17)),Ur(this),this.s=2,no(this)):Gv(this,this.S-u)};function no(u){u.j.G==0||u.J||vy(u.j,u)}function Ur(u){Ch(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Rv(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Ah(u,g){try{var I=u.j;if(I.G!=0&&(I.g==u||jh(I.h,u))){if(!u.K&&jh(I.h,u)&&I.G==3){try{var k=I.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var V=k;if(V[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<u.F)vc(I),pc(I);else break e;Dh(I),$t(18)}}else I.za=V[1],0<I.za-I.T&&37500>V[2]&&I.F&&I.v==0&&!I.C&&(I.C=eo(m(I.Za,I),6e3));if(1>=Kv(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Br(I,11)}else if((u.K||I.g==u)&&vc(I),!w(g))for(V=I.Da.g.parse(g),g=0;g<V.length;g++){let Se=V[g];if(I.T=Se[0],Se=Se[1],I.G==2)if(Se[0]=="c"){I.K=Se[1],I.ia=Se[2];const Pt=Se[3];Pt!=null&&(I.la=Pt,I.j.info("VER="+I.la));const kt=Se[4];kt!=null&&(I.Aa=kt,I.j.info("SVER="+I.Aa));const Li=Se[5];Li!=null&&typeof Li=="number"&&0<Li&&(k=1.5*Li,I.L=k,I.j.info("backChannelRequestTimeoutMs_="+k)),k=I;const Pn=u.g;if(Pn){const wc=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wc){var B=k.h;B.g||wc.indexOf("spdy")==-1&&wc.indexOf("quic")==-1&&wc.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ph(B,B.h),B.h=null))}if(k.D){const Mh=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mh&&(k.ya=Mh,Ue(k.I,k.D,Mh))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-u.F,I.j.info("Handshake RTT: "+I.R+"ms")),k=I;var X=u;if(k.qa=_y(k,k.J?k.ia:null,k.W),X.K){Qv(k.h,X);var Oe=X,bt=k.L;bt&&(Oe.I=bt),Oe.B&&(Ch(Oe),lc(Oe)),k.g=X}else py(k);0<I.i.length&&gc(I)}else Se[0]!="stop"&&Se[0]!="close"||Br(I,7);else I.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Br(I,7):Rh(I):Se[0]!="noop"&&I.l&&I.l.ta(Se),I.v=0)}}Za(4)}catch{}}var CN=class{constructor(u,g){this.g=u,this.map=g}};function Hv(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Kv(u){return u.h?1:u.g?u.g.size:0}function jh(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Ph(u,g){u.g?u.g.add(g):u.h=g}function Qv(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Hv.prototype.cancel=function(){if(this.i=Yv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const I of u.g.values())g=g.concat(I.D);return g}return b(u.i)}function AN(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var g=[],I=u.length,k=0;k<I;k++)g.push(u[k]);return g}g=[],I=0;for(k in u)g[I++]=u[k];return g}function jN(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var g=[];u=u.length;for(var I=0;I<u;I++)g.push(I);return g}g=[],I=0;for(const k in u)g[I++]=k;return g}}}function Xv(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var I=jN(u),k=AN(u),V=k.length,B=0;B<V;B++)g.call(void 0,k[B],I&&I[B],u)}var Jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PN(u,g){if(u){u=u.split("&");for(var I=0;I<u.length;I++){var k=u[I].indexOf("="),V=null;if(0<=k){var B=u[I].substring(0,k);V=u[I].substring(k+1)}else B=u[I];g(B,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof zr){this.h=u.h,cc(this,u.j),this.o=u.o,this.g=u.g,uc(this,u.s),this.l=u.l;var g=u.i,I=new io;I.i=g.i,g.g&&(I.g=new Map(g.g),I.h=g.h),Zv(this,I),this.m=u.m}else u&&(g=String(u).match(Jv))?(this.h=!1,cc(this,g[1]||"",!0),this.o=so(g[2]||""),this.g=so(g[3]||"",!0),uc(this,g[4]),this.l=so(g[5]||"",!0),Zv(this,g[6]||"",!0),this.m=so(g[7]||"")):(this.h=!1,this.i=new io(null,this.h))}zr.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ro(g,ey,!0),":");var I=this.g;return(I||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ro(g,ey,!0),"@"),u.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&u.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&u.push("/"),u.push(ro(I,I.charAt(0)=="/"?DN:RN,!0))),(I=this.i.toString())&&u.push("?",I),(I=this.m)&&u.push("#",ro(I,MN)),u.join("")};function ls(u){return new zr(u)}function cc(u,g,I){u.j=I?so(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function uc(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Zv(u,g,I){g instanceof io?(u.i=g,LN(u.i,u.h)):(I||(g=ro(g,ON)),u.i=new io(g,u.h))}function Ue(u,g,I){u.i.set(g,I)}function dc(u){return Ue(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function so(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ro(u,g,I){return typeof u=="string"?(u=encodeURI(u).replace(g,kN),I&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ey=/[#\/\?@]/g,RN=/[#\?:]/g,DN=/[#\?]/g,ON=/[#\?@]/g,MN=/#/g;function io(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function $s(u){u.g||(u.g=new Map,u.h=0,u.i&&PN(u.i,function(g,I){u.add(decodeURIComponent(g.replace(/\+/g," ")),I)}))}t=io.prototype,t.add=function(u,g){$s(this),this.i=null,u=Oi(this,u);var I=this.g.get(u);return I||this.g.set(u,I=[]),I.push(g),this.h+=1,this};function ty(u,g){$s(u),g=Oi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ny(u,g){return $s(u),g=Oi(u,g),u.g.has(g)}t.forEach=function(u,g){$s(this),this.g.forEach(function(I,k){I.forEach(function(V){u.call(g,V,k,this)},this)},this)},t.na=function(){$s(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),I=[];for(let k=0;k<g.length;k++){const V=u[k];for(let B=0;B<V.length;B++)I.push(g[k])}return I},t.V=function(u){$s(this);let g=[];if(typeof u=="string")ny(this,u)&&(g=g.concat(this.g.get(Oi(this,u))));else{u=Array.from(this.g.values());for(let I=0;I<u.length;I++)g=g.concat(u[I])}return g},t.set=function(u,g){return $s(this),this.i=null,u=Oi(this,u),ny(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function sy(u,g,I){ty(u,g),0<I.length&&(u.i=null,u.g.set(Oi(u,g),b(I)),u.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var I=0;I<g.length;I++){var k=g[I];const B=encodeURIComponent(String(k)),X=this.V(k);for(k=0;k<X.length;k++){var V=B;X[k]!==""&&(V+="="+encodeURIComponent(String(X[k]))),u.push(V)}}return this.i=u.join("&")};function Oi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function LN(u,g){g&&!u.j&&($s(u),u.i=null,u.g.forEach(function(I,k){var V=k.toLowerCase();k!=V&&(ty(this,k),sy(this,V,I))},u)),u.j=g}function VN(u,g){const I=new to;if(l.Image){const k=new Image;k.onload=p(Ws,I,"TestLoadImage: loaded",!0,g,k),k.onerror=p(Ws,I,"TestLoadImage: error",!1,g,k),k.onabort=p(Ws,I,"TestLoadImage: abort",!1,g,k),k.ontimeout=p(Ws,I,"TestLoadImage: timeout",!1,g,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else g(!1)}function FN(u,g){const I=new to,k=new AbortController,V=setTimeout(()=>{k.abort(),Ws(I,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:k.signal}).then(B=>{clearTimeout(V),B.ok?Ws(I,"TestPingServer: ok",!0,g):Ws(I,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Ws(I,"TestPingServer: error",!1,g)})}function Ws(u,g,I,k,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),k(I)}catch{}}function UN(){this.g=new bN}function zN(u,g,I){const k=I||"";try{Xv(u,function(V,B){let X=V;d(V)&&(X=xh(V)),g.push(k+B+"="+encodeURIComponent(X))})}catch(V){throw g.push(k+"type="+encodeURIComponent("_badmap")),V}}function hc(u){this.l=u.Ub||null,this.j=u.eb||!1}y(hc,bh),hc.prototype.g=function(){return new fc(this.l,this.j)},hc.prototype.i=function(u){return function(){return u}}({});function fc(u,g){jt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(fc,jt),t=fc.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,oo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,oo(this)),this.g&&(this.readyState=3,oo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ry(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ry(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ao(this):oo(this),this.readyState==3&&ry(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ao(this))},t.Qa=function(u){this.g&&(this.response=u,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(u){u.readyState=4,u.l=null,u.j=null,u.v=null,oo(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var I=g.next();!I.done;)I=I.value,u.push(I[0]+": "+I[1]),I=g.next();return u.join(`\r
`)};function oo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function iy(u){let g="";return O(u,function(I,k){g+=k,g+=":",g+=I,g+=`\r
`}),g}function kh(u,g,I){e:{for(k in I){var k=!1;break e}k=!0}k||(I=iy(I),typeof u=="string"?I!=null&&encodeURIComponent(String(I)):Ue(u,g,I))}function Je(u){jt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Je,jt);var BN=/^https?$/i,$N=["POST","PUT"];t=Je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,I,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Th.g(),this.v=this.o?Dv(this.o):Dv(Th),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(B){ay(this,B);return}if(u=I||"",I=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var V in k)I.set(V,k[V]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const B of k.keys())I.set(B,k.get(B));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(I.keys()).find(B=>B.toLowerCase()=="content-type"),V=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call($N,g,void 0))||k||V||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,X]of I)this.g.setRequestHeader(B,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cy(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){ay(this,B)}};function ay(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,oy(u),mc(u)}function oy(u){u.A||(u.A=!0,Bt(u,"complete"),Bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Bt(this,"complete"),Bt(this,"abort"),mc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mc(this,!0)),Je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ly(this):this.bb())},t.bb=function(){ly(this)};function ly(u){if(u.h&&typeof a<"u"&&(!u.v[1]||cs(u)!=4||u.Z()!=2)){if(u.u&&cs(u)==4)jv(u.Ea,0,u);else if(Bt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var I;if(!(I=g)){var k;if(k=X===0){var V=String(u.D).match(Jv)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),k=!BN.test(V?V.toLowerCase():"")}I=k}if(I)Bt(u,"complete"),Bt(u,"success");else{u.m=6;try{var B=2<cs(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",oy(u)}}finally{mc(u)}}}}function mc(u,g){if(u.g){cy(u);const I=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Bt(u,"ready");try{I.onreadystatechange=k}catch{}}}function cy(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<cs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),xN(g)}};function uy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function WN(u){const g={};u=(u.g&&2<=cs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(w(u[k]))continue;var I=A(u[k]);const V=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const B=g[V]||[];g[V]=B,B.push(I)}_(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(u,g,I){return I&&I.internalChannelParams&&I.internalChannelParams[u]||g}function dy(u){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,u),this.cb=lo("retryDelaySeedMs",1e4,u),this.Wa=lo("forwardChannelMaxRetries",2,u),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hv(u&&u.concurrentRequestLimit),this.Da=new UN,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dy.prototype,t.la=8,t.G=1,t.connect=function(u,g,I,k){$t(0),this.W=u,this.H=g||{},I&&k!==void 0&&(this.H.OSID=I,this.H.OAID=k),this.F=this.X,this.I=_y(this,null,this.W),gc(this)};function Rh(u){if(hy(u),u.G==3){var g=u.U++,I=ls(u.I);if(Ue(I,"SID",u.K),Ue(I,"RID",g),Ue(I,"TYPE","terminate"),co(u,I),g=new Bs(u,u.j,g),g.L=2,g.v=dc(ls(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=g.v,I=!0),I||(g.g=xy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),lc(g)}wy(u)}function pc(u){u.g&&(Oh(u),u.g.cancel(),u.g=null)}function hy(u){pc(u),u.u&&(l.clearTimeout(u.u),u.u=null),vc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function gc(u){if(!qv(u.h)&&!u.s){u.s=!0;var g=u.Ga;z||K(),M||(z(),M=!0),W.add(g,u),u.B=0}}function GN(u,g){return Kv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=eo(m(u.Ga,u,g),yy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new Bs(this,this.j,u);let B=this.o;if(this.S&&(B?(B=v(B),E(B,this.S)):B=this.S),this.m!==null||this.O||(V.H=B,B=null),this.P)e:{for(var g=0,I=0;I<this.i.length;I++){t:{var k=this.i[I];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=I;break e}if(g===4096||I===this.i.length-1){g=I+1;break e}}g=1e3}else g=1e3;g=my(this,V,g),I=ls(this.I),Ue(I,"RID",u),Ue(I,"CVER",22),this.D&&Ue(I,"X-HTTP-Session-Id",this.D),co(this,I),B&&(this.O?g="headers="+encodeURIComponent(String(iy(B)))+"&"+g:this.m&&kh(I,this.m,B)),Ph(this.h,V),this.Ua&&Ue(I,"TYPE","init"),this.P?(Ue(I,"$req",g),Ue(I,"SID","null"),V.T=!0,Nh(V,I,null)):Nh(V,I,g),this.G=2}}else this.G==3&&(u?fy(this,u):this.i.length==0||qv(this.h)||fy(this))};function fy(u,g){var I;g?I=g.l:I=u.U++;const k=ls(u.I);Ue(k,"SID",u.K),Ue(k,"RID",I),Ue(k,"AID",u.T),co(u,k),u.m&&u.o&&kh(k,u.m,u.o),I=new Bs(u,u.j,I,u.B+1),u.m===null&&(I.H=u.o),g&&(u.i=g.D.concat(u.i)),g=my(u,I,1e3),I.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ph(u.h,I),Nh(I,k,g)}function co(u,g){u.H&&O(u.H,function(I,k){Ue(g,k,I)}),u.l&&Xv({},function(I,k){Ue(g,k,I)})}function my(u,g,I){I=Math.min(u.i.length,I);var k=u.l?m(u.l.Na,u.l,u):null;e:{var V=u.i;let B=-1;for(;;){const X=["count="+I];B==-1?0<I?(B=V[0].g,X.push("ofs="+B)):B=0:X.push("ofs="+B);let Oe=!0;for(let bt=0;bt<I;bt++){let Se=V[bt].g;const Pt=V[bt].map;if(Se-=B,0>Se)B=Math.max(0,V[bt].g-100),Oe=!1;else try{zN(Pt,X,"req"+Se+"_")}catch{k&&k(Pt)}}if(Oe){k=X.join("&");break e}}}return u=u.i.splice(0,I),g.D=u,k}function py(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;z||K(),M||(z(),M=!0),W.add(g,u),u.v=0}}function Dh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=eo(m(u.Fa,u),yy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,gy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=eo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),pc(this),gy(this))};function Oh(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function gy(u){u.g=new Bs(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ls(u.qa);Ue(g,"RID","rpc"),Ue(g,"SID",u.K),Ue(g,"AID",u.T),Ue(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ue(g,"TO",u.ja),Ue(g,"TYPE","xmlhttp"),co(u,g),u.m&&u.o&&kh(g,u.m,u.o),u.L&&(u.g.I=u.L);var I=u.g;u=u.ia,I.L=1,I.v=dc(ls(g)),I.m=null,I.P=!0,$v(I,u)}t.Za=function(){this.C!=null&&(this.C=null,pc(this),Dh(this),$t(19))};function vc(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function vy(u,g){var I=null;if(u.g==g){vc(u),Oh(u),u.g=null;var k=2}else if(jh(u.h,g))I=g.D,Qv(u.h,g),k=1;else return;if(u.G!=0){if(g.o)if(k==1){I=g.m?g.m.length:0,g=Date.now()-g.F;var V=u.B;k=ic(),Bt(k,new Fv(k,I)),gc(u)}else py(u);else if(V=g.s,V==3||V==0&&0<g.X||!(k==1&&GN(u,g)||k==2&&Dh(u)))switch(I&&0<I.length&&(g=u.h,g.i=g.i.concat(I)),V){case 1:Br(u,5);break;case 4:Br(u,10);break;case 3:Br(u,6);break;default:Br(u,2)}}}function yy(u,g){let I=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(I*=2),I*g}function Br(u,g){if(u.j.info("Error code "+g),g==2){var I=m(u.fb,u),k=u.Xa;const V=!k;k=new zr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||cc(k,"https"),dc(k),V?VN(k.toString(),I):FN(k.toString(),I)}else $t(2);u.G=0,u.l&&u.l.sa(g),wy(u),hy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function wy(u){if(u.G=0,u.ka=[],u.l){const g=Yv(u.h);(g.length!=0||u.i.length!=0)&&(T(u.ka,g),T(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function _y(u,g,I){var k=I instanceof zr?ls(I):new zr(I);if(k.g!="")g&&(k.g=g+"."+k.g),uc(k,k.s);else{var V=l.location;k=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var B=new zr(null);k&&cc(B,k),g&&(B.g=g),V&&uc(B,V),I&&(B.l=I),k=B}return I=u.D,g=u.ya,I&&g&&Ue(k,I,g),Ue(k,"VER",u.la),co(u,k),k}function xy(u,g,I){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Je(new hc({eb:I})):new Je(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function by(){}t=by.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yc(){}yc.prototype.g=function(u,g){return new ln(u,g)};function ln(u,g){jt.call(this),this.g=new dy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Mi(this)}y(ln,jt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Rh(this.g)},ln.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var I={};I.__data__=u,u=I}else this.u&&(I={},I.__data__=xh(u),u=I);g.i.push(new CN(g.Ya++,u)),g.G==3&&gc(g)},ln.prototype.N=function(){this.g.l=null,delete this.j,Rh(this.g),delete this.g,ln.aa.N.call(this)};function Ey(u){Eh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const I in g){u=I;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(Ey,Eh);function Iy(){Ih.call(this),this.status=1}y(Iy,Ih);function Mi(u){this.g=u}y(Mi,by),Mi.prototype.ua=function(){Bt(this.g,"a")},Mi.prototype.ta=function(u){Bt(this.g,new Ey(u))},Mi.prototype.sa=function(u){Bt(this.g,new Iy)},Mi.prototype.ra=function(){Bt(this.g,"b")},yc.prototype.createWebChannel=yc.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,tT=function(){return new yc},eT=function(){return ic()},ZI=Fr,Wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ac.NO_ERROR=0,ac.TIMEOUT=8,ac.HTTP_ERROR=6,uu=ac,Uv.COMPLETE="complete",JI=Uv,Ov.EventType=Ja,Ja.OPEN="a",Ja.CLOSE="b",Ja.ERROR="c",Ja.MESSAGE="d",jt.prototype.listen=jt.prototype.K,Ao=Ov,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,XI=Je}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});const v_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new lg("@firebase/firestore");function wo(){return mi.logLevel}function Z(t,...e){if(mi.logLevel<=_e.DEBUG){const n=e.map(xg);mi.debug(`Firestore (${Ua}): ${t}`,...n)}}function ks(t,...e){if(mi.logLevel<=_e.ERROR){const n=e.map(xg);mi.error(`Firestore (${Ua}): ${t}`,...n)}}function pi(t,...e){if(mi.logLevel<=_e.WARN){const n=e.map(xg);mi.warn(`Firestore (${Ua}): ${t}`,...n)}}function xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Ua}) INTERNAL ASSERTION FAILED: `+t;throw ks(e),new Error(e)}function be(t,e){t||oe()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends as{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class f1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class m1{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(be(typeof s.accessToken=="string"),new nT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Mt(e)}}class p1{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g1{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new p1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const s=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new v1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=w1(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function Ne(t,e){return t<e?-1:t>e?1:0}function Ea(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ct(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new ct(0,0))}static max(){return new le(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,s){n===void 0?n=0:n>e.length&&oe(),s===void 0?s=e.length-n:s>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xl?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),a=n.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class De extends xl{construct(e,n,s){return new De(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Y(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new De(n)}static emptyPath(){return new De([])}}const _1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends xl{construct(e,n,s){return new yt(e,n,s)}static isValidIdentifier(e){return _1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new yt(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Y(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new Y(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new Y(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(De.fromString(e))}static fromName(e){return new re(De.fromString(e).popFirst(5))}static empty(){return new re(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new De(e.slice()))}}function x1(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=le.fromTimestamp(s===1e9?new ct(n+1,0):new ct(n,s));return new Tr(r,re.empty(),e)}function b1(t){return new Tr(t.readTime,t.key,-1)}class Tr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Tr(le.min(),re.empty(),-1)}static max(){return new Tr(le.max(),re.empty(),-1)}}function E1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==I1)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,s)=>{n(e)})}static reject(e){return new H((n,s)=>{s(e)})}static waitFor(e){return new H((n,s)=>{let r=0,i=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++i,a&&i===r&&n()},c=>s(c))}),a=!0,i===r&&n()})}static or(e){let n=H.resolve(!1);for(const s of e)n=n.next(r=>r?H.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new H((s,r)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&s(a)},h=>r(h))}})}static doWhile(e,n){return new H((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function S1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Eg.oe=-1;function Gl(t){return t==null}function Ku(t){return t===0&&1/t==-1/0}function N1(t){return typeof t=="number"&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ti(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C1(t,e){const n=[];for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.push(e(t[s],s,t));return n}function rT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??It.RED,this.left=r??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new It(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return It.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,s,r,i){return this}insert(e,n,s){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new w_(this.data.getIterator())}getIteratorFrom(e){return new w_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class w_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new St(yt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iT("Invalid base64 string: "+i):i}}(e);return new _t(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const A1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(t){if(be(!!t),typeof t=="string"){let e=0;const n=A1.exec(t);if(be(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ig(t){const e=t.mapValue.fields.__previous_value__;return Bd(e)?Ig(e):e}function bl(t){const e=Sr(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,s,r,i,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class Ia{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc={mapValue:{}};function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bd(t)?4:k1(t)?9007199254740991:P1(t)?10:11:oe()}function ss(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bl(t).isEqual(bl(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Sr(r.timestampValue),l=Sr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return gi(r.bytesValue).isEqual(gi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=st(r.doubleValue),l=st(i.doubleValue);return a===l?Ku(a)===Ku(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ea(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(y_(a)!==y_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ss(a[c],l[c])))return!1;return!0}(t,e);default:return oe()}}function El(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function Ta(t,e){if(t===e)return 0;const n=vi(t),s=vi(e);if(n!==s)return Ne(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=st(i.integerValue||i.doubleValue),c=st(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return __(t.timestampValue,e.timestampValue);case 4:return __(bl(t),bl(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(i,a){const l=gi(i),c=gi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ne(l[d],c[d]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ne(st(i.latitude),st(a.latitude));return l!==0?l:Ne(st(i.longitude),st(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,d,h;const f=i.fields||{},m=a.fields||{},p=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,b=Ne(((d=p==null?void 0:p.values)===null||d===void 0?void 0:d.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:x_(p,y)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Uc.mapValue&&a===Uc.mapValue)return 0;if(i===Uc.mapValue)return 1;if(a===Uc.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Ne(c[f],h[f]);if(m!==0)return m;const p=Ta(l[c[f]],d[h[f]]);if(p!==0)return p}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function __(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Sr(t),s=Sr(e),r=Ne(n.seconds,s.seconds);return r!==0?r:Ne(n.nanos,s.nanos)}function x_(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Ta(n[r],s[r]);if(i)return i}return Ne(n.length,s.length)}function Sa(t){return Gm(t)}function Gm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Sr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Gm(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${Gm(n.fields[a])}`;return r+"}"}(t.mapValue):oe()}function Qu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hm(t){return!!t&&"integerValue"in t}function Tg(t){return!!t&&"arrayValue"in t}function b_(t){return!!t&&"nullValue"in t}function E_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function du(t){return!!t&&"mapValue"in t}function P1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ti(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=$o(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(n)}setAll(e){let n=yt.emptyPath(),s={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}a?s[l.lastSegment()]=$o(a):r.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];du(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Ti(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ht($o(this.value))}}function aT(t){const e=[];return Ti(t.fields,(n,s)=>{const r=new yt([n]);if(du(s)){const i=aT(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,s,r,i,a,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new vt(e,0,le.min(),le.min(),le.min(),Ht.empty(),0)}static newFoundDocument(e,n,s,r){return new vt(e,1,n,le.min(),s,r,0)}static newNoDocument(e,n){return new vt(e,2,n,le.min(),le.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,le.min(),le.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n){this.position=e,this.inclusive=n}}function I_(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=re.comparator(re.fromName(a.referenceValue),n.key):s=Ta(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function T_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n="asc"){this.field=e,this.dir=n}}function R1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{}class lt extends oT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new O1(e,n,s):n==="array-contains"?new V1(e,s):n==="in"?new F1(e,s):n==="not-in"?new U1(e,s):n==="array-contains-any"?new z1(e,s):new lt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new M1(e,s):new L1(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ta(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends oT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return lT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lT(t){return t.op==="and"}function cT(t){return D1(t)&&lT(t)}function D1(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function qm(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(cT(t))return t.filters.map(e=>qm(e)).join(",");{const e=t.filters.map(n=>qm(n)).join(",");return`${t.op}(${e})`}}function uT(t,e){return t instanceof lt?function(s,r){return r instanceof lt&&s.op===r.op&&s.field.isEqual(r.field)&&ss(s.value,r.value)}(t,e):t instanceof Wn?function(s,r){return r instanceof Wn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,l)=>i&&uT(a,r.filters[l]),!0):!1}(t,e):void oe()}function dT(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Sa(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(dT).join(" ,")+"}"}(t):"Filter"}class O1 extends lt{constructor(e,n,s){super(e,n,s),this.key=re.fromName(s.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class M1 extends lt{constructor(e,n){super(e,"in",n),this.keys=hT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L1 extends lt{constructor(e,n){super(e,"not-in",n),this.keys=hT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>re.fromName(s.referenceValue))}class V1 extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&El(n.arrayValue,this.value)}}class F1 extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&El(this.value.arrayValue,n)}}class U1 extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!El(this.value.arrayValue,n)}}class z1 extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>El(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n=null,s=[],r=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function S_(t,e=null,n=[],s=[],r=null,i=null,a=null){return new B1(t,e,n,s,r,i,a)}function Sg(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>qm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Gl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Sa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Sa(s)).join(",")),e.ue=n}return e.ue}function Ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!T_(t.startAt,e.startAt)&&T_(t.endAt,e.endAt)}function Km(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n=null,s=[],r=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $1(t,e,n,s,r,i,a,l){return new Si(t,e,n,s,r,i,a,l)}function Cg(t){return new Si(t)}function N_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ag(t){return t.collectionGroup!==null}function ua(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new St(yt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Il(i,s))}),n.has(yt.keyField().canonicalString())||e.ce.push(new Il(yt.keyField(),s))}return e.ce}function ns(t){const e=ue(t);return e.le||(e.le=fT(e,ua(t))),e.le}function W1(t){const e=ue(t);return e.he||(e.he=fT(e,t.explicitOrderBy)),e.he}function fT(t,e){if(t.limitType==="F")return S_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Il(r.field,i)});const n=t.endAt?new Na(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Na(t.startAt.position,t.startAt.inclusive):null;return S_(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Qm(t,e){const n=t.filters.concat([e]);return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yu(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $d(t,e){return Ng(ns(t),ns(e))&&t.limitType===e.limitType}function mT(t){return`${Sg(ns(t))}|lt:${t.limitType}`}function zi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>dT(r)).join(", ")}]`),Gl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>Sa(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>Sa(r)).join(",")),`Target(${s})`}(ns(t))}; limitType=${t.limitType})`}function Wd(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):re.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of ua(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,l,c){const d=I_(a,l,c);return a.inclusive?d<=0:d<0}(s.startAt,ua(s),r)||s.endAt&&!function(a,l,c){const d=I_(a,l,c);return a.inclusive?d>=0:d>0}(s.endAt,ua(s),r))}(t,e)}function G1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pT(t){return(e,n)=>{let s=!1;for(const r of ua(t)){const i=H1(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function H1(t,e,n){const s=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ta(c,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return rT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Qe(re.comparator);function Rs(){return q1}const gT=new Qe(re.comparator);function jo(...t){let e=gT;for(const n of t)e=e.insert(n.key,n);return e}function vT(t){let e=gT;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Jr(){return Wo()}function yT(){return Wo()}function Wo(){return new za(t=>t.toString(),(t,e)=>t.isEqual(e))}const K1=new Qe(re.comparator),Q1=new St(re.comparator);function ye(...t){let e=Q1;for(const n of t)e=e.add(n);return e}const Y1=new St(Ne);function X1(){return Y1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function wT(t){return{integerValue:""+t}}function _T(t,e){return N1(e)?wT(e):jg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function J1(t,e,n){return t instanceof Tl?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Bd(i)&&(i=Ig(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ca?bT(t,e):t instanceof Sl?ET(t,e):function(r,i){const a=xT(r,i),l=C_(a)+C_(r.Pe);return Hm(a)&&Hm(r.Pe)?wT(l):jg(r.serializer,l)}(t,e)}function Z1(t,e,n){return t instanceof Ca?bT(t,e):t instanceof Sl?ET(t,e):n}function xT(t,e){return t instanceof Nl?function(s){return Hm(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Tl extends Gd{}class Ca extends Gd{constructor(e){super(),this.elements=e}}function bT(t,e){const n=IT(e);for(const s of t.elements)n.some(r=>ss(r,s))||n.push(s);return{arrayValue:{values:n}}}class Sl extends Gd{constructor(e){super(),this.elements=e}}function ET(t,e){let n=IT(e);for(const s of t.elements)n=n.filter(r=>!ss(r,s));return{arrayValue:{values:n}}}class Nl extends Gd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function C_(t){return st(t.integerValue||t.doubleValue)}function IT(t){return Tg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.field=e,this.transform=n}}function eD(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof Ca&&r instanceof Ca||s instanceof Sl&&r instanceof Sl?Ea(s.elements,r.elements,ss):s instanceof Nl&&r instanceof Nl?ss(s.Pe,r.Pe):s instanceof Tl&&r instanceof Tl}(t.transform,e.transform)}class tD{constructor(e,n){this.version=e,this.transformResults=n}}class Vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vt}static exists(e){return new Vt(void 0,e)}static updateTime(e){return new Vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hd{}function TT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kg(t.key,Vt.none()):new Hl(t.key,t.data,Vt.none());{const n=t.data,s=Ht.empty();let r=new St(yt.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new Mr(t.key,s,new hn(r.toArray()),Vt.none())}}function nD(t,e,n){t instanceof Hl?function(r,i,a){const l=r.value.clone(),c=j_(r.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(r,i,a){if(!hu(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=j_(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(ST(r)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Go(t,e,n,s){return t instanceof Hl?function(i,a,l,c){if(!hu(i.precondition,a))return l;const d=i.value.clone(),h=P_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,s):t instanceof Mr?function(i,a,l,c){if(!hu(i.precondition,a))return l;const d=P_(i.fieldTransforms,c,a),h=a.data;return h.setAll(ST(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,a,l){return hu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function sD(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=xT(s.transform,r||null);i!=null&&(n===null&&(n=Ht.empty()),n.set(s.field,i))}return n||null}function A_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ea(s,r,(i,a)=>eD(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hl extends Hd{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mr extends Hd{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ST(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function j_(t,e,n){const s=new Map;be(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,l=e.data.field(i.field);s.set(i.field,Z1(a,l,n[r]))}return s}function P_(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,J1(i,a,e))}return s}class kg extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NT extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&nD(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Go(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=yT();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(r.key)?null:l;const c=TT(a,l);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(le.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,s)=>A_(n,s))&&Ea(this.baseMutations,e.baseMutations,(n,s)=>A_(n,s))}}class Rg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){be(e.mutations.length===s.length);let r=function(){return K1}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Rg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,xe;function CT(t){switch(t){default:return oe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function AT(t){if(t===void 0)return ks("GRPC error has no .code"),G.UNKNOWN;switch(t){case at.OK:return G.OK;case at.CANCELLED:return G.CANCELLED;case at.UNKNOWN:return G.UNKNOWN;case at.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case at.INTERNAL:return G.INTERNAL;case at.UNAVAILABLE:return G.UNAVAILABLE;case at.UNAUTHENTICATED:return G.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case at.NOT_FOUND:return G.NOT_FOUND;case at.ALREADY_EXISTS:return G.ALREADY_EXISTS;case at.PERMISSION_DENIED:return G.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case at.ABORTED:return G.ABORTED;case at.OUT_OF_RANGE:return G.OUT_OF_RANGE;case at.UNIMPLEMENTED:return G.UNIMPLEMENTED;case at.DATA_LOSS:return G.DATA_LOSS;default:return oe()}}(xe=at||(at={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new ni([4294967295,4294967295],0);function k_(t){const e=lD().encode(t),n=new YI;return n.update(e),new Uint8Array(n.digest())}function R_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ni([n,s],0),new ni([r,i],0)]}class Dg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(s<0)throw new Po(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ni.fromNumber(this.Ie)}Ee(e,n,s){let r=e.add(n.multiply(ni.fromNumber(s)));return r.compare(cD)===1&&(r=new ni([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=k_(e),[s,r]=R_(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(s,r,i);if(!this.de(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Dg(i,r,n);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=k_(e),[s,r]=R_(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(s,r,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ql.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new qd(le.min(),r,new Qe(Ne),Rs(),ye())}}class ql{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ql(s,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,s,r){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=r}}class jT{constructor(e,n){this.targetId=e,this.me=n}}class PT{constructor(e,n,s=_t.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class D_{constructor(){this.fe=0,this.ge=M_(),this.pe=_t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),s=ye();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:oe()}}),new ql(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=M_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rs(),this.qe=O_(),this.Qe=new Qe(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const s=this.Ge(n);switch(e.state){case 0:this.ze(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),s.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,s=e.me.count,r=this.Je(n);if(r){const i=r.target;if(Km(i))if(s===0){const a=new re(i.path);this.Ue(n,a,vt.newNoDocument(a,le.min()))}else be(s===1);else{const a=this.Ye(n);if(a!==s){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,l;try{a=gi(s).toUint8Array()}catch(c){if(c instanceof iT)return pi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Dg(a,r,i)}catch(c){return pi(c instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,s){return n.me.count===s-this.nt(e,n.targetId)?0:2}nt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const l=this.Je(a);if(l){if(i.current&&Km(l.target)){const c=new re(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,vt.newNoDocument(c,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let s=ye();this.qe.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const r=new qd(e,n,this.Qe,this.ke,s);return this.ke=Rs(),this.qe=O_(),this.Qe=new Qe(Ne),r}$e(e,n){if(!this.ze(e))return;const s=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,s){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new D_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function O_(){return new Qe(re.comparator)}function M_(){return new Qe(re.comparator)}const dD={asc:"ASCENDING",desc:"DESCENDING"},hD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fD={and:"AND",or:"OR"};class mD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(t,e){return t.useProto3Json||Gl(e)?e:{value:e}}function Xu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pD(t,e){return Xu(t,e.toTimestamp())}function mn(t){return be(!!t),le.fromTimestamp(function(n){const s=Sr(n);return new ct(s.seconds,s.nanos)}(t))}function Og(t,e){return Xm(t,e).canonicalString()}function Xm(t,e){const n=function(r){return new De(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RT(t){const e=De.fromString(t);return be(UT(e)),e}function Ju(t,e){return Og(t.databaseId,e.path)}function Ho(t,e){const n=RT(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(OT(n))}function DT(t,e){return Og(t.databaseId,e)}function gD(t){const e=RT(t);return e.length===4?De.emptyPath():OT(e)}function Jm(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OT(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function L_(t,e,n){return{name:Ju(t,e),fields:n.value.mapValue.fields}}function vD(t,e){return"found"in e?function(s,r){be(!!r.found),r.found.name,r.found.updateTime;const i=Ho(s,r.found.name),a=mn(r.found.updateTime),l=r.found.createTime?mn(r.found.createTime):le.min(),c=new Ht({mapValue:{fields:r.found.fields}});return vt.newFoundDocument(i,a,l,c)}(t,e):"missing"in e?function(s,r){be(!!r.missing),be(!!r.readTime);const i=Ho(s,r.missing),a=mn(r.readTime);return vt.newNoDocument(i,a)}(t,e):oe()}function yD(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(be(h===void 0||typeof h=="string"),_t.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?G.UNKNOWN:AT(d.code);return new Y(h,d.message||"")}(a);n=new PT(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ho(t,s.document.name),i=mn(s.document.updateTime),a=s.document.createTime?mn(s.document.createTime):le.min(),l=new Ht({mapValue:{fields:s.document.fields}}),c=vt.newFoundDocument(r,i,a,l),d=s.targetIds||[],h=s.removedTargetIds||[];n=new fu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ho(t,s.document),i=s.readTime?mn(s.readTime):le.min(),a=vt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new fu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ho(t,s.document),i=s.removedTargetIds||[];n=new fu([],i,r,null)}else{if(!("filter"in e))return oe();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new oD(r,i),l=s.targetId;n=new jT(l,a)}}return n}function MT(t,e){let n;if(e instanceof Hl)n={update:L_(t,e.key,e.value)};else if(e instanceof kg)n={delete:Ju(t,e.key)};else if(e instanceof Mr)n={update:L_(t,e.key,e.data),updateMask:ND(e.fieldMask)};else{if(!(e instanceof NT))return oe();n={verify:Ju(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof Tl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ca)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Sl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nl)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw oe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:pD(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function wD(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(r,i){let a=r.updateTime?mn(r.updateTime):mn(i);return a.isEqual(le.min())&&(a=mn(i)),new tD(a,r.transformResults||[])}(n,e))):[]}function _D(t,e){return{documents:[DT(t,e.path)]}}function LT(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=DT(t,r);const i=function(d){if(d.length!==0)return FT(Wn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:tr(m.field),direction:ID(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ym(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:r}}function xD(t,e,n,s){const{_t:r,parent:i}=LT(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:tr(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:tr(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:r.structuredQuery},parent:r.parent},ut:a,parent:i}}function bD(t){let e=gD(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){be(s===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=VT(f);return m instanceof Wn&&cT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(y){return new Il(Bi(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Gl(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,p=f.values||[];return new Na(p,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,p=f.values||[];return new Na(p,m)}(n.endAt)),$1(e,r,a,i,l,"F",c,d)}function ED(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Bi(n.unaryFilter.field);return lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Bi(n.unaryFilter.field);return lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bi(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bi(n.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Bi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(s=>VT(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function ID(t){return dD[t]}function TD(t){return hD[t]}function SD(t){return fD[t]}function tr(t){return{fieldPath:t.canonicalString()}}function Bi(t){return yt.fromServerFormat(t.fieldPath)}function FT(t){return t instanceof lt?function(n){if(n.op==="=="){if(E_(n.value))return{unaryFilter:{field:tr(n.field),op:"IS_NAN"}};if(b_(n.value))return{unaryFilter:{field:tr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E_(n.value))return{unaryFilter:{field:tr(n.field),op:"IS_NOT_NAN"}};if(b_(n.value))return{unaryFilter:{field:tr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tr(n.field),op:TD(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const s=n.getFilters().map(r=>FT(r));return s.length===1?s[0]:{compositeFilter:{op:SD(n.op),filters:s}}}(t):oe()}function ND(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,s,r,i=le.min(),a=le.min(),l=_t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.ct=e}}function AD(t){const e=bD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.un=new PD}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Tr.min())}updateCollectionGroup(e,n,s){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class PD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new St(De.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new St(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Aa(0)}static kn(){return new Aa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.changes=new za(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?H.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Go(s.mutation,r,hn.empty(),ct.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,ye()).next(()=>s))}getLocalViewOfDocuments(e,n,s=ye()){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=jo();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,ye()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,s,r){let i=Rs();const a=Wo(),l=function(){return Wo()}();return n.forEach((c,d)=>{const h=s.get(d.key);r.has(d.key)&&(h===void 0||h.mutation instanceof Mr)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Go(h.mutation,d,h.mutation.getFieldMask(),ct.now())):a.set(d.key,hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>{var f;return l.set(d,new RD(h,(f=a.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const s=Wo();let r=new Qe((a,l)=>a-l),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=s.get(c)||hn.empty();h=l.applyToLocalView(d,h),s.set(c,h);const f=(r.get(l.batchId)||ye()).add(c);r=r.insert(l.batchId,f)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=yT();h.forEach(m=>{if(!i.has(m)){const p=TT(n.get(m),s.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return H.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ag(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):H.resolve(Jr());let l=-1,c=i;return a.next(d=>H.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ye())).next(h=>({batchId:l,changes:vT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(s=>{let r=jo();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=jo();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const d=function(f,m){return new Si(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,s,r).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,vt.newInvalidDocument(h)))});let l=jo();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Go(h.mutation,d,hn.empty(),ct.now()),Wd(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:mn(r.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:AD(r.bundledQuery),readTime:mn(r.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.overlays=new Qe(re.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Jr();return H.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Ir.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(s)),H.resolve()}getOverlaysForCollection(e,n,s){const r=Jr(),i=n.length+1,a=new re(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return H.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Qe((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>s){let h=i.get(d.largestBatchId);h===null&&(h=Jr(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Jr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=r)););return H.resolve(l)}ht(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(s.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new iD(n,s));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Tr=new St(pt.Er),this.dr=new St(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const s=new pt(e,n);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Vr(new pt(e,n))}mr(e,n){e.forEach(s=>this.removeReference(s,n))}gr(e){const n=new re(new De([])),s=new pt(n,e),r=new pt(n,e+1),i=[];return this.dr.forEachInRange([s,r],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new De([])),s=new pt(n,e),r=new pt(n,e+1);let i=ye();return this.dr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new pt(e,0),s=this.Tr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(pt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rD(i,n,s,r);this.mutationQueue.push(a);for(const l of r)this.br=this.br.add(new pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.vr(s),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pt(n,0),r=new pt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([s,r],a=>{const l=this.Dr(a.wr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new St(Ne);return n.forEach(r=>{const i=new pt(r,0),a=new pt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],l=>{s=s.add(l.wr)})}),H.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;re.isDocumentKey(i)||(i=i.child(""));const a=new pt(new re(i),0);let l=new St(Ne);return this.br.forEachWhile(c=>{const d=c.key.path;return!!s.isPrefixOf(d)&&(d.length===r&&(l=l.add(c.wr)),!0)},a),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(s=>{const r=this.Dr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return H.forEach(n.mutations,r=>{const i=new pt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,n){const s=new pt(n,0),r=this.br.firstAfterOrEqual(s);return H.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.Mr=e,this.docs=function(){return new Qe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.Mr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return H.resolve(s?s.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let s=Rs();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():vt.newInvalidDocument(r))}),H.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Rs();const a=n.path,l=new re(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||E1(b1(h),s)<=0||(r.has(h.key)||Wd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,s,r){oe()}Or(e,n){return H.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new UD(this)}getSize(e){return H.resolve(this.size)}}class UD extends kD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(s)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.persistence=e,this.Nr=new za(n=>Sg(n),Ng),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mg,this.targetCount=0,this.kr=Aa.Bn()}forEachTarget(e,n){return this.Nr.forEach((s,r)=>n(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),H.waitFor(i).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const s=this.Nr.get(n)||null;return H.resolve(s)}addMatchingKeys(e,n,s){return this.Br.Rr(n,s),H.resolve()}removeMatchingKeys(e,n,s){this.Br.mr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Br.yr(n);return H.resolve(s)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Eg(0),this.Kr=!1,this.Kr=!0,this.$r=new LD,this.referenceDelegate=e(this),this.Ur=new zD(this),this.indexManager=new jD,this.remoteDocumentCache=function(r){return new FD(r)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new CD(n),this.Gr=new OD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.qr[e.toKey()];return s||(s=new VD(n,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,s){Z("MemoryPersistence","Starting transaction:",e);const r=new $D(this.Qr.next());return this.referenceDelegate.zr(),s(r).next(i=>this.referenceDelegate.jr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,n)))}}class $D extends T1{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Jr=new Mg,this.Yr=null}static Zr(e){return new Lg(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,s){return this.Jr.addReference(s,n),this.Xr.delete(s.toString()),H.resolve()}removeReference(e,n,s){return this.Jr.removeReference(s,n),this.Xr.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Xr.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,s=>{const r=re.fromPath(s);return this.ei(e,r).next(i=>{i||n.removeEntry(r,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(s=>{s?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.$i=s,this.Ui=r}static Wi(e,n){let s=ye(),r=ye();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vg(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return MP()?8:S1(Ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new WD;return this.Xi(e,n,a).next(l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>i.result)}es(e,n,s,r){return s.documentReadCount<this.ji?(wo()<=_e.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(wo()<=_e.DEBUG&&Z("QueryEngine","Query:",zi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Hi*r?(wo()<=_e.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):H.resolve())}Yi(e,n){if(N_(n))return H.resolve(null);let s=ns(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Yu(n,null,"F"),s=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=ye(...i);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(c=>{const d=this.ts(n,l);return this.ns(n,d,a,c.readTime)?this.Yi(e,Yu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,s,r){return N_(n)||r.isEqual(le.min())?H.resolve(null):this.Ji.getDocuments(e,s).next(i=>{const a=this.ts(n,i);return this.ns(n,a,s,r)?H.resolve(null):(wo()<=_e.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zi(n)),this.rs(e,a,n,x1(r,-1)).next(l=>l))})}ts(e,n){let s=new St(pT(e));return n.forEach((r,i)=>{Wd(e,i)&&(s=s.add(i))}),s}ns(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,n,s){return wo()<=_e.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",zi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tr.min(),s)}rs(e,n,s,r){return this.Ji.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,s,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Qe(Ne),this._s=new za(i=>Sg(i),Ng),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qD(t,e,n,s){return new HD(t,e,n,s)}async function zT(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let c=ye();for(const d of r){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:l}))})})}function KD(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let p=H.resolve();return m.forEach(y=>{p=p.next(()=>h.getEntry(c,y)).next(b=>{const T=d.docVersions.get(y);be(T!==null),b.version.compareTo(T)<0&&(f.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=ye();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function BT(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function QD(t,e){const n=ue(t),s=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const l=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(_t.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),r=r.insert(f,p),function(b,T,x){return b.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,h)&&l.push(n.Ur.updateTargetData(i,p))});let c=Rs(),d=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(YD(i,a,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!s.isEqual(le.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return H.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=r,i))}function YD(t,e,n){let s=ye(),r=ye();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Rs();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Z("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:a,Is:r}})}function XD(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function JD(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ur.getTargetData(s,e).next(i=>i?(r=i,H.resolve(r)):n.Ur.allocateTargetId(s).next(a=>(r=new ir(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Ur.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.os.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(s.targetId,s),n._s.set(e,s.targetId)),s})}async function Zm(t,e,n){const s=ue(t),r=s.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Wl(a))throw a;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}s.os=s.os.remove(e),s._s.delete(r.target)}function V_(t,e,n){const s=ue(t);let r=le.min(),i=ye();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=ue(c),m=f._s.get(h);return m!==void 0?H.resolve(f.os.get(m)):f.Ur.getTargetData(d,h)}(s,a,ns(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>s.ss.getDocumentsMatchingQuery(a,e,n?r:le.min(),n?i:ye())).next(l=>(ZD(s,G1(e),l),{documents:l,Ts:i})))}function ZD(t,e,n){let s=t.us.get(e)||le.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.us.set(e,s)}class F_{constructor(){this.activeTargetIds=X1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eO{constructor(){this.so=new F_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,s){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new F_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function yf(){return zc===null?zc=function(){return 268435456+Math.round(2147483648*Math.random())}():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class rO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+n.host,this.vo=`projects/${r}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get Fo(){return!1}Mo(n,s,r,i,a){const l=yf(),c=this.xo(n,s.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${l}:`,c,r);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,c,d,r).then(h=>(Z("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw pi("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",c,"request:",r),h})}Lo(n,s,r,i,a,l){return this.Mo(n,s,r,i,a)}Oo(n,s,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ua}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,a)=>n[a]=i),r&&r.headers.forEach((i,a)=>n[a]=i)}xo(n,s){const r=nO[n];return`${this.Do}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,s,r){const i=yf();return new Promise((a,l)=>{const c=new XI;c.setWithCredentials(!0),c.listenOnce(JI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case uu.NO_ERROR:const h=c.getResponseJson();Z(Ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),a(h);break;case uu.TIMEOUT:Z(Ot,`RPC '${e}' ${i} timed out`),l(new Y(G.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const f=c.getStatus();if(Z(Ot,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(T){const x=T.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(x)>=0?x:G.UNKNOWN}(p.status);l(new Y(y,p.message))}else l(new Y(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(G.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{Z(Ot,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(r);Z(Ot,`RPC '${e}' ${i} sending request:`,r),c.send(n,"POST",d,s,15)})}Bo(e,n,s){const r=yf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=tT(),l=eT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");Z(Ot,`Creating RPC '${e}' stream ${r}: ${h}`,c);const f=a.createWebChannel(h,c);let m=!1,p=!1;const y=new sO({Io:T=>{p?Z(Ot,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(m||(Z(Ot,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),Z(Ot,`RPC '${e}' stream ${r} sending:`,T),f.send(T))},To:()=>f.close()}),b=(T,x,w)=>{T.listen(x,S=>{try{w(S)}catch(j){setTimeout(()=>{throw j},0)}})};return b(f,Ao.EventType.OPEN,()=>{p||(Z(Ot,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),b(f,Ao.EventType.CLOSE,()=>{p||(p=!0,Z(Ot,`RPC '${e}' stream ${r} transport closed`),y.So())}),b(f,Ao.EventType.ERROR,T=>{p||(p=!0,pi(Ot,`RPC '${e}' stream ${r} transport errored:`,T),y.So(new Y(G.UNAVAILABLE,"The operation could not be completed")))}),b(f,Ao.EventType.MESSAGE,T=>{var x;if(!p){const w=T.data[0];be(!!w);const S=w,j=S.error||((x=S[0])===null||x===void 0?void 0:x.error);if(j){Z(Ot,`RPC '${e}' stream ${r} received error:`,j);const P=j.status;let O=function(C){const E=at[C];if(E!==void 0)return AT(E)}(P),_=j.message;O===void 0&&(O=G.INTERNAL,_="Unknown error status: "+P+" with message "+j.message),p=!0,y.So(new Y(O,_)),f.close()}else Z(Ot,`RPC '${e}' stream ${r} received:`,w),y.bo(w)}}),b(l,ZI.STAT_EVENT,T=>{T.stat===Wm.PROXY?Z(Ot,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Wm.NOPROXY&&Z(Ot,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){return new mD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,s=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=s,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-s);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,s,r,i,a,l,c){this.ui=e,this.Ho=s,this.Jo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fg(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ks(n.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Yo===n&&this.P_(s,r)},s=>{e(()=>{const r=new Y(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(r)})})}P_(e,n){const s=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{s(()=>this.I_(r))}),this.stream.onMessage(r=>{s(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends $T{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=yD(this.serializer,e),s=function(i){if(!("targetChange"in i))return le.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?mn(a.readTime):le.min()}(e);return this.listener.d_(n,s)}A_(e){const n={};n.database=Jm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Km(c)?{documents:_D(i,c)}:{query:LT(i,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=kT(i,a.resumeToken);const d=Ym(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(le.min())>0){l.readTime=Xu(i,a.snapshotVersion.toTimestamp());const d=Ym(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const s=ED(this.serializer,e);s&&(n.labels=s),this.a_(n)}R_(e){const n={};n.database=Jm(this.serializer),n.removeTarget=e,this.a_(n)}}class aO extends $T{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wD(e.writeResults,e.commitTime),s=mn(e.commitTime);return this.listener.g_(s,n)}p_(){const e={};e.database=Jm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>MT(this.serializer,s))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Y(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Xm(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(G.UNKNOWN,i.toString())})}Lo(e,n,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Xm(n,s),r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(G.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class lO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ks(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{s.enqueueAndForget(async()=>{Ni(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ue(c);d.L_.add(4),await Kl(d),d.q_.set("Unknown"),d.L_.delete(4),await Qd(d)}(this))})}),this.q_=new lO(s,r)}}async function Qd(t){if(Ni(t))for(const e of t.B_)await e(!0)}async function Kl(t){for(const e of t.B_)await e(!1)}function WT(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),$g(n)?Bg(n):Ba(n).r_()&&zg(n,e))}function Ug(t,e){const n=ue(t),s=Ba(n);n.N_.delete(e),s.r_()&&GT(n,e),n.N_.size===0&&(s.r_()?s.o_():Ni(n)&&n.q_.set("Unknown"))}function zg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ba(t).A_(e)}function GT(t,e){t.Q_.xe(e),Ba(t).R_(e)}function Bg(t){t.Q_=new uD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ba(t).start(),t.q_.v_()}function $g(t){return Ni(t)&&!Ba(t).n_()&&t.N_.size>0}function Ni(t){return ue(t).L_.size===0}function HT(t){t.Q_=void 0}async function uO(t){t.q_.set("Online")}async function dO(t){t.N_.forEach((e,n)=>{zg(t,e)})}async function hO(t,e){HT(t),$g(t)?(t.q_.M_(e),Bg(t)):t.q_.set("Unknown")}async function fO(t,e,n){if(t.q_.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.N_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.N_.delete(l),r.Q_.removeTarget(l))}(t,e)}catch(s){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zu(t,s)}else if(e instanceof fu?t.Q_.Ke(e):e instanceof jT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const s=await BT(t.localStore);n.compareTo(s)>=0&&await function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),GT(i,c);const f=new ir(h.target,c,d,h.sequenceNumber);zg(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(s){Z("RemoteStore","Failed to raise snapshot:",s),await Zu(t,s)}}async function Zu(t,e,n){if(!Wl(e))throw e;t.L_.add(1),await Kl(t),t.q_.set("Offline"),n||(n=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qd(t)})}function qT(t,e){return e().catch(n=>Zu(t,n,e))}async function Yd(t){const e=ue(t),n=Nr(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;mO(e);)try{const r=await XD(e.localStore,s);if(r===null){e.O_.length===0&&n.o_();break}s=r.batchId,pO(e,r)}catch(r){await Zu(e,r)}KT(e)&&QT(e)}function mO(t){return Ni(t)&&t.O_.length<10}function pO(t,e){t.O_.push(e);const n=Nr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KT(t){return Ni(t)&&!Nr(t).n_()&&t.O_.length>0}function QT(t){Nr(t).start()}async function gO(t){Nr(t).p_()}async function vO(t){const e=Nr(t);for(const n of t.O_)e.m_(n.mutations)}async function yO(t,e,n){const s=t.O_.shift(),r=Rg.from(s,e,n);await qT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Yd(t)}async function wO(t,e){e&&Nr(t).V_&&await async function(s,r){if(function(a){return CT(a)&&a!==G.ABORTED}(r.code)){const i=s.O_.shift();Nr(s).s_(),await qT(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Yd(s)}}(t,e),KT(t)&&QT(t)}async function z_(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const s=Ni(n);n.L_.add(3),await Kl(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qd(n)}async function _O(t,e){const n=ue(t);e?(n.L_.delete(2),await Qd(n)):e||(n.L_.add(2),await Kl(n),n.q_.set("Unknown"))}function Ba(t){return t.K_||(t.K_=function(n,s,r){const i=ue(n);return i.w_(),new iO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:uO.bind(null,t),Ro:dO.bind(null,t),mo:hO.bind(null,t),d_:fO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),$g(t)?Bg(t):t.q_.set("Unknown")):(await t.K_.stop(),HT(t))})),t.K_}function Nr(t){return t.U_||(t.U_=function(n,s,r){const i=ue(n);return i.w_(),new aO(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gO.bind(null,t),mo:wO.bind(null,t),f_:vO.bind(null,t),g_:yO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yd(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,l=new Wg(e,n,a,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gg(t,e){if(ks("AsyncQueue",`${e}: ${t}`),Wl(t))return new Y(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.comparator=e?(n,s)=>e(n,s)||re.comparator(n.key,s.key):(n,s)=>re.comparator(n.key,s.key),this.keyedMap=jo(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new da(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new da;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.W_=new Qe(re.comparator)}track(e){const n=e.doc.key,s=this.W_.get(n);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(n,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(n):e.type===1&&s.type===2?this.W_=this.W_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,s)=>{e.push(s)}),e}}class ja{constructor(e,n,s,r,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ja(e,n,da.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class bO{constructor(){this.queries=$_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,s){const r=ue(n),i=r.queries;r.queries=$_(),i.forEach((a,l)=>{for(const c of l.j_)c.onError(s)})})(this,new Y(G.ABORTED,"Firestore shutting down"))}}function $_(){return new za(t=>mT(t),$d)}async function YT(t,e){const n=ue(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.H_()&&e.J_()&&(s=2):(i=new xO,s=e.J_()?0:1);try{switch(s){case 0:i.z_=await n.onListen(r,!0);break;case 1:i.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Gg(a,`Initialization of query '${zi(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Hg(n)}async function XT(t,e){const n=ue(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?r=e.J_()?0:1:!i.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function EO(t,e){const n=ue(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(r)&&(s=!0);a.z_=r}}s&&Hg(n)}function IO(t,e,n){const s=ue(t),r=s.queries.get(e);if(r)for(const i of r.j_)i.onError(n);s.queries.delete(e)}function Hg(t){t.Y_.forEach(e=>{e.next()})}var ep,W_;(W_=ep||(ep={})).ea="default",W_.Cache="cache";class JT{constructor(e,n,s){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ja(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const s=n!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.key=e}}class e0{constructor(e){this.key=e}}class TO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=pT(e),this.Ra=new da(this.Aa)}get Va(){return this.Ta}ma(e,n){const s=n?n.fa:new B_,r=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),p=Wd(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;m&&p?m.data.isEqual(p.data)?y!==b&&(s.track({type:3,doc:p}),T=!0):this.ga(m,p)||(s.track({type:2,doc:p}),T=!0,(c&&this.Aa(p,c)>0||d&&this.Aa(p,d)<0)&&(l=!0)):!m&&p?(s.track({type:0,doc:p}),T=!0):m&&!p&&(s.track({type:1,doc:m}),T=!0,(c||d)&&(l=!0)),T&&(p?(a=a.add(p),i=b?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Ra:a,fa:s,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((h,f)=>function(p,y){const b=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return b(p)-b(y)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(s),r=r!=null&&r;const l=n&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,d=c!==this.Ea;return this.Ea=c,a.length!==0||d?{snapshot:new ja(this.query,e.Ra,i,a,e.mutatedKeys,c===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new B_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const n=[];return e.forEach(s=>{this.da.has(s)||n.push(new e0(s))}),this.da.forEach(s=>{e.has(s)||n.push(new ZT(s))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class SO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class NO{constructor(e){this.key=e,this.va=!1}}class CO{constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new za(l=>mT(l),$d),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(re.comparator),this.Na=new Map,this.La=new Mg,this.Ba={},this.ka=new Map,this.qa=Aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AO(t,e,n=!0){const s=a0(t);let r;const i=s.Fa.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Da()):r=await t0(s,e,n,!0),r}async function jO(t,e){const n=a0(t);await t0(n,e,!0,!1)}async function t0(t,e,n,s){const r=await JD(t.localStore,ns(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await PO(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&WT(t.remoteStore,r),l}async function PO(t,e,n,s,r){t.Ka=(f,m,p)=>async function(b,T,x,w){let S=T.view.ma(x);S.ns&&(S=await V_(b.localStore,T.query,!1).then(({documents:_})=>T.view.ma(_,S)));const j=w&&w.targetChanges.get(T.targetId),P=w&&w.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(S,b.isPrimaryClient,j,P);return H_(b,T.targetId,O.wa),O.snapshot}(t,f,m,p);const i=await V_(t.localStore,e,!0),a=new TO(e,i.Ts),l=a.ma(i.documents),c=ql.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),d=a.applyChanges(l,t.isPrimaryClient,c);H_(t,n,d.wa);const h=new SO(e,n,a);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function kO(t,e,n){const s=ue(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);if(i.length>1)return s.Ma.set(r.targetId,i.filter(a=>!$d(a,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Zm(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&Ug(s.remoteStore,r.targetId),tp(s,r.targetId)}).catch($l)):(tp(s,r.targetId),await Zm(s.localStore,r.targetId,!0))}async function RO(t,e){const n=ue(t),s=n.Fa.get(e),r=n.Ma.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Ug(n.remoteStore,s.targetId))}async function DO(t,e,n){const s=zO(t);try{const r=await function(a,l){const c=ue(a),d=ct.now(),h=l.reduce((p,y)=>p.add(y.key),ye());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Rs(),b=ye();return c.cs.getEntries(p,h).next(T=>{y=T,y.forEach((x,w)=>{w.isValidDocument()||(b=b.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,y)).next(T=>{f=T;const x=[];for(const w of l){const S=sD(w,f.get(w.key).overlayedDocument);S!=null&&x.push(new Mr(w.key,S,aT(S.value.mapValue),Vt.exists(!0)))}return c.mutationQueue.addMutationBatch(p,d,x,l)}).next(T=>{m=T;const x=T.applyToLocalDocumentSet(f,b);return c.documentOverlayCache.saveOverlays(p,T.batchId,x)})}).then(()=>({batchId:m.batchId,changes:vT(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let d=a.Ba[a.currentUser.toKey()];d||(d=new Qe(Ne)),d=d.insert(l,c),a.Ba[a.currentUser.toKey()]=d}(s,r.batchId,n),await Ql(s,r.changes),await Yd(s.remoteStore)}catch(r){const i=Gg(r,"Failed to persist write");n.reject(i)}}async function n0(t,e){const n=ue(t);try{const s=await QD(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n.Na.get(i);a&&(be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?be(a.va):r.removedDocuments.size>0&&(be(a.va),a.va=!1))}),await Ql(n,s,e)}catch(s){await $l(s)}}function G_(t,e,n){const s=ue(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Fa.forEach((i,a)=>{const l=a.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=ue(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(l)&&(d=!0)}),d&&Hg(c)}(s.eventManager,e),r.length&&s.Ca.d_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function OO(t,e,n){const s=ue(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Na.get(e),i=r&&r.key;if(i){let a=new Qe(re.comparator);a=a.insert(i,vt.newNoDocument(i,le.min()));const l=ye().add(i),c=new qd(le.min(),new Map,new Qe(Ne),a,l);await n0(s,c),s.Oa=s.Oa.remove(i),s.Na.delete(e),qg(s)}else await Zm(s.localStore,e,!1).then(()=>tp(s,e,n)).catch($l)}async function MO(t,e){const n=ue(t),s=e.batch.batchId;try{const r=await KD(n.localStore,e);r0(n,s,null),s0(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ql(n,r)}catch(r){await $l(r)}}async function LO(t,e,n){const s=ue(t);try{const r=await function(a,l){const c=ue(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(be(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(s.localStore,e);r0(s,e,n),s0(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ql(s,r)}catch(r){await $l(r)}}function s0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function r0(t,e,n){const s=ue(t);let r=s.Ba[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Ba[s.currentUser.toKey()]=r}}function tp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(s=>{t.La.containsKey(s)||i0(t,s)})}function i0(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ug(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qg(t))}function H_(t,e,n){for(const s of n)s instanceof ZT?(t.La.addReference(s.key,e),VO(t,s)):s instanceof e0?(Z("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||i0(t,s.key)):oe()}function VO(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(s),qg(t))}function qg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(De.fromString(e)),s=t.qa.next();t.Na.set(s,new NO(n)),t.Oa=t.Oa.insert(n,s),WT(t.remoteStore,new ir(ns(Cg(n.path)),s,"TargetPurposeLimboResolution",Eg.oe))}}async function Ql(t,e,n){const s=ue(t),r=[],i=[],a=[];s.Fa.isEmpty()||(s.Fa.forEach((l,c)=>{a.push(s.Ka(c,e,n).then(d=>{var h;if((d||n)&&s.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){r.push(d);const f=Vg.Wi(c.targetId,d);i.push(f)}}))}),await Promise.all(a),s.Ca.d_(r),await async function(c,d){const h=ue(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(d,m=>H.forEach(m.$i,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>H.forEach(m.Ui,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!Wl(f))throw f;Z("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const p=h.os.get(m),y=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(m,b)}}}(s.localStore,i))}async function FO(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const s=await zT(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new Y(G.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ql(n,s.hs)}}function UO(t,e){const n=ue(t),s=n.Na.get(e);if(s&&s.va)return ye().add(s.key);{let r=ye();const i=n.Ma.get(e);if(!i)return r;for(const a of i){const l=n.Fa.get(a);r=r.unionWith(l.view.Va)}return r}}function a0(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OO.bind(null,e),e.Ca.d_=EO.bind(null,e.eventManager),e.Ca.$a=IO.bind(null,e.eventManager),e}function zO(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return qD(this.persistence,new GD,e.initialUser,this.serializer)}Ga(e){return new BD(Lg.Zr,this.serializer)}Wa(e){return new eO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ed.provider={build:()=>new ed};class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=FO.bind(null,this.syncEngine),await _O(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bO}()}createDatastore(e){const n=Kd(e.databaseInfo.databaseId),s=function(i){return new rO(i)}(e.databaseInfo);return function(i,a,l,c){return new oO(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,l){return new cO(s,r,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>G_(this.syncEngine,n,0),function(){return U_.D()?new U_:new tO}())}createSyncEngine(e,n){return function(r,i,a,l,c,d,h){const f=new CO(r,i,a,l,c,d);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=ue(r);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Kl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ks("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(G.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,i){const a=ue(r),l={documents:i.map(f=>Ju(a.serializer,f))},c=await a.Lo("BatchGetDocuments",a.serializer.databaseId,De.emptyPath(),l,i.length),d=new Map;c.forEach(f=>{const m=vD(a.serializer,f);d.set(m.key.toString(),m)});const h=[];return i.forEach(f=>{const m=d.get(f.toString());be(!!m),h.push(m)}),h}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new kg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const r=re.fromPath(s);this.mutations.push(new NT(r,this.precondition(r)))}),await async function(s,r){const i=ue(s),a={writes:r.map(l=>MT(i.serializer,l))};await i.Mo("Commit",i.serializer.databaseId,De.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=le.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new Y(G.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?Vt.exists(!1):Vt.updateTime(n):Vt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new Y(G.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vt.updateTime(n)}return Vt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,s,r,i){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=r,this.deferred=i,this._u=s.maxAttempts,this.t_=new Fg(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new BO(this.datastore),n=this.cu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(r=>{this.lu(r)}))}).catch(s=>{this.lu(s)})})}cu(e){try{const n=this.updateFunction(e);return!Gl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!CT(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Mt.UNAUTHENTICATED,this.clientId=bg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{Z("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(Z("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Gg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await zT(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function q_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GO(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>z_(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>z_(e.remoteStore,r)),t._onlineComponents=e}async function GO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new ed)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await _f(t,new ed);return t._offlineComponents}async function Kg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await q_(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await q_(t,new np))),t._onlineComponents}function HO(t){return Kg(t).then(e=>e.syncEngine)}function l0(t){return Kg(t).then(e=>e.datastore)}async function c0(t){const e=await Kg(t),n=e.eventManager;return n.onListen=AO.bind(null,e.syncEngine),n.onUnlisten=kO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RO.bind(null,e.syncEngine),n}function qO(t,e,n={}){const s=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new o0({next:m=>{h.Za(),a.enqueueAndForget(()=>XT(i,f));const p=m.docs.has(l);!p&&m.fromCache?d.reject(new Y(G.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?d.reject(new Y(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new JT(Cg(l.path),h,{includeMetadataChanges:!0,_a:!0});return YT(i,f)}(await c0(t),t.asyncQueue,e,n,s)),s.promise}function KO(t,e,n={}){const s=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new o0({next:m=>{h.Za(),a.enqueueAndForget(()=>XT(i,f)),m.fromCache&&c.source==="server"?d.reject(new Y(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new JT(l,h,{includeMetadataChanges:!0,_a:!0});return YT(i,f)}(await c0(t),t.asyncQueue,e,n,s)),s.promise}function QO(t,e,n){const s=new Bn;return t.asyncQueue.enqueueAndForget(async()=>{try{const r=await l0(t);s.resolve(async function(a,l,c){var d;const h=ue(a),{request:f,ut:m,parent:p}=xD(h.serializer,W1(l),c);h.connection.Fo||delete f.parent;const y=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,p,f,1)).filter(T=>!!T.result);be(y.length===1);const b=(d=y[0].result)===null||d===void 0?void 0:d.aggregateFields;return Object.keys(b).reduce((T,x)=>(T[m[x]]=b[x],T),{})}(r,e,n))}catch(r){s.reject(r)}}),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e,n){if(!n)throw new Y(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h0(t,e,n,s){if(e===!0&&s===!0)throw new Y(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Q_(t){if(!re.isDocumentKey(t))throw new Y(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Y_(t){if(re.isDocumentKey(t))throw new Y(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new Y(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YO(t,e){if(e<=0)throw new Y(G.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u0((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X_(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new sT;switch(s.type){case"firstParty":return new g1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Y(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=K_.get(n);s&&(Z("ComponentProvider","Removing Datastore"),K_.delete(n),s.terminate())}(this),Promise.resolve()}}function f0(t,e,n,s={}){var r;const i=(t=gn(t,Jd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),s.mockUserToken){let l,c;if(typeof s.mockUserToken=="string")l=s.mockUserToken,c=Mt.MOCK_USER;else{l=uI(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new Y(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Mt(d)}t._authCredentials=new f1(new nT(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Nt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Is extends os{constructor(e,n,s){super(e,n,Cg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new re(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function de(t,e,...n){if(t=Me(t),d0("collection","path",e),t instanceof Jd){const s=De.fromString(e,...n);return Y_(s),new Is(t,null,s)}{if(!(t instanceof Nt||t instanceof Is))throw new Y(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(De.fromString(e,...n));return Y_(s),new Is(t.firestore,null,s)}}function ae(t,e,...n){if(t=Me(t),arguments.length===1&&(e=bg.newId()),d0("doc","path",e),t instanceof Jd){const s=De.fromString(e,...n);return Q_(s),new Nt(t,null,new re(s))}{if(!(t instanceof Nt||t instanceof Is))throw new Y(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(De.fromString(e,...n));return Q_(s),new Nt(t.firestore,t instanceof Is?t.converter:null,new re(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fg(this,"async_queue_retry"),this.Vu=()=>{const s=wf();s&&Z("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const n=wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(s);throw ks("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.du=!1,s))));return this.mu=n,n}enqueueAfterDelay(e,n,s){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Wg.createAndSchedule(this,e,n,s,i=>this.yu(i));return this.Tu.push(r),r}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ls extends Jd{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new J_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J_(e),this._firestoreClient=void 0,await e}}}function m0(t,e){const n=typeof t=="object"?t:Vd(),s=typeof t=="string"?t:"(default)",r=Ld(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=oI("firestore");i&&f0(r,...i)}return r}function $a(t){if(t._terminated)throw new Y(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XO(t),t._firestoreClient}function XO(t){var e,n,s;const r=t._freezeSettings(),i=function(l,c,d,h){return new j1(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,u0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new WO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class g0{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(_t.fromBase64String(e))}catch(n){throw new Y(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cr(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^__.*__$/;class ZO{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(e,this.data,n,this.fieldTransforms)}}class v0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class th{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new th(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.Ou(e),r}Nu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:s,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return td(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(y0(this.Cu)&&JO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eM{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Kd(e)}Qu(e,n,s,r=!1){return new th({Cu:e,methodName:n,qu:s,path:yt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ga(t){const e=t._freezeSettings(),n=Kd(t._databaseId);return new eM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qg(t,e,n,s,r,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,r);Zg("Data must be an object, but it was:",a,s);const l=b0(s,a);let c,d;if(i.merge)c=new hn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=sp(e,f,n);if(!a.contains(m))throw new Y(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);I0(h,m)||h.push(m)}c=new hn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new ZO(new Ht(l),c,d)}class nh extends Ci{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function tM(t,e,n){return new th({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yg extends Ci{_toFieldTransform(e){return new Pg(e.path,new Tl)}isEqual(e){return e instanceof Yg}}class Xg extends Ci{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=tM(this,e,!0),s=this.Ku.map(i=>Ha(i,n)),r=new Ca(s);return new Pg(e.path,r)}isEqual(e){return e instanceof Xg&&gl(this.Ku,e.Ku)}}class Jg extends Ci{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Nl(e.serializer,_T(e.serializer,this.$u));return new Pg(e.path,n)}isEqual(e){return e instanceof Jg&&this.$u===e.$u}}function w0(t,e,n,s){const r=t.Qu(1,e,n);Zg("Data must be an object, but it was:",r,s);const i=[],a=Ht.empty();Ti(s,(c,d)=>{const h=ev(e,c,n);d=Me(d);const f=r.Nu(h);if(d instanceof nh)i.push(h);else{const m=Ha(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new hn(i);return new v0(a,l,r.fieldTransforms)}function _0(t,e,n,s,r,i){const a=t.Qu(1,e,n),l=[sp(e,s,n)],c=[r];if(i.length%2!=0)throw new Y(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(sp(e,i[m])),c.push(i[m+1]);const d=[],h=Ht.empty();for(let m=l.length-1;m>=0;--m)if(!I0(d,l[m])){const p=l[m];let y=c[m];y=Me(y);const b=a.Nu(p);if(y instanceof nh)d.push(p);else{const T=Ha(y,b);T!=null&&(d.push(p),h.set(p,T))}}const f=new hn(d);return new v0(h,f,a.fieldTransforms)}function x0(t,e,n,s=!1){return Ha(n,t.Qu(s?4:3,e))}function Ha(t,e){if(E0(t=Me(t)))return Zg("Unsupported field value:",e,t),b0(t,e);if(t instanceof Ci)return function(s,r){if(!y0(r.Cu))throw r.Bu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const l of s){let c=Ha(l,r.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Me(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _T(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=ct.fromDate(s);return{timestampValue:Xu(r.serializer,i)}}if(s instanceof ct){const i=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xu(r.serializer,i)}}if(s instanceof Zd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Cr)return{bytesValue:kT(r.serializer,s._byteString)};if(s instanceof Nt){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Og(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof eh)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return jg(l.serializer,c)})}}}}}}(s,r);throw r.Bu(`Unsupported field value: ${Xd(s)}`)}(t,e)}function b0(t,e){const n={};return rT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(t,(s,r)=>{const i=Ha(r,e.Mu(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function E0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof Zd||t instanceof Cr||t instanceof Nt||t instanceof Ci||t instanceof eh)}function Zg(t,e,n){if(!E0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Xd(n);throw s==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}}function sp(t,e,n){if((e=Me(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return ev(t,e);throw td("Field path arguments must be of type string or ",t,!1,void 0,n)}const nM=new RegExp("[~\\*/\\[\\]]");function ev(t,e,n){if(e.search(nM)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wa(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function td(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new Y(G.INVALID_ARGUMENT,l+t+c)}function I0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sM extends Cl{data(){return super.data()}}function sh(t,e){return typeof e=="string"?ev(t,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class Yl extends tv{}function Pe(t,e,...n){let s=[];e instanceof tv&&s.push(e),s=s.concat(n),function(i){const a=i.filter(c=>c instanceof rh).length,l=i.filter(c=>c instanceof Xl).length;if(a>1||a>0&&l>0)throw new Y(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Xl extends Yl{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Xl(e,n,s)}_apply(e){const n=this._parse(e);return S0(e._query,n),new os(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=Ga(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ex(f,h);const p=[];for(const y of f)p.push(Z_(c,i,y));m={arrayValue:{values:p}}}else m=Z_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ex(f,h),m=x0(l,a,f,h==="in"||h==="not-in");return lt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $e(t,e,n){const s=e,r=sh("where",t);return Xl._create(r,s,n)}class rh extends tv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Wn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const c of l)S0(a,c),a=Qm(a,c)}(e._query,n),new os(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ih extends Yl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ih(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new Y(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Y(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Il(i,a)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Si(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Gn(t,e="asc"){const n=e,s=sh("orderBy",t);return ih._create(s,n)}class ah extends Yl{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new ah(e,n,s)}_apply(e){return new os(e.firestore,e.converter,Yu(e._query,this._limit,this._limitType))}}function rs(t){return YO("limit",t),ah._create("limit",t,"F")}class oh extends Yl{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new oh(e,n,s)}_apply(e){const n=iM(e,this.type,this._docOrFields,this._inclusive);return new os(e.firestore,e.converter,function(r,i){return new Si(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function T0(...t){return oh._create("startAfter",t,!1)}function iM(t,e,n,s){if(n[0]=Me(n[0]),n[0]instanceof Cl)return function(i,a,l,c,d){if(!c)throw new Y(G.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const f of ua(i))if(f.field.isKeyField())h.push(Qu(a,c.key));else{const m=c.data.field(f.field);if(Bd(m))throw new Y(G.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const p=f.field.canonicalString();throw new Y(G.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(m)}return new Na(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,s);{const r=Ga(t.firestore);return function(a,l,c,d,h,f){const m=a.explicitOrderBy;if(h.length>m.length)throw new Y(G.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let y=0;y<h.length;y++){const b=h[y];if(m[y].field.isKeyField()){if(typeof b!="string")throw new Y(G.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!Ag(a)&&b.indexOf("/")!==-1)throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const T=a.path.child(De.fromString(b));if(!re.isDocumentKey(T))throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new re(T);p.push(Qu(l,x))}else{const T=x0(c,d,b);p.push(T)}}return new Na(p,f)}(t._query,t.firestore._databaseId,r,e,n,s)}}function Z_(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new Y(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ag(e)&&n.indexOf("/")!==-1)throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(De.fromString(n));if(!re.isDocumentKey(s))throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qu(t,new re(s))}if(n instanceof Nt)return Qu(t,n._key);throw new Y(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function ex(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S0(t,e){const n=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nv{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ti(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>st(a.doubleValue));return new eh(i)}convertGeoPoint(e){return new Zd(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ig(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const n=Sr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=De.fromString(e);be(UT(s));const r=new Ia(s.get(1),s.get(3)),i=new re(s.popFirst(5));return r.isEqual(n)||ks(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class aM extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function N0(){return new p0("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends Cl{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(sh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class qo extends lh{data(e={}){return super.data(e)}}class C0{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Zr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new qo(this._firestore,this._userDataWriter,s.key,s,new Zr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new qo(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:oM(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){t=gn(t,Nt);const e=gn(t.firestore,Ls);return qO($a(e),t._key).then(n=>lM(e,t,n))}class ch extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function ke(t){t=gn(t,os);const e=gn(t.firestore,Ls),n=$a(e),s=new ch(e);return rM(t._query),KO(n,t._query).then(r=>new C0(e,s,t,r))}function A0(t,e,n){t=gn(t,Nt);const s=gn(t.firestore,Ls),r=sv(t.converter,e,n);return uh(s,[Qg(Ga(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Vt.none())])}function Vs(t,e,n,...s){t=gn(t,Nt);const r=gn(t.firestore,Ls),i=Ga(r);let a;return a=typeof(e=Me(e))=="string"||e instanceof Wa?_0(i,"updateDoc",t._key,e,n,s):w0(i,"updateDoc",t._key,e),uh(r,[a.toMutation(t._key,Vt.exists(!0))])}function nd(t,e){const n=gn(t.firestore,Ls),s=ae(t),r=sv(t.converter,e);return uh(n,[Qg(Ga(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Vt.exists(!1))]).then(()=>s)}function uh(t,e){return function(s,r){const i=new Bn;return s.asyncQueue.enqueueAndForget(async()=>DO(await HO(s),r,i)),i.promise}($a(t),e)}function lM(t,e,n){const s=n.docs.get(e._key),r=new ch(t);return new lh(t,r,e._key,s,new Zr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t){return j0(t,{count:N0()})}function j0(t,e){const n=gn(t.firestore,Ls),s=$a(n),r=C1(e,(i,a)=>new aD(a,i.aggregateType,i._internalFieldPath));return QO(s,t._query,r).then(i=>function(l,c,d){const h=new ch(l);return new g0(c,h,d)}(n,t,i))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM={maxAttempts:5};function _o(t,e){if((t=Me(t)).firestore!==e)throw new Y(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends class{constructor(n,s){this._firestore=n,this._transaction=s,this._dataReader=Ga(n)}get(n){const s=_o(n,this._firestore),r=new aM(this._firestore);return this._transaction.lookup([s._key]).then(i=>{if(!i||i.length!==1)return oe();const a=i[0];if(a.isFoundDocument())return new Cl(this._firestore,r,a.key,a,s.converter);if(a.isNoDocument())return new Cl(this._firestore,r,s._key,null,s.converter);throw oe()})}set(n,s,r){const i=_o(n,this._firestore),a=sv(i.converter,s,r),l=Qg(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(n,s,r,...i){const a=_o(n,this._firestore);let l;return l=typeof(s=Me(s))=="string"||s instanceof Wa?_0(this._dataReader,"Transaction.update",a._key,s,r,i):w0(this._dataReader,"Transaction.update",a._key,s),this._transaction.update(a._key,l),this}delete(n){const s=_o(n,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=_o(e,this._firestore),s=new ch(this._firestore);return super.get(e).then(r=>new lh(this._firestore,s,n._key,r._document,new Zr(!1,!1),n.converter))}}function Ai(t,e,n){t=gn(t,Ls);const s=Object.assign(Object.assign({},cM),n);return function(i){if(i.maxAttempts<1)throw new Y(G.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,a,l){const c=new Bn;return i.asyncQueue.enqueueAndForget(async()=>{const d=await l0(i);new $O(i.asyncQueue,d,l,a,c).au()}),c.promise}($a(t),r=>e(new P0(t,r)),s)}function se(){return new Yg("serverTimestamp")}function dh(...t){return new Xg("arrayUnion",t)}function ha(t){return new Jg("increment",t)}(function(e,n=!0){(function(r){Ua=r})(Ii),di(new Ir("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new Ls(new m1(s.getProvider("auth-internal")),new y1(s.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(d.options.projectId,h)}(a,r),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),es(v_,"4.7.3",e),es(v_,"4.7.3","esm2017")})();const uM=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:nv,AggregateField:p0,AggregateQuerySnapshot:g0,Bytes:Cr,CollectionReference:Is,DocumentReference:Nt,DocumentSnapshot:lh,FieldPath:Wa,FieldValue:Ci,Firestore:Ls,FirestoreError:Y,GeoPoint:Zd,Query:os,QueryCompositeFilterConstraint:rh,QueryConstraint:Yl,QueryDocumentSnapshot:qo,QueryFieldFilterConstraint:Xl,QueryLimitConstraint:ah,QueryOrderByConstraint:ih,QuerySnapshot:C0,QueryStartAtConstraint:oh,SnapshotMetadata:Zr,Timestamp:ct,Transaction:P0,VectorValue:eh,_AutoId:bg,_ByteString:_t,_DatabaseId:Ia,_DocumentKey:re,_EmptyAuthCredentialsProvider:sT,_FieldPath:yt,_cast:gn,_logWarn:pi,_validateIsNotUsedTogether:h0,addDoc:nd,arrayUnion:dh,collection:de,connectFirestoreEmulator:f0,count:N0,doc:ae,ensureFirestoreConfigured:$a,executeWrite:uh,getAggregateFromServer:j0,getCountFromServer:ko,getDoc:Kt,getDocs:ke,getFirestore:m0,increment:ha,limit:rs,orderBy:Gn,query:Pe,runTransaction:Ai,serverTimestamp:se,setDoc:A0,startAfter:T0,updateDoc:Vs,where:$e},Symbol.toStringTag,{value:"Module"}));var dM="firebase",hM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(dM,hM,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebasestorage.googleapis.com",R0="storageBucket",fM=2*60*1e3,mM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe extends as{constructor(e,n,s=0){super(xf(e),`Firebase Storage: ${n} (${xf(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ye;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ye||(Ye={}));function xf(t){return"storage/"+t}function rv(){const t="An unknown error occurred, please check the error payload for server response.";return new Xe(Ye.UNKNOWN,t)}function pM(t){return new Xe(Ye.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gM(t){return new Xe(Ye.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xe(Ye.UNAUTHENTICATED,t)}function yM(){return new Xe(Ye.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wM(t){return new Xe(Ye.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function _M(){return new Xe(Ye.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xM(){return new Xe(Ye.CANCELED,"User canceled the upload/download.")}function bM(t){return new Xe(Ye.INVALID_URL,"Invalid URL '"+t+"'.")}function EM(t){return new Xe(Ye.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function IM(){return new Xe(Ye.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R0+"' property when initializing the app?")}function TM(){return new Xe(Ye.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SM(){return new Xe(Ye.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NM(t){return new Xe(Ye.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sd(t){return new Xe(Ye.INVALID_ARGUMENT,t)}function D0(){return new Xe(Ye.APP_DELETED,"The Firebase app was deleted.")}function O0(t){return new Xe(Ye.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ko(t,e){return new Xe(Ye.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xo(t){throw new Xe(Ye.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=nn.makeFromUrl(e,n)}catch{return new nn(e,"")}if(s.path==="")return s;throw EM(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${r}/o${m}`,"i"),y={bucket:1,path:3},b=n===k0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${b}/${r}/${T}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:p,indices:y,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<S.length;j++){const P=S[j],O=P.regex.exec(e);if(O){const _=O[P.indices.bucket];let v=O[P.indices.path];v||(v=""),s=new nn(_,v),P.postModify(s);break}}if(s==null)throw bM(e);return s}}class CM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e,n){let s=1,r=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...T){d||(d=!0,e.apply(null,T))}function f(T){r=setTimeout(()=>{r=null,t(p,c())},T)}function m(){i&&clearTimeout(i)}function p(T,...x){if(d){m();return}if(T){m(),h.call(null,T,...x);return}if(c()||a){m(),h.call(null,T,...x);return}s<64&&(s*=2);let S;l===1?(l=2,S=0):S=(s+Math.random())*1e3,f(S)}let y=!1;function b(T){y||(y=!0,m(),!d&&(r!==null?(T||(l=2),clearTimeout(r),f(0)):T||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,b(!0)},n),b}function jM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t){return t!==void 0}function kM(t){return typeof t=="object"&&!Array.isArray(t)}function iv(t){return typeof t=="string"||t instanceof String}function tx(t){return av()&&t instanceof Blob}function av(){return typeof Blob<"u"}function nx(t,e,n,s){if(s<e)throw sd(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw sd(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function M0(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var si;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(si||(si={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,s,r,i,a,l,c,d,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new Bc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===si.NO_ERROR,c=i.getStatus();if(!l||RM(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===si.ABORT;s(!1,new Bc(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;s(!0,new Bc(d,i))})},n=(s,r)=>{const i=this.resolve_,a=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());PM(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=rv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(r.canceled){const c=this.appDelete_?D0():xM();a(c)}else{const c=_M();a(c)}};this.canceled_?n(!1,new Bc(!1,null,!0)):this.backoffId_=AM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bc{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function OM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function FM(t,e,n,s,r,i,a=!0){const l=M0(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return LM(d,e),OM(d,n),MM(d,i),VM(d,s),new DM(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zM(...t){const e=UM();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(av())return new Blob(t);throw new Xe(Ye.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){if(typeof atob>"u")throw NM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bf{constructor(e,n){this.data=e,this.contentType=n||null}}function L0(t,e){switch(t){case Ln.RAW:return new bf(V0(e));case Ln.BASE64:case Ln.BASE64URL:return new bf(F0(t,e));case Ln.DATA_URL:return new bf(GM(e),HM(e))}throw rv()}function V0(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=t.charCodeAt(++n);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function WM(t){let e;try{e=decodeURIComponent(t)}catch{throw Ko(Ln.DATA_URL,"Malformed data URL.")}return V0(e)}function F0(t,e){switch(t){case Ln.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Ko(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Ko(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$M(e)}catch(r){throw r.message.includes("polyfill")?r:Ko(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class U0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ko(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=qM(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function GM(t){const e=new U0(t);return e.base64?F0(Ln.BASE64,e.rest):WM(e.rest)}function HM(t){return new U0(t).contentType}function qM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){let s=0,r="";tx(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(tx(this.data_)){const s=this.data_,r=BM(s,e,n);return r===null?null:new ms(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ms(s,!0)}}static getBlob(...e){if(av()){const n=e.map(s=>s instanceof ms?s.data_:s);return new ms(zM.apply(null,n))}else{const n=e.map(a=>iv(a)?L0(Ln.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)r[i++]=a[l]}),new ms(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t){let e;try{e=JSON.parse(t)}catch{return null}return kM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QM(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function B0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e){return e}class Wt{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||YM}}let $c=null;function XM(t){return!iv(t)||t.length<2?t:B0(t)}function $0(){if($c)return $c;const t=[];t.push(new Wt("bucket")),t.push(new Wt("generation")),t.push(new Wt("metageneration")),t.push(new Wt("name","fullPath",!0));function e(i,a){return XM(a)}const n=new Wt("name");n.xform=e,t.push(n);function s(i,a){return a!==void 0?Number(a):a}const r=new Wt("size");return r.xform=s,t.push(r),t.push(new Wt("timeCreated")),t.push(new Wt("updated")),t.push(new Wt("md5Hash",null,!0)),t.push(new Wt("cacheControl",null,!0)),t.push(new Wt("contentDisposition",null,!0)),t.push(new Wt("contentEncoding",null,!0)),t.push(new Wt("contentLanguage",null,!0)),t.push(new Wt("contentType",null,!0)),t.push(new Wt("metadata","customMetadata",!0)),$c=t,$c}function JM(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new nn(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ZM(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const a=n[i];s[a.local]=a.xform(s,e[a.server])}return JM(s,t),s}function W0(t,e,n){const s=z0(e);return s===null?null:ZM(t,s,n)}function eL(t,e,n,s){const r=z0(e);if(r===null||!iv(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),p=hh(m,n,s),y=M0({alt:"media",token:d});return p+y})[0]}function tL(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ov{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){if(!t)throw rv()}function nL(t,e){function n(s,r){const i=W0(t,r,e);return G0(i!==null),i}return n}function sL(t,e){function n(s,r){const i=W0(t,r,e);return G0(i!==null),eL(i,r,t.host,t._protocol)}return n}function H0(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=yM():r=vM():n.getStatus()===402?r=gM(t.bucket):n.getStatus()===403?r=wM(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function q0(t){const e=H0(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=pM(t.path)),i.serverResponse=r.serverResponse,i}return n}function rL(t,e,n){const s=e.fullServerUrl(),r=hh(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new ov(r,i,sL(t,n),a);return l.errorHandler=q0(e),l}function iL(t,e){const n=e.fullServerUrl(),s=hh(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function a(c,d){}const l=new ov(s,r,a,i);return l.successCodes=[200,204],l.errorHandler=q0(e),l}function aL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oL(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=aL(null,e)),s}function lL(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let j=0;j<2;j++)S=S+Math.random().toString().slice(2);return S}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=oL(e,s,r),h=tL(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=ms.getBlob(f,s,m);if(p===null)throw TM();const y={name:d.fullPath},b=hh(i,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,w=new ov(b,T,nL(t,n),x);return w.urlParams=y,w.headers=a,w.body=p.uploadData(),w.errorHandler=H0(e),w}class cL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r){if(this.sent_)throw xo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uL extends cL{initXhr(){this.xhr_.responseType="text"}}function lv(){return new uL}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this._service=e,n instanceof nn?this._location=n:this._location=nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yi(e,n)}get root(){const e=new nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return B0(this._location.path)}get storage(){return this._service}get parent(){const e=KM(this._location.path);if(e===null)return null;const n=new nn(this._location.bucket,e);return new yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw O0(e)}}function dL(t,e,n){t._throwIfRoot("uploadBytes");const s=lL(t.storage,t._location,$0(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(s,lv).then(r=>({metadata:r,ref:t}))}function hL(t){t._throwIfRoot("getDownloadURL");const e=rL(t.storage,t._location,$0());return t.storage.makeRequestWithTokens(e,lv).then(n=>{if(n===null)throw SM();return n})}function fL(t){t._throwIfRoot("deleteObject");const e=iL(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lv)}function mL(t,e){const n=QM(t._location.path,e),s=new nn(t._location.bucket,n);return new yi(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return/^[A-Za-z]+:\/\//.test(t)}function gL(t,e){return new yi(t,e)}function K0(t,e){if(t instanceof cv){const n=t;if(n._bucket==null)throw IM();const s=new yi(n,n._bucket);return e!=null?K0(s,e):s}else return e!==void 0?mL(t,e):t}function vL(t,e){if(e&&pL(e)){if(t instanceof cv)return gL(t,e);throw sd("To use ref(service, url), the first argument must be a Storage instance.")}else return K0(t,e)}function sx(t,e){const n=e==null?void 0:e[R0];return n==null?null:nn.makeFromBucketSpec(n,t)}function yL(t,e,n,s={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=s;r&&(t._overrideAuthToken=typeof r=="string"?r:uI(r,t.app.options.projectId))}class cv{constructor(e,n,s,r,i){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=k0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fM,this._maxUploadRetryTime=mM,this._requests=new Set,r!=null?this._bucket=nn.makeFromBucketSpec(r,this._host):this._bucket=sx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nn.makeFromBucketSpec(this._url,e):this._bucket=sx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yi(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new CM(D0());{const a=FM(e,this._appId,s,r,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const rx="@firebase/storage",ix="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="storage";function Al(t,e,n){return t=Me(t),dL(t,e,n)}function jl(t){return t=Me(t),hL(t)}function rd(t){return t=Me(t),fL(t)}function ar(t,e){return t=Me(t),vL(t,e)}function Y0(t=Vd(),e){t=Me(t);const s=Ld(t,Q0).getImmediate({identifier:e}),r=oI("storage");return r&&X0(s,...r),s}function X0(t,e,n,s={}){yL(t,e,n,s)}function wL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new cv(n,s,r,e,Ii)}function _L(){di(new Ir(Q0,wL,"PUBLIC").setMultipleInstances(!0)),es(rx,ix,""),es(rx,ix,"esm2017")}_L();const xL=Object.freeze(Object.defineProperty({__proto__:null,StorageError:Xe,get StorageErrorCode(){return Ye},StringFormat:Ln,_FbsBlob:ms,_Location:nn,_dataFromString:L0,_invalidArgument:sd,_invalidRootOperation:O0,connectStorageEmulator:X0,deleteObject:rd,getDownloadURL:jl,getStorage:Y0,ref:ar,uploadBytes:Al},Symbol.toStringTag,{value:"Module"})),mu={apiKey:"AIzaSyCWZYQhVFQIE_36SciDNuaDsSV3cA_VAhg",authDomain:"finenproc-ag.firebaseapp.com",projectId:"finenproc-ag",storageBucket:"finenproc-ag.firebasestorage.app",messagingSenderId:"342590603143",appId:"1:342590603143:web:41684e65fb75b5845b9d22"},uv=Wk().length?Vd():fI(mu),Xn=d1(uv),Q=m0(uv),_s=Y0(uv);try{const t=Object.entries(mu).filter(([e,n])=>!n).map(([e])=>e);t.length&&console.warn("Firebase env variables missing:",t),console.log("Firebase initialized",{projectId:mu.projectId,authDomain:mu.authDomain,hasAuth:!!Xn,hasDb:!!Q,hasStorage:!!_s})}catch(t){console.warn("Firebase init debug failed:",t)}function bL(){const[t,e]=R.useState(!0),[n,s]=R.useState(!1),[r,i]=R.useState(null);return R.useEffect(()=>{const a=ZR(Xn,async l=>{var c,d;if(e(!0),!l){i(null),s(!1),e(!1);return}try{const h=l.uid,f=ae(Q,"users",h),m=await Kt(f),p=(c=m==null?void 0:m.data())==null?void 0:c.role,y=(d=m==null?void 0:m.data())==null?void 0:d.status;console.log("ADMIN AUTH CHECK",{uid:h,userExists:m.exists(),role:p,status:y});const b=!!(m.exists()&&p==="admin"&&y==="active");s(b),i({uid:h,email:l.email,role:p,status:y})}catch(h){console.error("useAdminAuth error",h),s(!1),i(null)}finally{e(!1)}});return()=>a()},[]),{loading:t,isAdmin:n,user:r}}const EL={title:"Recharge Methods",addNew:"Add recharge method",loading:"Loading recharge methods...",noMethods:"No recharge methods registered.",editMethod:"Edit recharge method",noName:"No name",noType:"No type",noStatus:"No status",name:"Name",type:"Type",typeCrypto:"Crypto",typeBank:"Bank",image:"Image",status:"Status",statusActive:"Active",statusInactive:"Inactive",details:"Details",created:"Created",updated:"Updated",requiredFields:"Please fill in the required fields (name and type).",create:"Create",saving:"Saving...",createError:"Error creating recharge method.",saveChanges:"Save changes",saveError:"Error saving recharge method.",loadError:"Error loading recharge methods.",imageUploadError:"Error uploading recharge method image."},IL={loading:"Loading recharge methods...",error:"Error",success:"Success",cancel:"Cancel",confirm:"Confirm",save:"Save",delete:"Delete",edit:"Edit",close:"Close",back:"Back",actions:"Actions",view:"View",approve:"Approve",reject:"Reject",search:"Search",filter:"Filter",noData:"No data",yes:"Yes",no:"No",all:"All",today:"Today",updated:"Updated",processing:"Processing...",total:"Total",show:"Show",perPage:"per page",page:"Page",previous:"Previous",next:"Next",of:"of",created:"Created",noDate:"No date",emailNotAvailable:"Email not available",enterReason:"Please enter a reason",enterReasonPlaceholder:"Enter a reason...",rejectReason:"Reason for rejection...",enabled:"Enabled",disabled:"Disabled"},TL={rowsPerPage:"Rows per page:",of:"of",all:"All"},SL={dashboard:"Dashboard",users:"Users",operations:"Operations",topups:"Top Ups",withdrawals:"Withdrawals",investments:"Investments",others:"Others",projects:"Projects",settings:"Settings",logout:"Log out",adminPanel:"Admin Panel"},NL={language:"Language",theme:"Theme",notifications:"Notifications"},CL={login:"Log In",email:"Email",password:"Password",confirmPassword:"Confirm Password",adminAccess:"Administrative Access",signingIn:"Signing in...",loginError:"Login error",notAuthorized:"Not Authorized",notAuthorizedMessage:"You do not have permission to access the admin panel.",contactAdmin:"Contact the system administrator.",adminPanel:"Admin Panel",orContinueWith:"or continue with",continueWithGoogle:"Continue with Google",noAccount:"Don't have an account?",hasAccount:"Already have an account?",registerHere:"Register here",loginHere:"Log in here",profileNotFound:"User profile not found in Firestore",accountNotActive:"Your account is not active",createAdminAccount:"Create Admin Account",registerNewAdmin:"Register a new administrator",createAccount:"Create Account",registering:"Registering...",passwordMismatch:"Passwords do not match",passwordMinLength:"Password must be at least 6 characters",passwordHint:"Minimum 6 characters",adminRegisteredSuccess:"Admin user registered successfully! You will be redirected...",emailExistsWrongPassword:"The email already exists, but the password is incorrect.",userNotFound:"No user exists with that email."},AL={title:"Admin Dashboard",subtitle:"Platform overview",users:"Users",totalUsers:"Total Users",activeUsers:"Active Users",topups:"Top Ups",pending:"Pending",approved:"Approved",total:"Total",withdrawals:"Withdrawals",pendingWithdrawals:"Pending Withdrawals",investments:"Investments",activeInvestments:"Active Investments",investedCapital:"Invested Capital",recentTransactions:"Recent Transactions",type:"Type",amount:"Amount",user:"User",date:"Date",noRecentTransactions:"No recent transactions",operationalAlerts:"Operational Alerts",pendingTopupsAlert:"pending top up(s) awaiting approval",pendingWithdrawalsAlert:"pending withdrawal(s) awaiting approval",activeInvestmentsAlert:"active investment(s) in the system",systemOperational:"System operational. No pending operations.",userNotAvailable:"User not available",pendingTopups:"Pending top ups",approvedTopups:"Approved top ups",rejectedTopups:"Rejected top ups",fetchingMetrics:"Fetching metrics",welcomeAdmin:"Welcome, Admin!",lastUpdate:"Last update",recentActivity:"Recent activity",noRecentActivity:"No recent activity",noTransactions:"No recent transactions"},jL={title:"Top Up Management",subtitle:"Manage all user top up requests",allStatuses:"All",pending:"Pending",pendingPlural:"Pending",approved:"Approved",approvedPlural:"Approved",rejected:"Rejected",rejectedPlural:"Rejected",user:"User",amount:"Amount",method:"Method",status:"Status",date:"Date",action:"Action",noTopups:"No top ups in this status",totalTopups:"Total top ups",loadingTopups:"Loading top ups...",approveTitle:"Approve Top Up",rejectTitle:"Reject Top Up",approveMessage:"Approve top up of",rejectMessage:"Reject top up of",ofUser:"from user",viewProof:"View proof",rechargeMethods:"Recharge Methods",closeProof:"Close proof"},PL={title:"Withdrawal Management",subtitle:"Manage all user withdrawal requests",allStatuses:"All",pending:"Pending",pendingPlural:"Pending",approved:"Approved",approvedPlural:"Approved",rejected:"Rejected",rejectedPlural:"Rejected",completed:"Completed",user:"User",amount:"Amount",method:"Method",status:"Status",date:"Date",action:"Action",noWithdrawals:"No withdrawals in this status",totalWithdrawals:"Total withdrawals",loadingWithdrawals:"Loading withdrawals...",approveTitle:"Approve Withdrawal",rejectTitle:"Reject Withdrawal",approveMessage:"Approve withdrawal of",rejectMessage:"Reject withdrawal of"},kL={title:"Investment Management",subtitle:"Full context: user, project and real vs expected ROI",allStatuses:"All",active:"Active",activePlural:"Active",pending:"Pending",completed:"Completed",completedPlural:"Completed",cancelled:"Cancelled",cancelledPlural:"Cancelled",user:"User",project:"Project",amount:"Amount",status:"Status",date:"Date",actions:"Actions",noInvestments:"No investments with these filters",loadingInvestments:"Loading investments...",viewDetails:"View details",totalInvested:"Total Invested",activeInvestments:"Active Investments",totalInvestments:"Total Investments",allProjects:"All projects",searchUserPlaceholder:"Search user (email/name)",expectedROI:"Expected ROI",actualROI:"Actual ROI",userNoData:"User without data",projectNoName:"Project without name",withExpectedReturn:"With expected return",noExpectedReturn:"Return not defined",viewUser:"View user",viewProject:"View project",approveTitle:"Approve Investment",rejectTitle:"Reject Investment",approveMessage:"Approve investment of",rejectMessage:"Reject investment of",willDeductBalance:"Will be deducted from balance.",investmentDetail:"Investment Detail",back:"Back",loading:"Loading...",loadingDetails:"Loading details...",couldNotLoad:"Could not load investment",investor:"Investor",amountInvested:"Amount Invested",projectPercent:"% of Project",overview:"Overview",financial:"Financial",audit:"Audit",generalInfo:"General Information",projectType:"Project Type",projectRisk:"Project Risk",investmentDate:"Investment Date",projectStatus:"Project Status",riskLow:"Low Risk",riskMedium:"Medium Risk",riskHigh:"High Risk",expectedROILabel:"Expected ROI",actualROILabel:"Actual ROI",expectedGain:"Expected Gain",realizedGain:"Realized Gain",pendingValue:"Pending",financialDetails:"Financial Details",expectedReturn:"Expected Return",realizedReturn:"Realized Return",updateReturn:"Update Return",projectRelation:"Project Relation",totalCapitalPercent:"% of Total Capital",projectTotalCapital:"Project Total Capital",projectGoal:"Project Goal",noProjectEvents:"No project events",noRelatedUpdates:"No related project updates",adminOnly:"Admin only",investorsOnly:"Investors",allVisibility:"All",noChangeHistory:"No change history",noChangesRecorded:"No changes recorded for this investment",statusChange:"Status Change",systemEvent:"System Event",returnUpdate:"Return Update",from:"From",to:"to",reason:"Reason",returnUpdatedTo:"Return updated to",notes:"Notes",changeStatus:"Change Status",recordEvent:"Record Event",changeInvestmentStatus:"Change Investment Status",newStatus:"New Status",reasonOptional:"Reason (optional)",explainChange:"Explain the status change...",cancel:"Cancel",confirm:"Confirm",updating:"Updating...",updateInvestmentReturn:"Update Investment Return",realizedReturnUSD:"Realized Return (USD)",amountReceived:"Amount received",investedAmount:"Invested amount",gainLoss:"Gain / Loss",roi:"ROI",notesOptional:"Notes (optional)",returnDetails:"Details about the return...",saveReturn:"Save Return",registerSystemEvent:"Register System Event",eventTitle:"Event Title",eventTitlePlaceholder:"E.g.: Partial payment received",descriptionOptional:"Description (optional)",additionalDetails:"Additional details...",registering:"Registering...",registerEvent:"Register Event",investmentUpdatedTo:"Investment updated to",eventRecorded:"Event recorded",returnUpdated:"Return updated",paused:"Paused"},RL={title:"Project Catalog",subtitle:"Management and control of financial products",createProject:"Create project",allStatuses:"All statuses",active:"Active",pending:"Pending",completed:"Completed",funded:"Funded",closed:"Closed",paused:"Paused",draft:"Draft",name:"Name",target:"Target",raised:"Raised",progress:"Progress",status:"Status",actions:"Actions",noProjects:"No projects with these filters",loadingProjects:"Loading projects...",viewDetails:"View details",editProject:"Edit project",totalProjects:"Total Projects",activeProjects:"Active",fundedProjects:"Funded",totalCapital:"Total Capital",type:"Type",category:"Category",allCategories:"All",risk:"Risk",allRisks:"All",fixed:"Fixed",variable:"Variable",low:"Low",medium:"Medium",high:"High",projectsFound:"projects found",showLabel:"Show:",project:"Project",capitalMetrics:"Capital / Metrics",noInvestments:"No investments",noTargetDefined:"No target defined",performance:"Performance",drawdown:"Drawdown",viewDetail:"View detail",moreActions:"More actions",viewInvestments:"View investments",activate:"Activate",pause:"Pause",close:"Close",resume:"Resume",backToProjects:"Back to projects",publishEvent:"Publish event",riskLow:"Low Risk",riskMedium:"Medium Risk",riskHigh:"High Risk",capitalRaised:"Capital Raised",goal:"Goal",overview:"Overview",timeline:"Timeline",activity:"Activity",investors:"Investors",activeInvestorsCount:"active",expectedROI:"Expected ROI",duration:"Duration",generalInfo:"General Information",creationDate:"Creation date",lastUpdate:"Last update",baseCurrency:"Base currency",investmentStatus:"Investment status",openInvestment:"Open",closedInvestment:"Closed",fixedConfig:"Fixed Configuration",targetCapital:"Target capital",minInvestment:"Minimum investment",maxInvestment:"Maximum investment",autoLockOnTarget:"Auto-lock on target",activated:"Activated",deactivated:"Deactivated",variableMetrics:"Variable Metrics",noInvestmentsTitle:"No investments",noInvestmentsSubtitle:"This project has no investors yet",investor:"Investor",noActivityTitle:"No activity",noActivitySubtitle:"No system events registered",adminOnly:"Admin only",investorsOnly:"Investors only",totalInvested:"Total Invested",projectNoName:"Project without name",ofTarget:"of"},DL={notFound:"Project not found",backToProjects:"Back to projects",projectLocked:"Project closed / locked",publishEvent:"Publish event",editProject:"Edit project",variable:"Variable",fixed:"Fixed",riskLow:"Low Risk",riskMedium:"Medium Risk",riskHigh:"High Risk",statusFunded:"Funded",statusActive:"Active",statusPaused:"Paused",statusClosed:"Closed",statusDraft:"Draft",capitalRaised:"Capital Raised",raised:"Raised",goal:"Goal",overview:"Overview",investments:"Investments",timeline:"Timeline",totalInvested:"Total invested",investors:"Investors",expectedROI:"Expected ROI",duration:"Duration",generalInfo:"General Information",projectDuration:"Project duration",months:"months",creationDate:"Creation date",lastUpdate:"Last update",baseCurrency:"Base currency",category:"Category",fixedConfig:"Fixed Configuration",targetCapital:"Target Capital",currentCapital:"Current Capital",minInvestment:"Minimum Investment",maxInvestment:"Maximum Investment",autoLockOnTarget:"Auto-lock on target reached",variableMetrics:"Variable Metrics",performance:"Performance",drawdown:"Drawdown",manualControl:"Manual Control",market:"Market",strategy:"Strategy",loadingInvestments:"Loading investments...",noInvestments:"No investments in this project",user:"User",amount:"Amount",status:"Status",date:"Date",invActive:"Active",invCompleted:"Completed",invCancelled:"Cancelled"},OL={title:"User Management",subtitle:"Manage all system users",searchPlaceholder:"Search by email or name...",allStatuses:"All statuses",active:"Active",inactive:"Inactive",name:"Name",email:"Email",status:"Status",balance:"Balance",registered:"Registered",registrationDate:"Registration Date",actions:"Actions",action:"Action",noUsers:"No registered users",noUsersFound:"No users found",viewDetails:"View details",viewDetail:"View detail",loadingUsers:"Loading users...",loadingDetail:"Loading details...",totalUsers:"Total Users",activeCount:"Active",inactiveCount:"Inactive",investors:"Investors",role:"Role",investor:"Investor",summary:"Summary",wallet:"Wallet",topups:"Top Ups",withdrawals:"Withdrawals",transactions:"Transactions",technicalInfo:"Technical Information",userId:"User ID",currentBalance:"Current Balance",updated:"Updated",currency:"Currency",noWalletInfo:"No wallet information",noInvestments:"No investments",noTopups:"No top ups",noWithdrawals:"No withdrawals",noTransactions:"No transactions",id:"ID",amount:"Amount",type:"Type",date:"Date",user:"User",tabs:{summary:"Summary",wallet:"Wallet",investments:"Investments",topups:"Top Ups",withdrawals:"Withdrawals",transactions:"Transactions"}},ML={active:"Active",inactive:"Inactive",pending:"Pending",approved:"Approved",rejected:"Rejected",completed:"Completed",funded:"Funded",closed:"Closed",cancelled:"Cancelled",paused:"Paused",draft:"Draft"},LL={select:"Select language",en:"English",es:"Espaol",de:"Deutsch",zh:"",it:"Italiano"},VL={approveTopup:"Approve Top Up",rejectTopup:"Reject Top Up",approveWithdrawal:"Approve Withdrawal",rejectWithdrawal:"Reject Withdrawal",approveInvestment:"Approve Investment",rejectInvestment:"Reject Investment",confirmApprove:"Approve",confirmReject:"Reject",rejectReasonPlaceholder:"Reason for rejection..."},FL={title:"Create Financial Project",generalInfo:"General Information",generalInfoDesc:"Basic data of the financial project",images:"Images",imagesDesc:"You can add multiple images (and delete them before saving)",addImages:"Add images",imageHint:"Recommended format 16:9. Max 5MB per image.",projectName:"Project name",projectNamePlaceholder:"USD Debt Fund 12%",subtitle:"Subtitle (short description)",subtitlePlaceholder:"E.g.: 12-month investment with estimated return",longDescription:"Extended description (shown only in details)",longDescriptionPlaceholder:"Describe the project in more detail...",projectType:"Project type",typeFixed:"Fixed (capital goal)",typeVariable:"Variable (trading/crypto)",category:"Category",categoryBadge:"Admin catalog",categoryPlaceholder:"Search or select a category created by admin",searchCategories:"Search categories",createCategory:"Create new category",categoryNameLabel:"Category name",categoryNamePlaceholder:"E.g. Private USD Debt",createAndSelect:"Create and select",categoryHint:"Categories are created by administrators and reused in future projects.",riskLevel:"Risk level",riskLow:"Low",riskMedium:"Medium",riskHigh:"High",expectedROI:"Expected ROI (%)",duration:"Duration (months)",fixedConfig:"Financial Configuration (Fixed Project)",fixedConfigDesc:"Set capital and investment limits",targetAmount:"Target capital (USD)",minInvestment:"Minimum investment (USD)",maxInvestment:"Maximum investment (USD)",variableConfig:"Financial Configuration (Variable Project)",variableConfigDesc:"Performance and control metrics",drawdown:"Drawdown (%)",performance:"Performance (%)",manualControl:"Manual status control (allows pause/resume)",advancedConfig:"Advanced Configuration",advancedConfigDesc:"Coming soon: technical fields for mixed or trading/crypto projects",advancedPlaceholder:"This area will reserve parameters such as execution, exchanges, dynamic risk and technical connectors.",createDraft:"Create draft",createAndPublish:"Create and publish",saving:"Saving...",publishing:"Publishing...",errors:{nameRequired:"Name is required",targetRequired:"Target capital is required and must be greater than 0",minInvestmentPositive:"Minimum investment must be a number greater than 0",minGreaterThanTarget:"Minimum investment cannot be greater than target capital",maxInvestmentPositive:"Maximum investment must be a number greater than 0",maxGreaterThanTarget:"Maximum investment cannot be greater than target capital",minGreaterThanMax:"Minimum investment cannot be greater than maximum investment",createFailed:"Could not create project. Please try again."},alerts:{successTitle:"Project created!",successText:'Project "{name}" has been created successfully.',errorTitle:"Error"}},UL={title:"Edit Project",subtitle:"Update project information",images:"Images",addImages:"Add images",imageHint:"Max 5MB per image. You can delete images before saving.",generalInfo:"General Information",projectName:"Project name",projectNamePlaceholder:"E.g.: Solar Valley Verde Project",subtitleLabel:"Subtitle (short description)",subtitlePlaceholder:"E.g.: 12-month investment with estimated return",longDescription:"Extended description (shown only in details)",longDescriptionPlaceholder:"Describe the project in more detail...",category:"Category",categoryPlaceholder:"E.g.: Renewable Energy, Trading, Crypto",financialMetrics:"Financial Metrics",expectedROI:"Expected ROI (%)",duration:"Duration (months)",variableMetrics:"Variable Metrics",drawdown:"Drawdown (%)",performance:"Performance (%)",nonEditableFields:"Non-editable fields:",nonEditableDesc:"Project type, Risk level, Target capital and Computed status.",nonEditableNote:"For critical changes to these fields, contact the system administrator.",saveChanges:"Save changes",months:"months",alerts:{successTitle:"Saved!",successText:"Changes have been saved successfully.",errorTitle:"Error",permissionDenied:"Insufficient permissions to update the project",updateFailed:"Could not update the project"},timeline:{projectUpdated:"Project updated",fieldsEdited:"The following fields were edited:",nameChange:"Name",subtitleUpdated:"Subtitle: updated",descriptionUpdated:"Extended description: updated",categoryChange:"Category",roiChange:"Expected ROI",durationChange:"Duration",drawdownChange:"Drawdown",performanceChange:"Performance",imagesDeleted:"Images: deleted",imagesAdded:"Images: added"}},zL={title:"Edit Fixed Project",tabs:{general:"General",location:"Location",finance:"Finance",metrics:"Return",risks:"Risks",restrictions:"Restrictions",projections:"Projection",charts:"Charts",documents:"Documents"},discardChanges:"Discard changes?",discardChangesText:"You have unsaved changes. If you close, you will lose all changes made.",yesDiscard:"Yes, discard",keepEditing:"Keep editing",fileTooLarge:"File too large",fileTooLargeText:"Some files exceed 5MB and were not added:",saveChanges:"Save changes",saving:"Saving...",alerts:{successTitle:"Saved!",successText:"Changes have been saved successfully.",errorTitle:"Error",permissionDenied:"Insufficient permissions to update the project",updateFailed:"Could not update the project"}},BL={investmentNotFound:"Investment not found",withdrawalNotFound:"Withdrawal not found",withdrawalInvalidUserId:"Invalid withdrawal: missing userId",investmentInvalidUserId:"Invalid investment: missing userId",investmentInvalidAmount:"Invalid investment: amount must be > 0",investmentInvalidProjectId:"Invalid investment: missing projectId",projectNotFound:"Project not found",projectInvalidTotalInvestment:"Invalid project: totalInvestment is not numeric",projectGoalReached:"This project has already reached its investment goal",userNoWallet:"User has no wallet; cannot deduct balance",walletInvalidBalance:"Invalid wallet: balance is not numeric",insufficientBalance:"Insufficient balance to approve this investment",withdrawalInvalidAmount:"Invalid withdrawal: amount must be > 0"},J0={rechargeMethods:EL,common:IL,table:TL,nav:SL,header:NL,auth:CL,dashboard:AL,topups:jL,withdrawals:PL,investments:kL,projects:RL,projectDetail:DL,users:OL,status:ML,language:LL,modals:VL,projectForm:FL,projectEdit:UL,fixedProjectEdit:zL,errors:BL},$L={title:"Mtodos de recarga",addNew:"Aadir mtodo de recarga",loading:"Cargando mtodos de recarga...",noMethods:"No hay mtodos de recarga registrados.",editMethod:"Editar mtodo de recarga",noName:"Sin nombre",noType:"Sin tipo",noStatus:"Sin estado",name:"Nombre",type:"Tipo",typeCrypto:"Crypto",typeBank:"Banco",image:"Imagen",status:"Estado",statusActive:"Activo",statusInactive:"Inactivo",details:"Detalles",created:"Creado",updated:"Actualizado",requiredFields:"Por favor, complete los campos obligatorios (nombre y tipo).",create:"Crear",saving:"Guardando...",createError:"Error al crear el mtodo de recarga.",saveChanges:"Guardar cambios",saveError:"Error al guardar el mtodo de recarga.",loadError:"Error al cargar los mtodos de recarga.",imageUploadError:"Error al subir la imagen del mtodo de recarga."},WL={loading:"Cargando mtodos de recarga...",error:"Error",success:"xito",cancel:"Cancelar",confirm:"Confirmar",save:"Guardar",delete:"Eliminar",edit:"Editar",close:"Cerrar",back:"Volver",actions:"Acciones",view:"Ver",approve:"Aprobar",reject:"Rechazar",search:"Buscar",filter:"Filtrar",noData:"Sin datos",yes:"S",no:"No",all:"Todos",today:"Hoy",updated:"Actualizado",processing:"Procesando...",total:"Total",show:"Mostrar",perPage:"por pgina",page:"Pgina",previous:"Anterior",next:"Siguiente",of:"de",created:"Creado",noDate:"Sin fecha",emailNotAvailable:"Email no disponible",enterReason:"Por favor ingresa una razn",enterReasonPlaceholder:"Ingresa una razn...",rejectReason:"Razn del rechazo...",enabled:"Activado",disabled:"Desactivado"},GL={rowsPerPage:"Filas por pgina:",of:"de",all:"Todos"},HL={dashboard:"Panel",users:"Usuarios",operations:"Operaciones",topups:"Recargas",withdrawals:"Retiros",investments:"Inversiones",others:"Otros",projects:"Proyectos",settings:"Configuracin",logout:"Cerrar sesin",adminPanel:"Panel Admin"},qL={language:"Idioma",theme:"Tema",notifications:"Notificaciones"},KL={login:"Iniciar Sesin",email:"Correo electrnico",password:"Contrasea",confirmPassword:"Confirmar Contrasea",adminAccess:"Acceso Administrativo",signingIn:"Iniciando sesin...",loginError:"Error al iniciar sesin",notAuthorized:"No Autorizado",notAuthorizedMessage:"No tienes permisos para acceder al panel de administracin.",contactAdmin:"Contacta al administrador del sistema.",adminPanel:"Panel de Administrador",orContinueWith:"o contina con",continueWithGoogle:"Continuar con Google",noAccount:"No tienes cuenta?",hasAccount:"Ya tienes cuenta?",registerHere:"Regstrate aqu",loginHere:"Inicia sesin aqu",profileNotFound:"Perfil de usuario no encontrado en Firestore",accountNotActive:"Tu cuenta no est activa",createAdminAccount:"Crear Cuenta Admin",registerNewAdmin:"Registra un nuevo administrador",createAccount:"Crear Cuenta",registering:"Registrando...",passwordMismatch:"Las contraseas no coinciden",passwordMinLength:"La contrasea debe tener al menos 6 caracteres",passwordHint:"Mnimo 6 caracteres",adminRegisteredSuccess:"Usuario admin registrado exitosamente! Sers redirigido...",emailExistsWrongPassword:"El email ya existe, pero la contrasea es incorrecta.",userNotFound:"No existe un usuario con ese email."},QL={title:"Panel de Administracin",subtitle:"Aqu est el resumen de la plataforma",users:"Usuarios",totalUsers:"Usuarios Totales",activeUsers:"Usuarios Activos",topups:"Recargas",pending:"Pendientes",approved:"Aprobadas",total:"Total",withdrawals:"Retiros",pendingWithdrawals:"Retiros Pendientes",investments:"Inversiones",activeInvestments:"Inversiones Activas",investedCapital:"Capital Invertido",recentTransactions:"Transacciones Recientes",type:"Tipo",amount:"Monto",user:"Usuario",date:"Fecha",noRecentTransactions:"No hay transacciones recientes",operationalAlerts:"Alertas Operativas",pendingTopupsAlert:"recarga(s) pendiente(s) de aprobacin",pendingWithdrawalsAlert:"retiro(s) pendiente(s) de aprobacin",activeInvestmentsAlert:"inversin(es) activa(s) en el sistema",systemOperational:"Sistema operativo. No hay operaciones pendientes.",userNotAvailable:"Usuario no disponible",pendingTopups:"Recargas pendientes",approvedTopups:"Recargas aprobadas",rejectedTopups:"Recargas rechazadas",fetchingMetrics:"Obteniendo mtricas",welcomeAdmin:"Bienvenido, Admin!",lastUpdate:"ltima actualizacin",recentActivity:"Actividad reciente",noRecentActivity:"Sin actividad reciente",noTransactions:"No hay transacciones recientes"},YL={title:"Gestin de Recargas",subtitle:"Administra todas las solicitudes de recarga de usuarios",allStatuses:"Todas",pending:"Pendiente",pendingPlural:"Pendientes",approved:"Aprobada",approvedPlural:"Aprobadas",rejected:"Rechazada",rejectedPlural:"Rechazadas",user:"Usuario",amount:"Monto",method:"Mtodo",status:"Estado",date:"Fecha",action:"Accin",noTopups:"No hay recargas en este estado",totalTopups:"Total de recargas",loadingTopups:"Cargando recargas...",approveTitle:"Aprobar Recarga",rejectTitle:"Rechazar Recarga",approveMessage:"Aprobar recarga de",rejectMessage:"Rechazar recarga de",ofUser:"del usuario",viewProof:"Ver comprobante",rechargeMethods:"Mtodos de Recargas",closeProof:"Cerrar comprobante"},XL={title:"Gestin de Retiros",subtitle:"Administra todas las solicitudes de retiro de usuarios",allStatuses:"Todos",pending:"Pendiente",pendingPlural:"Pendientes",approved:"Aprobado",approvedPlural:"Aprobados",rejected:"Rechazado",rejectedPlural:"Rechazados",completed:"Completado",user:"Usuario",amount:"Monto",method:"Mtodo",status:"Estado",date:"Fecha",action:"Accin",noWithdrawals:"No hay retiros en este estado",totalWithdrawals:"Total de retiros",loadingWithdrawals:"Cargando retiros...",approveTitle:"Aprobar Retiro",rejectTitle:"Rechazar Retiro",approveMessage:"Aprobar retiro de",rejectMessage:"Rechazar retiro de"},JL={title:"Gestin de Inversiones",subtitle:"Contexto completo: usuario, proyecto y ROI real vs esperado",allStatuses:"Todas",active:"Activa",activePlural:"Activas",pending:"Pendiente",completed:"Completada",completedPlural:"Completadas",cancelled:"Cancelada",cancelledPlural:"Canceladas",user:"Usuario",project:"Proyecto",amount:"Monto",status:"Estado",date:"Fecha",actions:"Acciones",noInvestments:"No hay inversiones con estos filtros",loadingInvestments:"Cargando inversiones...",viewDetails:"Ver detalles",totalInvested:"Total Invertido",activeInvestments:"Inversiones Activas",totalInvestments:"Total de Inversiones",allProjects:"Todos los proyectos",searchUserPlaceholder:"Buscar usuario (email/nombre)",expectedROI:"ROI Esperado",actualROI:"ROI Real",userNoData:"Usuario sin datos",projectNoName:"Proyecto sin nombre",withExpectedReturn:"Con retorno esperado",noExpectedReturn:"Retorno no definido",viewUser:"Ver usuario",viewProject:"Ver proyecto",approveTitle:"Aprobar Inversin",rejectTitle:"Rechazar Inversin",approveMessage:"Aprobar inversin de",rejectMessage:"Rechazar inversin de",willDeductBalance:"Se descontar del saldo.",investmentDetail:"Detalle de Inversin",back:"Volver",loading:"Cargando...",loadingDetails:"Cargando detalles...",couldNotLoad:"No se pudo cargar la inversin",investor:"Inversionista",amountInvested:"Monto Invertido",projectPercent:"% del Proyecto",overview:"Resumen",financial:"Financiero",audit:"Audit",generalInfo:"Informacin General",projectType:"Tipo de Proyecto",projectRisk:"Riesgo del Proyecto",investmentDate:"Fecha de Inversin",projectStatus:"Estado del Proyecto",riskLow:"Riesgo Bajo",riskMedium:"Riesgo Medio",riskHigh:"Riesgo Alto",expectedROILabel:"ROI Esperado",actualROILabel:"ROI Real",expectedGain:"Ganancia Esperada",realizedGain:"Ganancia Realizada",pendingValue:"Pendiente",financialDetails:"Detalles Financieros",expectedReturn:"Retorno Esperado",realizedReturn:"Retorno Realizado",updateReturn:"Actualizar Retorno",projectRelation:"Relacin con Proyecto",totalCapitalPercent:"% del Capital Total",projectTotalCapital:"Capital Total del Proyecto",projectGoal:"Meta del Proyecto",noProjectEvents:"Sin eventos del proyecto",noRelatedUpdates:"No hay actualizaciones de proyecto relacionadas",adminOnly:"Solo admin",investorsOnly:"Inversionistas",allVisibility:"Todos",noChangeHistory:"Sin historial de cambios",noChangesRecorded:"No hay cambios registrados en esta inversin",statusChange:"Cambio de Estado",systemEvent:"Evento de Sistema",returnUpdate:"Actualizacin de Retorno",from:"De",to:"a",reason:"Razn",returnUpdatedTo:"Retorno actualizado a",notes:"Notas",changeStatus:"Cambiar Estado",recordEvent:"Registrar Evento",changeInvestmentStatus:"Cambiar Estado de Inversin",newStatus:"Nuevo Estado",reasonOptional:"Razn (opcional)",explainChange:"Explica el cambio de estado...",cancel:"Cancelar",confirm:"Confirmar",updating:"Actualizando...",updateInvestmentReturn:"Actualizar Retorno de Inversin",realizedReturnUSD:"Retorno Realizado (USD)",amountReceived:"Cantidad recibida",investedAmount:"Monto invertido",gainLoss:"Ganancia / Prdida",roi:"ROI",notesOptional:"Notas (opcional)",returnDetails:"Detalles sobre el retorno...",saveReturn:"Guardar Retorno",registerSystemEvent:"Registrar Evento de Sistema",eventTitle:"Ttulo del Evento",eventTitlePlaceholder:"Ej: Pago parcial recibido",descriptionOptional:"Descripcin (opcional)",additionalDetails:"Detalles adicionales...",registering:"Registrando...",registerEvent:"Registrar Evento",investmentUpdatedTo:"Inversin actualizada a",eventRecorded:"Evento registrado",returnUpdated:"Retorno actualizado",paused:"Pausada"},ZL={title:"Catlogo de Proyectos",subtitle:"Gestin y control de productos financieros",createProject:"Crear proyecto",allStatuses:"Todos los estados",active:"Activo",pending:"Pendiente",completed:"Completado",funded:"Funded",closed:"Cerrado",paused:"Pausado",draft:"Borrador",name:"Nombre",target:"Meta",raised:"Recaudado",progress:"Progreso",status:"Estado",actions:"Acciones",noProjects:"No hay proyectos con estos filtros",loadingProjects:"Cargando proyectos...",viewDetails:"Ver detalles",editProject:"Editar proyecto",totalProjects:"Proyectos Totales",activeProjects:"Activos",fundedProjects:"Funded",totalCapital:"Capital Total",type:"Tipo",category:"Categora",allCategories:"Todas",risk:"Riesgo",allRisks:"Todos",fixed:"Fijo",variable:"Variable",low:"Bajo",medium:"Medio",high:"Alto",projectsFound:"proyectos encontrados",showLabel:"Mostrar:",project:"Proyecto",capitalMetrics:"Capital / Mtricas",noInvestments:"Sin inversiones",noTargetDefined:"Sin target definido",performance:"Performance",drawdown:"Drawdown",viewDetail:"Ver detalle",moreActions:"Ms acciones",viewInvestments:"Ver inversiones",activate:"Activar",pause:"Pausar",close:"Cerrar",resume:"Reanudar",backToProjects:"Volver a proyectos",publishEvent:"Publicar evento",riskLow:"Riesgo Bajo",riskMedium:"Riesgo Medio",riskHigh:"Riesgo Alto",capitalRaised:"Capital Recaudado",goal:"Meta",overview:"Resumen",timeline:"Timeline",activity:"Actividad",investors:"Inversionistas",activeInvestorsCount:"activos",expectedROI:"ROI Esperado",duration:"Duracin",generalInfo:"Informacin General",creationDate:"Fecha de creacin",lastUpdate:"ltima actualizacin",baseCurrency:"Moneda base",investmentStatus:"Estado de inversin",openInvestment:"Abierto",closedInvestment:"Cerrado",fixedConfig:"Configuracin Fija",targetCapital:"Capital objetivo",minInvestment:"Inversin mnima",maxInvestment:"Inversin mxima",autoLockOnTarget:"Auto-lock al alcanzar meta",activated:"Activado",deactivated:"Desactivado",variableMetrics:"Mtricas Variables",noInvestmentsTitle:"Sin inversiones",noInvestmentsSubtitle:"Este proyecto an no tiene inversionistas",investor:"Inversionista",noActivityTitle:"Sin actividad",noActivitySubtitle:"No hay eventos del sistema registrados",adminOnly:"Solo admin",investorsOnly:"Inversionistas",totalInvested:"Total Invertido",projectNoName:"Proyecto sin nombre",ofTarget:"de"},eV={notFound:"Proyecto no encontrado",backToProjects:"Volver a proyectos",projectLocked:"Proyecto cerrado / bloqueado",publishEvent:"Publicar evento",editProject:"Editar proyecto",variable:"Variable",fixed:"Fijo",riskLow:"Riesgo Bajo",riskMedium:"Riesgo Medio",riskHigh:"Riesgo Alto",statusFunded:"Funded",statusActive:"Activo",statusPaused:"Pausado",statusClosed:"Cerrado",statusDraft:"Borrador",capitalRaised:"Capital Recaudado",raised:"Recaudado",goal:"Meta",overview:"Resumen",investments:"Inversiones",timeline:"Timeline",totalInvested:"Total invertido",investors:"Inversionistas",expectedROI:"ROI esperado",duration:"Duracin",generalInfo:"Informacin General",projectDuration:"Duracin del proyecto",months:"meses",creationDate:"Fecha de creacin",lastUpdate:"ltima actualizacin",baseCurrency:"Moneda base",category:"Categora",fixedConfig:"Configuracin Fija",targetCapital:"Capital Objetivo",currentCapital:"Capital Actual",minInvestment:"Inversin Mnima",maxInvestment:"Inversin Mxima",autoLockOnTarget:"Auto-lock al alcanzar meta",variableMetrics:"Mtricas Variables",performance:"Performance",drawdown:"Drawdown",manualControl:"Control Manual",market:"Mercado",strategy:"Estrategia",loadingInvestments:"Cargando inversiones...",noInvestments:"No hay inversiones en este proyecto",user:"Usuario",amount:"Monto",status:"Estado",date:"Fecha",invActive:"Activa",invCompleted:"Completada",invCancelled:"Cancelada"},tV={title:"Gestin de Usuarios",subtitle:"Administra todos los usuarios del sistema",searchPlaceholder:"Buscar por email o nombre...",allStatuses:"Todos los estados",active:"Activo",inactive:"Inactivo",name:"Nombre",email:"Email",status:"Estado",balance:"Balance",registered:"Registrado",registrationDate:"Fecha Registro",actions:"Acciones",action:"Accin",noUsers:"No hay usuarios registrados",noUsersFound:"No hay usuarios encontrados",viewDetails:"Ver detalles",viewDetail:"Ver detalle",loadingUsers:"Cargando usuarios...",loadingDetail:"Cargando detalle...",totalUsers:"Total de Usuarios",activeCount:"Activos",inactiveCount:"Inactivos",investors:"Inversores",role:"Rol",investor:"Inversor",summary:"Resumen",wallet:"Wallet",topups:"Recargas",withdrawals:"Retiros",transactions:"Transacciones",technicalInfo:"Informacin Tcnica",userId:"ID de Usuario",currentBalance:"Balance Actual",updated:"Actualizado",currency:"Moneda",noWalletInfo:"Sin informacin de wallet",noInvestments:"Sin inversiones",noTopups:"Sin recargas",noWithdrawals:"Sin retiros",noTransactions:"Sin transacciones",id:"ID",amount:"Monto",type:"Tipo",date:"Fecha",user:"Usuario",tabs:{summary:"Resumen",wallet:"Wallet",investments:"Inversiones",topups:"Recargas",withdrawals:"Retiros",transactions:"Transacciones"}},nV={active:"Activo",inactive:"Inactivo",pending:"Pendiente",approved:"Aprobado",rejected:"Rechazado",completed:"Completado",funded:"Fondeado",closed:"Cerrado",cancelled:"Cancelado",paused:"Pausado",draft:"Borrador"},sV={select:"Seleccionar idioma",en:"English",es:"Espaol",de:"Deutsch",zh:"",it:"Italiano"},rV={approveTopup:"Aprobar Recarga",rejectTopup:"Rechazar Recarga",approveWithdrawal:"Aprobar Retiro",rejectWithdrawal:"Rechazar Retiro",approveInvestment:"Aprobar Inversin",rejectInvestment:"Rechazar Inversin",confirmApprove:"Aprobar",confirmReject:"Rechazar",rejectReasonPlaceholder:"Razn del rechazo..."},iV={title:"Crear Proyecto Financiero",generalInfo:"Informacin General",generalInfoDesc:"Datos bsicos del proyecto financiero",images:"Imgenes",imagesDesc:"Puedes agregar varias imgenes (y eliminarlas antes de guardar)",addImages:"Agregar imgenes",imageHint:"Formato recomendado 16:9. Mx. 5MB por imagen.",projectName:"Nombre del proyecto",projectNamePlaceholder:"Fondo Deuda USD 12%",subtitle:"Subttulo (descripcin breve)",subtitlePlaceholder:"Ej: Inversin a 12 meses con retorno estimado",longDescription:"Descripcin extensa (se muestra solo en detalles)",longDescriptionPlaceholder:"Describe el proyecto con ms detalle...",projectType:"Tipo de proyecto",typeFixed:"Fijo (meta de capital)",typeVariable:"Variable (trading/crypto)",category:"Categora",categoryBadge:"Catlogo admin",categoryPlaceholder:"Busca o selecciona una categora creada por admin",searchCategories:"Buscar categoras",createCategory:"Crear nueva categora",categoryNameLabel:"Nombre de la categora",categoryNamePlaceholder:"Ej. Deuda privada USD",createAndSelect:"Crear y seleccionar",categoryHint:"Las categoras son creadas por administradores y se reutilizan en proyectos futuros.",riskLevel:"Nivel de riesgo",riskLow:"Bajo",riskMedium:"Medio",riskHigh:"Alto",expectedROI:"ROI esperado (%)",duration:"Duracin (meses)",fixedConfig:"Configuracin Financiera (Proyecto Fijo)",fixedConfigDesc:"Establece los lmites de capital e inversin",targetAmount:"Capital objetivo (USD)",minInvestment:"Inversin mnima (USD)",maxInvestment:"Inversin mxima (USD)",variableConfig:"Configuracin Financiera (Proyecto Variable)",variableConfigDesc:"Mtricas de rendimiento y control",drawdown:"Drawdown (%)",performance:"Performance (%)",manualControl:"Control manual del estado (permite pausar/reanudar)",advancedConfig:"Configuracin avanzada",advancedConfigDesc:"Prximamente campos tcnicos para proyectos mixtos o de trading/crypto",advancedPlaceholder:"Esta rea reservar parmetros como ejecucin, exchanges, riesgo dinmico y conectores tcnicos.",createDraft:"Crear borrador",createAndPublish:"Crear y publicar",saving:"Guardando...",publishing:"Publicando...",errors:{nameRequired:"El nombre es obligatorio",targetRequired:"El capital objetivo (targetAmount) es obligatorio y debe ser mayor a 0",minInvestmentPositive:"La inversin mnima debe ser un nmero mayor a 0",minGreaterThanTarget:"La inversin mnima no puede ser mayor al capital objetivo",maxInvestmentPositive:"La inversin mxima debe ser un nmero mayor a 0",maxGreaterThanTarget:"La inversin mxima no puede ser mayor al capital objetivo",minGreaterThanMax:"La inversin mnima no puede ser mayor que la inversin mxima",createFailed:"No se pudo crear el proyecto. Intntalo de nuevo."},alerts:{successTitle:"Proyecto creado!",successText:'El proyecto "{name}" se ha creado correctamente.',errorTitle:"Error"}},aV={title:"Editar Proyecto",subtitle:"Actualiza la informacin del proyecto",images:"Imgenes",addImages:"Agregar imgenes",imageHint:"Mx. 5MB por imagen. Puedes eliminar imgenes antes de guardar.",generalInfo:"Informacin General",projectName:"Nombre del proyecto",projectNamePlaceholder:"Ej: Proyecto Solar Valle Verde",subtitleLabel:"Subttulo (descripcin breve)",subtitlePlaceholder:"Ej: Inversin a 12 meses con retorno estimado",longDescription:"Descripcin extensa (se muestra solo en detalles)",longDescriptionPlaceholder:"Describe el proyecto con ms detalle...",category:"Categora",categoryPlaceholder:"Ej: Energa Renovable, Trading, Crypto",financialMetrics:"Mtricas Financieras",expectedROI:"ROI esperado (%)",duration:"Duracin (meses)",variableMetrics:"Mtricas Variables",drawdown:"Drawdown (%)",performance:"Performance (%)",nonEditableFields:"Campos no editables:",nonEditableDesc:"Tipo de proyecto, Nivel de riesgo, Capital objetivo y Estado computado.",nonEditableNote:"Para cambios crticos en estos campos, contacta al administrador del sistema.",saveChanges:"Guardar cambios",months:"meses",alerts:{successTitle:"Guardado!",successText:"Los cambios se han guardado correctamente.",errorTitle:"Error",permissionDenied:"Permisos insuficientes para actualizar el proyecto",updateFailed:"No se pudo actualizar el proyecto"},timeline:{projectUpdated:"Proyecto actualizado",fieldsEdited:"Se editaron los siguientes campos:",nameChange:"Nombre",subtitleUpdated:"Subttulo: actualizado",descriptionUpdated:"Descripcin extensa: actualizada",categoryChange:"Categora",roiChange:"ROI esperado",durationChange:"Duracin",drawdownChange:"Drawdown",performanceChange:"Performance",imagesDeleted:"Imgenes: eliminadas",imagesAdded:"Imgenes: agregadas"}},oV={title:"Editar Proyecto Fijo",tabs:{general:"General",location:"Ubicacin",finance:"Finanzas",metrics:"Retorno",risks:"Riesgos",restrictions:"Restricciones",projections:"Proyeccin",charts:"Grficas",documents:"Documentos"},discardChanges:"Descartar cambios?",discardChangesText:"Tienes cambios sin guardar. Si cierras, perders todos los cambios realizados.",yesDiscard:"S, descartar",keepEditing:"Seguir editando",fileTooLarge:"Archivo demasiado grande",fileTooLargeText:"Algunos archivos superan 5MB y no se agregaron:",saveChanges:"Guardar cambios",saving:"Guardando...",alerts:{successTitle:"Guardado!",successText:"Los cambios se han guardado correctamente.",errorTitle:"Error",permissionDenied:"Permisos insuficientes para actualizar el proyecto",updateFailed:"No se pudo actualizar el proyecto"}},lV={investmentNotFound:"Inversin no encontrada",withdrawalNotFound:"Retiro no encontrado",withdrawalInvalidUserId:"Retiro invlido: falta userId",investmentInvalidUserId:"Inversin invlida: falta userId",investmentInvalidAmount:"Inversin invlida: amount debe ser > 0",investmentInvalidProjectId:"Inversin invlida: falta projectId",projectNotFound:"Proyecto no encontrado",projectInvalidTotalInvestment:"Proyecto invlido: totalInvestment no es numrico",projectGoalReached:"Este proyecto ya alcanz su meta de inversin",userNoWallet:"El usuario no tiene wallet; no se puede descontar saldo",walletInvalidBalance:"Wallet invlida: balance no es numrico",insufficientBalance:"Saldo insuficiente para aprobar esta inversin",withdrawalInvalidAmount:"Retiro invlido: amount debe ser > 0"},Z0={rechargeMethods:$L,common:WL,table:GL,nav:HL,header:qL,auth:KL,dashboard:QL,topups:YL,withdrawals:XL,investments:JL,projects:ZL,projectDetail:eV,users:tV,status:nV,language:sV,modals:rV,projectForm:iV,projectEdit:aV,fixedProjectEdit:oV,errors:lV},cV={title:"Auflade-Methoden",loading:"Methoden laden...",noMethods:"Keine Auflade-Methoden",noName:"Kein Name",noType:"Kein Typ",noStatus:"Kein Status",editMethod:"Methode bearbeiten",name:"Name",type:"Typ",status:"Status",details:"Details",created:"Erstellt",updated:"Aktualisiert",statusActive:"aktiv",statusInactive:"inaktiv",saveChanges:"nderungen speichern",saving:"Speichern...",loadError:"Auflade-Methoden konnten nicht geladen werden",saveError:"nderungen konnten nicht gespeichert werden"},uV={loading:"Laden...",error:"Fehler",success:"Erfolg",cancel:"Abbrechen",confirm:"Besttigen",save:"Speichern",delete:"Lschen",edit:"Bearbeiten",close:"Schlieen",back:"Zurck",actions:"Aktionen",view:"Ansehen",approve:"Genehmigen",reject:"Ablehnen",search:"Suchen",filter:"Filtern",noData:"Keine Daten",yes:"Ja",no:"Nein",all:"Alle",today:"Heute",updated:"Aktualisiert",processing:"Verarbeitung...",total:"Gesamt",show:"Anzeigen",perPage:"pro Seite",page:"Seite",previous:"Vorherige",next:"Nchste",of:"von",created:"Erstellt",noDate:"Kein Datum",emailNotAvailable:"E-Mail nicht verfgbar",enterReason:"Bitte geben Sie einen Grund ein",enterReasonPlaceholder:"Grund eingeben...",rejectReason:"Ablehnungsgrund..."},dV={dashboard:"Dashboard",users:"Benutzer",operations:"Operationen",topups:"Aufladungen",withdrawals:"Auszahlungen",investments:"Investitionen",others:"Sonstiges",projects:"Projekte",settings:"Einstellungen",logout:"Abmelden",adminPanel:"Admin Panel"},hV={language:"Sprache",theme:"Thema",notifications:"Benachrichtigungen"},fV={login:"Anmelden",email:"E-Mail",password:"Passwort",adminAccess:"Administrativer Zugang",signingIn:"Anmelden...",loginError:"Anmeldefehler",notAuthorized:"Nicht autorisiert",notAuthorizedMessage:"Sie haben keine Berechtigung, auf das Admin-Panel zuzugreifen.",contactAdmin:"Kontaktieren Sie den Systemadministrator."},mV={title:"Admin-Dashboard",subtitle:"Systembersicht",users:"Benutzer",totalUsers:"Gesamte Benutzer",activeUsers:"Aktive Benutzer",topups:"Aufladungen",pending:"Ausstehend",approved:"Genehmigt",total:"Gesamt",withdrawals:"Auszahlungen",pendingWithdrawals:"Ausstehende Auszahlungen",investments:"Investitionen",activeInvestments:"Aktive Investitionen",investedCapital:"Investiertes Kapital",recentTransactions:"Letzte Transaktionen",type:"Typ",amount:"Betrag",user:"Benutzer",date:"Datum",noRecentTransactions:"Keine aktuellen Transaktionen",operationalAlerts:"Operative Warnungen",pendingTopupsAlert:"ausstehende Aufladung(en) zur Genehmigung",pendingWithdrawalsAlert:"ausstehende Auszahlung(en) zur Genehmigung",activeInvestmentsAlert:"aktive Investition(en) im System",systemOperational:"System betriebsbereit. Keine ausstehenden Operationen.",userNotAvailable:"Benutzer nicht verfgbar"},pV={title:"Benutzerverwaltung",subtitle:"Alle Systembenutzer verwalten",searchPlaceholder:"Nach E-Mail oder Name suchen...",allStatuses:"Alle Status",active:"Aktiv",inactive:"Inaktiv",name:"Name",email:"E-Mail",status:"Status",balance:"Guthaben",registered:"Registriert",registeredDate:"Registrierungsdatum",actions:"Aktionen",action:"Aktion",noUsers:"Keine registrierten Benutzer",noUsersFound:"Keine Benutzer gefunden",viewDetails:"Details anzeigen",viewDetail:"Detail anzeigen",loadingUsers:"Benutzer laden...",totalUsers:"Gesamte Benutzer",activeCount:"Aktiv",inactiveCount:"Inaktiv",investors:"Investoren",role:"Rolle",investor:"Investor",summary:"bersicht",wallet:"Wallet",topups:"Aufladungen",withdrawals:"Auszahlungen",transactions:"Transaktionen",technicalInfo:"Technische Informationen",userId:"Benutzer-ID",currentBalance:"Aktuelles Guthaben",updatedAt:"Aktualisiert",currency:"Whrung",noWalletInfo:"Keine Wallet-Informationen",noInvestments:"Keine Investitionen",noTopups:"Keine Aufladungen",noWithdrawals:"Keine Auszahlungen",noTransactions:"Keine Transaktionen",id:"ID",amount:"Betrag",type:"Typ",loadingDetail:"Details laden...",registrationDate:"Registrierungsdatum",updated:"Aktualisiert",date:"Datum",user:"Benutzer",tabs:{summary:"bersicht",wallet:"Wallet",investments:"Investitionen",topups:"Aufladungen",withdrawals:"Auszahlungen",transactions:"Transaktionen"}},gV={title:"Aufladungsverwaltung",subtitle:"Alle Aufladungsanfragen von Benutzern verwalten",allStatuses:"Alle",pending:"Ausstehend",pendingPlural:"Ausstehend",approved:"Genehmigt",approvedPlural:"Genehmigt",rejected:"Abgelehnt",rejectedPlural:"Abgelehnt",user:"Benutzer",amount:"Betrag",method:"Methode",status:"Status",date:"Datum",action:"Aktion",noTopups:"Keine Aufladungen in diesem Status",totalTopups:"Gesamte Aufladungen",loadingTopups:"Aufladungen laden...",approveTitle:"Aufladung genehmigen",rejectTitle:"Aufladung ablehnen",approveMessage:"Aufladung genehmigen von",rejectMessage:"Aufladung ablehnen von",ofUser:"vom Benutzer",viewProof:"Beleg anzeigen",rechargeMethods:"Aufladungsmethoden",closeProof:"Beleg schlieen"},vV={title:"Auszahlungsverwaltung",subtitle:"Alle Auszahlungsanfragen von Benutzern verwalten",allStatuses:"Alle",pending:"Ausstehend",pendingPlural:"Ausstehend",approved:"Genehmigt",approvedPlural:"Genehmigt",rejected:"Abgelehnt",rejectedPlural:"Abgelehnt",completed:"Abgeschlossen",user:"Benutzer",amount:"Betrag",method:"Methode",status:"Status",date:"Datum",action:"Aktion",noWithdrawals:"Keine Auszahlungen in diesem Status",totalWithdrawals:"Gesamte Auszahlungen",loadingWithdrawals:"Auszahlungen laden...",approveTitle:"Auszahlung genehmigen",rejectTitle:"Auszahlung ablehnen",approveMessage:"Auszahlung genehmigen von",rejectMessage:"Auszahlung ablehnen von"},yV={title:"Investitionsverwaltung",subtitle:"Vollstndiger Kontext: Benutzer, Projekt und realer vs. erwarteter ROI",allStatuses:"Alle",active:"Aktiv",activePlural:"Aktiv",pending:"Ausstehend",completed:"Abgeschlossen",completedPlural:"Abgeschlossen",cancelled:"Storniert",cancelledPlural:"Storniert",user:"Benutzer",project:"Projekt",amount:"Betrag",status:"Status",date:"Datum",actions:"Aktionen",noInvestments:"Keine Investitionen mit diesen Filtern",loadingInvestments:"Investitionen laden...",viewDetails:"Details anzeigen",totalInvested:"Gesamt investiert",activeInvestments:"Aktive Investitionen",totalInvestments:"Gesamte Investitionen",allProjects:"Alle Projekte",searchUserPlaceholder:"Benutzer suchen (E-Mail/Name)",expectedROI:"Erwarteter ROI",actualROI:"Tatschlicher ROI",userNoData:"Benutzer ohne Daten",projectNoName:"Projekt ohne Namen",withExpectedReturn:"Mit erwartetem Ertrag",noExpectedReturn:"Ertrag nicht definiert",viewUser:"Benutzer anzeigen",viewProject:"Projekt anzeigen",approveTitle:"Investition genehmigen",rejectTitle:"Investition ablehnen",approveMessage:"Investition genehmigen von",rejectMessage:"Investition ablehnen von",willDeductBalance:"Wird vom Guthaben abgezogen.",investmentDetail:"Investitionsdetail",back:"Zurck",loading:"Laden...",loadingDetails:"Details laden...",couldNotLoad:"Investition konnte nicht geladen werden",investor:"Investor",amountInvested:"Investierter Betrag",projectPercent:"% des Projekts",overview:"bersicht",financial:"Finanzen",audit:"Audit",generalInfo:"Allgemeine Informationen",projectType:"Projekttyp",projectRisk:"Projektrisiko",investmentDate:"Investitionsdatum",projectStatus:"Projektstatus",riskLow:"Niedriges Risiko",riskMedium:"Mittleres Risiko",riskHigh:"Hohes Risiko",expectedROILabel:"Erwarteter ROI",actualROILabel:"Tatschlicher ROI",expectedGain:"Erwarteter Gewinn",realizedGain:"Realisierter Gewinn",pendingValue:"Ausstehend",financialDetails:"Finanzielle Details",expectedReturn:"Erwartete Rendite",realizedReturn:"Realisierte Rendite",updateReturn:"Rendite aktualisieren",projectRelation:"Projektbeziehung",totalCapitalPercent:"% des Gesamtkapitals",projectTotalCapital:"Gesamtkapital des Projekts",projectGoal:"Projektziel",noProjectEvents:"Keine Projektereignisse",noRelatedUpdates:"Keine zugehrigen Projektaktualisierungen",adminOnly:"Nur Admin",investorsOnly:"Investoren",allVisibility:"Alle",noChangeHistory:"Kein nderungsverlauf",noChangesRecorded:"Keine nderungen fr diese Investition aufgezeichnet",statusChange:"Statusnderung",systemEvent:"Systemereignis",returnUpdate:"Renditeaktualisierung",from:"Von",to:"zu",reason:"Grund",returnUpdatedTo:"Rendite aktualisiert auf",notes:"Notizen",changeStatus:"Status ndern",recordEvent:"Ereignis aufzeichnen",changeInvestmentStatus:"Investitionsstatus ndern",newStatus:"Neuer Status",reasonOptional:"Grund (optional)",explainChange:"Erklren Sie die Statusnderung...",cancel:"Abbrechen",confirm:"Besttigen",updating:"Aktualisieren...",updateInvestmentReturn:"Investitionsrendite aktualisieren",realizedReturnUSD:"Realisierte Rendite (USD)",amountReceived:"Erhaltener Betrag",investedAmount:"Investierter Betrag",gainLoss:"Gewinn / Verlust",roi:"ROI",notesOptional:"Notizen (optional)",returnDetails:"Details zur Rendite...",saveReturn:"Rendite speichern",registerSystemEvent:"Systemereignis registrieren",eventTitle:"Ereignistitel",eventTitlePlaceholder:"Z.B.: Teilzahlung erhalten",descriptionOptional:"Beschreibung (optional)",additionalDetails:"Zustzliche Details...",registering:"Registrieren...",registerEvent:"Ereignis registrieren",investmentUpdatedTo:"Investition aktualisiert auf",eventRecorded:"Ereignis aufgezeichnet",returnUpdated:"Rendite aktualisiert",paused:"Pausiert"},wV={title:"Projektkatalog",subtitle:"Verwaltung und Kontrolle von Finanzprodukten",createProject:"+ Projekt erstellen",allStatuses:"Alle Status",active:"Aktiv",pending:"Ausstehend",completed:"Abgeschlossen",funded:"Finanziert",closed:"Geschlossen",paused:"Pausiert",draft:"Entwurf",name:"Name",target:"Ziel",raised:"Gesammelt",progress:"Fortschritt",status:"Status",actions:"Aktionen",noProjects:"Keine Projekte mit diesen Filtern",loadingProjects:"Projekte laden...",viewDetails:"Details anzeigen",editProject:"Projekt bearbeiten",totalProjects:"Gesamte Projekte",activeProjects:"Aktiv",fundedProjects:"Finanziert",totalCapital:"Gesamtkapital",type:"Typ",category:"Kategorie",allCategories:"Alle",risk:"Risiko",allRisks:"Alle",fixed:"Fest",variable:"Variabel",low:"Niedrig",medium:"Mittel",high:"Hoch",projectsFound:"Projekte gefunden",showLabel:"Anzeigen:",project:"Projekt",capitalMetrics:"Kapital / Metriken",noInvestments:"Keine Investitionen",noTargetDefined:"Kein Ziel definiert",performance:"Performance",drawdown:"Drawdown",viewDetail:"Detail anzeigen",moreActions:"Weitere Aktionen",viewInvestments:"Investitionen anzeigen",activate:"Aktivieren",pause:"Pausieren",close:"Schlieen",resume:"Fortsetzen",backToProjects:"Zurck zu Projekten",publishEvent:"Ereignis verffentlichen",riskLow:"Niedriges Risiko",riskMedium:"Mittleres Risiko",riskHigh:"Hohes Risiko",capitalRaised:"Gesammeltes Kapital",goal:"Ziel",overview:"bersicht",timeline:"Zeitachse",activity:"Aktivitt",investors:"Investoren",activeInvestorsCount:"aktiv",expectedROI:"Erwarteter ROI",duration:"Laufzeit",generalInfo:"Allgemeine Informationen",creationDate:"Erstellungsdatum",lastUpdate:"Letzte Aktualisierung",baseCurrency:"Basiswhrung",investmentStatus:"Investitionsstatus",openInvestment:"Offen",closedInvestment:"Geschlossen",fixedConfig:"Feste Konfiguration",targetCapital:"Zielkapital",minInvestment:"Mindestinvestition",maxInvestment:"Maximale Investition",autoLockOnTarget:"Automatische Sperrung bei Zielerreichung",activated:"Aktiviert",deactivated:"Deaktiviert",variableMetrics:"Variable Metriken",noInvestmentsTitle:"Keine Investitionen",noInvestmentsSubtitle:"Dieses Projekt hat noch keine Investoren",investor:"Investor",noActivityTitle:"Keine Aktivitt",noActivitySubtitle:"Keine Systemereignisse registriert",adminOnly:"Nur Admin",investorsOnly:"Nur Investoren",totalInvested:"Gesamt investiert",projectNoName:"Projekt ohne Namen",ofTarget:"von"},_V={active:"Aktiv",inactive:"Inaktiv",pending:"Ausstehend",approved:"Genehmigt",rejected:"Abgelehnt",completed:"Abgeschlossen",funded:"Finanziert",closed:"Geschlossen",cancelled:"Storniert",paused:"Pausiert",draft:"Entwurf"},xV={select:"Sprache auswhlen",en:"English",es:"Espaol",de:"Deutsch",zh:"",it:"Italiano"},bV={approveTopup:"Aufladung genehmigen",rejectTopup:"Aufladung ablehnen",approveWithdrawal:"Auszahlung genehmigen",rejectWithdrawal:"Auszahlung ablehnen",approveInvestment:"Investition genehmigen",rejectInvestment:"Investition ablehnen",confirmApprove:"Genehmigen",confirmReject:"Ablehnen",rejectReasonPlaceholder:"Ablehnungsgrund..."},EV={title:"Finanzprojekt erstellen",generalInfo:"Allgemeine Informationen",generalInfoDesc:"Grunddaten des Finanzprojekts",images:"Bilder",imagesDesc:"Sie knnen mehrere Bilder hinzufgen (und vor dem Speichern lschen)",addImages:"Bilder hinzufgen",imageHint:"Empfohlenes Format 16:9. Max. 5MB pro Bild.",projectName:"Projektname",projectNamePlaceholder:"USD Schuldenfonds 12%",subtitle:"Untertitel (Kurzbeschreibung)",subtitlePlaceholder:"z.B.: 12-monatige Investition mit geschtzter Rendite",longDescription:"Ausfhrliche Beschreibung (nur in Details angezeigt)",longDescriptionPlaceholder:"Beschreiben Sie das Projekt detaillierter...",projectType:"Projekttyp",typeFixed:"Fest (Kapitalziel)",typeVariable:"Variabel (Trading/Krypto)",category:"Kategorie",categoryBadge:"Admin-Katalog",categoryPlaceholder:"Suchen oder whlen Sie eine vom Admin erstellte Kategorie",searchCategories:"Kategorien suchen",createCategory:"Neue Kategorie erstellen",categoryNameLabel:"Kategoriename",categoryNamePlaceholder:"z.B. Private USD-Schulden",createAndSelect:"Erstellen und auswhlen",categoryHint:"Kategorien werden von Administratoren erstellt und in zuknftigen Projekten wiederverwendet.",riskLevel:"Risikoniveau",riskLow:"Niedrig",riskMedium:"Mittel",riskHigh:"Hoch",expectedROI:"Erwarteter ROI (%)",duration:"Laufzeit (Monate)",fixedConfig:"Finanzkonfiguration (Festes Projekt)",fixedConfigDesc:"Kapital- und Investitionsgrenzen festlegen",targetAmount:"Zielkapital (USD)",minInvestment:"Mindestinvestition (USD)",maxInvestment:"Hchstinvestition (USD)",variableConfig:"Finanzkonfiguration (Variables Projekt)",variableConfigDesc:"Leistungs- und Kontrollkennzahlen",drawdown:"Drawdown (%)",performance:"Performance (%)",manualControl:"Manuelle Statuskontrolle (ermglicht Pausieren/Fortsetzen)",advancedConfig:"Erweiterte Konfiguration",advancedConfigDesc:"Demnchst: technische Felder fr gemischte oder Trading/Krypto-Projekte",advancedPlaceholder:"Dieser Bereich wird Parameter wie Ausfhrung, Brsen, dynamisches Risiko und technische Konnektoren reservieren.",createDraft:"Entwurf erstellen",createAndPublish:"Erstellen und verffentlichen",saving:"Speichern...",publishing:"Verffentlichen...",errors:{nameRequired:"Name ist erforderlich",targetRequired:"Zielkapital ist erforderlich und muss grer als 0 sein",minInvestmentPositive:"Mindestinvestition muss eine Zahl grer als 0 sein",minGreaterThanTarget:"Mindestinvestition darf nicht grer als Zielkapital sein",maxInvestmentPositive:"Hchstinvestition muss eine Zahl grer als 0 sein",maxGreaterThanTarget:"Hchstinvestition darf nicht grer als Zielkapital sein",minGreaterThanMax:"Mindestinvestition darf nicht grer als Hchstinvestition sein",createFailed:"Projekt konnte nicht erstellt werden. Bitte erneut versuchen."},alerts:{successTitle:"Projekt erstellt!",successText:'Projekt "{name}" wurde erfolgreich erstellt.',errorTitle:"Fehler"}},IV={title:"Projekt bearbeiten",subtitle:"Projektinformationen aktualisieren",images:"Bilder",addImages:"Bilder hinzufgen",imageHint:"Max. 5MB pro Bild. Sie knnen Bilder vor dem Speichern lschen.",generalInfo:"Allgemeine Informationen",projectName:"Projektname",projectNamePlaceholder:"z.B.: Solar Valle Verde Projekt",subtitleLabel:"Untertitel (Kurzbeschreibung)",subtitlePlaceholder:"z.B.: 12-monatige Investition mit geschtzter Rendite",longDescription:"Ausfhrliche Beschreibung (nur in Details angezeigt)",longDescriptionPlaceholder:"Beschreiben Sie das Projekt detaillierter...",category:"Kategorie",categoryPlaceholder:"z.B.: Erneuerbare Energie, Trading, Krypto",financialMetrics:"Finanzkennzahlen",expectedROI:"Erwarteter ROI (%)",duration:"Laufzeit (Monate)",variableMetrics:"Variable Kennzahlen",drawdown:"Drawdown (%)",performance:"Performance (%)",nonEditableFields:"Nicht bearbeitbare Felder:",nonEditableDesc:"Projekttyp, Risikoniveau, Zielkapital und berechneter Status.",nonEditableNote:"Fr kritische nderungen an diesen Feldern wenden Sie sich an den Systemadministrator.",saveChanges:"nderungen speichern",months:"Monate",alerts:{successTitle:"Gespeichert!",successText:"nderungen wurden erfolgreich gespeichert.",errorTitle:"Fehler",permissionDenied:"Unzureichende Berechtigungen zum Aktualisieren des Projekts",updateFailed:"Projekt konnte nicht aktualisiert werden"},timeline:{projectUpdated:"Projekt aktualisiert",fieldsEdited:"Folgende Felder wurden bearbeitet:",nameChange:"Name",subtitleUpdated:"Untertitel: aktualisiert",descriptionUpdated:"Ausfhrliche Beschreibung: aktualisiert",categoryChange:"Kategorie",roiChange:"Erwarteter ROI",durationChange:"Laufzeit",drawdownChange:"Drawdown",performanceChange:"Performance",imagesDeleted:"Bilder: gelscht",imagesAdded:"Bilder: hinzugefgt"}},TV={title:"Festes Projekt bearbeiten",tabs:{general:"Allgemein",location:"Standort",finance:"Finanzen",metrics:"Rendite",risks:"Risiken",restrictions:"Einschrnkungen",projections:"Prognose",charts:"Diagramme",documents:"Dokumente"},discardChanges:"nderungen verwerfen?",discardChangesText:"Sie haben ungespeicherte nderungen. Wenn Sie schlieen, gehen alle nderungen verloren.",yesDiscard:"Ja, verwerfen",keepEditing:"Weiter bearbeiten",fileTooLarge:"Datei zu gro",fileTooLargeText:"Einige Dateien berschreiten 5MB und wurden nicht hinzugefgt:",saveChanges:"nderungen speichern",saving:"Speichern...",alerts:{successTitle:"Gespeichert!",successText:"nderungen wurden erfolgreich gespeichert.",errorTitle:"Fehler",permissionDenied:"Unzureichende Berechtigungen zum Aktualisieren des Projekts",updateFailed:"Projekt konnte nicht aktualisiert werden"}},SV={investmentNotFound:"Investition nicht gefunden",withdrawalNotFound:"Auszahlung nicht gefunden",withdrawalInvalidUserId:"Ungltige Auszahlung: userId fehlt",investmentInvalidUserId:"Ungltige Investition: userId fehlt",investmentInvalidAmount:"Ungltige Investition: Betrag muss > 0 sein",investmentInvalidProjectId:"Ungltige Investition: projectId fehlt",projectNotFound:"Projekt nicht gefunden",projectInvalidTotalInvestment:"Ungltiges Projekt: totalInvestment ist nicht numerisch",projectGoalReached:"Dieses Projekt hat sein Investitionsziel bereits erreicht",userNoWallet:"Benutzer hat keine Wallet; Guthaben kann nicht abgezogen werden",walletInvalidBalance:"Ungltige Wallet: Guthaben ist nicht numerisch",insufficientBalance:"Unzureichendes Guthaben fr diese Investitionsgenehmigung",withdrawalInvalidAmount:"Ungltige Auszahlung: Betrag muss > 0 sein"},eS={rechargeMethods:cV,common:uV,nav:dV,header:hV,auth:fV,dashboard:mV,users:pV,topups:gV,withdrawals:vV,investments:yV,projects:wV,status:_V,language:xV,modals:bV,projectForm:EV,projectEdit:IV,fixedProjectEdit:TV,errors:SV},NV={title:"",loading:"...",noMethods:"",noName:"",noType:"",noStatus:"",editMethod:"",name:"",type:"",status:"",details:"",created:"",updated:"",statusActive:"",statusInactive:"",saveChanges:"",saving:"...",loadError:"",saveError:""},CV={loading:"...",error:"",success:"",cancel:"",confirm:"",save:"",delete:"",edit:"",close:"",back:"",actions:"",view:"",approve:"",reject:"",search:"",filter:"",noData:"",yes:"",no:"",all:"",today:"",updated:"",processing:"...",total:"",show:"",perPage:"",page:"",previous:"",next:"",of:"/",created:"",noDate:"",emailNotAvailable:"",enterReason:"",enterReasonPlaceholder:"...",rejectReason:"..."},AV={dashboard:"",users:"",operations:"",topups:"",withdrawals:"",investments:"",others:"",projects:"",settings:"",logout:"",adminPanel:""},jV={language:"",theme:"",notifications:""},PV={login:"",email:"",password:"",adminAccess:"",signingIn:"...",loginError:"",notAuthorized:"",notAuthorizedMessage:"",contactAdmin:""},kV={title:"",subtitle:"",users:"",totalUsers:"",activeUsers:"",topups:"",pending:"",approved:"",total:"",withdrawals:"",pendingWithdrawals:"",investments:"",activeInvestments:"",investedCapital:"",recentTransactions:"",type:"",amount:"",user:"",date:"",noRecentTransactions:"",operationalAlerts:"",pendingTopupsAlert:"",pendingWithdrawalsAlert:"",activeInvestmentsAlert:"",systemOperational:"",userNotAvailable:""},RV={title:"",subtitle:"",searchPlaceholder:"...",allStatuses:"",active:"",inactive:"",name:"",email:"",status:"",balance:"",registered:"",registeredDate:"",actions:"",action:"",noUsers:"",noUsersFound:"",viewDetails:"",viewDetail:"",loadingUsers:"...",totalUsers:"",activeCount:"",inactiveCount:"",investors:"",role:"",investor:"",summary:"",wallet:"",topups:"",withdrawals:"",transactions:"",technicalInfo:"",userId:"ID",currentBalance:"",updatedAt:"",currency:"",noWalletInfo:"",noInvestments:"",noTopups:"",noWithdrawals:"",noTransactions:"",id:"ID",amount:"",type:"",loadingDetail:"...",registrationDate:"",updated:"",date:"",user:"",tabs:{summary:"",wallet:"",investments:"",topups:"",withdrawals:"",transactions:""}},DV={title:"",subtitle:"",allStatuses:"",pending:"",pendingPlural:"",approved:"",approvedPlural:"",rejected:"",rejectedPlural:"",user:"",amount:"",method:"",status:"",date:"",action:"",noTopups:"",totalTopups:"",loadingTopups:"...",approveTitle:"",rejectTitle:"",approveMessage:"",rejectMessage:"",ofUser:"",viewProof:"",rechargeMethods:"",closeProof:""},OV={title:"",subtitle:"",allStatuses:"",pending:"",pendingPlural:"",approved:"",approvedPlural:"",rejected:"",rejectedPlural:"",completed:"",user:"",amount:"",method:"",status:"",date:"",action:"",noWithdrawals:"",totalWithdrawals:"",loadingWithdrawals:"...",approveTitle:"",rejectTitle:"",approveMessage:"",rejectMessage:""},MV={title:"",subtitle:"ROI",allStatuses:"",active:"",activePlural:"",pending:"",completed:"",completedPlural:"",cancelled:"",cancelledPlural:"",user:"",project:"",amount:"",status:"",date:"",actions:"",noInvestments:"",loadingInvestments:"...",viewDetails:"",totalInvested:"",activeInvestments:"",totalInvestments:"",allProjects:"",searchUserPlaceholder:"/",expectedROI:"ROI",actualROI:"ROI",userNoData:"",projectNoName:"",withExpectedReturn:"",noExpectedReturn:"",viewUser:"",viewProject:"",approveTitle:"",rejectTitle:"",approveMessage:"",rejectMessage:"",willDeductBalance:"",investmentDetail:"",back:"",loading:"...",loadingDetails:"...",couldNotLoad:"",investor:"",amountInvested:"",projectPercent:"",overview:"",financial:"",audit:"",generalInfo:"",projectType:"",projectRisk:"",investmentDate:"",projectStatus:"",riskLow:"",riskMedium:"",riskHigh:"",expectedROILabel:"ROI",actualROILabel:"ROI",expectedGain:"",realizedGain:"",pendingValue:"",financialDetails:"",expectedReturn:"",realizedReturn:"",updateReturn:"",projectRelation:"",totalCapitalPercent:"",projectTotalCapital:"",projectGoal:"",noProjectEvents:"",noRelatedUpdates:"",adminOnly:"",investorsOnly:"",allVisibility:"",noChangeHistory:"",noChangesRecorded:"",statusChange:"",systemEvent:"",returnUpdate:"",from:"",to:"",reason:"",returnUpdatedTo:"",notes:"",changeStatus:"",recordEvent:"",changeInvestmentStatus:"",newStatus:"",reasonOptional:"",explainChange:"...",cancel:"",confirm:"",updating:"...",updateInvestmentReturn:"",realizedReturnUSD:"USD",amountReceived:"",investedAmount:"",gainLoss:"",roi:"ROI",notesOptional:"",returnDetails:"...",saveReturn:"",registerSystemEvent:"",eventTitle:"",eventTitlePlaceholder:"",descriptionOptional:"",additionalDetails:"...",registering:"...",registerEvent:"",investmentUpdatedTo:"",eventRecorded:"",returnUpdated:"",paused:""},LV={title:"",subtitle:"",createProject:"+ ",allStatuses:"",active:"",pending:"",completed:"",funded:"",closed:"",paused:"",draft:"",name:"",target:"",raised:"",progress:"",status:"",actions:"",noProjects:"",loadingProjects:"...",viewDetails:"",editProject:"",totalProjects:"",activeProjects:"",fundedProjects:"",totalCapital:"",type:"",category:"",allCategories:"",risk:"",allRisks:"",fixed:"",variable:"",low:"",medium:"",high:"",projectsFound:"",showLabel:"",project:"",capitalMetrics:"/",noInvestments:"",noTargetDefined:"",performance:"",drawdown:"",viewDetail:"",moreActions:"",viewInvestments:"",activate:"",pause:"",close:"",resume:"",backToProjects:"",publishEvent:"",riskLow:"",riskMedium:"",riskHigh:"",capitalRaised:"",goal:"",overview:"",timeline:"",activity:"",investors:"",activeInvestorsCount:"",expectedROI:"",duration:"",generalInfo:"",creationDate:"",lastUpdate:"",baseCurrency:"",investmentStatus:"",openInvestment:"",closedInvestment:"",fixedConfig:"",targetCapital:"",minInvestment:"",maxInvestment:"",autoLockOnTarget:"",activated:"",deactivated:"",variableMetrics:"",noInvestmentsTitle:"",noInvestmentsSubtitle:"",investor:"",noActivityTitle:"",noActivitySubtitle:"",adminOnly:"",investorsOnly:"",totalInvested:"",projectNoName:"",ofTarget:"/"},VV={active:"",inactive:"",pending:"",approved:"",rejected:"",completed:"",funded:"",closed:"",cancelled:"",paused:"",draft:""},FV={select:"",en:"English",es:"Espaol",de:"Deutsch",zh:"",it:"Italiano"},UV={approveTopup:"",rejectTopup:"",approveWithdrawal:"",rejectWithdrawal:"",approveInvestment:"",rejectInvestment:"",confirmApprove:"",confirmReject:"",rejectReasonPlaceholder:"..."},zV={title:"",generalInfo:"",generalInfoDesc:"",images:"",imagesDesc:"",addImages:"",imageHint:"16:95MB",projectName:"",projectNamePlaceholder:" 12%",subtitle:"",subtitlePlaceholder:"12",longDescription:"",longDescriptionPlaceholder:"...",projectType:"",typeFixed:"",typeVariable:"/",category:"",categoryBadge:"",categoryPlaceholder:"",searchCategories:"",createCategory:"",categoryNameLabel:"",categoryNamePlaceholder:"",createAndSelect:"",categoryHint:"",riskLevel:"",riskLow:"",riskMedium:"",riskHigh:"",expectedROI:"%",duration:"",fixedConfig:"",fixedConfigDesc:"",targetAmount:"USD",minInvestment:"USD",maxInvestment:"USD",variableConfig:"",variableConfigDesc:"",drawdown:"%",performance:"%",manualControl:"/",advancedConfig:"",advancedConfigDesc:"/",advancedPlaceholder:"",createDraft:"",createAndPublish:"",saving:"...",publishing:"...",errors:{nameRequired:"",targetRequired:"0",minInvestmentPositive:"0",minGreaterThanTarget:"",maxInvestmentPositive:"0",maxGreaterThanTarget:"",minGreaterThanMax:"",createFailed:""},alerts:{successTitle:"",successText:' "{name}" ',errorTitle:""}},BV={title:"",subtitle:"",images:"",addImages:"",imageHint:"5MB",generalInfo:"",projectName:"",projectNamePlaceholder:"",subtitleLabel:"",subtitlePlaceholder:"12",longDescription:"",longDescriptionPlaceholder:"...",category:"",categoryPlaceholder:"",financialMetrics:"",expectedROI:"%",duration:"",variableMetrics:"",drawdown:"%",performance:"%",nonEditableFields:"",nonEditableDesc:"",nonEditableNote:"",saveChanges:"",months:"",alerts:{successTitle:"",successText:"",errorTitle:"",permissionDenied:"",updateFailed:""},timeline:{projectUpdated:"",fieldsEdited:"",nameChange:"",subtitleUpdated:"",descriptionUpdated:"",categoryChange:"",roiChange:"",durationChange:"",drawdownChange:"",performanceChange:"",imagesDeleted:"",imagesAdded:""}},$V={title:"",tabs:{general:"",location:"",finance:"",metrics:"",risks:"",restrictions:"",projections:"",charts:"",documents:""},discardChanges:"",discardChangesText:"",yesDiscard:"",keepEditing:"",fileTooLarge:"",fileTooLargeText:"5MB",saveChanges:"",saving:"...",alerts:{successTitle:"",successText:"",errorTitle:"",permissionDenied:"",updateFailed:""}},WV={investmentNotFound:"",withdrawalNotFound:"",withdrawalInvalidUserId:"userId",investmentInvalidUserId:"userId",investmentInvalidAmount:"0",investmentInvalidProjectId:"projectId",projectNotFound:"",projectInvalidTotalInvestment:"totalInvestment",projectGoalReached:"",userNoWallet:"",walletInvalidBalance:"",insufficientBalance:"",withdrawalInvalidAmount:"0"},tS={rechargeMethods:NV,common:CV,nav:AV,header:jV,auth:PV,dashboard:kV,users:RV,topups:DV,withdrawals:OV,investments:MV,projects:LV,status:VV,language:FV,modals:UV,projectForm:zV,projectEdit:BV,fixedProjectEdit:$V,errors:WV},GV={title:"Metodi di Ricarica",loading:"Caricamento metodi...",noMethods:"Nessun metodo di ricarica",noName:"Senza nome",noType:"Senza tipo",noStatus:"Senza stato",editMethod:"Modifica metodo",name:"Nome",type:"Tipo",status:"Stato",details:"Dettagli",created:"Creato",updated:"Aggiornato",statusActive:"attivo",statusInactive:"inattivo",saveChanges:"Salva modifiche",saving:"Salvataggio...",loadError:"Impossibile caricare i metodi di ricarica",saveError:"Impossibile salvare le modifiche"},HV={loading:"Caricamento...",error:"Errore",success:"Successo",cancel:"Annulla",confirm:"Conferma",save:"Salva",delete:"Elimina",edit:"Modifica",close:"Chiudi",back:"Indietro",actions:"Azioni",view:"Visualizza",approve:"Approva",reject:"Rifiuta",search:"Cerca",filter:"Filtra",noData:"Nessun dato",yes:"S",no:"No",all:"Tutti",today:"Oggi",updated:"Aggiornato",processing:"Elaborazione...",total:"Totale",show:"Mostra",perPage:"per pagina",page:"Pagina",previous:"Precedente",next:"Successivo",of:"di",created:"Creato",noDate:"Nessuna data",emailNotAvailable:"Email non disponibile",enterReason:"Per favore inserisci un motivo",enterReasonPlaceholder:"Inserisci un motivo...",rejectReason:"Motivo del rifiuto..."},qV={dashboard:"Dashboard",users:"Utenti",operations:"Operazioni",topups:"Ricariche",withdrawals:"Prelievi",investments:"Investimenti",others:"Altri",projects:"Progetti",settings:"Impostazioni",logout:"Esci",adminPanel:"Pannello Admin"},KV={language:"Lingua",theme:"Tema",notifications:"Notifiche"},QV={login:"Accedi",email:"Email",password:"Password",adminAccess:"Accesso Amministrativo",signingIn:"Accesso in corso...",loginError:"Errore di accesso",notAuthorized:"Non Autorizzato",notAuthorizedMessage:"Non hai i permessi per accedere al pannello di amministrazione.",contactAdmin:"Contatta l'amministratore di sistema."},YV={title:"Dashboard Admin",subtitle:"Panoramica del sistema",users:"Utenti",totalUsers:"Utenti Totali",activeUsers:"Utenti Attivi",topups:"Ricariche",pending:"In attesa",approved:"Approvate",total:"Totale",withdrawals:"Prelievi",pendingWithdrawals:"Prelievi in attesa",investments:"Investimenti",activeInvestments:"Investimenti Attivi",investedCapital:"Capitale Investito",recentTransactions:"Transazioni Recenti",type:"Tipo",amount:"Importo",user:"Utente",date:"Data",noRecentTransactions:"Nessuna transazione recente",operationalAlerts:"Avvisi Operativi",pendingTopupsAlert:"ricarica(e) in attesa di approvazione",pendingWithdrawalsAlert:"prelievo(i) in attesa di approvazione",activeInvestmentsAlert:"investimento(i) attivo(i) nel sistema",systemOperational:"Sistema operativo. Nessuna operazione in sospeso.",userNotAvailable:"Utente non disponibile"},XV={title:"Gestione Utenti",subtitle:"Gestisci tutti gli utenti del sistema",searchPlaceholder:"Cerca per email o nome...",allStatuses:"Tutti gli stati",active:"Attivo",inactive:"Inattivo",name:"Nome",email:"Email",status:"Stato",balance:"Saldo",registered:"Registrato",registeredDate:"Data Registrazione",actions:"Azioni",action:"Azione",noUsers:"Nessun utente registrato",noUsersFound:"Nessun utente trovato",viewDetails:"Visualizza dettagli",viewDetail:"Visualizza dettaglio",loadingUsers:"Caricamento utenti...",totalUsers:"Utenti Totali",activeCount:"Attivi",inactiveCount:"Inattivi",investors:"Investitori",role:"Ruolo",investor:"Investitore",summary:"Riepilogo",wallet:"Portafoglio",topups:"Ricariche",withdrawals:"Prelievi",transactions:"Transazioni",technicalInfo:"Informazioni Tecniche",userId:"ID Utente",currentBalance:"Saldo Corrente",updatedAt:"Aggiornato",currency:"Valuta",noWalletInfo:"Nessuna informazione portafoglio",noInvestments:"Nessun investimento",noTopups:"Nessuna ricarica",noWithdrawals:"Nessun prelievo",noTransactions:"Nessuna transazione",id:"ID",amount:"Importo",type:"Tipo",loadingDetail:"Caricamento dettagli...",registrationDate:"Data di Registrazione",updated:"Aggiornato",date:"Data",user:"Utente",tabs:{summary:"Riepilogo",wallet:"Portafoglio",investments:"Investimenti",topups:"Ricariche",withdrawals:"Prelievi",transactions:"Transazioni"}},JV={title:"Gestione Ricariche",subtitle:"Gestisci tutte le richieste di ricarica degli utenti",allStatuses:"Tutte",pending:"In attesa",pendingPlural:"In attesa",approved:"Approvata",approvedPlural:"Approvate",rejected:"Rifiutata",rejectedPlural:"Rifiutate",user:"Utente",amount:"Importo",method:"Metodo",status:"Stato",date:"Data",action:"Azione",noTopups:"Nessuna ricarica in questo stato",totalTopups:"Totale ricariche",loadingTopups:"Caricamento ricariche...",approveTitle:"Approva Ricarica",rejectTitle:"Rifiuta Ricarica",approveMessage:"Approvare ricarica di",rejectMessage:"Rifiutare ricarica di",ofUser:"dell'utente",viewProof:"Visualizza prova",rechargeMethods:"Metodi di Ricarica",closeProof:"Chiudi prova"},ZV={title:"Gestione Prelievi",subtitle:"Gestisci tutte le richieste di prelievo degli utenti",allStatuses:"Tutti",pending:"In attesa",pendingPlural:"In attesa",approved:"Approvato",approvedPlural:"Approvati",rejected:"Rifiutato",rejectedPlural:"Rifiutati",completed:"Completato",user:"Utente",amount:"Importo",method:"Metodo",status:"Stato",date:"Data",action:"Azione",noWithdrawals:"Nessun prelievo in questo stato",totalWithdrawals:"Totale prelievi",loadingWithdrawals:"Caricamento prelievi...",approveTitle:"Approva Prelievo",rejectTitle:"Rifiuta Prelievo",approveMessage:"Approvare prelievo di",rejectMessage:"Rifiutare prelievo di"},eF={title:"Gestione Investimenti",subtitle:"Contesto completo: utente, progetto e ROI reale vs atteso",allStatuses:"Tutti",active:"Attivo",activePlural:"Attivi",pending:"In attesa",completed:"Completato",completedPlural:"Completati",cancelled:"Annullato",cancelledPlural:"Annullati",user:"Utente",project:"Progetto",amount:"Importo",status:"Stato",date:"Data",actions:"Azioni",noInvestments:"Nessun investimento con questi filtri",loadingInvestments:"Caricamento investimenti...",viewDetails:"Visualizza dettagli",totalInvested:"Totale Investito",activeInvestments:"Investimenti Attivi",totalInvestments:"Totale Investimenti",allProjects:"Tutti i progetti",searchUserPlaceholder:"Cerca utente (email/nome)",expectedROI:"ROI Atteso",actualROI:"ROI Reale",userNoData:"Utente senza dati",projectNoName:"Progetto senza nome",withExpectedReturn:"Con rendimento atteso",noExpectedReturn:"Rendimento non definito",viewUser:"Visualizza utente",viewProject:"Visualizza progetto",approveTitle:"Approva Investimento",rejectTitle:"Rifiuta Investimento",approveMessage:"Approvare investimento di",rejectMessage:"Rifiutare investimento di",willDeductBalance:"Sar detratto dal saldo.",investmentDetail:"Dettaglio Investimento",back:"Indietro",loading:"Caricamento...",loadingDetails:"Caricamento dettagli...",couldNotLoad:"Impossibile caricare l'investimento",investor:"Investitore",amountInvested:"Importo Investito",projectPercent:"% del Progetto",overview:"Panoramica",financial:"Finanziario",audit:"Audit",generalInfo:"Informazioni Generali",projectType:"Tipo di Progetto",projectRisk:"Rischio del Progetto",investmentDate:"Data di Investimento",projectStatus:"Stato del Progetto",riskLow:"Rischio Basso",riskMedium:"Rischio Medio",riskHigh:"Rischio Alto",expectedROILabel:"ROI Atteso",actualROILabel:"ROI Reale",expectedGain:"Guadagno Atteso",realizedGain:"Guadagno Realizzato",pendingValue:"In attesa",financialDetails:"Dettagli Finanziari",expectedReturn:"Rendimento Atteso",realizedReturn:"Rendimento Realizzato",updateReturn:"Aggiorna Rendimento",projectRelation:"Relazione con Progetto",totalCapitalPercent:"% del Capitale Totale",projectTotalCapital:"Capitale Totale del Progetto",projectGoal:"Obiettivo del Progetto",noProjectEvents:"Nessun evento del progetto",noRelatedUpdates:"Nessun aggiornamento del progetto correlato",adminOnly:"Solo admin",investorsOnly:"Investitori",allVisibility:"Tutti",noChangeHistory:"Nessuno storico modifiche",noChangesRecorded:"Nessuna modifica registrata per questo investimento",statusChange:"Cambio di Stato",systemEvent:"Evento di Sistema",returnUpdate:"Aggiornamento Rendimento",from:"Da",to:"a",reason:"Motivo",returnUpdatedTo:"Rendimento aggiornato a",notes:"Note",changeStatus:"Cambia Stato",recordEvent:"Registra Evento",changeInvestmentStatus:"Cambia Stato Investimento",newStatus:"Nuovo Stato",reasonOptional:"Motivo (opzionale)",explainChange:"Spiega il cambio di stato...",cancel:"Annulla",confirm:"Conferma",updating:"Aggiornamento...",updateInvestmentReturn:"Aggiorna Rendimento Investimento",realizedReturnUSD:"Rendimento Realizzato (USD)",amountReceived:"Importo ricevuto",investedAmount:"Importo investito",gainLoss:"Guadagno / Perdita",roi:"ROI",notesOptional:"Note (opzionale)",returnDetails:"Dettagli sul rendimento...",saveReturn:"Salva Rendimento",registerSystemEvent:"Registra Evento di Sistema",eventTitle:"Titolo dell'Evento",eventTitlePlaceholder:"Es: Pagamento parziale ricevuto",descriptionOptional:"Descrizione (opzionale)",additionalDetails:"Dettagli aggiuntivi...",registering:"Registrazione...",registerEvent:"Registra Evento",investmentUpdatedTo:"Investimento aggiornato a",eventRecorded:"Evento registrato",returnUpdated:"Rendimento aggiornato",paused:"In pausa"},tF={title:"Catalogo Progetti",subtitle:"Gestione e controllo dei prodotti finanziari",createProject:"+ Crea progetto",allStatuses:"Tutti gli stati",active:"Attivo",pending:"In attesa",completed:"Completato",funded:"Finanziato",closed:"Chiuso",paused:"In pausa",draft:"Bozza",name:"Nome",target:"Obiettivo",raised:"Raccolto",progress:"Progresso",status:"Stato",actions:"Azioni",noProjects:"Nessun progetto con questi filtri",loadingProjects:"Caricamento progetti...",viewDetails:"Visualizza dettagli",editProject:"Modifica progetto",totalProjects:"Progetti Totali",activeProjects:"Attivi",fundedProjects:"Finanziati",totalCapital:"Capitale Totale",type:"Tipo",category:"Categoria",allCategories:"Tutte",risk:"Rischio",allRisks:"Tutti",fixed:"Fissi",variable:"Variabili",low:"Basso",medium:"Medio",high:"Alto",projectsFound:"progetti trovati",showLabel:"Mostra:",project:"Progetto",capitalMetrics:"Capitale / Metriche",noInvestments:"Nessun investimento",noTargetDefined:"Nessun obiettivo definito",performance:"Performance",drawdown:"Drawdown",viewDetail:"Visualizza dettaglio",moreActions:"Altre azioni",viewInvestments:"Visualizza investimenti",activate:"Attiva",pause:"Pausa",close:"Chiudi",resume:"Riprendi",backToProjects:"Torna ai progetti",publishEvent:"Pubblica evento",riskLow:"Rischio Basso",riskMedium:"Rischio Medio",riskHigh:"Rischio Alto",capitalRaised:"Capitale Raccolto",goal:"Obiettivo",overview:"Panoramica",timeline:"Cronologia",activity:"Attivit",investors:"Investitori",activeInvestorsCount:"attivi",expectedROI:"ROI Previsto",duration:"Durata",generalInfo:"Informazioni Generali",creationDate:"Data di creazione",lastUpdate:"Ultimo aggiornamento",baseCurrency:"Valuta base",investmentStatus:"Stato investimento",openInvestment:"Aperto",closedInvestment:"Chiuso",fixedConfig:"Configurazione Fissa",targetCapital:"Capitale obiettivo",minInvestment:"Investimento minimo",maxInvestment:"Investimento massimo",autoLockOnTarget:"Blocco automatico al raggiungimento obiettivo",activated:"Attivato",deactivated:"Disattivato",variableMetrics:"Metriche Variabili",noInvestmentsTitle:"Nessun investimento",noInvestmentsSubtitle:"Questo progetto non ha ancora investitori",investor:"Investitore",noActivityTitle:"Nessuna attivit",noActivitySubtitle:"Nessun evento di sistema registrato",adminOnly:"Solo admin",investorsOnly:"Solo investitori",totalInvested:"Totale Investito",projectNoName:"Progetto senza nome",ofTarget:"di"},nF={active:"Attivo",inactive:"Inattivo",pending:"In attesa",approved:"Approvato",rejected:"Rifiutato",completed:"Completato",funded:"Finanziato",closed:"Chiuso",cancelled:"Annullato",paused:"In pausa",draft:"Bozza"},sF={select:"Seleziona lingua",en:"English",es:"Espaol",de:"Deutsch",zh:"",it:"Italiano"},rF={approveTopup:"Approva Ricarica",rejectTopup:"Rifiuta Ricarica",approveWithdrawal:"Approva Prelievo",rejectWithdrawal:"Rifiuta Prelievo",approveInvestment:"Approva Investimento",rejectInvestment:"Rifiuta Investimento",confirmApprove:"Approva",confirmReject:"Rifiuta",rejectReasonPlaceholder:"Motivo del rifiuto..."},iF={title:"Crea Progetto Finanziario",generalInfo:"Informazioni Generali",generalInfoDesc:"Dati base del progetto finanziario",images:"Immagini",imagesDesc:"Puoi aggiungere pi immagini (e eliminarle prima di salvare)",addImages:"Aggiungi immagini",imageHint:"Formato consigliato 16:9. Max 5MB per immagine.",projectName:"Nome del progetto",projectNamePlaceholder:"Fondo Debito USD 12%",subtitle:"Sottotitolo (descrizione breve)",subtitlePlaceholder:"Es.: Investimento a 12 mesi con rendimento stimato",longDescription:"Descrizione estesa (mostrata solo nei dettagli)",longDescriptionPlaceholder:"Descrivi il progetto in modo pi dettagliato...",projectType:"Tipo di progetto",typeFixed:"Fisso (obiettivo di capitale)",typeVariable:"Variabile (trading/crypto)",category:"Categoria",categoryBadge:"Catalogo admin",categoryPlaceholder:"Cerca o seleziona una categoria creata dall'admin",searchCategories:"Cerca categorie",createCategory:"Crea nuova categoria",categoryNameLabel:"Nome categoria",categoryNamePlaceholder:"Es. Debito Privato USD",createAndSelect:"Crea e seleziona",categoryHint:"Le categorie sono create dagli amministratori e riutilizzate nei progetti futuri.",riskLevel:"Livello di rischio",riskLow:"Basso",riskMedium:"Medio",riskHigh:"Alto",expectedROI:"ROI previsto (%)",duration:"Durata (mesi)",fixedConfig:"Configurazione Finanziaria (Progetto Fisso)",fixedConfigDesc:"Imposta i limiti di capitale e investimento",targetAmount:"Capitale obiettivo (USD)",minInvestment:"Investimento minimo (USD)",maxInvestment:"Investimento massimo (USD)",variableConfig:"Configurazione Finanziaria (Progetto Variabile)",variableConfigDesc:"Metriche di performance e controllo",drawdown:"Drawdown (%)",performance:"Performance (%)",manualControl:"Controllo manuale dello stato (permette pausa/ripresa)",advancedConfig:"Configurazione Avanzata",advancedConfigDesc:"Prossimamente: campi tecnici per progetti misti o trading/crypto",advancedPlaceholder:"Quest'area riserver parametri come esecuzione, exchange, rischio dinamico e connettori tecnici.",createDraft:"Crea bozza",createAndPublish:"Crea e pubblica",saving:"Salvataggio...",publishing:"Pubblicazione...",errors:{nameRequired:"Il nome  obbligatorio",targetRequired:"Il capitale obiettivo  obbligatorio e deve essere maggiore di 0",minInvestmentPositive:"L'investimento minimo deve essere un numero maggiore di 0",minGreaterThanTarget:"L'investimento minimo non pu essere maggiore del capitale obiettivo",maxInvestmentPositive:"L'investimento massimo deve essere un numero maggiore di 0",maxGreaterThanTarget:"L'investimento massimo non pu essere maggiore del capitale obiettivo",minGreaterThanMax:"L'investimento minimo non pu essere maggiore dell'investimento massimo",createFailed:"Impossibile creare il progetto. Riprova."},alerts:{successTitle:"Progetto creato!",successText:'Il progetto "{name}"  stato creato con successo.',errorTitle:"Errore"}},aF={title:"Modifica Progetto",subtitle:"Aggiorna le informazioni del progetto",images:"Immagini",addImages:"Aggiungi immagini",imageHint:"Max 5MB per immagine. Puoi eliminare le immagini prima di salvare.",generalInfo:"Informazioni Generali",projectName:"Nome del progetto",projectNamePlaceholder:"Es.: Progetto Solare Valle Verde",subtitleLabel:"Sottotitolo (descrizione breve)",subtitlePlaceholder:"Es.: Investimento a 12 mesi con rendimento stimato",longDescription:"Descrizione estesa (mostrata solo nei dettagli)",longDescriptionPlaceholder:"Descrivi il progetto in modo pi dettagliato...",category:"Categoria",categoryPlaceholder:"Es.: Energia Rinnovabile, Trading, Crypto",financialMetrics:"Metriche Finanziarie",expectedROI:"ROI previsto (%)",duration:"Durata (mesi)",variableMetrics:"Metriche Variabili",drawdown:"Drawdown (%)",performance:"Performance (%)",nonEditableFields:"Campi non modificabili:",nonEditableDesc:"Tipo di progetto, Livello di rischio, Capitale obiettivo e Stato calcolato.",nonEditableNote:"Per modifiche critiche a questi campi, contatta l'amministratore di sistema.",saveChanges:"Salva modifiche",months:"mesi",alerts:{successTitle:"Salvato!",successText:"Le modifiche sono state salvate con successo.",errorTitle:"Errore",permissionDenied:"Permessi insufficienti per aggiornare il progetto",updateFailed:"Impossibile aggiornare il progetto"},timeline:{projectUpdated:"Progetto aggiornato",fieldsEdited:"I seguenti campi sono stati modificati:",nameChange:"Nome",subtitleUpdated:"Sottotitolo: aggiornato",descriptionUpdated:"Descrizione estesa: aggiornata",categoryChange:"Categoria",roiChange:"ROI previsto",durationChange:"Durata",drawdownChange:"Drawdown",performanceChange:"Performance",imagesDeleted:"Immagini: eliminate",imagesAdded:"Immagini: aggiunte"}},oF={title:"Modifica Progetto Fisso",tabs:{general:"Generale",location:"Posizione",finance:"Finanze",metrics:"Rendimento",risks:"Rischi",restrictions:"Restrizioni",projections:"Proiezione",charts:"Grafici",documents:"Documenti"},discardChanges:"Scartare le modifiche?",discardChangesText:"Hai modifiche non salvate. Se chiudi, perderai tutte le modifiche effettuate.",yesDiscard:"S, scarta",keepEditing:"Continua a modificare",fileTooLarge:"File troppo grande",fileTooLargeText:"Alcuni file superano 5MB e non sono stati aggiunti:",saveChanges:"Salva modifiche",saving:"Salvataggio...",alerts:{successTitle:"Salvato!",successText:"Le modifiche sono state salvate con successo.",errorTitle:"Errore",permissionDenied:"Permessi insufficienti per aggiornare il progetto",updateFailed:"Impossibile aggiornare il progetto"}},lF={investmentNotFound:"Investimento non trovato",withdrawalNotFound:"Prelievo non trovato",withdrawalInvalidUserId:"Prelievo non valido: manca userId",investmentInvalidUserId:"Investimento non valido: manca userId",investmentInvalidAmount:"Investimento non valido: l'importo deve essere > 0",investmentInvalidProjectId:"Investimento non valido: manca projectId",projectNotFound:"Progetto non trovato",projectInvalidTotalInvestment:"Progetto non valido: totalInvestment non  numerico",projectGoalReached:"Questo progetto ha gi raggiunto l'obiettivo di investimento",userNoWallet:"L'utente non ha un wallet; non  possibile detrarre il saldo",walletInvalidBalance:"Wallet non valido: il saldo non  numerico",insufficientBalance:"Saldo insufficiente per approvare questo investimento",withdrawalInvalidAmount:"Prelievo non valido: l'importo deve essere > 0"},nS={rechargeMethods:GV,common:HV,nav:qV,header:KV,auth:QV,dashboard:YV,users:XV,topups:JV,withdrawals:ZV,investments:eF,projects:tF,status:nF,language:sF,modals:rF,projectForm:iF,projectEdit:aF,fixedProjectEdit:oF,errors:lF},Fi={en:J0,es:Z0,de:eS,zh:tS,it:nS},sS=R.createContext(null),cF=({children:t})=>{const[e,n]=R.useState(()=>{if(typeof navigator<"u"){const d=Object.keys(Fi),h=Array.isArray(navigator.languages)&&navigator.languages.length?navigator.languages:[navigator.language];for(const f of h){const m=String(f).trim().toLowerCase().replace("_","-");if(d.includes(m))return m;const p=m.split("-")[0];if(d.includes(p))return p;if(m.startsWith("zh")&&d.includes("zh"))return"zh"}}return"es"}),[s,r]=R.useState(Fi[e]||Fi.es);R.useEffect(()=>{r(Fi[e]||Fi.es)},[e]);const i=R.useCallback(d=>{Fi[d]&&n(d)},[]),a=R.useCallback(d=>{const h=d.split(".");let f=s;for(const m of h)if(f&&typeof f=="object"&&m in f)f=f[m];else return d;return typeof f=="string"?f:d},[s]),c={currentLanguage:e,changeLanguage:i,t:a,translations:s,availableLanguages:[{code:"en",name:"English"},{code:"es",name:"Espaol"},{code:"de",name:"Deutsch"},{code:"zh",name:""},{code:"it",name:"Italiano"}]};return o.jsx(sS.Provider,{value:c,children:t})},ft=()=>{const t=R.useContext(sS);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t};function uF({isOpen:t,onClose:e}){const{t:n}=ft(),s=({to:r,children:i,disabled:a,icon:l})=>{const c=()=>{e&&e()};return a?o.jsxs("div",{className:"sidebar-item disabled",children:[l&&o.jsx("span",{className:"sidebar-icon",children:l}),i]}):o.jsxs(yP,{to:r,onClick:c,className:({isActive:d})=>d?"sidebar-item active":"sidebar-item",children:[l&&o.jsx("span",{className:"sidebar-icon",children:l}),i]})};return o.jsxs("aside",{className:`admin-sidebar ${t?"open":""}`,children:[o.jsx("div",{className:"brand",children:"FINENPROC"}),o.jsxs("nav",{children:[o.jsx(s,{to:"/admin",icon:"",children:n("nav.dashboard")}),o.jsx(s,{to:"/admin/usuarios",icon:"",children:n("nav.users")}),o.jsx("div",{className:"nav-section-title",children:n("nav.operations")}),o.jsx(s,{to:"/admin/operaciones/recargas",icon:"",children:n("nav.topups")}),o.jsx(s,{to:"/admin/operaciones/retiros",icon:"",children:n("nav.withdrawals")}),o.jsx(s,{to:"/admin/operaciones/inversiones",icon:"",children:n("nav.investments")}),o.jsx("div",{className:"nav-section-title",children:n("nav.others")}),o.jsx(s,{to:"/admin/proyectos",icon:"",children:n("nav.projects")}),o.jsx(s,{disabled:!0,icon:"",children:n("nav.settings")})]}),o.jsx("div",{className:"sidebar-footer",children:n("nav.adminPanel")})]})}function dF({admin:t,onToggleSidebar:e}){var m;const n=Ms(),{t:s,currentLanguage:r,changeLanguage:i,availableLanguages:a}=ft(),[l,c]=R.useState(!1),d=R.useRef(null);R.useEffect(()=>{const p=y=>{d.current&&!d.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=async()=>{try{await ou(Xn),n("/")}catch(p){console.error("Logout error",p)}},f=p=>{i(p),c(!1)};return o.jsxs("header",{className:"admin-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("button",{className:"menu-button",type:"button","aria-label":s("common.menu")||"Menu",onClick:e,children:""}),o.jsxs("h1",{children:[o.jsx("span",{className:"header-title-main",children:"FINENPROC"}),o.jsx("span",{className:"header-title-badge",children:"ADMIN"})]})]}),o.jsxs("div",{className:"header-right",children:[o.jsxs("div",{className:"language-dropdown-container",ref:d,children:[o.jsxs("button",{className:"btn-ghost language-btn",onClick:()=>c(!l),title:s("header.language"),children:[" ",((m=a.find(p=>p.code===r))==null?void 0:m.name)||"Espaol"]}),l&&o.jsxs("div",{className:"language-dropdown",children:[o.jsx("div",{className:"language-dropdown-header",children:s("language.select")}),a.map(p=>o.jsx("button",{className:`language-option ${r===p.code?"active":""}`,onClick:()=>f(p.code),children:p.name},p.code))]})]}),(t==null?void 0:t.email)&&o.jsx("div",{className:"admin-email",children:t.email}),o.jsx("button",{className:"btn-ghost",onClick:h,children:s("nav.logout")})]})]})}function $r({children:t,admin:e}){const[n,s]=R.useState(!1),r=()=>s(a=>!a),i=()=>s(!1);return o.jsxs("div",{className:"admin-root",children:[o.jsx(uF,{isOpen:n,onClose:i}),o.jsxs("div",{className:"admin-main",children:[o.jsx(dF,{admin:e,onToggleSidebar:r}),o.jsx("main",{className:"admin-content",children:t})]}),o.jsx("div",{className:`sidebar-overlay ${n?"show":""}`,onClick:i,"aria-hidden":!n})]})}function hF({title:t,children:e,className:n=""}){return o.jsxs("div",{className:"card "+n,children:[t&&o.jsx("div",{className:"card-title",children:t}),o.jsx("div",{className:"card-body",children:e})]})}function fF(){const[t,e]=R.useState({totalUsers:0,activeUsers:0,pendingTopups:0,approvedTopups:0,rejectedTopups:0,totalTopups:0,pendingWithdrawals:0,activeInvestments:0,totalInvested:0,recentTransactions:[]}),[n,s]=R.useState(!0),[r,i]=R.useState(null),a=async()=>{try{s(!0),i(null);const d=(await ke(de(Q,"users"))).docs.map(N=>N.data()),h=d.length,f=d.filter(N=>N.status==="active").length,p=(await ke(de(Q,"topups"))).docs.map(N=>N.data()),y=p.filter(N=>N.status==="pending").length,b=p.filter(N=>N.status==="approved").length,T=p.filter(N=>N.status==="rejected").length,x=p.length,j=(await ke(de(Q,"withdrawals"))).docs.map(N=>N.data()).filter(N=>N.status==="pending").length,P=Pe(de(Q,"investments"),$e("status","==","active")),_=(await ke(P)).docs.map(N=>N.data()),v=_.length,C=_.reduce((N,F)=>N+(F.amount||0),0),E=Pe(de(Q,"transactions"),Gn("createdAt","desc")),D=(await ke(E)).docs.slice(0,10).map(N=>({id:N.id,...N.data()}));e({totalUsers:h,activeUsers:f,pendingTopups:y,approvedTopups:b,rejectedTopups:T,totalTopups:x,pendingWithdrawals:j,activeInvestments:v,totalInvested:C,recentTransactions:D})}catch(c){console.error("Error en useDashboardKPIs:",c),i(c.message)}finally{s(!1)}};return R.useEffect(()=>{a()},[]),{kpis:t,loading:n,error:r,refetch:()=>a()}}function mF({children:t,variant:e="default"}){return o.jsx("span",{className:"badge badge-"+e,children:t})}function pF({open:t,onClose:e,children:n}){return t?o.jsx("div",{className:"modal-backdrop",onClick:e,children:o.jsx("div",{className:"modal",onClick:s=>s.stopPropagation(),children:n})}):null}const gF=async(t={})=>{var e;try{const n=[Gn("createdAt","desc")];t.status&&n.unshift($e("status","==",t.status)),t.userId&&n.unshift($e("userId","==",t.userId));const s=Pe(de(Q,"topups"),...n),r=await ke(s),i=[];for(const a of r.docs){const l=a.data();let c=null;if(l.userId){const h=ae(Q,"users",l.userId),f=await Kt(h);f.exists()&&(c={uid:f.id,email:f.data().email,displayName:f.data().displayName||"Sin nombre"})}let d=null;if(l.methodId){const h=ae(Q,"rechargeMethods",l.methodId),f=await Kt(h);f.exists()&&(d={id:f.id,name:f.data().name,icon:f.data().icon})}i.push({topupId:a.id,id:a.id,amount:l.amount,status:l.status,createdAt:(e=l.createdAt)==null?void 0:e.toDate(),user:c,method:d,receiptUrl:l.receiptUrl,userId:l.userId,methodId:l.methodId})}return{success:!0,data:i}}catch(n){return console.error("Error fetching topups:",n),{success:!1,error:n.message}}},vF=()=>{const[t,e]=R.useState([]),[n,s]=R.useState([]),[r,i]=R.useState({status:"",searchQuery:""}),[a,l]=R.useState(!0),[c,d]=R.useState(null);return R.useEffect(()=>{(async()=>{l(!0),d(null);const m=await gF({});m.success?e(m.data||[]):(e([]),d(m.error||"Error al cargar recargas")),l(!1)})()},[]),R.useEffect(()=>{let f=t;if(r.status&&(f=f.filter(m=>m.status===r.status)),r.searchQuery.trim()){const m=r.searchQuery.toLowerCase();f=f.filter(p=>{var y,b,T,x;return((b=(y=p.user)==null?void 0:y.email)==null?void 0:b.toLowerCase().includes(m))||((x=(T=p.user)==null?void 0:T.displayName)==null?void 0:x.toLowerCase().includes(m))})}s(f)},[t,r.status,r.searchQuery]),{allTopups:t,topups:n,filters:r,setFilters:{status:f=>i(m=>({...m,status:f})),searchQuery:f=>{i(m=>({...m,searchQuery:f}))}},loading:a,error:c}};function yF(){var y,b,T;const[t,e]=R.useState(null),{allTopups:n,topups:s,filters:r,setFilters:i,loading:a,error:l}=vF(),c=r.status?r.status:"all",d=[{value:"all",label:"Todas",count:n.length},{value:"pending",label:"Pendientes",count:n.filter(x=>x.status==="pending").length},{value:"approved",label:"Aprobadas",count:n.filter(x=>x.status==="approved").length},{value:"rejected",label:"Rechazadas",count:n.filter(x=>x.status==="rejected").length}],h=x=>{const w={pending:{variant:"pending",label:"Pendiente"},approved:{variant:"success",label:"Aprobada"},rejected:{variant:"rejected",label:"Rechazada"}},S=w[x]||w.pending;return o.jsx(mF,{variant:S.variant,children:S.label})},f=x=>new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(x),m=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(x),p=(filter==="all",s);return o.jsxs("div",{className:"admin-topups",children:[o.jsx("div",{className:"topups-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:"Gestin de Recargas"}),o.jsx("p",{className:"page-subtitle",children:"Administra y revisa todas las solicitudes de recarga"})]})}),o.jsx("div",{className:"topups-filters",children:d.map(x=>o.jsxs("button",{className:`filter-btn ${c===x.value?"active":""}`,onClick:()=>i.status(x.value==="all"?"":x.value),children:[x.label,o.jsx("span",{className:"filter-count",children:x.count})]},x.value))}),o.jsx(hF,{className:"topups-table-card",children:a?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-title",children:"Cargando recargas"}),o.jsx("div",{className:"empty-state-text",children:"Obteniendo datos de Firestore"})]}):l?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-title",children:"Error al cargar"}),o.jsx("div",{className:"empty-state-text",children:l})]}):p.length>0?o.jsx("div",{className:"table-wrap",children:o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Usuario"}),o.jsx("th",{children:"Mtodo"}),o.jsx("th",{children:"Monto"}),o.jsx("th",{children:"Estado"}),o.jsx("th",{children:"Fecha"}),o.jsx("th",{children:"Acciones"})]})}),o.jsx("tbody",{children:p.map(x=>{var w,S,j,P,O,_;return o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{className:"user-cell",children:[o.jsx("div",{className:"user-avatar",children:(((w=x.user)==null?void 0:w.displayName)||((S=x.user)==null?void 0:S.email)||"U")[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"user-name",children:((j=x.user)==null?void 0:j.displayName)||"Sin nombre"}),o.jsx("div",{className:"user-email",children:((P=x.user)==null?void 0:P.email)||"Email no disponible"})]})]})}),o.jsx("td",{children:o.jsxs("div",{className:"method-cell",children:[o.jsx("span",{className:"method-icon",children:((O=x.method)==null?void 0:O.icon)||""}),((_=x.method)==null?void 0:_.name)||"Mtodo no disponible"]})}),o.jsx("td",{className:"amount-cell",children:m(x.amount)}),o.jsx("td",{children:h(x.status)}),o.jsx("td",{className:"date-cell",children:f(x.createdAt||new Date)}),o.jsx("td",{children:o.jsx("button",{className:"btn-ghost btn-sm",onClick:()=>e(x),children:"Ver detalles"})})]},x.id)})})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-title",children:"No hay recargas"}),o.jsx("div",{className:"empty-state-text",children:"No se encontraron recargas con el filtro seleccionado"})]})}),t&&o.jsxs(pF,{open:!!t,onClose:()=>e(null),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{className:"modal-title",children:"Detalles de Recarga"}),o.jsx("button",{className:"modal-close",onClick:()=>e(null),children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"ID de transaccin"}),o.jsx("span",{className:"detail-value",children:t.id})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Usuario"}),o.jsx("span",{className:"detail-value",children:((y=t.user)==null?void 0:y.displayName)||"Sin nombre"})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Email"}),o.jsx("span",{className:"detail-value",children:((b=t.user)==null?void 0:b.email)||"Email no disponible"})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Monto"}),o.jsx("span",{className:"detail-value",children:m(t.amount)})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Mtodo"}),o.jsx("span",{className:"detail-value",children:((T=t.method)==null?void 0:T.name)||"Mtodo no disponible"})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Estado"}),o.jsx("span",{className:"detail-value",children:h(t.status)})]}),o.jsxs("div",{className:"detail-row",children:[o.jsx("span",{className:"detail-label",children:"Fecha"}),o.jsx("span",{className:"detail-value",children:f(t.createdAt||new Date)})]})]}),o.jsx("div",{className:"modal-footer",children:o.jsx("button",{className:"btn btn-secondary",onClick:()=>e(null),children:"Cerrar"})})]})]})}function wF(){return o.jsxs("div",{className:"admin-not-authorized",children:[o.jsx("h2",{children:"No Autorizado"}),o.jsx("p",{children:"No tienes permiso para acceder al rea de administracin."}),o.jsxs("p",{children:[o.jsx(pl,{to:"/login",children:"Ir a Login"})," o ",o.jsx(pl,{to:"/register",children:"Registrarse"})]})]})}const rS="/assets/Logo-D466UPiE.png";function _F(){const{t}=ft(),[e,n]=R.useState(""),[s,r]=R.useState(""),[i,a]=R.useState(null),[l,c]=R.useState(!1),d=Ms(),h=async p=>{const y=ae(Q,"users",p.uid),b=await Kt(y);if(!b.exists())throw await ou(Xn),new Error(t("auth.profileNotFound"));const{role:T,status:x}=b.data();if(T!=="admin")throw await ou(Xn),new Error(t("auth.notAuthorizedMessage"));if(x!=="active")throw await ou(Xn),new Error(t("auth.accountNotActive"));d("/admin",{replace:!0}),console.log(" Login exitoso:",{uid:p.uid,role:T,status:x})},f=async p=>{p.preventDefault(),c(!0),a(null);try{const y=await VI(Xn,e.trim(),s);await h(y.user)}catch(y){a(y.message),console.error("Error en login:",y)}finally{c(!1)}},m=async()=>{c(!0),a(null);try{const p=new fs,y=await _2(Xn,p);await h(y.user)}catch(p){a(p.message),console.error("Error en login Google:",p)}finally{c(!1)}};return o.jsx("div",{className:"auth-wrap",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsx("img",{src:rS,alt:"Logo",className:"auth-logo"}),o.jsx("h1",{className:"auth-title",children:t("auth.login")}),o.jsx("p",{className:"auth-subtitle",children:t("auth.adminPanel")})]}),o.jsxs("form",{onSubmit:f,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:o.jsx("span",{children:t("auth.email")})}),o.jsx("input",{id:"email",type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"tu@email.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:o.jsx("span",{children:t("auth.password")})}),o.jsx("input",{id:"password",type:"password",value:s,onChange:p=>r(p.target.value),placeholder:"",required:!0})]}),i&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{className:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),i]}),o.jsx("button",{className:"btn btn-primary btn-large",type:"submit",disabled:l,children:l?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),t("auth.signingIn")]}):t("auth.login")})]}),o.jsx("div",{className:"auth-divider",children:o.jsx("span",{children:t("auth.orContinueWith")})}),o.jsxs("button",{className:"btn btn-google",onClick:m,disabled:l,type:"button",children:[o.jsxs("svg",{viewBox:"0 0 24 24",className:"google-icon",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),t("auth.continueWithGoogle")]}),o.jsx("div",{className:"auth-links",children:o.jsxs("p",{children:[t("auth.noAccount")," ",o.jsx(pl,{to:"/register",children:t("auth.registerHere")})]})})]}),o.jsxs("div",{className:"auth-background",children:[o.jsx("div",{className:"gradient-blob"}),o.jsx("div",{className:"gradient-blob"})]})]})})}function xF(){const{t}=ft(),[e,n]=R.useState(""),[s,r]=R.useState(""),[i,a]=R.useState(""),[l,c]=R.useState(null),[d,h]=R.useState(!1),[f,m]=R.useState(!1),p=Ms(),y=async b=>{if(b.preventDefault(),s!==i){c(t("auth.passwordMismatch"));return}if(s.length<6){c(t("auth.passwordMinLength"));return}h(!0),c(null),m(!1);let T=null,x=!1;try{try{T=await YR(Xn,e.trim(),s),x=!0}catch(S){if((S==null?void 0:S.code)==="auth/email-already-in-use")T=await VI(Xn,e.trim(),s),x=!1;else throw S}const w=T.user;console.log(x?" Usuario creado en Auth:":" Usuario ya exista en Auth (sign-in OK):",w.uid);try{await A0(ae(Q,"users",w.uid),{uid:w.uid,email:w.email,role:"admin",status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log(" Documento Firestore creado exitosamente"),m(!0),setTimeout(()=>p("/admin",{replace:!0}),1500)}catch(S){console.error(" Error al crear documento Firestore:",S);try{x&&await e2(w)}catch(j){console.error(" Error al eliminar usuario recin creado:",j)}throw new Error("Error al crear perfil en Firestore. Revisa permisos/reglas.")}}catch(w){console.error("Error en registro:",w),(w==null?void 0:w.code)==="auth/wrong-password"||(w==null?void 0:w.code)==="auth/invalid-credential"?c(t("auth.emailExistsWrongPassword")):(w==null?void 0:w.code)==="auth/user-not-found"?c(t("auth.userNotFound")):c(w.message||t("common.error"))}finally{h(!1)}};return o.jsx("div",{className:"auth-wrap",children:o.jsxs("div",{className:"auth-container",children:[o.jsxs("div",{className:"auth-card",children:[o.jsxs("div",{className:"auth-header",children:[o.jsx("img",{src:rS,alt:"Logo",className:"auth-logo"}),o.jsx("h1",{className:"auth-title",children:t("auth.createAdminAccount")}),o.jsx("p",{className:"auth-subtitle",children:t("auth.registerNewAdmin")})]}),f&&o.jsxs("div",{className:"auth-success",children:[o.jsx("svg",{className:"success-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})}),t("auth.adminRegisteredSuccess")]}),o.jsxs("form",{onSubmit:y,className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:o.jsx("span",{children:t("auth.email")})}),o.jsx("input",{id:"email",type:"email",value:e,onChange:b=>n(b.target.value),placeholder:"admin@tuempresa.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:o.jsx("span",{children:t("auth.password")})}),o.jsx("input",{id:"password",type:"password",value:s,onChange:b=>r(b.target.value),placeholder:"",required:!0}),o.jsx("span",{className:"password-hint",children:t("auth.passwordHint")})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"confirmPassword",children:o.jsx("span",{children:t("auth.confirmPassword")})}),o.jsx("input",{id:"confirmPassword",type:"password",value:i,onChange:b=>a(b.target.value),placeholder:"",required:!0})]}),l&&o.jsxs("div",{className:"auth-error",children:[o.jsxs("svg",{className:"error-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),l]}),o.jsx("button",{className:"btn btn-primary btn-large",type:"submit",disabled:d,children:d?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),t("auth.registering")]}):t("auth.createAccount")})]}),o.jsx("div",{className:"auth-links",children:o.jsxs("p",{children:[t("auth.hasAccount")," ",o.jsx(pl,{to:"/login",children:t("auth.loginHere")})]})})]}),o.jsxs("div",{className:"auth-background",children:[o.jsx("div",{className:"gradient-blob"}),o.jsx("div",{className:"gradient-blob"})]})]})})}function bF(){const{kpis:t,loading:e}=fF();Ms();const{t:n}=ft(),s=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0),r=i=>i?new Date(i).toLocaleDateString("es-MX",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-";return e?o.jsx("div",{className:"dashboard-loading",children:o.jsx("div",{children:n("common.loading")})}):o.jsxs("div",{className:"admin-dashboard-page",children:[o.jsxs("div",{className:"dashboard-header",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"dashboard-title",children:n("dashboard.title")}),o.jsx("p",{className:"dashboard-subtitle",children:n("dashboard.subtitle")})]}),o.jsx("div",{className:"dashboard-meta",children:o.jsxs("span",{className:"last-updated",children:[n("common.updated"),": ",n("common.today")]})})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.users")]}),o.jsxs("div",{className:"kpi-grid kpi-grid-2",children:[o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.totalUsers")}),o.jsx("div",{className:"kpi-value",children:t.totalUsers})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.activeUsers")}),o.jsx("div",{className:"kpi-value",style:{color:"#22c55e"},children:t.activeUsers})]})]})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.topups")]}),o.jsxs("div",{className:"kpi-grid kpi-grid-3",children:[o.jsxs("div",{className:"kpi-card alert",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.pending")}),o.jsx("div",{className:"kpi-value",style:{color:"#f59e0b"},children:t.pendingTopups})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.approved")}),o.jsx("div",{className:"kpi-value",style:{color:"#22c55e"},children:t.approvedTopups})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.total")}),o.jsx("div",{className:"kpi-value",children:t.totalTopups})]})]})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.withdrawals")]}),o.jsx("div",{className:"kpi-grid kpi-grid-1",children:o.jsxs("div",{className:"kpi-card alert",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.pendingWithdrawals")}),o.jsx("div",{className:"kpi-value",style:{color:"#f59e0b"},children:t.pendingWithdrawals})]})})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.investments")]}),o.jsxs("div",{className:"kpi-grid kpi-grid-2",children:[o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.activeInvestments")}),o.jsx("div",{className:"kpi-value",children:t.activeInvestments})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:n("dashboard.investedCapital")}),o.jsx("div",{className:"kpi-value-currency",children:s(t.totalInvested)})]})]})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.recentTransactions")]}),o.jsx("div",{className:"transactions-card",children:t.recentTransactions.length>0?o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{className:"transactions-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:n("dashboard.type")}),o.jsx("th",{children:n("dashboard.amount")}),o.jsx("th",{children:n("dashboard.user")}),o.jsx("th",{children:n("dashboard.date")})]})}),o.jsx("tbody",{children:t.recentTransactions.map(i=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("span",{className:"tx-type",children:i.type||"transfer"})}),o.jsx("td",{className:"amount",children:s(i.amount)}),o.jsx("td",{className:"user-email",children:i.userEmail||n("dashboard.userNotAvailable")}),o.jsx("td",{className:"date",children:r(i.createdAt)})]},i.id))})]})}):o.jsx("div",{className:"empty-state",children:n("dashboard.noRecentTransactions")})})]}),o.jsxs("div",{className:"kpi-section",children:[o.jsxs("h2",{className:"section-title",children:[" ",n("dashboard.operationalAlerts")]}),o.jsxs("div",{className:"alerts-container",children:[t.pendingTopups>0&&o.jsxs("div",{className:"alert-item alert-warning",children:[o.jsx("span",{className:"alert-icon",children:""}),o.jsxs("span",{className:"alert-text",children:[t.pendingTopups," ",n("dashboard.pendingTopupsAlert")]})]}),t.pendingWithdrawals>0&&o.jsxs("div",{className:"alert-item alert-warning",children:[o.jsx("span",{className:"alert-icon",children:""}),o.jsxs("span",{className:"alert-text",children:[t.pendingWithdrawals," ",n("dashboard.pendingWithdrawalsAlert")]})]}),t.activeInvestments>0&&o.jsxs("div",{className:"alert-item alert-info",children:[o.jsx("span",{className:"alert-icon",children:""}),o.jsxs("span",{className:"alert-text",children:[t.activeInvestments," ",n("dashboard.activeInvestmentsAlert")]})]}),t.pendingTopups===0&&t.pendingWithdrawals===0&&o.jsxs("div",{className:"alert-item alert-success",children:[o.jsx("span",{className:"alert-icon",children:""}),o.jsx("span",{className:"alert-text",children:n("dashboard.systemOperational")})]})]})]})]})}function EF(t={}){const[e,n]=R.useState([]),[s,r]=R.useState(!0),[i,a]=R.useState(null),[l,c]=R.useState(0),d=async()=>{try{r(!0),a(null);let f=[];t.status&&t.status!=="all"&&f.push($e("status","==",t.status));const m=Pe(de(Q,"users"),...f,Gn("createdAt","desc")),y=(await ke(m)).docs.map(T=>({uid:T.id,...T.data()}));let b=y;if(t.search){const T=t.search.toLowerCase();b=y.filter(x=>{var w,S;return((w=x.email)==null?void 0:w.toLowerCase().includes(T))||((S=x.displayName)==null?void 0:S.toLowerCase().includes(T))})}n(b),c(b.length)}catch(f){console.error("Error en useAdminUsers:",f),a(f.message)}finally{r(!1)}};return R.useEffect(()=>{d()},[t.status,t.search]),{users:e,loading:s,error:i,total:l,refetch:()=>d()}}function IF(t){const[e,n]=R.useState(null),[s,r]=R.useState(null),[i,a]=R.useState([]),[l,c]=R.useState([]),[d,h]=R.useState([]),[f,m]=R.useState([]),[p,y]=R.useState(!0),[b,T]=R.useState(null),x=async()=>{if(!t){y(!1);return}try{y(!0),T(null);const S=ae(Q,"users",t),j=await Kt(S);if(!j.exists()){T("Usuario no encontrado"),y(!1);return}n({uid:t,...j.data()});const P=ae(Q,"users",t,"wallets",t),O=await Kt(P);O.exists()&&r(O.data());const _=Pe(de(Q,"investments"),$e("userId","==",t)),v=await ke(_);a(v.docs.map(L=>({id:L.id,...L.data()})));const C=Pe(de(Q,"topups"),$e("userId","==",t)),E=await ke(C);c(E.docs.map(L=>({id:L.id,...L.data()})));const A=Pe(de(Q,"withdrawals"),$e("userId","==",t)),D=await ke(A);h(D.docs.map(L=>({id:L.id,...L.data()})));const N=Pe(de(Q,"transactions"),$e("userId","==",t)),F=await ke(N);m(F.docs.map(L=>({id:L.id,...L.data()})))}catch(S){console.error("Error en useUserDetail:",S),T(S.message)}finally{y(!1)}};return R.useEffect(()=>{x()},[t]),{user:e,wallet:s,investments:i,topups:l,withdrawals:d,transactions:f,loading:p,error:b,refetch:()=>x()}}function TF({users:t,loading:e,onSelectUser:n}){const{t:s,currentLanguage:r}=ft(),i=r==="es"?"es-ES":r==="de"?"de-DE":r==="zh"?"zh-CN":r==="it"?"it-IT":"en-US";if(e)return o.jsx("div",{className:"usuarios-loading",children:o.jsx("div",{children:s("users.loadingUsers")})});if(t.length===0)return o.jsx("div",{className:"usuarios-empty",children:o.jsx("div",{children:s("users.noUsersFound")})});const a=l=>l?new Date(l).toLocaleDateString(i):"-";return o.jsxs("div",{className:"usuarios-list",children:[o.jsx("div",{className:"usuarios-table-desktop",children:o.jsxs("table",{className:"usuarios-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:s("users.email")}),o.jsx("th",{children:s("users.name")}),o.jsx("th",{children:s("users.status")}),o.jsx("th",{children:s("users.role")}),o.jsx("th",{children:s("users.registrationDate")}),o.jsx("th",{children:s("users.action")})]})}),o.jsx("tbody",{children:t.map(l=>o.jsxs("tr",{className:"usuario-row",children:[o.jsx("td",{className:"email-cell",children:l.email}),o.jsx("td",{children:l.displayName||"-"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${l.status}`,children:l.status==="active"?s("status.active"):s("status.inactive")})}),o.jsx("td",{children:l.role||s("users.investor")}),o.jsx("td",{children:a(l.createdAt)}),o.jsx("td",{children:o.jsx("button",{className:"btn-view-detail",onClick:()=>n(l.uid),children:s("users.viewDetail")})})]},l.uid))})]})}),o.jsx("div",{className:"usuarios-cards-mobile",children:t.map(l=>o.jsxs("div",{className:"usuario-card",children:[o.jsxs("div",{className:"usuario-card-header",children:[o.jsx("span",{className:"usuario-card-email",children:l.email}),o.jsx("span",{className:`status-badge status-${l.status}`,children:l.status==="active"?s("status.active"):s("status.inactive")})]}),o.jsxs("div",{className:"usuario-card-body",children:[o.jsxs("div",{className:"usuario-card-row",children:[o.jsx("span",{className:"usuario-card-label",children:s("users.name")}),o.jsx("span",{className:"usuario-card-value",children:l.displayName||"-"})]}),o.jsxs("div",{className:"usuario-card-row",children:[o.jsx("span",{className:"usuario-card-label",children:s("users.role")}),o.jsx("span",{className:"usuario-card-value",children:l.role||s("users.investor")})]}),o.jsxs("div",{className:"usuario-card-row",children:[o.jsx("span",{className:"usuario-card-label",children:s("users.registrationDate")}),o.jsx("span",{className:"usuario-card-value",children:a(l.createdAt)})]})]}),o.jsx("div",{className:"usuario-card-footer",children:o.jsx("button",{className:"btn-view-detail-card",onClick:()=>n(l.uid),children:s("users.viewDetail")})})]},l.uid))})]})}const SF=t=>{if(t==null)return 0;if(typeof t=="number")return Number.isFinite(t)?t:0;const e=String(t).trim();if(!e)return 0;const n=e.replace(/,/g,""),s=Number(n);return Number.isFinite(s)?s:0},Pl=t=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(SF(t));function iS(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{approve:async(i,a,l)=>{var c,d;try{e(!0),s(null);let h=null;try{const f=Pe(de(Q,"transactions"),$e("topupId","==",i),rs(1));h=((d=(c=(await ke(f)).docs)==null?void 0:c[0])==null?void 0:d.id)||null}catch{}return await Ai(Q,async f=>{const m=ae(Q,"topups",i),p=await f.get(m);if(!p.exists())throw new Error("Topup no encontrado");const y=p.data(),b=y==null?void 0:y.status;if(b==="approved")return;if(b!=="pending")throw new Error(`No se puede aprobar un topup con status: ${b}`);const T=y==null?void 0:y.userId,x=Number(y==null?void 0:y.amount),w=(y==null?void 0:y.transactionId)||h||null;if(!T)throw new Error("Topup invlido: falta userId");if(!Number.isFinite(x)||x<=0)throw new Error("Topup invlido: amount debe ser > 0");const S=ae(Q,"users",T,"wallets",T),j=await f.get(S),P=w?ae(Q,"transactions",w):null,O=P?await f.get(P):null,_=O!=null&&O.exists()?O.data():null,v=_!=null&&_.createdAt&&typeof _.createdAt!="string"?_.createdAt:y!=null&&y.createdAt&&typeof y.createdAt!="string"?y.createdAt:se(),C=(_==null?void 0:_.currency)||(y==null?void 0:y.currency)||"USD",E=(_==null?void 0:_.methodId)||(y==null?void 0:y.methodId)||null,A=(_==null?void 0:_.methodName)||(y==null?void 0:y.methodName)||(y==null?void 0:y.method)||null,D=(_==null?void 0:_.methodType)||(y==null?void 0:y.methodType)||null,N=(_==null?void 0:_.methodDetailsText)||(y==null?void 0:y.methodDetailsText)||null,F=(_==null?void 0:_.proofUrl)||(y==null?void 0:y.proofUrl)||null,L=(_==null?void 0:_.proofPath)||(y==null?void 0:y.proofPath)||null,ee=(_==null?void 0:_.proofFileName)||(y==null?void 0:y.proofFileName)||null,z=(_==null?void 0:_.proofContentType)||(y==null?void 0:y.proofContentType)||null,M=typeof((_==null?void 0:_.proofSize)??(y==null?void 0:y.proofSize))=="number"?(_==null?void 0:_.proofSize)??(y==null?void 0:y.proofSize):null,W=(_==null?void 0:_.description)||(y!=null&&y.methodName?`Recarga aprobada (${y.methodName})`:"Recarga aprobada"),K=(_==null?void 0:_.reference)||i,U=(_==null?void 0:_.topupId)||i,te=ae(de(Q,"transactions"));j.exists()?f.update(S,{balance:ha(x),updatedAt:se()}):f.set(S,{uid:T,balance:x,createdAt:se(),updatedAt:se()}),f.update(m,{status:"approved",approvedAt:se(),approvedBy:a}),f.set(te,{userId:T,amount:x,currency:C,methodId:E,methodName:A,methodType:D,methodDetailsText:N,proofUrl:F,proofPath:L,proofFileName:ee,proofContentType:z,proofSize:M,type:"deposit",status:"approved",description:W,reference:K,topupId:U,createdAt:v,approvedAt:se(),approvedBy:a});const he=ae(de(Q,"auditLogs"));f.set(he,{action:"APPROVE_TOPUP",adminUid:a,adminEmail:l,targetUserId:T,targetId:i,status:"SUCCESS",metadata:{amount:x,topupId:i},timestamp:se()});const Fe=ae(de(Q,"users",T,"notifications"));f.set(Fe,{userId:T,type:"transaction",title:"Recarga aprobada",message:`Tu recarga de ${Pl(x)} ${C} fue aprobada.`,topupId:U,amount:x,currency:C,read:!1,createdAt:se()})}),console.log(" Recarga aprobada:",i),!0}catch(h){return console.error(" Error al aprobar recarga:",h),s((h==null?void 0:h.message)||String(h)),!1}finally{e(!1)}},loading:t,error:n}}function aS(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{reject:async(i,a,l,c,d)=>{var h,f;try{e(!0),s(null);let m=null;try{const p=Pe(de(Q,"transactions"),$e("topupId","==",i),rs(1));m=((f=(h=(await ke(p)).docs)==null?void 0:h[0])==null?void 0:f.id)||null}catch{}return await Ai(Q,async p=>{const y=ae(Q,"topups",i),b=await p.get(y);if(!b.exists())throw new Error("Topup no encontrado");const T=b.data(),x=T==null?void 0:T.status;if(x==="rejected")return;if(x!=="pending")throw new Error(`No se puede rechazar un topup con status: ${x}`);const w=(T==null?void 0:T.userId)||a,S=Number(T==null?void 0:T.amount),j=(T==null?void 0:T.transactionId)||m||null;if(!w)throw new Error("Topup invlido: falta userId");const P=j?ae(Q,"transactions",j):null,O=P?await p.get(P):null,_=O!=null&&O.exists()?O.data():null,v=_!=null&&_.createdAt&&typeof _.createdAt!="string"?_.createdAt:T!=null&&T.createdAt&&typeof T.createdAt!="string"?T.createdAt:se(),C=(_==null?void 0:_.currency)||(T==null?void 0:T.currency)||"USD",E=(_==null?void 0:_.methodId)||(T==null?void 0:T.methodId)||null,A=(_==null?void 0:_.methodName)||(T==null?void 0:T.methodName)||(T==null?void 0:T.method)||null,D=(_==null?void 0:_.methodType)||(T==null?void 0:T.methodType)||null,N=(_==null?void 0:_.methodDetailsText)||(T==null?void 0:T.methodDetailsText)||null,F=(_==null?void 0:_.proofUrl)||(T==null?void 0:T.proofUrl)||null,L=(_==null?void 0:_.proofPath)||(T==null?void 0:T.proofPath)||null,ee=(_==null?void 0:_.proofFileName)||(T==null?void 0:T.proofFileName)||null,z=(_==null?void 0:_.proofContentType)||(T==null?void 0:T.proofContentType)||null,M=typeof((_==null?void 0:_.proofSize)??(T==null?void 0:T.proofSize))=="number"?(_==null?void 0:_.proofSize)??(T==null?void 0:T.proofSize):null,W=(_==null?void 0:_.description)||(T!=null&&T.methodName?`Recarga rechazada (${T.methodName})`:"Recarga rechazada"),K=(_==null?void 0:_.reference)||i,U=(_==null?void 0:_.topupId)||i,te=ae(de(Q,"transactions"));p.update(y,{status:"rejected",rejectedAt:se(),rejectedBy:c,rejectionReason:l}),p.set(te,{userId:w,amount:Number.isFinite(S)?S:null,currency:C,methodId:E,methodName:A,methodType:D,methodDetailsText:N,proofUrl:F,proofPath:L,proofFileName:ee,proofContentType:z,proofSize:M,type:"deposit",status:"rejected",description:W,reference:K,topupId:U,createdAt:v,rejectionReason:l,rejectedAt:se(),rejectedBy:c});const he=ae(de(Q,"auditLogs"));p.set(he,{action:"REJECT_TOPUP",adminUid:c,adminEmail:d,targetUserId:w,targetId:i,status:"SUCCESS",reason:l,timestamp:se()})}),console.log(" Recarga rechazada:",i),!0}catch(m){return console.error(" Error al rechazar recarga:",m),s((m==null?void 0:m.message)||String(m)),!1}finally{e(!1)}},loading:t,error:n}}function fh({isOpen:t,title:e,message:n,actionLabel:s,onConfirm:r,onCancel:i,loading:a,showReasonInput:l,reasonPlaceholder:c}){const[d,h]=R.useState(""),{t:f}=ft(),m=()=>{if(l&&!d.trim()){alert(f("common.enterReason"));return}r(d),h("")};return t?o.jsx("div",{className:"action-modal-overlay",onClick:i,children:o.jsxs("div",{className:"action-modal",onClick:p=>p.stopPropagation(),children:[o.jsx("h2",{className:"action-modal-title",children:e}),o.jsx("p",{className:"action-modal-message",children:n}),l&&o.jsx("textarea",{className:"action-modal-textarea",placeholder:c||f("common.enterReasonPlaceholder"),value:d,onChange:p=>h(p.target.value),disabled:a}),o.jsxs("div",{className:"action-modal-footer",children:[o.jsx("button",{className:"btn-cancel",onClick:i,disabled:a,children:f("common.cancel")}),o.jsx("button",{className:"btn-confirm",onClick:m,disabled:a,children:a?f("common.processing"):s})]})]})}):null}function NF({isOpen:t,user:e,wallet:n,investments:s,topups:r,withdrawals:i,transactions:a,loading:l,onClose:c,adminData:d,onActionComplete:h}){const[f,m]=R.useState("perfil"),[p,y]=R.useState(null),[b,T]=R.useState({isOpen:!1,type:null}),{approve:x,loading:w}=iS(),{reject:S,loading:j}=aS(),{t:P}=ft();if(!t)return null;const O=async E=>{if(!p)return;await x(p.id,d.uid,d.email)&&(T({isOpen:!1,type:null}),y(null),h==null||h())},_=async E=>{if(!p)return;await S(p.id,e.uid,E,d.uid,d.email)&&(T({isOpen:!1,type:null}),y(null),h==null||h())},v=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(E||0),C=E=>E?new Date(E).toLocaleDateString("es-MX"):"-";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"usuario-detail-overlay",onClick:c}),o.jsxs("div",{className:"usuario-detail-drawer",children:[o.jsxs("div",{className:"drawer-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h2",{className:"drawer-title",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||P("users.user")}),o.jsx("p",{className:"drawer-email",children:e==null?void 0:e.email}),o.jsxs("div",{className:"header-badges",children:[o.jsx("span",{className:`status-badge status-${e==null?void 0:e.status}`,children:(e==null?void 0:e.status)==="active"?` ${P("status.active")}`:` ${P("status.inactive")}`}),o.jsx("span",{className:"role-badge",children:(e==null?void 0:e.role)||"Investor"})]})]}),o.jsx("button",{className:"btn-close",onClick:c,"aria-label":P("common.close"),children:""})]}),l?o.jsx("div",{className:"drawer-loading",children:P("users.loadingDetail")}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"drawer-tabs",children:[o.jsxs("button",{className:`tab-btn ${f==="perfil"?"active":""}`,onClick:()=>m("perfil"),children:[" ",P("users.tabs.summary")]}),o.jsxs("button",{className:`tab-btn ${f==="wallet"?"active":""}`,onClick:()=>m("wallet"),children:[" ",P("users.tabs.wallet")]}),o.jsxs("button",{className:`tab-btn ${f==="inversiones"?"active":""}`,onClick:()=>m("inversiones"),children:[" ",P("users.tabs.investments")]}),o.jsxs("button",{className:`tab-btn ${f==="recargas"?"active":""}`,onClick:()=>m("recargas"),children:[" ",P("users.tabs.topups")]}),o.jsxs("button",{className:`tab-btn ${f==="retiros"?"active":""}`,onClick:()=>m("retiros"),children:[" ",P("users.tabs.withdrawals")]}),o.jsxs("button",{className:`tab-btn ${f==="transacciones"?"active":""}`,onClick:()=>m("transacciones"),children:[" ",P("users.tabs.transactions")]})]}),o.jsxs("div",{className:"drawer-content",children:[f==="perfil"&&e&&o.jsxs("div",{className:"tab-pane",children:[o.jsxs("div",{className:"summary-cards",children:[o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"card-label",children:P("users.email")}),o.jsx("div",{className:"card-value accent",children:e.email})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"card-label",children:P("users.name")}),o.jsx("div",{className:"card-value",children:e.displayName||""})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"card-label",children:P("users.status")}),o.jsx("div",{children:o.jsx("span",{className:`status-badge status-${e.status}`,children:e.status==="active"?P("status.active"):P("status.inactive")})})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"card-label",children:P("users.registrationDate")}),o.jsx("div",{className:"card-value",children:C(e.createdAt)})]})]}),o.jsxs("div",{className:"technical-section",children:[o.jsx("div",{className:"section-title",children:P("users.technicalInfo")}),o.jsxs("div",{className:"tech-info-row",children:[o.jsx("span",{className:"tech-label",children:P("users.userId")}),o.jsx("span",{className:"tech-value",children:e.uid})]}),o.jsxs("div",{className:"tech-info-row",children:[o.jsx("span",{className:"tech-label",children:P("users.role")}),o.jsx("span",{className:"tech-value",children:e.role||"investor"})]})]})]}),f==="wallet"&&o.jsx("div",{className:"tab-pane",children:n?o.jsx("div",{className:"info-group",children:o.jsxs("div",{className:"wallet-card",children:[o.jsx("div",{className:"wallet-label",children:P("users.currentBalance")}),o.jsx("div",{className:"wallet-amount",children:v(n.balance)}),o.jsxs("div",{className:"wallet-meta",children:[o.jsxs("div",{className:"wallet-meta-item",children:[o.jsx("div",{className:"wallet-meta-label",children:P("users.updated")}),o.jsx("div",{className:"wallet-meta-value",children:C(n.updatedAt)})]}),o.jsxs("div",{className:"wallet-meta-item",children:[o.jsx("div",{className:"wallet-meta-label",children:P("users.currency")}),o.jsx("div",{className:"wallet-meta-value",children:"USD"})]})]})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-message",children:P("users.noWalletInfo")})]})}),f==="inversiones"&&o.jsx("div",{className:"tab-pane",children:s.length>0?o.jsx("div",{className:"table-responsive",children:o.jsxs("table",{className:"mini-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"ID"}),o.jsx("th",{children:P("users.amount")}),o.jsx("th",{children:P("users.status")}),o.jsx("th",{children:P("users.date")})]})}),o.jsx("tbody",{children:s.map(E=>o.jsxs("tr",{children:[o.jsxs("td",{className:"id-cell",children:[E.id.substring(0,8),"..."]}),o.jsx("td",{children:v(E.amount)}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${E.status}`,children:E.status})}),o.jsx("td",{children:C(E.createdAt)})]},E.id))})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-message",children:P("users.noInvestments")})]})}),f==="recargas"&&o.jsx("div",{className:"tab-pane",children:r.length>0?o.jsx("div",{className:"table-responsive",children:o.jsxs("table",{className:"mini-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:P("users.amount")}),o.jsx("th",{children:P("users.status")}),o.jsx("th",{children:P("users.date")}),o.jsx("th",{children:P("users.action")})]})}),o.jsx("tbody",{children:r.map(E=>o.jsxs("tr",{children:[o.jsx("td",{children:v(E.amount)}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${E.status}`,children:E.status})}),o.jsx("td",{children:C(E.createdAt)}),o.jsx("td",{children:E.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn-action btn-approve",onClick:()=>{y(E),T({isOpen:!0,type:"approve"})},children:""}),o.jsx("button",{className:"btn-action btn-reject",onClick:()=>{y(E),T({isOpen:!0,type:"reject"})},children:""})]})})]},E.id))})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-message",children:P("users.noTopups")})]})}),f==="retiros"&&o.jsx("div",{className:"tab-pane",children:i.length>0?o.jsx("div",{className:"table-responsive",children:o.jsxs("table",{className:"mini-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:P("users.amount")}),o.jsx("th",{children:P("users.status")}),o.jsx("th",{children:P("users.date")})]})}),o.jsx("tbody",{children:i.map(E=>o.jsxs("tr",{children:[o.jsx("td",{children:v(E.amount)}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${E.status}`,children:E.status})}),o.jsx("td",{children:C(E.createdAt)})]},E.id))})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-message",children:P("users.noWithdrawals")})]})}),f==="transacciones"&&o.jsx("div",{className:"tab-pane",children:a.length>0?o.jsx("div",{className:"table-responsive",children:o.jsxs("table",{className:"mini-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:P("users.type")}),o.jsx("th",{children:P("users.amount")}),o.jsx("th",{children:P("users.date")})]})}),o.jsx("tbody",{children:a.map(E=>o.jsxs("tr",{children:[o.jsx("td",{children:E.type||"transfer"}),o.jsx("td",{children:v(E.amount)}),o.jsx("td",{children:C(E.createdAt)})]},E.id))})]})}):o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:""}),o.jsx("div",{className:"empty-state-message",children:P("users.noTransactions")})]})})]})]})]}),o.jsx(fh,{isOpen:b.isOpen,title:b.type==="approve"?P("topups.approveTitle"):P("topups.rejectTitle"),message:`${b.type==="approve"?P("topups.approveMessage"):P("topups.rejectMessage")} ${p?v(p.amount):""}?`,actionLabel:b.type==="approve"?P("common.approve"):P("common.reject"),showReasonInput:b.type==="reject",reasonPlaceholder:P("common.rejectReason"),loading:w||j,onConfirm:b.type==="approve"?O:_,onCancel:()=>{T({isOpen:!1,type:null}),y(null)}})]})}function CF({adminData:t}){const[e]=og(),[n,s]=R.useState({status:"all",search:""}),[r,i]=R.useState(null),{users:a,loading:l,refetch:c}=EF(n),{user:d,wallet:h,investments:f,topups:m,withdrawals:p,transactions:y,loading:b,refetch:T}=IF(r),{t:x}=ft(),w=()=>{c(),T()},S=a.length,j=a.filter(_=>_.status==="active").length,P=a.filter(_=>_.status==="inactive").length,O=a.filter(_=>_.role==="investor"||!_.role).length;return R.useEffect(()=>{const _=e.get("uid");_&&i(_)},[e]),o.jsxs("div",{className:"usuarios-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsx("h1",{className:"page-title",children:x("users.title")}),o.jsx("p",{className:"page-subtitle",children:x("users.subtitle")}),o.jsx("div",{className:"page-divider"})]}),o.jsxs("div",{className:"kpi-row",children:[o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-content",children:[o.jsx("div",{className:"kpi-label",children:x("users.totalUsers")}),o.jsx("div",{className:"kpi-value",children:S})]})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-content",children:[o.jsx("div",{className:"kpi-label",children:x("users.activeCount")}),o.jsx("div",{className:"kpi-value",children:j})]})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-content",children:[o.jsx("div",{className:"kpi-label",children:x("users.inactiveCount")}),o.jsx("div",{className:"kpi-value",children:P})]})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-content",children:[o.jsx("div",{className:"kpi-label",children:x("users.investors")}),o.jsx("div",{className:"kpi-value",children:O})]})]})]}),o.jsxs("div",{className:"filters-toolbar",children:[o.jsxs("div",{className:"search-input-wrapper",children:[o.jsx("span",{className:"search-icon",children:""}),o.jsx("input",{type:"text",placeholder:x("users.searchPlaceholder"),className:"search-input",value:n.search,onChange:_=>s({...n,search:_.target.value})})]}),o.jsxs("select",{className:"filter-select",value:n.status,onChange:_=>s({...n,status:_.target.value}),children:[o.jsx("option",{value:"all",children:x("users.allStatuses")}),o.jsx("option",{value:"active",children:x("users.active")}),o.jsx("option",{value:"inactive",children:x("users.inactive")})]})]}),o.jsxs("div",{className:"usuarios-card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h3",{children:[x("nav.users")," (",a.length,")"]})}),o.jsx(TF,{users:a,loading:l,onSelectUser:i})]}),o.jsx(NF,{isOpen:!!r,user:d,wallet:h,investments:f,topups:m,withdrawals:p,transactions:y,loading:b,onClose:()=>i(null),adminData:t,onActionComplete:w})]})}function AF(t={}){const[e,n]=R.useState([]),[s,r]=R.useState(!0),[i,a]=R.useState(null),[l,c]=R.useState(0),d=async()=>{try{r(!0),a(null);let f=[];t.status&&t.status!=="all"&&f.push($e("status","==",t.status));const m=Pe(de(Q,"topups"),...f,Gn("createdAt","desc")),y=(await ke(m)).docs.map(j=>({id:j.id,...j.data()})),b=j=>j?typeof j=="string"?j:j!=null&&j.toDate?j.toDate().toISOString():j instanceof Date?j.toISOString():null:null,T=[...new Set(y.map(j=>j.userId).filter(Boolean))],x=await Promise.all(T.map(async j=>{const P=await Kt(ae(Q,"users",j));return[j,P.exists()?P.data():null]})),w=Object.fromEntries(x),S=y.map(j=>{const P=w[j.userId]||null;return{...j,userEmail:j.userEmail||(P==null?void 0:P.email)||null,userName:j.userName||(P==null?void 0:P.displayName)||(P==null?void 0:P.fullName)||null,createdAt:b(j.createdAt)||j.createdAt}});n(S),c(S.length)}catch(f){console.error("Error en useAdminTopups:",f),a(f.message)}finally{r(!1)}};return R.useEffect(()=>{d()},[t.status]),{topups:e,loading:s,error:i,total:l,refetch:()=>d()}}const jF="modulepreload",PF=function(t){return"/"+t},ax={},oS=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=PF(c),c in ax)return;ax[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":jF,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Ef="rechargeMethods",bo=t=>{const e=String(t||"").toLowerCase().trim();return e==="active"||e==="inactive"?e:"inactive"},kF=t=>{if(!t)return null;if(t!=null&&t.toDate)return t.toDate();if(t instanceof Date)return t;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},If=t=>{const e=kF(t);return e?e.toLocaleString("es-MX"):"-"},Ui={name:"",detailsText:"",status:"",type:"",imageUrl:"",imagePath:""},ox=async t=>{if(!t)return null;const{ref:e,uploadBytes:n,getDownloadURL:s}=await oS(async()=>{const{ref:f,uploadBytes:m,getDownloadURL:p}=await Promise.resolve().then(()=>xL);return{ref:f,uploadBytes:m,getDownloadURL:p}},void 0),i=(t.name||"image").replace(/[^a-zA-Z0-9_.-]+/g,"_"),a=`rechargeMethods/${Date.now()}_${i}`,l=e(_s,a),c=t.type||void 0,d=await n(l,t,c?{contentType:c}:void 0);return{imageUrl:await s(d.ref),imagePath:a}};function RF({isOpen:t,onClose:e}){const{t:n}=ft(),[s,r]=R.useState("list"),[i,a]=R.useState(0),[l,c]=R.useState(!1),[d,h]=R.useState(!1),[f,m]=R.useState(null),[p,y]=R.useState([]),[b,T]=R.useState(null),[x,w]=R.useState(Ui),[S,j]=R.useState(null),[P,O]=R.useState(""),[_,v]=R.useState(!1),C=z=>{const M=z.target.files&&z.target.files[0]?z.target.files[0]:null;if(j(M),v(!!M),M){const W=URL.createObjectURL(M);O(W)}else O("")},E=async()=>{if(!x.name||!x.type){m(n("rechargeMethods.requiredFields"));return}try{h(!0),m(null);let z={};if(S)try{const W=await ox(S);W&&(z=W)}catch(W){console.error("Error uploading recharge method image:",W),m(n("rechargeMethods.imageUploadError")),h(!1);return}const M=await(await oS(async()=>{const{addDoc:W}=await Promise.resolve().then(()=>uM);return{addDoc:W}},void 0)).addDoc(de(Q,Ef),{name:x.name,detailsText:x.detailsText,status:x.status||"active",type:x.type,...z,createdAt:se(),updateAt:se()});y(W=>[{id:M.id,...x,...z,status:x.status||"active",createdAt:new Date,updateAt:new Date},...W]),w(Ui),j(null),O(""),v(!1),r("list")}catch{m(n("rechargeMethods.createError"))}finally{h(!1)}},A=z=>{z&&(z.style.height="auto",z.style.height=`${z.scrollHeight}px`)},D=()=>{r("list"),a(z=>z+1),c(!1),h(!1),m(null),y([]),T(null),w(Ui),j(null),O(""),v(!1)};R.useEffect(()=>{if(!t){D();return}(async()=>{try{c(!0),m(null);const M=Pe(de(Q,Ef),Gn("createdAt","desc")),K=(await ke(M)).docs.map(U=>({id:U.id,...U.data()}));y(K)}catch(M){console.error("Error cargando mtodos de recarga:",M),m(n("rechargeMethods.loadError"))}finally{c(!1)}})()},[t,n]);const N=R.useMemo(()=>b&&((b.name||"")!==(x.name||"")||(b.detailsText||"")!==(x.detailsText||"")||(b.status||"")!==(x.status||"")||(b.type||"")!==(x.type||""))||_,[b,x,_]),F=z=>{T(z),w({name:(z==null?void 0:z.name)||"",detailsText:(z==null?void 0:z.detailsText)||"",status:bo(z==null?void 0:z.status),type:(z==null?void 0:z.type)||"",imageUrl:(z==null?void 0:z.imageUrl)||"",imagePath:(z==null?void 0:z.imagePath)||""}),j(null),O(""),v(!1),r("edit"),a(M=>M+1),requestAnimationFrame(()=>{const M=document.querySelector(".rm-textarea");A(M)})},L=()=>{T(null),w(Ui),j(null),O(""),v(!1),r("list"),a(z=>z+1)},ee=async()=>{if(b&&N)try{h(!0),m(null);const z=ae(Q,Ef,b.id);let M={};if(S)try{const K=await ox(S);K&&(M=K)}catch(K){console.error("Error uploading recharge method image:",K),m(n("rechargeMethods.imageUploadError")),h(!1);return}await Vs(z,{name:x.name,detailsText:x.detailsText,status:x.status,type:x.type,...M,updateAt:se()});const W={...b,name:x.name,detailsText:x.detailsText,status:x.status,type:x.type,...M};y(K=>K.map(U=>U.id===b.id?W:U)),T(W),v(!1)}catch(z){console.error("Error guardando mtodo de recarga:",z),m(n("rechargeMethods.saveError"))}finally{h(!1)}};return t?o.jsx("div",{className:"recharge-methods-overlay",onClick:e,children:o.jsxs("div",{className:"recharge-methods-modal",onClick:z=>z.stopPropagation(),children:[o.jsxs("div",{className:"rm-header",children:[o.jsx("h2",{className:"rm-title",children:n("rechargeMethods.title")}),o.jsx("button",{className:"rm-close",onClick:e,"aria-label":n("common.close"),children:""})]}),f&&o.jsx("div",{className:"rm-error",children:f}),o.jsx("div",{className:`rm-body rm-anim-${s}`,children:s==="list"?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:12},children:o.jsx("button",{className:"rm-btn rm-btn-primary",onClick:()=>{w({...Ui,status:"active"}),j(null),O(""),v(!1),r("create")},children:n("rechargeMethods.addNew")})}),l?o.jsx("div",{className:"rm-loading",children:n("rechargeMethods.loading")}):p.length===0?o.jsx("div",{className:"rm-empty",children:n("rechargeMethods.noMethods")}):o.jsx("div",{className:"rm-list",children:p.map(z=>o.jsxs("button",{className:"rm-list-item",onClick:()=>F(z),title:n("rechargeMethods.editMethod"),children:[o.jsxs("div",{className:"rm-list-main",children:[o.jsx("div",{className:"rm-list-name",children:z.name||n("rechargeMethods.noName")}),o.jsxs("div",{className:"rm-list-meta",children:[o.jsx("span",{className:"rm-pill",children:z.type||n("rechargeMethods.noType")}),o.jsx("span",{className:"rm-pill",children:z.status||n("rechargeMethods.noStatus")})]})]}),o.jsx("div",{className:"rm-list-date",children:If(z.createdAt)})]},z.id))})]}):s==="create"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rm-form",children:[o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.name")}),o.jsx("input",{className:"rm-input",value:x.name,onChange:z=>w(M=>({...M,name:z.target.value})),disabled:d})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.type")}),o.jsxs("select",{className:"rm-input",value:x.type,onChange:z=>w(M=>({...M,type:z.target.value})),disabled:d,children:[o.jsx("option",{value:"crypto",children:n("rechargeMethods.typeCrypto")}),o.jsx("option",{value:"bank",children:n("rechargeMethods.typeBank")})]})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.status")}),o.jsxs("select",{className:"rm-input",value:bo(x.status),onChange:z=>w(M=>({...M,status:bo(z.target.value)})),disabled:d,children:[o.jsx("option",{value:"active",children:n("rechargeMethods.statusActive")}),o.jsx("option",{value:"inactive",children:n("rechargeMethods.statusInactive")})]})]}),o.jsxs("label",{className:"rm-field rm-field-full",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.image")}),o.jsx("input",{type:"file",accept:"image/*",className:"rm-input",onChange:C,disabled:d}),(P||x.imageUrl)&&o.jsx("div",{className:"rm-image-preview-wrapper",children:o.jsx("img",{src:P||x.imageUrl,alt:x.name||"preview",className:"rm-image-preview"})})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.details")}),o.jsx("textarea",{className:"rm-textarea",value:x.detailsText,onChange:z=>{w(M=>({...M,detailsText:z.target.value})),A(z.target)},disabled:d,rows:4})]})]}),o.jsxs("div",{className:"rm-footer",children:[o.jsx("button",{className:"rm-btn rm-btn-secondary",onClick:()=>{r("list"),w(Ui),j(null),O(""),v(!1)},disabled:d,children:n("common.cancel")}),o.jsx("button",{className:"rm-btn rm-btn-primary",onClick:E,disabled:d||!x.name||!x.type,children:d?n("rechargeMethods.saving"):n("rechargeMethods.create")||"Crear"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rm-form",children:[o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.name")}),o.jsx("input",{className:"rm-input",value:x.name,onChange:z=>w(M=>({...M,name:z.target.value})),disabled:d})]}),o.jsxs("label",{className:"rm-field rm-field-full",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.image")}),o.jsx("input",{type:"file",accept:"image/*",className:"rm-input",onChange:C,disabled:d}),(P||x.imageUrl)&&o.jsx("div",{className:"rm-image-preview-wrapper",children:o.jsx("img",{src:P||x.imageUrl,alt:x.name||"preview",className:"rm-image-preview"})})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.type")}),o.jsxs("select",{className:"rm-input",value:x.type,onChange:z=>w(M=>({...M,type:z.target.value})),disabled:d,children:[o.jsx("option",{value:"crypto",children:n("rechargeMethods.typeCrypto")}),o.jsx("option",{value:"bank",children:n("rechargeMethods.typeBank")})]})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.status")}),o.jsxs("select",{className:"rm-input",value:bo(x.status),onChange:z=>w(M=>({...M,status:bo(z.target.value)})),disabled:d,children:[o.jsx("option",{value:"active",children:n("rechargeMethods.statusActive")}),o.jsx("option",{value:"inactive",children:n("rechargeMethods.statusInactive")})]})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.details")}),o.jsx("textarea",{className:"rm-textarea",value:x.detailsText,onChange:z=>{w(M=>({...M,detailsText:z.target.value})),A(z.target)},disabled:d,rows:4})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.created")}),o.jsx("input",{className:"rm-input rm-input-readonly",value:If(b==null?void 0:b.createdAt),readOnly:!0})]}),o.jsxs("label",{className:"rm-field",children:[o.jsx("span",{className:"rm-label",children:n("rechargeMethods.updated")}),o.jsx("input",{className:"rm-input rm-input-readonly",value:If(b==null?void 0:b.updateAt),readOnly:!0})]})]}),o.jsxs("div",{className:"rm-footer",children:[o.jsx("button",{className:"rm-btn rm-btn-secondary",onClick:L,disabled:d,children:n("common.cancel")}),o.jsx("button",{className:"rm-btn rm-btn-primary",onClick:ee,disabled:d||!N,children:n(d?"rechargeMethods.saving":"rechargeMethods.saveChanges")})]})]})},i)]})}):null}function DF({adminData:t}){const[e,n]=R.useState("all"),[s,r]=R.useState(null),[i,a]=R.useState({isOpen:!1,type:null}),[l,c]=R.useState({isOpen:!1,url:null}),[d,h]=R.useState(!1),{topups:f,loading:m,refetch:p}=AF({status:e}),{approve:y,loading:b}=iS(),{reject:T,loading:x}=aS(),{t:w}=ft(),S=[{value:"all",label:w("topups.allStatuses")},{value:"pending",label:w("topups.pendingPlural")},{value:"approved",label:w("topups.approvedPlural")},{value:"rejected",label:w("topups.rejectedPlural")}],j=async()=>{if(!s)return;await y(s.id,t.uid,t.email)&&(a({isOpen:!1,type:null}),r(null),p())},P=async E=>{if(!s)return;await T(s.id,s.userId,E,t.uid,t.email)&&(a({isOpen:!1,type:null}),r(null),p())},O=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(E||0),_=E=>{if(!E)return"-";const A=E!=null&&E.toDate?E.toDate():new Date(E);return Number.isNaN(A.getTime())?"-":A.toLocaleDateString("es-MX")},v=E=>(E==null?void 0:E.proofUrl)||(E==null?void 0:E.receiptUrl)||null,C=E=>{switch(E){case"pending":return w("topups.pending");case"approved":return w("topups.approved");case"rejected":return w("topups.rejected");default:return E}};return o.jsxs("div",{className:"recargas-page",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:w("topups.title")}),o.jsx("p",{className:"page-subtitle",children:w("topups.subtitle")})]})}),o.jsx("div",{className:"recargas-filters",children:S.map(E=>o.jsxs("button",{className:`filter-btn ${e===E.value?"active":""}`,onClick:()=>n(E.value),children:[E.label,o.jsx("span",{className:"filter-count",children:E.value==="all"?f.length:f.filter(A=>A.status===E.value).length})]},E.value))}),o.jsxs("div",{className:"recargas-card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{className:"card-header-row",children:[o.jsxs("h3",{children:[w("topups.totalTopups"),": ",f.length]}),o.jsx("button",{className:"btn-methods",onClick:()=>h(!0),type:"button",children:w("topups.rechargeMethods")})]})}),m?o.jsx("div",{className:"loading-state",children:w("topups.loadingTopups")}):f.length===0?o.jsx("div",{className:"empty-state",children:w("topups.noTopups")}):o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{className:"recargas-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:w("topups.user")}),o.jsx("th",{children:w("topups.amount")}),o.jsx("th",{children:w("topups.method")}),o.jsx("th",{children:w("topups.status")}),o.jsx("th",{children:w("topups.date")}),o.jsx("th",{children:w("topups.action")})]})}),o.jsx("tbody",{children:f.map(E=>o.jsxs("tr",{children:[o.jsx("td",{className:"email-cell",children:E.userEmail||E.userId||w("common.emailNotAvailable")}),o.jsx("td",{className:"amount-cell",children:O(E.amount)}),o.jsx("td",{children:E.method||"-"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${E.status}`,children:C(E.status)})}),o.jsx("td",{children:_(E.createdAt)}),o.jsx("td",{children:o.jsxs("div",{className:"action-buttons",children:[v(E)&&o.jsx("button",{className:"btn-action btn-proof",onClick:()=>{c({isOpen:!0,url:v(E)})},title:w("topups.viewProof"),children:o.jsxs("svg",{className:"btn-icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[o.jsx("path",{d:"M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),E.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"btn-action btn-approve",onClick:()=>{r(E),a({isOpen:!0,type:"approve"})},title:w("common.approve"),children:""}),o.jsx("button",{className:"btn-action btn-reject",onClick:()=>{r(E),a({isOpen:!0,type:"reject"})},title:w("common.reject"),children:""})]})]})})]},E.id))})]})})]}),l.isOpen&&o.jsx("div",{className:"proof-viewer-overlay",onClick:()=>c({isOpen:!1,url:null}),role:"button",tabIndex:0,"aria-label":w("topups.closeProof"),children:o.jsx("img",{className:"proof-viewer-image",src:l.url,alt:w("topups.viewProof")})}),o.jsx(fh,{isOpen:i.isOpen,title:i.type==="approve"?w("topups.approveTitle"):w("topups.rejectTitle"),message:`${i.type==="approve"?w("topups.approveMessage"):w("topups.rejectMessage")} ${s?O(s.amount):""} ${w("topups.ofUser")} ${(s==null?void 0:s.userEmail)||(s==null?void 0:s.userId)}?`,actionLabel:i.type==="approve"?w("common.approve"):w("common.reject"),showReasonInput:i.type==="reject",reasonPlaceholder:w("common.rejectReason"),loading:b||x,onConfirm:i.type==="approve"?j:P,onCancel:()=>{a({isOpen:!1,type:null}),r(null)}}),o.jsx(RF,{isOpen:d,onClose:()=>h(!1)})]})}function OF(t={}){const[e,n]=R.useState([]),[s,r]=R.useState(!0),[i,a]=R.useState(null),[l,c]=R.useState(0),[d,h]=R.useState({all:0,pending:0,approved:0,rejected:0}),[f,m]=R.useState(t.pageSize||25),[p,y]=R.useState(1),[b,T]=R.useState([]),[x,w]=R.useState(!1),S=t.status||"all",j=A=>A?typeof A=="string"?A:A!=null&&A.toDate?A.toDate().toISOString():A instanceof Date?A.toISOString():null:null,P=async()=>{try{const A=de(Q,"withdrawals"),[D,N,F,L]=await Promise.all([ko(Pe(A)),ko(Pe(A,$e("status","==","pending"))),ko(Pe(A,$e("status","==","approved"))),ko(Pe(A,$e("status","==","rejected")))]);h({all:D.data().count,pending:N.data().count,approved:F.data().count,rejected:L.data().count})}catch(A){console.warn("useAdminWithdrawals counts error",A)}},O=async({nextPageSize:A=f,nextPage:D=p,nextCursors:N=b}={})=>{try{r(!0),a(null);const F=[];S&&S!=="all"&&F.push($e("status","==",S));const L=D>1?N[D-2]:null;L&&F.push(T0(L));const ee=Pe(de(Q,"withdrawals"),...F,Gn("createdAt","desc"),rs(Number(A)+1)),M=(await ke(ee)).docs,W=M.length>Number(A),K=W?M.slice(0,Number(A)):M;if(w(W),K.length){const Ee=K[K.length-1];T(mt=>{const Ri=[...mt];return Ri[D-1]=Ee,Ri})}const U=K.map(Ee=>({id:Ee.id,...Ee.data()})),te=[...new Set(U.map(Ee=>Ee.userId).filter(Boolean))],he=await Promise.all(te.map(async Ee=>{const mt=await Kt(ae(Q,"users",Ee));return[Ee,mt.exists()?mt.data():null]})),Fe=Object.fromEntries(he),je=U.map(Ee=>{const mt=Fe[Ee.userId]||null;return{...Ee,userEmail:Ee.userEmail||(mt==null?void 0:mt.email)||null,userName:Ee.userName||(mt==null?void 0:mt.displayName)||(mt==null?void 0:mt.fullName)||null,createdAt:j(Ee.createdAt)||Ee.createdAt}});n(je);const et=S==="pending"?d.pending:S==="approved"?d.approved:S==="rejected"?d.rejected:d.all;c(Number.isFinite(et)&&et>0?et:je.length)}catch(F){console.error("Error en useAdminWithdrawals:",F),a(F.message)}finally{r(!1)}};R.useEffect(()=>{y(1),T([]),t.pageSize&&m(t.pageSize),P(),O({nextPage:1,nextCursors:[]})},[S]),R.useEffect(()=>{y(1),T([]),O({nextPageSize:f,nextPage:1,nextCursors:[]})},[f]),R.useEffect(()=>{O({nextPage:v})},[p]);const _=()=>{P(),O({nextPage:p})},v=()=>{x&&y(A=>A+1)};return{withdrawals:e,loading:s,error:i,total:l,counts:d,page:p,pageSize:f,hasNextPage:x,nextPage:v,prevPage:()=>{y(A=>Math.max(1,A-1))},setPageSize:A=>{const D=Number(A);!Number.isFinite(D)||D<=0||m(D)},refetch:_}}const lx={es:Z0,en:J0,de:eS,zh:tS,it:nS},MF="finenproc_language",rp="es",LF=()=>{try{return localStorage.getItem(MF)||rp}catch{return rp}},VF=(t,e={})=>{const n=LF(),s=lx[n]||lx[rp],r=t.split(".");let i=s;for(const l of r)if(i&&typeof i=="object"&&l in i)i=i[l];else return t;if(typeof i!="string")return t;let a=i;for(const[l,c]of Object.entries(e))a=a.replace(new RegExp(`\\{${l}\\}`,"g"),String(c));return a},ut=VF;function FF(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{approve:async(i,a,l,c,d)=>{var h,f,m,p;try{e(!0),s(null);let y=null;try{const b=Pe(de(Q,"transactions"),$e("withdrawalId","==",i),rs(1));if(y=((f=(h=(await ke(b)).docs)==null?void 0:h[0])==null?void 0:f.id)||null,!y){const x=Pe(de(Q,"transactions"),$e("reference","==",i),rs(1));y=((p=(m=(await ke(x)).docs)==null?void 0:m[0])==null?void 0:p.id)||null}}catch{}return await Ai(Q,async b=>{const T=ae(Q,"withdrawals",i),x=await b.get(T);if(!x.exists())throw new Error(ut("errors.withdrawalNotFound"));const w=x.data(),S=w==null?void 0:w.status;if(S==="approved")return;if(S!=="pending")throw new Error(`No se puede aprobar un retiro con status: ${S}`);const j=(w==null?void 0:w.userId)||a,P=Number((w==null?void 0:w.amount)??l),O=(w==null?void 0:w.transactionId)||y||i;if(!j)throw new Error(ut("errors.withdrawalInvalidUserId"));if(!Number.isFinite(P)||P<=0)throw new Error(ut("errors.withdrawalInvalidAmount"));const _=ae(Q,"users",j,"wallets",j);if(!(await b.get(_)).exists())throw new Error(ut("errors.userNoWallet"));b.update(_,{balance:ha(-P),updatedAt:se()}),b.update(T,{status:"approved",approvedAt:se(),approvedBy:c,updatedAt:se()});const C=ae(Q,"transactions",O),E=await b.get(C),A=w!=null&&w.createdAt&&typeof w.createdAt!="string"?w.createdAt:se(),D={userId:j,type:"withdrawal",amount:P,status:"approved",sourceType:"withdrawal",sourceId:i,withdrawalId:i,updatedAt:se()};E.exists()?b.update(C,D):b.set(C,{...D,createdAt:A});const N=ae(de(Q,"auditLogs"));b.set(N,{action:"APPROVE_WITHDRAWAL",adminUid:c,adminEmail:d,targetUserId:j,targetId:i,status:"SUCCESS",metadata:{amount:P,withdrawalId:i},timestamp:se()})}),console.log(" Retiro aprobado:",i),!0}catch(y){return console.error(" Error al aprobar retiro:",y),s((y==null?void 0:y.message)||String(y)),!1}finally{e(!1)}},loading:t,error:n}}function UF(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{reject:async(i,a,l,c,d)=>{var h,f,m,p;try{e(!0),s(null);let y=null;try{const b=Pe(de(Q,"transactions"),$e("withdrawalId","==",i),rs(1));if(y=((f=(h=(await ke(b)).docs)==null?void 0:h[0])==null?void 0:f.id)||null,!y){const x=Pe(de(Q,"transactions"),$e("reference","==",i),rs(1));y=((p=(m=(await ke(x)).docs)==null?void 0:m[0])==null?void 0:p.id)||null}}catch{}return await Ai(Q,async b=>{const T=ae(Q,"withdrawals",i),x=await b.get(T);if(!x.exists())throw new Error(ut("errors.withdrawalNotFound"));const w=x.data(),S=w==null?void 0:w.status;if(S==="rejected")return;if(S!=="pending")throw new Error(`No se puede rechazar un retiro con status: ${S}`);const j=(w==null?void 0:w.userId)||a,P=Number(w==null?void 0:w.amount),O=(w==null?void 0:w.transactionId)||y||i;if(!j)throw new Error(ut("errors.withdrawalInvalidUserId"));b.update(T,{status:"rejected",rejectedAt:se(),rejectedBy:c,rejectionReason:l,updatedAt:se()});const _=ae(Q,"transactions",O),v=await b.get(_),C=w!=null&&w.createdAt&&typeof w.createdAt!="string"?w.createdAt:se(),E={userId:j,type:"withdrawal",amount:Number.isFinite(P)?P:null,status:"rejected",sourceType:"withdrawal",sourceId:i,withdrawalId:i,rejectionReason:l,updatedAt:se()};v.exists()?b.update(_,E):b.set(_,{...E,createdAt:C});const A=ae(de(Q,"auditLogs"));b.set(A,{action:"REJECT_WITHDRAWAL",adminUid:c,adminEmail:d,targetUserId:j,targetId:i,status:"SUCCESS",reason:l,timestamp:se()})}),console.log(" Retiro rechazado:",i),!0}catch(y){return console.error(" Error al rechazar retiro:",y),s((y==null?void 0:y.message)||String(y)),!1}finally{e(!1)}},loading:t,error:n}}function zF({adminData:t}){const[e,n]=R.useState("all"),[s,r]=R.useState(25),[i,a]=R.useState(null),[l,c]=R.useState({isOpen:!1,type:null}),{t:d}=ft(),{withdrawals:h,loading:f,refetch:m,counts:p,page:y,hasNextPage:b,nextPage:T,prevPage:x,setPageSize:w}=OF({status:e,pageSize:s}),{approve:S,loading:j}=FF(),{reject:P,loading:O}=UF(),_=[{value:"all",label:d("withdrawals.allStatuses")},{value:"pending",label:d("withdrawals.pendingPlural")},{value:"approved",label:d("withdrawals.approvedPlural")},{value:"rejected",label:d("withdrawals.rejectedPlural")}],v=async()=>{if(!i)return;await S(i.id,i.userId,i.amount,t.uid,t.email)&&(c({isOpen:!1,type:null}),a(null),m())},C=async N=>{if(!i)return;await P(i.id,i.userId,N,t.uid,t.email)&&(c({isOpen:!1,type:null}),a(null),m())},E=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(N||0),A=N=>{if(!N)return"-";const F=N!=null&&N.toDate?N.toDate():new Date(N);return Number.isNaN(F.getTime())?"-":F.toLocaleDateString("es-MX")},D=N=>{switch(N){case"pending":return d("withdrawals.pending");case"approved":return d("withdrawals.approved");case"rejected":return d("withdrawals.rejected");default:return N}};return o.jsxs("div",{className:"retiros-page",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:d("withdrawals.title")}),o.jsx("p",{className:"page-subtitle",children:d("withdrawals.subtitle")})]})}),o.jsx("div",{className:"retiros-filters",children:_.map(N=>o.jsxs("button",{className:`filter-btn ${e===N.value?"active":""}`,onClick:()=>{n(N.value)},children:[N.label,o.jsx("span",{className:"filter-count",children:N.value==="all"?(p==null?void 0:p.all)??0:(p==null?void 0:p[N.value])??0})]},N.value))}),o.jsxs("div",{className:"retiros-controls",children:[o.jsxs("div",{className:"retiros-control",children:[o.jsx("span",{className:"retiros-control-label",children:d("common.show")}),o.jsxs("select",{className:"retiros-page-size",value:s,onChange:N=>{const F=Number(N.target.value);r(F),w(F)},children:[o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]}),o.jsx("span",{className:"retiros-control-label",children:d("common.perPage")})]}),o.jsxs("div",{className:"retiros-pagination",children:[o.jsxs("button",{className:"pagination-btn",onClick:x,disabled:f||y<=1,children:[" ",d("common.previous")]}),o.jsxs("span",{className:"pagination-status",children:[d("common.page")," ",y]}),o.jsxs("button",{className:"pagination-btn",onClick:T,disabled:f||!b,children:[d("common.next")," "]})]})]}),o.jsxs("div",{className:"retiros-card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h3",{children:[d("withdrawals.totalWithdrawals"),": ",h.length]})}),f?o.jsx("div",{className:"loading-state",children:d("withdrawals.loadingWithdrawals")}):h.length===0?o.jsx("div",{className:"empty-state",children:d("withdrawals.noWithdrawals")}):o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{className:"retiros-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:d("withdrawals.user")}),o.jsx("th",{children:d("withdrawals.amount")}),o.jsx("th",{children:d("withdrawals.method")}),o.jsx("th",{children:d("withdrawals.status")}),o.jsx("th",{children:d("withdrawals.date")}),o.jsx("th",{children:d("withdrawals.action")})]})}),o.jsx("tbody",{children:h.map(N=>o.jsxs("tr",{children:[o.jsx("td",{className:"email-cell",children:N.userEmail||N.userId||d("common.emailNotAvailable")}),o.jsx("td",{className:"amount-cell",children:E(N.amount)}),o.jsx("td",{children:N.method||"-"}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${N.status}`,children:D(N.status)})}),o.jsx("td",{children:A(N.createdAt)}),o.jsx("td",{children:N.status==="pending"&&o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"btn-action btn-approve",onClick:()=>{a(N),c({isOpen:!0,type:"approve"})},title:d("common.approve"),children:""}),o.jsx("button",{className:"btn-action btn-reject",onClick:()=>{a(N),c({isOpen:!0,type:"reject"})},title:d("common.reject"),children:""})]})})]},N.id))})]})})]}),o.jsx(fh,{isOpen:l.isOpen,title:l.type==="approve"?d("withdrawals.approveTitle"):d("withdrawals.rejectTitle"),message:`${l.type==="approve"?d("withdrawals.approveMessage"):d("withdrawals.rejectMessage")} ${i?E(i.amount):""} ${d("topups.ofUser")} ${(i==null?void 0:i.userEmail)||(i==null?void 0:i.userId)}?`,actionLabel:l.type==="approve"?d("common.approve"):d("common.reject"),showReasonInput:l.type==="reject",reasonPlaceholder:d("common.rejectReason"),loading:j||O,onConfirm:l.type==="approve"?v:C,onCancel:()=>{c({isOpen:!1,type:null}),a(null)}})]})}function lS(t={}){const[e,n]=R.useState([]),[s,r]=R.useState(!0),[i,a]=R.useState(null),[l,c]=R.useState(0),[d,h]=R.useState(0),f=async()=>{try{r(!0),a(null);const p=t.status&&t.status!=="all",y=!!t.projectId,b=!!t.userId,T=[];y?T.push($e("projectId","==",t.projectId)):b?T.push($e("userId","==",t.userId)):p&&T.push($e("status","==",t.status));const x=Pe(de(Q,"investments"),...T),j=(await ke(x)).docs.map(F=>({id:F.id,...F.data()})).filter(F=>!(y&&F.projectId!==t.projectId||b&&F.userId!==t.userId||p&&F.status!==t.status));j.sort((F,L)=>{var M,W;const ee=(M=F==null?void 0:F.createdAt)!=null&&M.toMillis?F.createdAt.toMillis():F!=null&&F.createdAt?new Date(F.createdAt).getTime():0;return((W=L==null?void 0:L.createdAt)!=null&&W.toMillis?L.createdAt.toMillis():L!=null&&L.createdAt?new Date(L.createdAt).getTime():0)-ee});const P=[...new Set(j.map(F=>F.userId).filter(Boolean))],O=[...new Set(j.map(F=>F.projectId).filter(Boolean))],[_,v]=await Promise.all([Promise.all(P.map(async F=>{const L=await Kt(ae(Q,"users",F));return[F,L.exists()?L.data():null]})),Promise.all(O.map(async F=>{const L=await Kt(ae(Q,"projects",F));return[F,L.exists()?L.data():null]}))]),C=Object.fromEntries(_),E=Object.fromEntries(v),A=(F,L)=>!F||!L?null:Number(((L-F)/F*100).toFixed(2)),D=j.map(F=>{const L=C[F.userId]||{},ee=E[F.projectId]||{};return{...F,userEmail:L.email||"",userName:L.displayName||L.fullName||"",projectName:ee.name||"",expectedROI:A(F.amount,F.expectedReturn),actualROI:A(F.amount,F.actualReturn||F.realizedReturn||F.payout)}});n(D),c(D.length);const N=D.reduce((F,L)=>F+(L.amount||0),0);h(N)}catch(p){console.error("Error en useAdminInvestments:",p),a(p.message)}finally{r(!1)}};return R.useEffect(()=>{f()},[t.status,t.projectId,t.userId]),{investments:e,loading:s,error:i,total:l,totalAmount:d,refetch:()=>f()}}function cS(){const[t,e]=R.useState([]),[n,s]=R.useState(!0),[r,i]=R.useState(null),a=async()=>{try{s(!0),i(null);const c=de(Q,"projects"),d=Pe(c,Gn("createdAt","desc")),m=(await ke(d)).docs.map(p=>({id:p.id,...p.data()})).map(p=>{const y=p.type==="fixed",b=Number(p.targetAmount||0),T=Number(p.totalInvested||0),x=y&&b>0&&T>=b,w=x?"funded":p.status||"draft",S=w==="active"&&!x&&p.status!=="paused"&&p.status!=="closed";return{...p,computedStatus:w,progress:b>0?Math.min(100,Number((T/b*100).toFixed(2))):null,isTargetReached:x,investable:S}});e(m)}catch(c){console.error("Error en useAdminProjects:",c),i(c.message)}finally{s(!1)}};return R.useEffect(()=>{a()},[]),{projects:t,loading:n,error:r,refetch:()=>a()}}function BF(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{approve:async(i,a,l)=>{var c,d;try{e(!0),s(null);let h=null;try{const f=Pe(de(Q,"transactions"),$e("investmentId","==",i),rs(1));h=((d=(c=(await ke(f)).docs)==null?void 0:c[0])==null?void 0:d.id)||null}catch{}return await Ai(Q,async f=>{const m=ae(Q,"investments",i),p=await f.get(m);if(!p.exists())throw new Error(ut("errors.investmentNotFound"));const y=p.data(),b=y==null?void 0:y.status;if(b==="active")return;if(b!=="pending")throw new Error(`No se puede aprobar una inversin con status: ${b}`);const T=y==null?void 0:y.userId,x=Number(y==null?void 0:y.amount),w=(y==null?void 0:y.transactionId)||h||null,S=(y==null?void 0:y.projectId)||null;if(!T)throw new Error(ut("errors.investmentInvalidUserId"));if(!Number.isFinite(x)||x<=0)throw new Error(ut("errors.investmentInvalidAmount"));if(!S)throw new Error(ut("errors.investmentInvalidProjectId"));const j=ae(Q,"projects",S),P=await f.get(j);if(!P.exists())throw new Error(ut("errors.projectNotFound"));const O=P.data()||{},_=Number(O.targetAmount??O.target??O.goalAmount),v=Number(O.totalInvestment??O.totalInvested??O.totalInvestedAmount??0);if(!Number.isFinite(v)||v<0)throw new Error(ut("errors.projectInvalidTotalInvestment"));if(Number.isFinite(_)&&_>0){const Ee=_-v;if(Ee<=0)throw new Error(ut("errors.projectGoalReached"));if(x>Ee)throw new Error(`La inversin excede el cupo del proyecto. Disponible: ${Pl(Ee)}`)}const E=ae(Q,"users",T,"wallets",T),A=await f.get(E);if(!A.exists())throw new Error(ut("errors.userNoWallet"));const D=w?ae(Q,"transactions",w):null,N=D?await f.get(D):null,F=N!=null&&N.exists()?N.data():null,L=F!=null&&F.createdAt&&typeof F.createdAt!="string"?F.createdAt:y!=null&&y.createdAt&&typeof y.createdAt!="string"?y.createdAt:se(),ee=(F==null?void 0:F.currency)||(y==null?void 0:y.currency)||"USD",z=(F==null?void 0:F.projectId)||S,M=(F==null?void 0:F.investmentId)||i,W=(F==null?void 0:F.description)||"Inversin aprobada",K=(F==null?void 0:F.reference)||i,U=ae(de(Q,"transactions")),te=A.data()||{},he=Number(te.balance||0);if(!Number.isFinite(he))throw new Error(ut("errors.walletInvalidBalance"));if(he<x)throw new Error(ut("errors.insufficientBalance"));f.update(E,{balance:ha(-x),updatedAt:se()}),f.update(j,{totalInvestment:ha(x),totalInvested:ha(x),updatedAt:se()}),f.update(m,{status:"active",approvedAt:se(),approvedBy:a,updatedAt:se()}),f.set(U,{userId:T,projectId:z,investmentId:M,amount:x,currency:ee,type:"investment",status:"approved",description:W,reference:K,createdAt:L,approvedAt:se(),approvedBy:a});const Fe=ae(de(Q,"auditLogs"));f.set(Fe,{action:"APPROVE_INVESTMENT",adminUid:a,adminEmail:l,targetUserId:T,targetId:i,status:"SUCCESS",metadata:{amount:x,investmentId:i,projectId:(y==null?void 0:y.projectId)||null},timestamp:se()});const je=(O==null?void 0:O.name)||(O==null?void 0:O.title)||(O==null?void 0:O.projectName)||"el proyecto",et=ae(de(Q,"users",T,"notifications"));f.set(et,{userId:T,type:"transaction",title:"Inversin aprobada",message:`Tu inversin de ${Pl(x)} ${ee} en ${je} fue aprobada.`,investmentId:M,projectId:z,amount:x,currency:ee,read:!1,createdAt:se()})}),!0}catch(h){return console.error(" Error al aprobar inversin:",h),s((h==null?void 0:h.message)||String(h)),!1}finally{e(!1)}},loading:t,error:n}}function $F(){const[t,e]=R.useState(!1),[n,s]=R.useState(null);return{reject:async(i,a,l,c)=>{var d,h;try{e(!0),s(null);let f=null;try{const m=Pe(de(Q,"transactions"),$e("investmentId","==",i),rs(1));f=((h=(d=(await ke(m)).docs)==null?void 0:d[0])==null?void 0:h.id)||null}catch{}return await Ai(Q,async m=>{const p=ae(Q,"investments",i),y=await m.get(p);if(!y.exists())throw new Error(ut("errors.investmentNotFound"));const b=y.data(),T=b==null?void 0:b.status;if(T==="cancelled")return;if(T!=="pending")throw new Error(`No se puede rechazar una inversin con status: ${T}`);const x=b==null?void 0:b.userId,w=Number(b==null?void 0:b.amount),S=(b==null?void 0:b.transactionId)||f||null;if(!x)throw new Error(ut("errors.investmentInvalidUserId"));const j=S?ae(Q,"transactions",S):null,P=j?await m.get(j):null,O=P!=null&&P.exists()?P.data():null,_=O!=null&&O.createdAt&&typeof O.createdAt!="string"?O.createdAt:b!=null&&b.createdAt&&typeof b.createdAt!="string"?b.createdAt:se(),v=(O==null?void 0:O.currency)||(b==null?void 0:b.currency)||"USD",C=(O==null?void 0:O.projectId)||(b==null?void 0:b.projectId)||null,E=(O==null?void 0:O.investmentId)||i,A=(O==null?void 0:O.description)||"Inversin rechazada",D=(O==null?void 0:O.reference)||i,N=ae(de(Q,"transactions"));m.update(p,{status:"cancelled",cancelledAt:se(),cancelledBy:l,cancellationReason:a,updatedAt:se()}),m.set(N,{userId:x,projectId:C,investmentId:E,amount:Number.isFinite(w)?w:null,currency:v,type:"investment",status:"rejected",description:A,reference:D,createdAt:_,rejectionReason:a,rejectedAt:se(),rejectedBy:l});const F=ae(de(Q,"auditLogs"));m.set(F,{action:"REJECT_INVESTMENT",adminUid:l,adminEmail:c,targetUserId:x,targetId:i,status:"SUCCESS",reason:a,timestamp:se()})}),!0}catch(f){return console.error(" Error al rechazar inversin:",f),s((f==null?void 0:f.message)||String(f)),!1}finally{e(!1)}},loading:t,error:n}}function WF({adminData:t}){const e=Ms(),[n]=og(),s=n.get("projectId")||"",r=n.get("userId")||"",{t:i}=ft(),[a,l]=R.useState({status:"all",projectId:s,userId:r,search:""}),{projects:c}=cS(),{investments:d,loading:h,totalAmount:f,refetch:m}=lS({status:a.status,projectId:a.projectId||void 0,userId:a.userId||void 0}),[p,y]=R.useState(null),[b,T]=R.useState({isOpen:!1,type:null}),{approve:x,loading:w}=BF(),{reject:S,loading:j}=$F();R.useEffect(()=>{l(L=>({...L,projectId:s,userId:r}))},[s,r]);const P=[{value:"all",label:i("investments.allStatuses")},{value:"active",label:i("investments.activePlural")},{value:"completed",label:i("investments.completedPlural")},{value:"cancelled",label:i("investments.cancelledPlural")}],O=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(L||0),_=L=>L?new Date(L).toLocaleDateString("es-MX"):"",v=L=>L==null?"":`${L.toFixed(2)}%`,C=R.useMemo(()=>{const L=a.search.toLowerCase();return d.filter(ee=>{var M,W;return L?((M=ee.userEmail)==null?void 0:M.toLowerCase().includes(L))||((W=ee.userName)==null?void 0:W.toLowerCase().includes(L)):!0})},[d,a.search]),E=L=>{L&&e(`/admin/usuarios?uid=${L}`)},A=L=>{L&&e(`/admin/proyectos?projectId=${L}`)},D=async()=>{if(!p)return;await x(p.id,t==null?void 0:t.uid,t==null?void 0:t.email)&&(T({isOpen:!1,type:null}),y(null),m==null||m())},N=async L=>{if(!p)return;await S(p.id,L,t==null?void 0:t.uid,t==null?void 0:t.email)&&(T({isOpen:!1,type:null}),y(null),m==null||m())},F=L=>{switch(L){case"active":return i("investments.active");case"completed":return i("investments.completed");case"cancelled":return i("investments.cancelled");default:return L}};return o.jsxs("div",{className:"inversiones-page",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:i("investments.title")}),o.jsx("p",{className:"page-subtitle",children:i("investments.subtitle")})]})}),o.jsxs("div",{className:"inversiones-summary",children:[o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"summary-label",children:i("investments.totalInvested")}),o.jsx("div",{className:"summary-value",children:O(f)})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"summary-label",children:i("investments.activeInvestments")}),o.jsx("div",{className:"summary-value",children:d.filter(L=>L.status==="active").length})]}),o.jsxs("div",{className:"summary-card",children:[o.jsx("div",{className:"summary-label",children:i("investments.totalInvestments")}),o.jsx("div",{className:"summary-value",children:d.length})]})]}),o.jsxs("div",{className:"inversiones-filters",children:[P.map(L=>o.jsxs("button",{className:`filter-btn ${a.status===L.value?"active":""}`,onClick:()=>l({...a,status:L.value}),children:[L.label,o.jsx("span",{className:"filter-count",children:L.value==="all"?d.length:d.filter(ee=>ee.status===L.value).length})]},L.value)),o.jsxs("select",{className:"filter-select",value:a.projectId,onChange:L=>l({...a,projectId:L.target.value}),children:[o.jsx("option",{value:"",children:i("investments.allProjects")}),c.map(L=>o.jsx("option",{value:L.id,children:L.name||i("investments.projectNoName")},L.id))]}),o.jsx("input",{type:"text",className:"filter-input",placeholder:i("investments.searchUserPlaceholder"),value:a.search,onChange:L=>l({...a,search:L.target.value})})]}),o.jsxs("div",{className:"inversiones-card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h3",{children:i("nav.investments")})}),h?o.jsx("div",{className:"loading-state",children:i("investments.loadingInvestments")}):C.length===0?o.jsx("div",{className:"empty-state",children:i("investments.noInvestments")}):o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{className:"inversiones-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:i("investments.user")}),o.jsx("th",{children:i("investments.project")}),o.jsx("th",{children:i("investments.amount")}),o.jsx("th",{children:i("investments.expectedROI")}),o.jsx("th",{children:i("investments.actualROI")}),o.jsx("th",{children:i("investments.status")}),o.jsx("th",{children:i("investments.date")}),o.jsx("th",{children:i("investments.actions")})]})}),o.jsx("tbody",{children:C.map(L=>o.jsxs("tr",{children:[o.jsxs("td",{children:[o.jsx("div",{className:"cell-title",children:L.userName||i("investments.userNoData")}),o.jsx("div",{className:"cell-subtle",children:L.userEmail||i("common.emailNotAvailable")})]}),o.jsxs("td",{children:[o.jsx("div",{className:"cell-title",children:L.projectName||i("investments.projectNoName")}),o.jsx("div",{className:"cell-subtle",children:L.expectedReturn?i("investments.withExpectedReturn"):i("investments.noExpectedReturn")})]}),o.jsx("td",{className:"amount-cell",children:O(L.amount)}),o.jsx("td",{children:o.jsx("span",{className:`roi-badge ${Number(L.expectedROI)>=0?"roi-positive":"roi-negative"}`,children:v(L.expectedROI)})}),o.jsx("td",{children:o.jsx("span",{className:`roi-badge ${Number(L.actualROI)>=0?"roi-positive":"roi-negative"}`,children:v(L.actualROI)})}),o.jsx("td",{children:o.jsx("span",{className:`status-badge status-${L.status}`,children:F(L.status)})}),o.jsx("td",{children:_(L.createdAt)}),o.jsxs("td",{className:"actions-cell",children:[o.jsx("button",{className:"link-btn",onClick:()=>E(L.userId),children:i("investments.viewUser")}),o.jsx("button",{className:"link-btn",onClick:()=>A(L.projectId),disabled:!L.projectId,children:i("investments.viewProject")}),L.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"link-btn",onClick:()=>{y(L),T({isOpen:!0,type:"approve"})},disabled:w||j,children:i("common.approve")}),o.jsx("button",{className:"link-btn",onClick:()=>{y(L),T({isOpen:!0,type:"reject"})},disabled:w||j,children:i("common.reject")})]})]})]},L.id))})]})})]}),o.jsx(fh,{isOpen:b.isOpen,title:b.type==="approve"?i("investments.approveTitle"):i("investments.rejectTitle"),message:`${b.type==="approve"?i("investments.approveMessage"):i("investments.rejectMessage")} ${p?O(p.amount):""} ${i("topups.ofUser")} ${(p==null?void 0:p.userEmail)||(p==null?void 0:p.userId)}? ${b.type==="approve"?i("investments.willDeductBalance"):""}`,actionLabel:b.type==="approve"?i("common.approve"):i("common.reject"),showReasonInput:b.type==="reject",reasonPlaceholder:i("common.rejectReason"),loading:w||j,onConfirm:b.type==="approve"?D:N,onCancel:()=>{T({isOpen:!1,type:null}),y(null)}})]})}function cx(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function dv(t={},e={}){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof t[s]>"u"?t[s]=e[s]:cx(e[s])&&cx(t[s])&&Object.keys(e[s]).length>0&&dv(t[s],e[s])})}const uS={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function ji(){const t=typeof document<"u"?document:{};return dv(t,uS),t}const GF={document:uS,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Jt(){const t=typeof window<"u"?window:{};return dv(t,GF),t}function HF(t=""){return t.trim().split(" ").filter(e=>!!e.trim())}function qF(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function dS(t,e=0){return setTimeout(t,e)}function ri(){return Date.now()}function KF(t){const e=Jt();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function QF(t,e="x"){const n=Jt();let s,r,i;const a=KF(t);return n.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(l=>l.replace(",",".")).join(", ")),i=new n.WebKitCSSMatrix(r==="none"?"":r)):(i=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=i.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?r=i.m41:s.length===16?r=parseFloat(s[12]):r=parseFloat(s[4])),e==="y"&&(n.WebKitCSSMatrix?r=i.m42:s.length===16?r=parseFloat(s[13]):r=parseFloat(s[5])),r||0}function Wc(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function YF(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function un(...t){const e=Object(t[0]),n=["__proto__","constructor","prototype"];for(let s=1;s<t.length;s+=1){const r=t[s];if(r!=null&&!YF(r)){const i=Object.keys(Object(r)).filter(a=>n.indexOf(a)<0);for(let a=0,l=i.length;a<l;a+=1){const c=i[a],d=Object.getOwnPropertyDescriptor(r,c);d!==void 0&&d.enumerable&&(Wc(e[c])&&Wc(r[c])?r[c].__swiper__?e[c]=r[c]:un(e[c],r[c]):!Wc(e[c])&&Wc(r[c])?(e[c]={},r[c].__swiper__?e[c]=r[c]:un(e[c],r[c])):e[c]=r[c])}}}return e}function Gc(t,e,n){t.style.setProperty(e,n)}function hS({swiper:t,targetPosition:e,side:n}){const s=Jt(),r=-t.translate;let i=null,a;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(t.cssModeFrameID);const c=e>r?"next":"prev",d=(f,m)=>c==="next"&&f>=m||c==="prev"&&f<=m,h=()=>{a=new Date().getTime(),i===null&&(i=a);const f=Math.max(Math.min((a-i)/l,1),0),m=.5-Math.cos(f*Math.PI)/2;let p=r+m*(e-r);if(d(p,e)&&(p=e),t.wrapperEl.scrollTo({[n]:p}),d(p,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[n]:p})}),s.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=s.requestAnimationFrame(h)};h()}function xs(t,e=""){const n=Jt(),s=[...t.children];return n.HTMLSlotElement&&t instanceof HTMLSlotElement&&s.push(...t.assignedElements()),e?s.filter(r=>r.matches(e)):s}function XF(t,e){const n=[e];for(;n.length>0;){const s=n.shift();if(t===s)return!0;n.push(...s.children,...s.shadowRoot?s.shadowRoot.children:[],...s.assignedElements?s.assignedElements():[])}}function JF(t,e){const n=Jt();let s=e.contains(t);return!s&&n.HTMLSlotElement&&e instanceof HTMLSlotElement&&(s=[...e.assignedElements()].includes(t),s||(s=XF(t,e))),s}function id(t){try{console.warn(t);return}catch{}}function ip(t,e=[]){const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:HF(e)),n}function ZF(t,e){const n=[];for(;t.previousElementSibling;){const s=t.previousElementSibling;e?s.matches(e)&&n.push(s):n.push(s),t=s}return n}function eU(t,e){const n=[];for(;t.nextElementSibling;){const s=t.nextElementSibling;e?s.matches(e)&&n.push(s):n.push(s),t=s}return n}function or(t,e){return Jt().getComputedStyle(t,null).getPropertyValue(e)}function ux(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function tU(t,e){const n=[];let s=t.parentElement;for(;s;)n.push(s),s=s.parentElement;return n}function Tf(t,e){function n(s){s.target===t&&(e.call(t,s),t.removeEventListener("transitionend",n))}e&&t.addEventListener("transitionend",n)}function dx(t,e,n){const s=Jt();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function hx(t,e=""){typeof trustedTypes<"u"?t.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(e):t.innerHTML=e}let Sf;function nU(){const t=Jt(),e=ji();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function fS(){return Sf||(Sf=nU()),Sf}let Nf;function sU({userAgent:t}={}){const e=fS(),n=Jt(),s=n.navigator.platform,r=t||n.navigator.userAgent,i={ios:!1,android:!1},a=n.screen.width,l=n.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let d=r.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const h=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=s==="Win32";let p=s==="MacIntel";const y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&p&&e.touch&&y.indexOf(`${a}x${l}`)>=0&&(d=r.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),p=!1),c&&!m&&(i.os="android",i.android=!0),(d||f||h)&&(i.os="ios",i.ios=!0),i}function mS(t={}){return Nf||(Nf=sU(t)),Nf}let Cf;function rU(){const t=Jt(),e=mS();let n=!1;function s(){const l=t.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}if(s()){const l=String(t.navigator.userAgent);if(l.includes("Version/")){const[c,d]=l.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));n=c<16||c===16&&d<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),i=s(),a=i||r&&e.ios;return{isSafari:n||i,needPerspectiveFix:n,need3dFix:a,isWebView:r}}function pS(){return Cf||(Cf=rU()),Cf}function iU({swiper:t,on:e,emit:n}){const s=Jt();let r=null,i=null;const a=()=>{!t||t.destroyed||!t.initialized||(n("beforeResize"),n("resize"))},l=()=>{!t||t.destroyed||!t.initialized||(r=new ResizeObserver(h=>{i=s.requestAnimationFrame(()=>{const{width:f,height:m}=t;let p=f,y=m;h.forEach(({contentBoxSize:b,contentRect:T,target:x})=>{x&&x!==t.el||(p=T?T.width:(b[0]||b).inlineSize,y=T?T.height:(b[0]||b).blockSize)}),(p!==f||y!==m)&&a()})}),r.observe(t.el))},c=()=>{i&&s.cancelAnimationFrame(i),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null)},d=()=>{!t||t.destroyed||!t.initialized||n("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",d)}),e("destroy",()=>{c(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",d)})}function aU({swiper:t,extendParams:e,on:n,emit:s}){const r=[],i=Jt(),a=(d,h={})=>{const f=i.MutationObserver||i.WebkitMutationObserver,m=new f(p=>{if(t.__preventObserver__)return;if(p.length===1){s("observerUpdate",p[0]);return}const y=function(){s("observerUpdate",p[0])};i.requestAnimationFrame?i.requestAnimationFrame(y):i.setTimeout(y,0)});m.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:t.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),r.push(m)},l=()=>{if(t.params.observer){if(t.params.observeParents){const d=tU(t.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(t.hostEl,{childList:t.params.observeSlideChildren}),a(t.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(d=>{d.disconnect()}),r.splice(0,r.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",l),n("destroy",c)}var oU={on(t,e,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;const r=n?"unshift":"push";return t.split(" ").forEach(i=>{s.eventsListeners[i]||(s.eventsListeners[i]=[]),s.eventsListeners[i][r](e)}),s},once(t,e,n){const s=this;if(!s.eventsListeners||s.destroyed||typeof e!="function")return s;function r(...i){s.off(t,r),r.__emitterProxy&&delete r.__emitterProxy,e.apply(s,i)}return r.__emitterProxy=e,s.on(t,r,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const s=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[s](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(s=>{typeof e>"u"?n.eventsListeners[s]=[]:n.eventsListeners[s]&&n.eventsListeners[s].forEach((r,i)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&n.eventsListeners[s].splice(i,1)})}),n},emit(...t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsListeners)return e;let n,s,r;return typeof t[0]=="string"||Array.isArray(t[0])?(n=t[0],s=t.slice(1,t.length),r=e):(n=t[0].events,s=t[0].data,r=t[0].context||e),s.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(l=>{l.apply(r,[a,...s])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(l=>{l.apply(r,s)})}),e}};function lU(){const t=this;let e,n;const s=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=s.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=s.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(or(s,"padding-left")||0,10)-parseInt(or(s,"padding-right")||0,10),n=n-parseInt(or(s,"padding-top")||0,10)-parseInt(or(s,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function cU(){const t=this;function e(E,A){return parseFloat(E.getPropertyValue(t.getDirectionLabel(A))||0)}const n=t.params,{wrapperEl:s,slidesEl:r,rtlTranslate:i,wrongRTL:a}=t,l=t.virtual&&n.virtual.enabled,c=l?t.virtual.slides.length:t.slides.length,d=xs(r,`.${t.params.slideClass}, swiper-slide`),h=l?t.virtual.slides.length:d.length;let f=[];const m=[],p=[];let y=n.slidesOffsetBefore;typeof y=="function"&&(y=n.slidesOffsetBefore.call(t));let b=n.slidesOffsetAfter;typeof b=="function"&&(b=n.slidesOffsetAfter.call(t));const T=t.snapGrid.length,x=t.slidesGrid.length,w=t.size-y-b;let S=n.spaceBetween,j=-y,P=0,O=0;if(typeof w>"u")return;typeof S=="string"&&S.indexOf("%")>=0?S=parseFloat(S.replace("%",""))/100*w:typeof S=="string"&&(S=parseFloat(S)),t.virtualSize=-S-y-b,d.forEach(E=>{i?E.style.marginLeft="":E.style.marginRight="",E.style.marginBottom="",E.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Gc(s,"--swiper-centered-offset-before",""),Gc(s,"--swiper-centered-offset-after",""));const _=n.grid&&n.grid.rows>1&&t.grid;_?t.grid.initSlides(d):t.grid&&t.grid.unsetSlides();let v;const C=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(E=>typeof n.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<h;E+=1){v=0;const A=d[E];if(!(A&&(_&&t.grid.updateSlide(E,A,d),or(A,"display")==="none"))){if(l&&n.slidesPerView==="auto")n.virtual.slidesPerViewAutoSlideSize&&(v=n.virtual.slidesPerViewAutoSlideSize),v&&A&&(n.roundLengths&&(v=Math.floor(v)),A.style[t.getDirectionLabel("width")]=`${v}px`);else if(n.slidesPerView==="auto"){C&&(A.style[t.getDirectionLabel("width")]="");const D=getComputedStyle(A),N=A.style.transform,F=A.style.webkitTransform;if(N&&(A.style.transform="none"),F&&(A.style.webkitTransform="none"),n.roundLengths)v=t.isHorizontal()?dx(A,"width"):dx(A,"height");else{const L=e(D,"width"),ee=e(D,"padding-left"),z=e(D,"padding-right"),M=e(D,"margin-left"),W=e(D,"margin-right"),K=D.getPropertyValue("box-sizing");if(K&&K==="border-box")v=L+M+W;else{const{clientWidth:U,offsetWidth:te}=A;v=L+ee+z+M+W+(te-U)}}N&&(A.style.transform=N),F&&(A.style.webkitTransform=F),n.roundLengths&&(v=Math.floor(v))}else v=(w-(n.slidesPerView-1)*S)/n.slidesPerView,n.roundLengths&&(v=Math.floor(v)),A&&(A.style[t.getDirectionLabel("width")]=`${v}px`);A&&(A.swiperSlideSize=v),p.push(v),n.centeredSlides?(j=j+v/2+P/2+S,P===0&&E!==0&&(j=j-w/2-S),E===0&&(j=j-w/2-S),Math.abs(j)<1/1e3&&(j=0),n.roundLengths&&(j=Math.floor(j)),O%n.slidesPerGroup===0&&f.push(j),m.push(j)):(n.roundLengths&&(j=Math.floor(j)),(O-Math.min(t.params.slidesPerGroupSkip,O))%t.params.slidesPerGroup===0&&f.push(j),m.push(j),j=j+v+S),t.virtualSize+=v+S,P=v,O+=1}}if(t.virtualSize=Math.max(t.virtualSize,w)+b,i&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(s.style.width=`${t.virtualSize+S}px`),n.setWrapperSize&&(s.style[t.getDirectionLabel("width")]=`${t.virtualSize+S}px`),_&&t.grid.updateWrapperSize(v,f),!n.centeredSlides){const E=[];for(let A=0;A<f.length;A+=1){let D=f[A];n.roundLengths&&(D=Math.floor(D)),f[A]<=t.virtualSize-w&&E.push(D)}f=E,Math.floor(t.virtualSize-w)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-w)}if(l&&n.loop){const E=p[0]+S;if(n.slidesPerGroup>1){const A=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),D=E*n.slidesPerGroup;for(let N=0;N<A;N+=1)f.push(f[f.length-1]+D)}for(let A=0;A<t.virtual.slidesBefore+t.virtual.slidesAfter;A+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+E),m.push(m[m.length-1]+E),t.virtualSize+=E}if(f.length===0&&(f=[0]),S!==0){const E=t.isHorizontal()&&i?"marginLeft":t.getDirectionLabel("marginRight");d.filter((A,D)=>!n.cssMode||n.loop?!0:D!==d.length-1).forEach(A=>{A.style[E]=`${S}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let E=0;p.forEach(D=>{E+=D+(S||0)}),E-=S;const A=E>w?E-w:0;f=f.map(D=>D<=0?-y:D>A?A+b:D)}if(n.centerInsufficientSlides){let E=0;p.forEach(D=>{E+=D+(S||0)}),E-=S;const A=(y||0)+(b||0);if(E+A<w){const D=(w-E-A)/2;f.forEach((N,F)=>{f[F]=N-D}),m.forEach((N,F)=>{m[F]=N+D})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:m,slidesSizesGrid:p}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Gc(s,"--swiper-centered-offset-before",`${-f[0]}px`),Gc(s,"--swiper-centered-offset-after",`${t.size/2-p[p.length-1]/2}px`);const E=-t.snapGrid[0],A=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(D=>D+E),t.slidesGrid=t.slidesGrid.map(D=>D+A)}if(h!==c&&t.emit("slidesLengthChange"),f.length!==T&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),m.length!==x&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const E=`${n.containerModifierClass}backface-hidden`,A=t.el.classList.contains(E);h<=n.maxBackfaceHiddenSlides?A||t.el.classList.add(E):A&&t.el.classList.remove(E)}}function uU(t){const e=this,n=[],s=e.virtual&&e.params.virtual.enabled;let r=0,i;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=l=>s?e.slides[e.getSlideIndexByData(l)]:e.slides[l];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(l=>{n.push(l)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const l=e.activeIndex+i;if(l>e.slides.length&&!s)break;n.push(a(l))}else n.push(a(e.activeIndex));for(i=0;i<n.length;i+=1)if(typeof n[i]<"u"){const l=n[i].offsetHeight;r=l>r?l:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function dU(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let s=0;s<e.length;s+=1)e[s].swiperSlideOffset=(t.isHorizontal()?e[s].offsetLeft:e[s].offsetTop)-n-t.cssOverflowAdjustment()}const fx=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function hU(t=this&&this.translate||0){const e=this,n=e.params,{slides:s,rtlTranslate:r,snapGrid:i}=e;if(s.length===0)return;typeof s[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-t;r&&(a=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let l=n.spaceBetween;typeof l=="string"&&l.indexOf("%")>=0?l=parseFloat(l.replace("%",""))/100*e.size:typeof l=="string"&&(l=parseFloat(l));for(let c=0;c<s.length;c+=1){const d=s[c];let h=d.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(h-=s[0].swiperSlideOffset);const f=(a+(n.centeredSlides?e.minTranslate():0)-h)/(d.swiperSlideSize+l),m=(a-i[0]+(n.centeredSlides?e.minTranslate():0)-h)/(d.swiperSlideSize+l),p=-(a-h),y=p+e.slidesSizesGrid[c],b=p>=0&&p<=e.size-e.slidesSizesGrid[c],T=p>=0&&p<e.size-1||y>1&&y<=e.size||p<=0&&y>=e.size;T&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(c)),fx(d,T,n.slideVisibleClass),fx(d,b,n.slideFullyVisibleClass),d.progress=r?-f:f,d.originalProgress=r?-m:m}}function fU(t){const e=this;if(typeof t>"u"){const h=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*h||0}const n=e.params,s=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:i,isEnd:a,progressLoop:l}=e;const c=i,d=a;if(s===0)r=0,i=!0,a=!0;else{r=(t-e.minTranslate())/s;const h=Math.abs(t-e.minTranslate())<1,f=Math.abs(t-e.maxTranslate())<1;i=h||r<=0,a=f||r>=1,h&&(r=0),f&&(r=1)}if(n.loop){const h=e.getSlideIndexByData(0),f=e.getSlideIndexByData(e.slides.length-1),m=e.slidesGrid[h],p=e.slidesGrid[f],y=e.slidesGrid[e.slidesGrid.length-1],b=Math.abs(t);b>=m?l=(b-m)/y:l=(b+y-p)/y,l>1&&(l-=1)}Object.assign(e,{progress:r,progressLoop:l,isBeginning:i,isEnd:a}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),i&&!c&&e.emit("reachBeginning toEdge"),a&&!d&&e.emit("reachEnd toEdge"),(c&&!i||d&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}const Af=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function mU(){const t=this,{slides:e,params:n,slidesEl:s,activeIndex:r}=t,i=t.virtual&&n.virtual.enabled,a=t.grid&&n.grid&&n.grid.rows>1,l=f=>xs(s,`.${n.slideClass}${f}, swiper-slide${f}`)[0];let c,d,h;if(i)if(n.loop){let f=r-t.virtual.slidesBefore;f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),c=l(`[data-swiper-slide-index="${f}"]`)}else c=l(`[data-swiper-slide-index="${r}"]`);else a?(c=e.find(f=>f.column===r),h=e.find(f=>f.column===r+1),d=e.find(f=>f.column===r-1)):c=e[r];c&&(a||(h=eU(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!h&&(h=e[0]),d=ZF(c,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d===0&&(d=e[e.length-1]))),e.forEach(f=>{Af(f,f===c,n.slideActiveClass),Af(f,f===h,n.slideNextClass),Af(f,f===d,n.slidePrevClass)}),t.emitSlidesClasses()}const pu=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,s=e.closest(n());if(s){let r=s.querySelector(`.${t.params.lazyPreloaderClass}`);!r&&t.isElement&&(s.shadowRoot?r=s.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{s.shadowRoot&&(r=s.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},jf=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},ap=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const s=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),r=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const a=r,l=[a-e];l.push(...Array.from({length:e}).map((c,d)=>a+s+d)),t.slides.forEach((c,d)=>{l.includes(c.column)&&jf(t,d)});return}const i=r+s-1;if(t.params.rewind||t.params.loop)for(let a=r-e;a<=i+e;a+=1){const l=(a%n+n)%n;(l<r||l>i)&&jf(t,l)}else for(let a=Math.max(r-e,0);a<=Math.min(i+e,n-1);a+=1)a!==r&&(a>i||a<r)&&jf(t,a)};function pU(t){const{slidesGrid:e,params:n}=t,s=t.rtlTranslate?t.translate:-t.translate;let r;for(let i=0;i<e.length;i+=1)typeof e[i+1]<"u"?s>=e[i]&&s<e[i+1]-(e[i+1]-e[i])/2?r=i:s>=e[i]&&s<e[i+1]&&(r=i+1):s>=e[i]&&(r=i);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function gU(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:s,params:r,activeIndex:i,realIndex:a,snapIndex:l}=e;let c=t,d;const h=p=>{let y=p-e.virtual.slidesBefore;return y<0&&(y=e.virtual.slides.length+y),y>=e.virtual.slides.length&&(y-=e.virtual.slides.length),y};if(typeof c>"u"&&(c=pU(e)),s.indexOf(n)>=0)d=s.indexOf(n);else{const p=Math.min(r.slidesPerGroupSkip,c);d=p+Math.floor((c-p)/r.slidesPerGroup)}if(d>=s.length&&(d=s.length-1),c===i&&!e.params.loop){d!==l&&(e.snapIndex=d,e.emit("snapIndexChange"));return}if(c===i&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=h(c);return}const f=e.grid&&r.grid&&r.grid.rows>1;let m;if(e.virtual&&r.virtual.enabled&&r.loop)m=h(c);else if(f){const p=e.slides.find(b=>b.column===c);let y=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(y)&&(y=Math.max(e.slides.indexOf(p),0)),m=Math.floor(y/r.grid.rows)}else if(e.slides[c]){const p=e.slides[c].getAttribute("data-swiper-slide-index");p?m=parseInt(p,10):m=c}else m=c;Object.assign(e,{previousSnapIndex:l,snapIndex:d,previousRealIndex:a,realIndex:m,previousIndex:i,activeIndex:c}),e.initialized&&ap(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==m&&e.emit("realIndexChange"),e.emit("slideChange"))}function vU(t,e){const n=this,s=n.params;let r=t.closest(`.${s.slideClass}, swiper-slide`);!r&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(l=>{!r&&l.matches&&l.matches(`.${s.slideClass}, swiper-slide`)&&(r=l)});let i=!1,a;if(r){for(let l=0;l<n.slides.length;l+=1)if(n.slides[l]===r){i=!0,a=l;break}}if(r&&i)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=a;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}s.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var yU={updateSize:lU,updateSlides:cU,updateAutoHeight:uU,updateSlidesOffset:dU,updateSlidesProgress:hU,updateProgress:fU,updateSlidesClasses:mU,updateActiveIndex:gU,updateClickedSlide:vU};function wU(t=this.isHorizontal()?"x":"y"){const e=this,{params:n,rtlTranslate:s,translate:r,wrapperEl:i}=e;if(n.virtualTranslate)return s?-r:r;if(n.cssMode)return r;let a=QF(i,t);return a+=e.cssOverflowAdjustment(),s&&(a=-a),a||0}function _U(t,e){const n=this,{rtlTranslate:s,params:r,wrapperEl:i,progress:a}=n;let l=0,c=0;const d=0;n.isHorizontal()?l=s?-t:t:c=t,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,r.cssMode?i[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),i.style.transform=`translate3d(${l}px, ${c}px, ${d}px)`);let h;const f=n.maxTranslate()-n.minTranslate();f===0?h=0:h=(t-n.minTranslate())/f,h!==a&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function xU(){return-this.snapGrid[0]}function bU(){return-this.snapGrid[this.snapGrid.length-1]}function EU(t=0,e=this.params.speed,n=!0,s=!0,r){const i=this,{params:a,wrapperEl:l}=i;if(i.animating&&a.preventInteractionOnTransition)return!1;const c=i.minTranslate(),d=i.maxTranslate();let h;if(s&&t>c?h=c:s&&t<d?h=d:h=t,i.updateProgress(h),a.cssMode){const f=i.isHorizontal();if(e===0)l[f?"scrollLeft":"scrollTop"]=-h;else{if(!i.support.smoothScroll)return hS({swiper:i,targetPosition:-h,side:f?"left":"top"}),!0;l.scrollTo({[f?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(h),n&&(i.emit("beforeTransitionStart",e,r),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(h),n&&(i.emit("beforeTransitionStart",e,r),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(m){!i||i.destroyed||m.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,n&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var IU={getTranslate:wU,setTranslate:_U,minTranslate:xU,maxTranslate:bU,translateTo:EU};function TU(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function gS({swiper:t,runCallbacks:e,direction:n,step:s}){const{activeIndex:r,previousIndex:i}=t;let a=n;a||(r>i?a="next":r<i?a="prev":a="reset"),t.emit(`transition${s}`),e&&a==="reset"?t.emit(`slideResetTransition${s}`):e&&r!==i&&(t.emit(`slideChangeTransition${s}`),a==="next"?t.emit(`slideNextTransition${s}`):t.emit(`slidePrevTransition${s}`))}function SU(t=!0,e){const n=this,{params:s}=n;s.cssMode||(s.autoHeight&&n.updateAutoHeight(),gS({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function NU(t=!0,e){const n=this,{params:s}=n;n.animating=!1,!s.cssMode&&(n.setTransition(0),gS({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var CU={setTransition:TU,transitionStart:SU,transitionEnd:NU};function AU(t=0,e,n=!0,s,r){typeof t=="string"&&(t=parseInt(t,10));const i=this;let a=t;a<0&&(a=0);const{params:l,snapGrid:c,slidesGrid:d,previousIndex:h,activeIndex:f,rtlTranslate:m,wrapperEl:p,enabled:y}=i;if(!y&&!s&&!r||i.destroyed||i.animating&&l.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=i.params.speed);const b=Math.min(i.params.slidesPerGroupSkip,a);let T=b+Math.floor((a-b)/i.params.slidesPerGroup);T>=c.length&&(T=c.length-1);const x=-c[T];if(l.normalizeSlideIndex)for(let _=0;_<d.length;_+=1){const v=-Math.floor(x*100),C=Math.floor(d[_]*100),E=Math.floor(d[_+1]*100);typeof d[_+1]<"u"?v>=C&&v<E-(E-C)/2?a=_:v>=C&&v<E&&(a=_+1):v>=C&&(a=_)}if(i.initialized&&a!==f&&(!i.allowSlideNext&&(m?x>i.translate&&x>i.minTranslate():x<i.translate&&x<i.minTranslate())||!i.allowSlidePrev&&x>i.translate&&x>i.maxTranslate()&&(f||0)!==a))return!1;a!==(h||0)&&n&&i.emit("beforeSlideChangeStart"),i.updateProgress(x);let w;a>f?w="next":a<f?w="prev":w="reset";const S=i.virtual&&i.params.virtual.enabled;if(!(S&&r)&&(m&&-x===i.translate||!m&&x===i.translate))return i.updateActiveIndex(a),l.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),l.effect!=="slide"&&i.setTranslate(x),w!=="reset"&&(i.transitionStart(n,w),i.transitionEnd(n,w)),!1;if(l.cssMode){const _=i.isHorizontal(),v=m?x:-x;if(e===0)S&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),S&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[_?"scrollLeft":"scrollTop"]=v})):p[_?"scrollLeft":"scrollTop"]=v,S&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return hS({swiper:i,targetPosition:v,side:_?"left":"top"}),!0;p.scrollTo({[_?"left":"top"]:v,behavior:"smooth"})}return!0}const O=pS().isSafari;return S&&!r&&O&&i.isElement&&i.virtual.update(!1,!1,a),i.setTransition(e),i.setTranslate(x),i.updateActiveIndex(a),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,s),i.transitionStart(n,w),e===0?i.transitionEnd(n,w):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(v){!i||i.destroyed||v.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(n,w))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function jU(t=0,e,n=!0,s){typeof t=="string"&&(t=parseInt(t,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const i=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=t;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a=a+r.virtual.slidesBefore;else{let l;if(i){const b=a*r.params.grid.rows;l=r.slides.find(T=>T.getAttribute("data-swiper-slide-index")*1===b).column}else l=r.getSlideIndexByData(a);const c=i?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:d,slidesOffsetBefore:h,slidesOffsetAfter:f}=r.params,m=d||!!h||!!f;let p=r.params.slidesPerView;p==="auto"?p=r.slidesPerViewDynamic():(p=Math.ceil(parseFloat(r.params.slidesPerView,10)),m&&p%2===0&&(p=p+1));let y=c-l<p;if(m&&(y=y||l<Math.ceil(p/2)),s&&m&&r.params.slidesPerView!=="auto"&&!i&&(y=!1),y){const b=m?l<r.activeIndex?"prev":"next":l-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:b,slideTo:!0,activeSlideIndex:b==="next"?l+1:l-c+1,slideRealIndex:b==="next"?r.realIndex:void 0})}if(i){const b=a*r.params.grid.rows;a=r.slides.find(T=>T.getAttribute("data-swiper-slide-index")*1===b).column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,e,n,s)}),r}function PU(t,e=!0,n){const s=this,{enabled:r,params:i,animating:a}=s;if(!r||s.destroyed)return s;typeof t>"u"&&(t=s.params.speed);let l=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(l=Math.max(s.slidesPerViewDynamic("current",!0),1));const c=s.activeIndex<i.slidesPerGroupSkip?1:l,d=s.virtual&&i.virtual.enabled;if(i.loop){if(a&&!d&&i.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+c,t,e,n)}),!0}return i.rewind&&s.isEnd?s.slideTo(0,t,e,n):s.slideTo(s.activeIndex+c,t,e,n)}function kU(t,e=!0,n){const s=this,{params:r,snapGrid:i,slidesGrid:a,rtlTranslate:l,enabled:c,animating:d}=s;if(!c||s.destroyed)return s;typeof t>"u"&&(t=s.params.speed);const h=s.virtual&&r.virtual.enabled;if(r.loop){if(d&&!h&&r.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}const f=l?s.translate:-s.translate;function m(w){return w<0?-Math.floor(Math.abs(w)):Math.floor(w)}const p=m(f),y=i.map(w=>m(w)),b=r.freeMode&&r.freeMode.enabled;let T=i[y.indexOf(p)-1];if(typeof T>"u"&&(r.cssMode||b)){let w;i.forEach((S,j)=>{p>=S&&(w=j)}),typeof w<"u"&&(T=b?i[w]:i[w>0?w-1:w])}let x=0;if(typeof T<"u"&&(x=a.indexOf(T),x<0&&(x=s.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(x=x-s.slidesPerViewDynamic("previous",!0)+1,x=Math.max(x,0))),r.rewind&&s.isBeginning){const w=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(w,t,e,n)}else if(r.loop&&s.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{s.slideTo(x,t,e,n)}),!0;return s.slideTo(x,t,e,n)}function RU(t,e=!0,n){const s=this;if(!s.destroyed)return typeof t>"u"&&(t=s.params.speed),s.slideTo(s.activeIndex,t,e,n)}function DU(t,e=!0,n,s=.5){const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);let i=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,i),l=a+Math.floor((i-a)/r.params.slidesPerGroup),c=r.rtlTranslate?r.translate:-r.translate;if(c>=r.snapGrid[l]){const d=r.snapGrid[l],h=r.snapGrid[l+1];c-d>(h-d)*s&&(i+=r.params.slidesPerGroup)}else{const d=r.snapGrid[l-1],h=r.snapGrid[l];c-d<=(h-d)*s&&(i-=r.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,r.slidesGrid.length-1),r.slideTo(i,t,e,n)}function OU(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,s=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let r=t.getSlideIndexWhenGrid(t.clickedIndex),i;const a=t.isElement?"swiper-slide":`.${e.slideClass}`,l=t.grid&&t.params.grid&&t.params.grid.rows>1;if(e.loop){if(t.animating)return;i=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?t.slideToLoop(i):r>(l?(t.slides.length-s)/2-(t.params.grid.rows-1):t.slides.length-s)?(t.loopFix(),r=t.getSlideIndex(xs(n,`${a}[data-swiper-slide-index="${i}"]`)[0]),dS(()=>{t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}var MU={slideTo:AU,slideToLoop:jU,slideNext:PU,slidePrev:kU,slideReset:RU,slideToClosest:DU,slideToClickedSlide:OU};function LU(t,e){const n=this,{params:s,slidesEl:r}=n;if(!s.loop||n.virtual&&n.params.virtual.enabled)return;const i=()=>{xs(r,`.${s.slideClass}, swiper-slide`).forEach((y,b)=>{y.setAttribute("data-swiper-slide-index",b)})},a=()=>{const p=xs(r,`.${s.slideBlankClass}`);p.forEach(y=>{y.remove()}),p.length>0&&(n.recalcSlides(),n.updateSlides())},l=n.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||l)&&a();const c=s.slidesPerGroup*(l?s.grid.rows:1),d=n.slides.length%c!==0,h=l&&n.slides.length%s.grid.rows!==0,f=p=>{for(let y=0;y<p;y+=1){const b=n.isElement?ip("swiper-slide",[s.slideBlankClass]):ip("div",[s.slideClass,s.slideBlankClass]);n.slidesEl.append(b)}};if(d){if(s.loopAddBlankSlides){const p=c-n.slides.length%c;f(p),n.recalcSlides(),n.updateSlides()}else id("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(h){if(s.loopAddBlankSlides){const p=s.grid.rows-n.slides.length%s.grid.rows;f(p),n.recalcSlides(),n.updateSlides()}else id("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();const m=s.centeredSlides||!!s.slidesOffsetBefore||!!s.slidesOffsetAfter;n.loopFix({slideRealIndex:t,direction:m?void 0:"next",initial:e})}function VU({slideRealIndex:t,slideTo:e=!0,direction:n,setTranslate:s,activeSlideIndex:r,initial:i,byController:a,byMousewheel:l}={}){const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:d,allowSlidePrev:h,allowSlideNext:f,slidesEl:m,params:p}=c,{centeredSlides:y,slidesOffsetBefore:b,slidesOffsetAfter:T,initialSlide:x}=p,w=y||!!b||!!T;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&p.virtual.enabled){e&&(!w&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):w&&c.snapIndex<p.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=h,c.allowSlideNext=f,c.emit("loopFix");return}let S=p.slidesPerView;S==="auto"?S=c.slidesPerViewDynamic():(S=Math.ceil(parseFloat(p.slidesPerView,10)),w&&S%2===0&&(S=S+1));const j=p.slidesPerGroupAuto?S:p.slidesPerGroup;let P=w?Math.max(j,Math.ceil(S/2)):j;P%j!==0&&(P+=j-P%j),P+=p.loopAdditionalSlides,c.loopedSlides=P;const O=c.grid&&p.grid&&p.grid.rows>1;d.length<S+P||c.params.effect==="cards"&&d.length<S+P*2?id("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):O&&p.grid.fill==="row"&&id("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const _=[],v=[],C=O?Math.ceil(d.length/p.grid.rows):d.length,E=i&&C-x<S&&!w;let A=E?x:c.activeIndex;typeof r>"u"?r=c.getSlideIndex(d.find(M=>M.classList.contains(p.slideActiveClass))):A=r;const D=n==="next"||!n,N=n==="prev"||!n;let F=0,L=0;const z=(O?d[r].column:r)+(w&&typeof s>"u"?-S/2+.5:0);if(z<P){F=Math.max(P-z,j);for(let M=0;M<P-z;M+=1){const W=M-Math.floor(M/C)*C;if(O){const K=C-W-1;for(let U=d.length-1;U>=0;U-=1)d[U].column===K&&_.push(U)}else _.push(C-W-1)}}else if(z+S>C-P){L=Math.max(z-(C-P*2),j),E&&(L=Math.max(L,S-C+x+1));for(let M=0;M<L;M+=1){const W=M-Math.floor(M/C)*C;O?d.forEach((K,U)=>{K.column===W&&v.push(U)}):v.push(W)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&d.length<S+P*2&&(v.includes(r)&&v.splice(v.indexOf(r),1),_.includes(r)&&_.splice(_.indexOf(r),1)),N&&_.forEach(M=>{d[M].swiperLoopMoveDOM=!0,m.prepend(d[M]),d[M].swiperLoopMoveDOM=!1}),D&&v.forEach(M=>{d[M].swiperLoopMoveDOM=!0,m.append(d[M]),d[M].swiperLoopMoveDOM=!1}),c.recalcSlides(),p.slidesPerView==="auto"?c.updateSlides():O&&(_.length>0&&N||v.length>0&&D)&&c.slides.forEach((M,W)=>{c.grid.updateSlide(W,M,c.slides)}),p.watchSlidesProgress&&c.updateSlidesOffset(),e){if(_.length>0&&N){if(typeof t>"u"){const M=c.slidesGrid[A],K=c.slidesGrid[A+F]-M;l?c.setTranslate(c.translate-K):(c.slideTo(A+Math.ceil(F),0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-K,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-K))}else if(s){const M=O?_.length/p.grid.rows:_.length;c.slideTo(c.activeIndex+M,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(v.length>0&&D)if(typeof t>"u"){const M=c.slidesGrid[A],K=c.slidesGrid[A-L]-M;l?c.setTranslate(c.translate-K):(c.slideTo(A-L,0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-K,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-K))}else{const M=O?v.length/p.grid.rows:v.length;c.slideTo(c.activeIndex-M,0,!1,!0)}}if(c.allowSlidePrev=h,c.allowSlideNext=f,c.controller&&c.controller.control&&!a){const M={slideRealIndex:t,direction:n,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(W=>{!W.destroyed&&W.params.loop&&W.loopFix({...M,slideTo:W.params.slidesPerView===p.slidesPerView?e:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...M,slideTo:c.controller.control.params.slidesPerView===p.slidesPerView?e:!1})}c.emit("loopFix")}function FU(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||!n||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const s=[];t.slides.forEach(r=>{const i=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;s[i]=r}),t.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),s.forEach(r=>{n.append(r)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var UU={loopCreate:LU,loopFix:VU,loopDestroy:FU};function zU(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function BU(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var $U={setGrabCursor:zU,unsetGrabCursor:BU};function WU(t,e=this){function n(s){if(!s||s===ji()||s===Jt())return null;s.assignedSlot&&(s=s.assignedSlot);const r=s.closest(t);return!r&&!s.getRootNode?null:r||n(s.getRootNode().host)}return n(e)}function mx(t,e,n){const s=Jt(),{params:r}=t,i=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return i&&(n<=a||n>=s.innerWidth-a)?i==="prevent"?(e.preventDefault(),!0):!1:!0}function GU(t){const e=this,n=ji();let s=t;s.originalEvent&&(s=s.originalEvent);const r=e.touchEventsData;if(s.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==s.pointerId)return;r.pointerId=s.pointerId}else s.type==="touchstart"&&s.targetTouches.length===1&&(r.touchId=s.targetTouches[0].identifier);if(s.type==="touchstart"){mx(e,s,s.targetTouches[0].pageX);return}const{params:i,touches:a,enabled:l}=e;if(!l||!i.simulateTouch&&s.pointerType==="mouse"||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let c=s.target;if(i.touchEventsTarget==="wrapper"&&!JF(c,e.wrapperEl)||"which"in s&&s.which===3||"button"in s&&s.button>0||r.isTouched&&r.isMoved)return;const d=!!i.noSwipingClass&&i.noSwipingClass!=="",h=s.composedPath?s.composedPath():s.path;d&&s.target&&s.target.shadowRoot&&h&&(c=h[0]);const f=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,m=!!(s.target&&s.target.shadowRoot);if(i.noSwiping&&(m?WU(f,c):c.closest(f))){e.allowClick=!0;return}if(i.swipeHandler&&!c.closest(i.swipeHandler))return;a.currentX=s.pageX,a.currentY=s.pageY;const p=a.currentX,y=a.currentY;if(!mx(e,s,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=y,r.touchStartTime=ri(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(r.allowThresholdMove=!1);let b=!0;c.matches(r.focusableElements)&&(b=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==c&&(s.pointerType==="mouse"||s.pointerType!=="mouse"&&!c.matches(r.focusableElements))&&n.activeElement.blur();const T=b&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||T)&&!c.isContentEditable&&s.preventDefault(),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function HU(t){const e=ji(),n=this,s=n.touchEventsData,{params:r,touches:i,rtlTranslate:a,enabled:l}=n;if(!l||!r.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),c.type==="pointermove"&&(s.touchId!==null||c.pointerId!==s.pointerId))return;let d;if(c.type==="touchmove"){if(d=[...c.changedTouches].find(P=>P.identifier===s.touchId),!d||d.identifier!==s.touchId)return}else d=c;if(!s.isTouched){s.startMoving&&s.isScrolling&&n.emit("touchMoveOpposite",c);return}const h=d.pageX,f=d.pageY;if(c.preventedByNestedSwiper){i.startX=h,i.startY=f;return}if(!n.allowTouchMove){c.target.matches(s.focusableElements)||(n.allowClick=!1),s.isTouched&&(Object.assign(i,{startX:h,startY:f,currentX:h,currentY:f}),s.touchStartTime=ri());return}if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(f<i.startY&&n.translate<=n.maxTranslate()||f>i.startY&&n.translate>=n.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else{if(a&&(h>i.startX&&-n.translate<=n.maxTranslate()||h<i.startX&&-n.translate>=n.minTranslate()))return;if(!a&&(h<i.startX&&n.translate<=n.maxTranslate()||h>i.startX&&n.translate>=n.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(s.focusableElements)&&e.activeElement!==c.target&&c.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&c.target===e.activeElement&&c.target.matches(s.focusableElements)){s.isMoved=!0,n.allowClick=!1;return}s.allowTouchCallbacks&&n.emit("touchMove",c),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=h,i.currentY=f;const m=i.currentX-i.startX,p=i.currentY-i.startY;if(n.params.threshold&&Math.sqrt(m**2+p**2)<n.params.threshold)return;if(typeof s.isScrolling>"u"){let P;n.isHorizontal()&&i.currentY===i.startY||n.isVertical()&&i.currentX===i.startX?s.isScrolling=!1:m*m+p*p>=25&&(P=Math.atan2(Math.abs(p),Math.abs(m))*180/Math.PI,s.isScrolling=n.isHorizontal()?P>r.touchAngle:90-P>r.touchAngle)}if(s.isScrolling&&n.emit("touchMoveOpposite",c),typeof s.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(s.startMoving=!0),s.isScrolling||c.type==="touchmove"&&s.preventTouchMoveFromPointerMove){s.isTouched=!1;return}if(!s.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let y=n.isHorizontal()?m:p,b=n.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;r.oneWayMovement&&(y=Math.abs(y)*(a?1:-1),b=Math.abs(b)*(a?1:-1)),i.diff=y,y*=r.touchRatio,a&&(y=-y,b=-b);const T=n.touchesDirection;n.swipeDirection=y>0?"prev":"next",n.touchesDirection=b>0?"prev":"next";const x=n.params.loop&&!r.cssMode,w=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!s.isMoved){if(x&&w&&n.loopFix({direction:n.swipeDirection}),s.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const P=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(P)}s.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}if(new Date().getTime(),r._loopSwapReset!==!1&&s.isMoved&&s.allowThresholdMove&&T!==n.touchesDirection&&x&&w&&Math.abs(y)>=1){Object.assign(i,{startX:h,startY:f,currentX:h,currentY:f,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,s.startTranslate=s.currentTranslate;return}n.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=y+s.startTranslate;let S=!0,j=r.resistanceRatio;if(r.touchReleaseOnEdges&&(j=0),y>0?(x&&w&&s.allowThresholdMove&&s.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>n.minTranslate()&&(S=!1,r.resistance&&(s.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+s.startTranslate+y)**j))):y<0&&(x&&w&&s.allowThresholdMove&&s.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),s.currentTranslate<n.maxTranslate()&&(S=!1,r.resistance&&(s.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-s.startTranslate-y)**j))),S&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(s.currentTranslate=s.startTranslate),r.threshold>0)if(Math.abs(y)>r.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,s.currentTranslate=s.startTranslate,i.diff=n.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{s.currentTranslate=s.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(s.currentTranslate),n.setTranslate(s.currentTranslate))}function qU(t){const e=this,n=e.touchEventsData;let s=t;s.originalEvent&&(s=s.originalEvent);let r;if(s.type==="touchend"||s.type==="touchcancel"){if(r=[...s.changedTouches].find(P=>P.identifier===n.touchId),!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||s.pointerId!==n.pointerId)return;r=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)&&!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:a,touches:l,rtlTranslate:c,slidesGrid:d,enabled:h}=e;if(!h||!a.simulateTouch&&s.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",s),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&a.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}a.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const f=ri(),m=f-n.touchStartTime;if(e.allowClick){const P=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(P&&P[0]||s.target,P),e.emit("tap click",s),m<300&&f-n.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(n.lastClickTime=ri(),dS(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||l.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let p;if(a.followFinger?p=c?e.translate:-e.translate:p=-n.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const y=p>=-e.maxTranslate()&&!e.params.loop;let b=0,T=e.slidesSizesGrid[0];for(let P=0;P<d.length;P+=P<a.slidesPerGroupSkip?1:a.slidesPerGroup){const O=P<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;typeof d[P+O]<"u"?(y||p>=d[P]&&p<d[P+O])&&(b=P,T=d[P+O]-d[P]):(y||p>=d[P])&&(b=P,T=d[d.length-1]-d[d.length-2])}let x=null,w=null;a.rewind&&(e.isBeginning?w=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(x=0));const S=(p-d[b])/T,j=b<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(m>a.longSwipesMs){if(!a.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(S>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?x:b+j):e.slideTo(b)),e.swipeDirection==="prev"&&(S>1-a.longSwipesRatio?e.slideTo(b+j):w!==null&&S<0&&Math.abs(S)>a.longSwipesRatio?e.slideTo(w):e.slideTo(b))}else{if(!a.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(b+j):e.slideTo(b):(e.swipeDirection==="next"&&e.slideTo(x!==null?x:b+j),e.swipeDirection==="prev"&&e.slideTo(w!==null?w:b))}}function px(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:r,snapGrid:i}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const l=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!l?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=r,t.allowSlideNext=s,t.params.watchOverflow&&i!==t.snapGrid&&t.checkOverflow()}function KU(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function QU(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:s}=t;if(!s)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let r;const i=t.maxTranslate()-t.minTranslate();i===0?r=0:r=(t.translate-t.minTranslate())/i,r!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function YU(t){const e=this;pu(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function XU(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const vS=(t,e)=>{const n=ji(),{params:s,el:r,wrapperEl:i,device:a}=t,l=!!s.nested,c=e==="on"?"addEventListener":"removeEventListener",d=e;!r||typeof r=="string"||(n[c]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:l}),r[c]("touchstart",t.onTouchStart,{passive:!1}),r[c]("pointerdown",t.onTouchStart,{passive:!1}),n[c]("touchmove",t.onTouchMove,{passive:!1,capture:l}),n[c]("pointermove",t.onTouchMove,{passive:!1,capture:l}),n[c]("touchend",t.onTouchEnd,{passive:!0}),n[c]("pointerup",t.onTouchEnd,{passive:!0}),n[c]("pointercancel",t.onTouchEnd,{passive:!0}),n[c]("touchcancel",t.onTouchEnd,{passive:!0}),n[c]("pointerout",t.onTouchEnd,{passive:!0}),n[c]("pointerleave",t.onTouchEnd,{passive:!0}),n[c]("contextmenu",t.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&r[c]("click",t.onClick,!0),s.cssMode&&i[c]("scroll",t.onScroll),s.updateOnWindowResize?t[d](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",px,!0):t[d]("observerUpdate",px,!0),r[c]("load",t.onLoad,{capture:!0}))};function JU(){const t=this,{params:e}=t;t.onTouchStart=GU.bind(t),t.onTouchMove=HU.bind(t),t.onTouchEnd=qU.bind(t),t.onDocumentTouchStart=XU.bind(t),e.cssMode&&(t.onScroll=QU.bind(t)),t.onClick=KU.bind(t),t.onLoad=YU.bind(t),vS(t,"on")}function ZU(){vS(this,"off")}var ez={attachEvents:JU,detachEvents:ZU};const gx=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function tz(){const t=this,{realIndex:e,initialized:n,params:s,el:r}=t,i=s.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const a=ji(),l=s.breakpointsBase==="window"||!s.breakpointsBase?s.breakpointsBase:"container",c=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?t.el:a.querySelector(s.breakpointsBase),d=t.getBreakpoint(i,l,c);if(!d||t.currentBreakpoint===d)return;const f=(d in i?i[d]:void 0)||t.originalParams,m=gx(t,s),p=gx(t,f),y=t.params.grabCursor,b=f.grabCursor,T=s.enabled;m&&!p?(r.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),t.emitContainerClasses()):!m&&p&&(r.classList.add(`${s.containerModifierClass}grid`),(f.grid.fill&&f.grid.fill==="column"||!f.grid.fill&&s.grid.fill==="column")&&r.classList.add(`${s.containerModifierClass}grid-column`),t.emitContainerClasses()),y&&!b?t.unsetGrabCursor():!y&&b&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(O=>{if(typeof f[O]>"u")return;const _=s[O]&&s[O].enabled,v=f[O]&&f[O].enabled;_&&!v&&t[O].disable(),!_&&v&&t[O].enable()});const x=f.direction&&f.direction!==s.direction,w=s.loop&&(f.slidesPerView!==s.slidesPerView||x),S=s.loop;x&&n&&t.changeDirection(),un(t.params,f);const j=t.params.enabled,P=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),T&&!j?t.disable():!T&&j&&t.enable(),t.currentBreakpoint=d,t.emit("_beforeBreakpoint",f),n&&(w?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!S&&P?(t.loopCreate(e),t.updateSlides()):S&&!P&&t.loopDestroy()),t.emit("breakpoint",f)}function nz(t,e="window",n){if(!t||e==="container"&&!n)return;let s=!1;const r=Jt(),i=e==="window"?r.innerHeight:n.clientHeight,a=Object.keys(t).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const c=parseFloat(l.substr(1));return{value:i*c,point:l}}return{value:l,point:l}});a.sort((l,c)=>parseInt(l.value,10)-parseInt(c.value,10));for(let l=0;l<a.length;l+=1){const{point:c,value:d}=a[l];e==="window"?r.matchMedia(`(min-width: ${d}px)`).matches&&(s=c):d<=n.clientWidth&&(s=c)}return s||"max"}var sz={setBreakpoint:tz,getBreakpoint:nz};function rz(t,e){const n=[];return t.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(r=>{s[r]&&n.push(e+r)}):typeof s=="string"&&n.push(e+s)}),n}function iz(){const t=this,{classNames:e,params:n,rtl:s,el:r,device:i}=t,a=rz(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:s},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...a),r.classList.add(...e),t.emitContainerClasses()}function az(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var oz={addClasses:iz,removeClasses:az};function lz(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:s}=n;if(s){const r=t.slides.length-1,i=t.slidesGrid[r]+t.slidesSizesGrid[r]+s*2;t.isLocked=t.size>i}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var cz={checkOverflow:lz},op={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function uz(t,e){return function(s={}){const r=Object.keys(s)[0],i=s[r];if(typeof i!="object"||i===null){un(e,s);return}if(t[r]===!0&&(t[r]={enabled:!0}),r==="navigation"&&t[r]&&t[r].enabled&&!t[r].prevEl&&!t[r].nextEl&&(t[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&t[r]&&t[r].enabled&&!t[r].el&&(t[r].auto=!0),!(r in t&&"enabled"in i)){un(e,s);return}typeof t[r]=="object"&&!("enabled"in t[r])&&(t[r].enabled=!0),t[r]||(t[r]={enabled:!1}),un(e,s)}}const Pf={eventsEmitter:oU,update:yU,translate:IU,transition:CU,slide:MU,loop:UU,grabCursor:$U,events:ez,breakpoints:sz,checkOverflow:cz,classes:oz},kf={};let hv=class us{constructor(...e){let n,s;e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?s=e[0]:[n,s]=e,s||(s={}),s=un({},s),n&&!s.el&&(s.el=n);const r=ji();if(s.el&&typeof s.el=="string"&&r.querySelectorAll(s.el).length>1){const c=[];return r.querySelectorAll(s.el).forEach(d=>{const h=un({},s,{el:d});c.push(new us(h))}),c}const i=this;i.__swiper__=!0,i.support=fS(),i.device=mS({userAgent:s.userAgent}),i.browser=pS(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],s.modules&&Array.isArray(s.modules)&&i.modules.push(...s.modules);const a={};i.modules.forEach(c=>{c({params:s,swiper:i,extendParams:uz(s,a),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});const l=un({},op,a);return i.params=un({},l,kf,s),i.originalParams=un({},i.params),i.passedParams=un({},s),i.params&&i.params.on&&Object.keys(i.params.on).forEach(c=>{i.on(c,i.params.on[c])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),Object.assign(i,{enabled:i.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return i.params.direction==="horizontal"},isVertical(){return i.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:s}=this,r=xs(n,`.${s.slideClass}, swiper-slide`),i=ux(r[0]);return ux(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:n,params:s}=e;e.slides=xs(n,`.${s.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const s=this;e=Math.min(Math.max(e,0),1);const r=s.minTranslate(),a=(s.maxTranslate()-r)*e+r;s.translateTo(a,typeof n>"u"?0:n),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(s=>{const r=e.getSlideClasses(s);n.push({slideEl:s,classNames:r}),e.emit("_slideClass",s,r)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e="current",n=!1){const s=this,{params:r,slides:i,slidesGrid:a,slidesSizesGrid:l,size:c,activeIndex:d}=s;let h=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let f=i[d]?Math.ceil(i[d].swiperSlideSize):0,m;for(let p=d+1;p<i.length;p+=1)i[p]&&!m&&(f+=Math.ceil(i[p].swiperSlideSize),h+=1,f>c&&(m=!0));for(let p=d-1;p>=0;p-=1)i[p]&&!m&&(f+=i[p].swiperSlideSize,h+=1,f>c&&(m=!0))}else if(e==="current")for(let f=d+1;f<i.length;f+=1)(n?a[f]+l[f]-a[d]<c:a[f]-a[d]<c)&&(h+=1);else for(let f=d-1;f>=0;f-=1)a[d]-a[f]<c&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:s}=e;s.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&pu(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(s.freeMode&&s.freeMode.enabled&&!s.cssMode)r(),s.autoHeight&&e.updateAutoHeight();else{if((s.slidesPerView==="auto"||s.slidesPerView>1)&&e.isEnd&&!s.centeredSlides){const a=e.virtual&&s.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(a.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||r()}s.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n=!0){const s=this,r=s.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(s.el.classList.remove(`${s.params.containerModifierClass}${r}`),s.el.classList.add(`${s.params.containerModifierClass}${e}`),s.emitContainerClasses(),s.params.direction=e,s.slides.forEach(i=>{e==="vertical"?i.style.width="":i.style.height=""}),s.emit("changeDirection"),n&&s.update()),s}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let s=e||n.params.el;if(typeof s=="string"&&(s=document.querySelector(s)),!s)return!1;s.swiper=n,s.parentNode&&s.parentNode.host&&s.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=s&&s.shadowRoot&&s.shadowRoot.querySelector?s.shadowRoot.querySelector(r()):xs(s,r())[0];return!a&&n.params.createElements&&(a=ip("div",n.params.wrapperClass),s.append(a),xs(s,`.${n.params.slideClass}`).forEach(l=>{a.append(l)})),Object.assign(n,{el:s,wrapperEl:a,slidesEl:n.isElement&&!s.parentNode.host.slideSlots?s.parentNode.host:a,hostEl:n.isElement?s.parentNode.host:s,mounted:!0,rtl:s.dir.toLowerCase()==="rtl"||or(s,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(s.dir.toLowerCase()==="rtl"||or(s,"direction")==="rtl"),wrongRTL:or(a,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(i=>{i.complete?pu(n,i):i.addEventListener("load",a=>{pu(n,a.target)})}),ap(n),n.initialized=!0,ap(n),n.emit("init"),n.emit("afterInit"),n}destroy(e=!0,n=!0){const s=this,{params:r,el:i,wrapperEl:a,slides:l}=s;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),r.loop&&s.loopDestroy(),n&&(s.removeClasses(),i&&typeof i!="string"&&i.removeAttribute("style"),a&&a.removeAttribute("style"),l&&l.length&&l.forEach(c=>{c.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),c.removeAttribute("style"),c.removeAttribute("data-swiper-slide-index")})),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(c=>{s.off(c)}),e!==!1&&(s.el&&typeof s.el!="string"&&(s.el.swiper=null),qF(s)),s.destroyed=!0),null}static extendDefaults(e){un(kf,e)}static get extendedDefaults(){return kf}static get defaults(){return op}static installModule(e){us.prototype.__modules__||(us.prototype.__modules__=[]);const n=us.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>us.installModule(n)),us):(us.installModule(e),us)}};Object.keys(Pf).forEach(t=>{Object.keys(Pf[t]).forEach(e=>{hv.prototype[e]=Pf[t][e]})});hv.use([iU,aU]);const yS=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function wi(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function fa(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(s=>n.indexOf(s)<0).forEach(s=>{typeof t[s]>"u"?t[s]=e[s]:wi(e[s])&&wi(t[s])&&Object.keys(e[s]).length>0?e[s].__swiper__?t[s]=e[s]:fa(t[s],e[s]):t[s]=e[s]})}function wS(t={}){return t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function _S(t={}){return t.pagination&&typeof t.pagination.el>"u"}function xS(t={}){return t.scrollbar&&typeof t.scrollbar.el>"u"}function bS(t=""){const e=t.split(" ").map(s=>s.trim()).filter(s=>!!s),n=[];return e.forEach(s=>{n.indexOf(s)<0&&n.push(s)}),n.join(" ")}function dz(t=""){return t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function hz({swiper:t,slides:e,passedParams:n,changedParams:s,nextEl:r,prevEl:i,scrollbarEl:a,paginationEl:l}){const c=s.filter(v=>v!=="children"&&v!=="direction"&&v!=="wrapperClass"),{params:d,pagination:h,navigation:f,scrollbar:m,virtual:p,thumbs:y}=t;let b,T,x,w,S,j,P,O;s.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&d.thumbs&&(!d.thumbs.swiper||d.thumbs.swiper.destroyed)&&(b=!0),s.includes("controller")&&n.controller&&n.controller.control&&d.controller&&!d.controller.control&&(T=!0),s.includes("pagination")&&n.pagination&&(n.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(x=!0),s.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&m&&!m.el&&(w=!0),s.includes("navigation")&&n.navigation&&(n.navigation.prevEl||i)&&(n.navigation.nextEl||r)&&(d.navigation||d.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const _=v=>{t[v]&&(t[v].destroy(),v==="navigation"?(t.isElement&&(t[v].prevEl.remove(),t[v].nextEl.remove()),d[v].prevEl=void 0,d[v].nextEl=void 0,t[v].prevEl=void 0,t[v].nextEl=void 0):(t.isElement&&t[v].el.remove(),d[v].el=void 0,t[v].el=void 0))};s.includes("loop")&&t.isElement&&(d.loop&&!n.loop?j=!0:!d.loop&&n.loop?P=!0:O=!0),c.forEach(v=>{if(wi(d[v])&&wi(n[v]))Object.assign(d[v],n[v]),(v==="navigation"||v==="pagination"||v==="scrollbar")&&"enabled"in n[v]&&!n[v].enabled&&_(v);else{const C=n[v];(C===!0||C===!1)&&(v==="navigation"||v==="pagination"||v==="scrollbar")?C===!1&&_(v):d[v]=n[v]}}),c.includes("controller")&&!T&&t.controller&&t.controller.control&&d.controller&&d.controller.control&&(t.controller.control=d.controller.control),s.includes("children")&&e&&p&&d.virtual.enabled?(p.slides=e,p.update(!0)):s.includes("virtual")&&p&&d.virtual.enabled&&(e&&(p.slides=e),p.update(!0)),s.includes("children")&&e&&d.loop&&(O=!0),b&&y.init()&&y.update(!0),T&&(t.controller.control=d.controller.control),x&&(t.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),t.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),w&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(d.scrollbar.el=a),m.init(),m.updateSize(),m.setTranslate()),S&&(t.isElement&&((!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-button-next"),hx(r,t.navigation.arrowSvg),r.part.add("button-next"),t.el.appendChild(r)),(!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-prev"),hx(i,t.navigation.arrowSvg),i.part.add("button-prev"),t.el.appendChild(i))),r&&(d.navigation.nextEl=r),i&&(d.navigation.prevEl=i),f.init(),f.update()),s.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),s.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),s.includes("direction")&&t.changeDirection(n.direction,!1),(j||O)&&t.loopDestroy(),(P||O)&&t.loopCreate(),t.update()}function fz(t={},e=!0){const n={on:{}},s={},r={};fa(n,op),n._emitClasses=!0,n.init=!1;const i={},a=yS.map(c=>c.replace(/_/,"")),l=Object.assign({},t);return Object.keys(l).forEach(c=>{typeof t[c]>"u"||(a.indexOf(c)>=0?wi(t[c])?(n[c]={},r[c]={},fa(n[c],t[c]),fa(r[c],t[c])):(n[c]=t[c],r[c]=t[c]):c.search(/on[A-Z]/)===0&&typeof t[c]=="function"?e?s[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:n.on[`${c[2].toLowerCase()}${c.substr(3)}`]=t[c]:i[c]=t[c])}),["navigation","pagination","scrollbar"].forEach(c=>{n[c]===!0&&(n[c]={}),n[c]===!1&&delete n[c]}),{params:n,passedParams:r,rest:i,events:s}}function mz({el:t,nextEl:e,prevEl:n,paginationEl:s,scrollbarEl:r,swiper:i},a){wS(a)&&e&&n&&(i.params.navigation.nextEl=e,i.originalParams.navigation.nextEl=e,i.params.navigation.prevEl=n,i.originalParams.navigation.prevEl=n),_S(a)&&s&&(i.params.pagination.el=s,i.originalParams.pagination.el=s),xS(a)&&r&&(i.params.scrollbar.el=r,i.originalParams.scrollbar.el=r),i.init(t)}function pz(t,e,n,s,r){const i=[];if(!e)return i;const a=c=>{i.indexOf(c)<0&&i.push(c)};if(n&&s){const c=s.map(r),d=n.map(r);c.join("")!==d.join("")&&a("children"),s.length!==n.length&&a("children")}return yS.filter(c=>c[0]==="_").map(c=>c.replace(/_/,"")).forEach(c=>{if(c in t&&c in e)if(wi(t[c])&&wi(e[c])){const d=Object.keys(t[c]),h=Object.keys(e[c]);d.length!==h.length?a(c):(d.forEach(f=>{t[c][f]!==e[c][f]&&a(c)}),h.forEach(f=>{t[c][f]!==e[c][f]&&a(c)}))}else t[c]!==e[c]&&a(c)}),i}const gz=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.emit("_virtualUpdated"),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ad.apply(this,arguments)}function ES(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function IS(t){const e=[];return nt.Children.toArray(t).forEach(n=>{ES(n)?e.push(n):n.props&&n.props.children&&IS(n.props.children).forEach(s=>e.push(s))}),e}function vz(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return nt.Children.toArray(t).forEach(s=>{if(ES(s))e.push(s);else if(s.props&&s.props.slot&&n[s.props.slot])n[s.props.slot].push(s);else if(s.props&&s.props.children){const r=IS(s.props.children);r.length>0?r.forEach(i=>e.push(i)):n["container-end"].push(s)}else n["container-end"].push(s)}),{slides:e,slots:n}}function yz(t,e,n){if(!n)return null;const s=h=>{let f=h;return h<0?f=e.length+h:f>=e.length&&(f=f-e.length),f},r=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:i,to:a}=n,l=t.params.loop?-e.length:0,c=t.params.loop?e.length*2:e.length,d=[];for(let h=l;h<c;h+=1)h>=i&&h<=a&&d.push(e[s(h)]);return d.map((h,f)=>nt.cloneElement(h,{swiper:t,style:r,key:h.props.virtualIndex||h.key||`slide-${f}`}))}function Qo(t,e){return typeof window>"u"?R.useEffect(t,e):R.useLayoutEffect(t,e)}const vx=R.createContext(null),wz=R.createContext(null),mh=R.forwardRef(({className:t,tag:e="div",wrapperTag:n="div",children:s,onSwiper:r,...i}={},a)=>{let l=!1;const[c,d]=R.useState("swiper"),[h,f]=R.useState(null),[m,p]=R.useState(!1),y=R.useRef(!1),b=R.useRef(null),T=R.useRef(null),x=R.useRef(null),w=R.useRef(null),S=R.useRef(null),j=R.useRef(null),P=R.useRef(null),O=R.useRef(null),{params:_,passedParams:v,rest:C,events:E}=fz(i),{slides:A,slots:D}=vz(s),N=()=>{p(!m)};Object.assign(_.on,{_containerClasses(M,W){d(W)}});const F=()=>{Object.assign(_.on,E),l=!0;const M={..._};if(delete M.wrapperClass,T.current=new hv(M),T.current.virtual&&T.current.params.virtual.enabled){T.current.virtual.slides=A;const W={cache:!1,slides:A,renderExternal:f,renderExternalUpdate:!1};fa(T.current.params.virtual,W),fa(T.current.originalParams.virtual,W)}};b.current||F(),T.current&&T.current.on("_beforeBreakpoint",N);const L=()=>{l||!E||!T.current||Object.keys(E).forEach(M=>{T.current.on(M,E[M])})},ee=()=>{!E||!T.current||Object.keys(E).forEach(M=>{T.current.off(M,E[M])})};R.useEffect(()=>()=>{T.current&&T.current.off("_beforeBreakpoint",N)}),R.useEffect(()=>{!y.current&&T.current&&(T.current.emitSlidesClasses(),y.current=!0)}),Qo(()=>{if(a&&(a.current=b.current),!!b.current)return T.current.destroyed&&F(),mz({el:b.current,nextEl:S.current,prevEl:j.current,paginationEl:P.current,scrollbarEl:O.current,swiper:T.current},_),r&&!T.current.destroyed&&r(T.current),()=>{T.current&&!T.current.destroyed&&T.current.destroy(!0,!1)}},[]),Qo(()=>{L();const M=pz(v,x.current,A,w.current,W=>W.key);return x.current=v,w.current=A,M.length&&T.current&&!T.current.destroyed&&hz({swiper:T.current,slides:A,passedParams:v,changedParams:M,nextEl:S.current,prevEl:j.current,scrollbarEl:O.current,paginationEl:P.current}),()=>{ee()}}),Qo(()=>{gz(T.current)},[h]);function z(){return _.virtual?yz(T.current,A,h):A.map((M,W)=>nt.cloneElement(M,{swiper:T.current,swiperSlideIndex:W}))}return nt.createElement(e,ad({ref:b,className:bS(`${c}${t?` ${t}`:""}`)},C),nt.createElement(wz.Provider,{value:T.current},D["container-start"],nt.createElement(n,{className:dz(_.wrapperClass)},D["wrapper-start"],z(),D["wrapper-end"]),wS(_)&&nt.createElement(nt.Fragment,null,nt.createElement("div",{ref:j,className:"swiper-button-prev"}),nt.createElement("div",{ref:S,className:"swiper-button-next"})),xS(_)&&nt.createElement("div",{ref:O,className:"swiper-scrollbar"}),_S(_)&&nt.createElement("div",{ref:P,className:"swiper-pagination"}),D["container-end"]))});mh.displayName="Swiper";const Pa=R.forwardRef(({tag:t="div",children:e,className:n="",swiper:s,zoom:r,lazy:i,virtualIndex:a,swiperSlideIndex:l,...c}={},d)=>{const h=R.useRef(null),[f,m]=R.useState("swiper-slide"),[p,y]=R.useState(!1);function b(S,j,P){j===h.current&&m(P)}Qo(()=>{if(typeof l<"u"&&(h.current.swiperSlideIndex=l),d&&(d.current=h.current),!(!h.current||!s)){if(s.destroyed){f!=="swiper-slide"&&m("swiper-slide");return}return s.on("_slideClass",b),()=>{s&&s.off("_slideClass",b)}}}),Qo(()=>{s&&h.current&&!s.destroyed&&m(s.getSlideClasses(h.current))},[s]);const T={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},x=()=>typeof e=="function"?e(T):e,w=()=>{y(!0)};return nt.createElement(t,ad({ref:h,className:bS(`${f}${n?` ${n}`:""}`),"data-swiper-slide-index":a,onLoad:w},c),r&&nt.createElement(vx.Provider,{value:T},nt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof r=="number"?r:void 0},x(),i&&!p&&nt.createElement("div",{className:"swiper-lazy-preloader"}))),!r&&nt.createElement(vx.Provider,{value:T},x(),i&&!p&&nt.createElement("div",{className:"swiper-lazy-preloader"})))});Pa.displayName="SwiperSlide";function fv({swiper:t,extendParams:e,emit:n,once:s}){e({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(t.params.cssMode)return;const l=t.getTranslate();t.setTranslate(l),t.setTransition(0),t.touchEventsData.velocities.length=0,t.freeMode.onTouchEnd({currentPos:t.rtl?t.translate:-t.translate})}function i(){if(t.params.cssMode)return;const{touchEventsData:l,touches:c}=t;l.velocities.length===0&&l.velocities.push({position:c[t.isHorizontal()?"startX":"startY"],time:l.touchStartTime}),l.velocities.push({position:c[t.isHorizontal()?"currentX":"currentY"],time:ri()})}function a({currentPos:l}){if(t.params.cssMode)return;const{params:c,wrapperEl:d,rtlTranslate:h,snapGrid:f,touchEventsData:m}=t,y=ri()-m.touchStartTime;if(l<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(l>-t.maxTranslate()){t.slides.length<f.length?t.slideTo(f.length-1):t.slideTo(t.slides.length-1);return}if(c.freeMode.momentum){if(m.velocities.length>1){const O=m.velocities.pop(),_=m.velocities.pop(),v=O.position-_.position,C=O.time-_.time;t.velocity=v/C,t.velocity/=2,Math.abs(t.velocity)<c.freeMode.minimumVelocity&&(t.velocity=0),(C>150||ri()-O.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=c.freeMode.momentumVelocityRatio,m.velocities.length=0;let b=1e3*c.freeMode.momentumRatio;const T=t.velocity*b;let x=t.translate+T;h&&(x=-x);let w=!1,S;const j=Math.abs(t.velocity)*20*c.freeMode.momentumBounceRatio;let P;if(x<t.maxTranslate())c.freeMode.momentumBounce?(x+t.maxTranslate()<-j&&(x=t.maxTranslate()-j),S=t.maxTranslate(),w=!0,m.allowMomentumBounce=!0):x=t.maxTranslate(),c.loop&&c.centeredSlides&&(P=!0);else if(x>t.minTranslate())c.freeMode.momentumBounce?(x-t.minTranslate()>j&&(x=t.minTranslate()+j),S=t.minTranslate(),w=!0,m.allowMomentumBounce=!0):x=t.minTranslate(),c.loop&&c.centeredSlides&&(P=!0);else if(c.freeMode.sticky){let O;for(let _=0;_<f.length;_+=1)if(f[_]>-x){O=_;break}Math.abs(f[O]-x)<Math.abs(f[O-1]-x)||t.swipeDirection==="next"?x=f[O]:x=f[O-1],x=-x}if(P&&s("transitionEnd",()=>{t.loopFix()}),t.velocity!==0){if(h?b=Math.abs((-x-t.translate)/t.velocity):b=Math.abs((x-t.translate)/t.velocity),c.freeMode.sticky){const O=Math.abs((h?-x:x)-t.translate),_=t.slidesSizesGrid[t.activeIndex];O<_?b=c.speed:O<2*_?b=c.speed*1.5:b=c.speed*2.5}}else if(c.freeMode.sticky){t.slideToClosest();return}c.freeMode.momentumBounce&&w?(t.updateProgress(S),t.setTransition(b),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating=!0,Tf(d,()=>{!t||t.destroyed||!m.allowMomentumBounce||(n("momentumBounce"),t.setTransition(c.speed),setTimeout(()=>{t.setTranslate(S),Tf(d,()=>{!t||t.destroyed||t.transitionEnd()})},0))})):t.velocity?(n("_freeModeNoMomentumRelease"),t.updateProgress(x),t.setTransition(b),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,Tf(d,()=>{!t||t.destroyed||t.transitionEnd()}))):t.updateProgress(x),t.updateActiveIndex(),t.updateSlidesClasses()}else if(c.freeMode.sticky){t.slideToClosest();return}else c.freeMode&&n("_freeModeNoMomentumRelease");(!c.freeMode.momentum||y>=c.longSwipesMs)&&(n("_freeModeStaticRelease"),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}Object.assign(t,{freeMode:{onTouchStart:r,onTouchMove:i,onTouchEnd:a}})}/*!
* sweetalert2 v11.26.17
* Released under the MIT License.
*/function TS(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function _z(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yx(t,e){return t.get(TS(t,e))}function xz(t,e,n){_z(t,e),e.set(t,n)}function bz(t,e,n){return t.set(TS(t,e),n),n}const Ez=100,ne={},Iz=()=>{ne.previousActiveElement instanceof HTMLElement?(ne.previousActiveElement.focus(),ne.previousActiveElement=null):document.body&&document.body.focus()},Tz=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;ne.restoreFocusTimeout=setTimeout(()=>{Iz(),e()},Ez),window.scrollTo(n,s)}),SS="swal2-",Sz=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],$=Sz.reduce((t,e)=>(t[e]=SS+e,t),{}),Nz=["success","warning","info","question","error"],od=Nz.reduce((t,e)=>(t[e]=SS+e,t),{}),NS="SweetAlert2:",mv=t=>t.charAt(0).toUpperCase()+t.slice(1),Qt=t=>{console.warn(`${NS} ${typeof t=="object"?t.join(" "):t}`)},Pi=t=>{console.error(`${NS} ${t}`)},wx=[],Cz=t=>{wx.includes(t)||(wx.push(t),Qt(t))},CS=(t,e=null)=>{Cz(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},ph=t=>typeof t=="function"?t():t,pv=t=>t&&typeof t.toPromise=="function",Jl=t=>pv(t)?t.toPromise():Promise.resolve(t),gv=t=>t&&Promise.resolve(t)===t,Zt=()=>document.body.querySelector(`.${$.container}`),Zl=t=>{const e=Zt();return e?e.querySelector(t):null},_n=t=>Zl(`.${t}`),Ae=()=>_n($.popup),qa=()=>_n($.icon),Az=()=>_n($["icon-content"]),AS=()=>_n($.title),vv=()=>_n($["html-container"]),jS=()=>_n($.image),yv=()=>_n($["progress-steps"]),gh=()=>_n($["validation-message"]),is=()=>Zl(`.${$.actions} .${$.confirm}`),Ka=()=>Zl(`.${$.actions} .${$.cancel}`),ki=()=>Zl(`.${$.actions} .${$.deny}`),jz=()=>_n($["input-label"]),Qa=()=>Zl(`.${$.loader}`),ec=()=>_n($.actions),PS=()=>_n($.footer),vh=()=>_n($["timer-progress-bar"]),wv=()=>_n($.close),Pz=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,_v=()=>{const t=Ae();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((i,a)=>{const l=parseInt(i.getAttribute("tabindex")||"0"),c=parseInt(a.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),s=t.querySelectorAll(Pz),r=Array.from(s).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(r))].filter(i=>on(i))},xv=()=>Ts(document.body,$.shown)&&!Ts(document.body,$["toast-shown"])&&!Ts(document.body,$["no-backdrop"]),yh=()=>{const t=Ae();return t?Ts(t,$.toast):!1},kz=()=>{const t=Ae();return t?t.hasAttribute("data-loading"):!1},xn=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),r=s.querySelector("head");r&&Array.from(r.childNodes).forEach(a=>{t.appendChild(a)});const i=s.querySelector("body");i&&Array.from(i.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?t.appendChild(a.cloneNode(!0)):t.appendChild(a)})}},Ts=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},Rz=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values($).includes(n)&&!Object.values(od).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},vn=(t,e,n)=>{if(Rz(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){Qt(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}Ce(t,s)}},wh=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${$.popup} > .${$[e]}`);case"checkbox":return t.querySelector(`.${$.popup} > .${$.checkbox} input`);case"radio":return t.querySelector(`.${$.popup} > .${$.radio} input:checked`)||t.querySelector(`.${$.popup} > .${$.radio} input:first-child`);case"range":return t.querySelector(`.${$.popup} > .${$.range} input`);default:return t.querySelector(`.${$.popup} > .${$.input}`)}},kS=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},RS=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(r=>{n?r.classList.add(s):r.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},Ce=(t,e)=>{RS(t,e,!0)},jn=(t,e)=>{RS(t,e,!1)},lr=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const r=n[s];if(r instanceof HTMLElement&&Ts(r,e))return r}},ii=(t,e,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},xt=(t,e="flex")=>{t&&(t.style.display=e)},zt=t=>{t&&(t.style.display="none")},bv=(t,e="block")=>{t&&new MutationObserver(()=>{tc(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},_x=(t,e,n,s)=>{const r=t.querySelector(e);r&&r.style.setProperty(n,s)},tc=(t,e,n="flex")=>{e?xt(t,n):zt(t)},on=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),Dz=()=>!on(is())&&!on(ki())&&!on(Ka()),lp=t=>t.scrollHeight>t.clientHeight,Oz=(t,e)=>{let n=t;for(;n&&n!==e;){if(lp(n))return!0;n=n.parentElement}return!1},DS=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},Ev=(t,e=!1)=>{const n=vh();n&&on(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},Mz=()=>{const t=vh();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},Lz=()=>typeof window>"u"||typeof document>"u",Vz=`
 <div aria-labelledby="${$.title}" aria-describedby="${$["html-container"]}" class="${$.popup}" tabindex="-1">
   <button type="button" class="${$.close}"></button>
   <ul class="${$["progress-steps"]}"></ul>
   <div class="${$.icon}"></div>
   <img class="${$.image}" />
   <h2 class="${$.title}" id="${$.title}"></h2>
   <div class="${$["html-container"]}" id="${$["html-container"]}"></div>
   <input class="${$.input}" id="${$.input}" />
   <input type="file" class="${$.file}" />
   <div class="${$.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${$.select}" id="${$.select}"></select>
   <div class="${$.radio}"></div>
   <label class="${$.checkbox}">
     <input type="checkbox" id="${$.checkbox}" />
     <span class="${$.label}"></span>
   </label>
   <textarea class="${$.textarea}" id="${$.textarea}"></textarea>
   <div class="${$["validation-message"]}" id="${$["validation-message"]}"></div>
   <div class="${$.actions}">
     <div class="${$.loader}"></div>
     <button type="button" class="${$.confirm}"></button>
     <button type="button" class="${$.deny}"></button>
     <button type="button" class="${$.cancel}"></button>
   </div>
   <div class="${$.footer}"></div>
   <div class="${$["timer-progress-bar-container"]}">
     <div class="${$["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Fz=()=>{const t=Zt();return t?(t.remove(),jn([document.documentElement,document.body],[$["no-backdrop"],$["toast-shown"],$["has-column"]]),!0):!1},Wr=()=>{ne.currentInstance&&ne.currentInstance.resetValidationMessage()},Uz=()=>{const t=Ae();if(!t)return;const e=lr(t,$.input),n=lr(t,$.file),s=t.querySelector(`.${$.range} input`),r=t.querySelector(`.${$.range} output`),i=lr(t,$.select),a=t.querySelector(`.${$.checkbox} input`),l=lr(t,$.textarea);e&&(e.oninput=Wr),n&&(n.onchange=Wr),i&&(i.onchange=Wr),a&&(a.onchange=Wr),l&&(l.oninput=Wr),s&&r&&(s.oninput=()=>{Wr(),r.value=s.value},s.onchange=()=>{Wr(),r.value=s.value})},zz=t=>{if(typeof t=="string"){const e=document.querySelector(t);if(!e)throw new Error(`Target element "${t}" not found`);return e}return t},Bz=t=>{const e=Ae();e&&(e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true"))},$z=t=>{window.getComputedStyle(t).direction==="rtl"&&(Ce(Zt(),$.rtl),ne.isRTL=!0)},Wz=t=>{const e=Fz();if(Lz()){Pi("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=$.container,e&&Ce(n,$["no-transition"]),xn(n,Vz),n.dataset.swal2Theme=t.theme;const s=zz(t.target||"body");s.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),Bz(t),$z(s),Uz()},Iv=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?Gz(t,e):t&&xn(e,t)},Gz=(t,e)=>{"jquery"in t?Hz(e,t):xn(e,t.toString())},Hz=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},qz=(t,e)=>{const n=ec(),s=Qa();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?zt(n):xt(n),vn(n,e,"actions"),Kz(n,s,e),xn(s,e.loaderHtml||""),vn(s,e,"loader"))};function Kz(t,e,n){const s=is(),r=ki(),i=Ka();!s||!r||!i||(Df(s,"confirm",n),Df(r,"deny",n),Df(i,"cancel",n),Qz(s,r,i,n),n.reverseButtons&&(n.toast?(t.insertBefore(i,s),t.insertBefore(r,s)):(t.insertBefore(i,e),t.insertBefore(r,e),t.insertBefore(s,e))))}function Qz(t,e,n,s){if(!s.buttonsStyling){jn([t,e,n],$.styled);return}Ce([t,e,n],$.styled),s.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),Rf(t),Rf(e),Rf(n)}function Rf(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Df(t,e,n){const s=mv(e);tc(t,n[`show${s}Button`],"inline-block"),xn(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=$[e],vn(t,n,`${e}Button`)}const Yz=(t,e)=>{const n=wv();n&&(xn(n,e.closeButtonHtml||""),vn(n,e,"closeButton"),tc(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Xz=(t,e)=>{const n=Zt();n&&(Jz(n,e.backdrop),Zz(n,e.position),eB(n,e.grow),vn(n,e,"container"))};function Jz(t,e){typeof e=="string"?t.style.background=e:e||Ce([document.documentElement,document.body],$["no-backdrop"])}function Zz(t,e){e&&(e in $?Ce(t,$[e]):(Qt('The "position" parameter is not valid, defaulting to "center"'),Ce(t,$.center)))}function eB(t,e){e&&Ce(t,$[`grow-${e}`])}var Ve={innerParams:new WeakMap,domCache:new WeakMap};const tB=["input","file","range","select","radio","checkbox","textarea"],nB=(t,e)=>{const n=Ae();if(!n)return;const s=Ve.innerParams.get(t),r=!s||e.input!==s.input;tB.forEach(i=>{const a=lr(n,$[i]);a&&(iB(i,e.inputAttributes),a.className=$[i],r&&zt(a))}),e.input&&(r&&sB(e),aB(e))},sB=t=>{if(!t.input)return;if(!tt[t.input]){Pi(`Unexpected type of input! Expected ${Object.keys(tt).join(" | ")}, got "${t.input}"`);return}const e=OS(t.input);if(!e)return;const n=tt[t.input](e,t);xt(e),t.inputAutoFocus&&setTimeout(()=>{kS(n)})},rB=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},iB=(t,e)=>{const n=Ae();if(!n)return;const s=wh(n,t);if(s){rB(s);for(const r in e)s.setAttribute(r,e[r])}},aB=t=>{if(!t.input)return;const e=OS(t.input);e&&vn(e,t,"input")},Tv=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},nc=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),r=$["input-label"];s.setAttribute("for",t.id),s.className=r,typeof n.customClass=="object"&&Ce(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},OS=t=>{const e=Ae();if(e)return lr(e,$[t]||$.input)},ld=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:gv(e)||Qt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},tt={};tt.text=tt.email=tt.password=tt.number=tt.tel=tt.url=tt.search=tt.date=tt["datetime-local"]=tt.time=tt.week=tt.month=(t,e)=>{const n=t;return ld(n,e.inputValue),nc(n,n,e),Tv(n,e),n.type=e.input,n};tt.file=(t,e)=>{const n=t;return nc(n,n,e),Tv(n,e),n};tt.range=(t,e)=>{const n=t,s=n.querySelector("input"),r=n.querySelector("output");return s&&(ld(s,e.inputValue),s.type=e.input,nc(s,t,e)),r&&ld(r,e.inputValue),t};tt.select=(t,e)=>{const n=t;if(n.textContent="",e.inputPlaceholder){const s=document.createElement("option");xn(s,e.inputPlaceholder),s.value="",s.disabled=!0,s.selected=!0,n.appendChild(s)}return nc(n,n,e),n};tt.radio=t=>{const e=t;return e.textContent="",t};tt.checkbox=(t,e)=>{const n=Ae();if(!n)throw new Error("Popup not found");const s=wh(n,"checkbox");if(!s)throw new Error("Checkbox input not found");s.value="1",s.checked=!!e.inputValue;const i=t.querySelector("span");if(i){const a=e.inputPlaceholder||e.inputLabel;a&&xn(i,a)}return s};tt.textarea=(t,e)=>{const n=t;ld(n,e.inputValue),Tv(n,e),nc(n,n,e);const s=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=Ae();if(!r)return;const i=parseInt(window.getComputedStyle(r).width),a=()=>{if(!document.body.contains(n))return;const l=n.offsetWidth+s(n),c=Ae();c&&(l>i?c.style.width=`${l}px`:ii(c,"width",e.width))};new MutationObserver(a).observe(n,{attributes:!0,attributeFilter:["style"]})}}),n};const oB=(t,e)=>{const n=vv();n&&(bv(n),vn(n,e,"htmlContainer"),e.html?(Iv(e.html,n),xt(n,"block")):e.text?(n.textContent=e.text,xt(n,"block")):zt(n),nB(t,e))},lB=(t,e)=>{const n=PS();n&&(bv(n),tc(n,!!e.footer,"block"),e.footer&&Iv(e.footer,n),vn(n,e,"footer"))},cB=(t,e)=>{const n=Ve.innerParams.get(t),s=qa();if(!s)return;if(n&&e.icon===n.icon){bx(s,e),xx(s,e);return}if(!e.icon&&!e.iconHtml){zt(s);return}if(e.icon&&Object.keys(od).indexOf(e.icon)===-1){Pi(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),zt(s);return}xt(s),bx(s,e),xx(s,e),Ce(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",MS)},xx=(t,e)=>{for(const[n,s]of Object.entries(od))e.icon!==n&&jn(t,s);Ce(t,e.icon&&od[e.icon]),hB(t,e),MS(),vn(t,e,"icon")},MS=()=>{const t=Ae();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},uB=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,dB=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,bx=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=Ex(e.iconHtml):e.icon==="success"?(s=uB(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=dB:e.icon&&(s=Ex({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&xn(t,s)},hB=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])_x(t,n,"background-color",e.iconColor);_x(t,".swal2-success-ring","border-color",e.iconColor)}},Ex=t=>`<div class="${$["icon-content"]}">${t}</div>`,fB=(t,e)=>{const n=jS();if(n){if(!e.imageUrl){zt(n);return}xt(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),ii(n,"width",e.imageWidth),ii(n,"height",e.imageHeight),n.className=$.image,vn(n,e,"image")}};let Sv=!1,LS=0,VS=0,FS=0,US=0;const mB=t=>{t.addEventListener("mousedown",cd),document.body.addEventListener("mousemove",ud),t.addEventListener("mouseup",dd),t.addEventListener("touchstart",cd),document.body.addEventListener("touchmove",ud),t.addEventListener("touchend",dd)},pB=t=>{t.removeEventListener("mousedown",cd),document.body.removeEventListener("mousemove",ud),t.removeEventListener("mouseup",dd),t.removeEventListener("touchstart",cd),document.body.removeEventListener("touchmove",ud),t.removeEventListener("touchend",dd)},cd=t=>{const e=Ae();if(!e)return;const n=qa();if(t.target===e||n&&n.contains(t.target)){Sv=!0;const s=zS(t);LS=s.clientX,VS=s.clientY,FS=parseInt(e.style.insetInlineStart)||0,US=parseInt(e.style.insetBlockStart)||0,Ce(e,"swal2-dragging")}},ud=t=>{const e=Ae();if(e&&Sv){let{clientX:n,clientY:s}=zS(t);const r=n-LS;e.style.insetInlineStart=`${FS+(ne.isRTL?-r:r)}px`,e.style.insetBlockStart=`${US+(s-VS)}px`}},dd=()=>{const t=Ae();Sv=!1,jn(t,"swal2-dragging")},zS=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},gB=(t,e)=>{const n=Zt(),s=Ae();if(!(!n||!s)){if(e.toast){ii(n,"width",e.width),s.style.width="100%";const r=Qa();r&&s.insertBefore(r,qa())}else ii(s,"width",e.width);ii(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),zt(gh()),vB(s,e),e.draggable&&!e.toast?(Ce(s,$.draggable),mB(s)):(jn(s,$.draggable),pB(s))}},vB=(t,e)=>{const n=e.showClass||{};t.className=`${$.popup} ${on(t)?n.popup:""}`,e.toast?(Ce([document.documentElement,document.body],$["toast-shown"]),Ce(t,$.toast)):Ce(t,$.modal),vn(t,e,"popup"),typeof e.customClass=="string"&&Ce(t,e.customClass),e.icon&&Ce(t,$[`icon-${e.icon}`])},yB=(t,e)=>{const n=yv();if(!n)return;const{progressSteps:s,currentProgressStep:r}=e;if(!s||s.length===0||r===void 0){zt(n);return}xt(n),n.textContent="",r>=s.length&&Qt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((i,a)=>{const l=wB(i);if(n.appendChild(l),a===r&&Ce(l,$["active-progress-step"]),a!==s.length-1){const c=_B(e);n.appendChild(c)}})},wB=t=>{const e=document.createElement("li");return Ce(e,$["progress-step"]),xn(e,t),e},_B=t=>{const e=document.createElement("li");return Ce(e,$["progress-step-line"]),t.progressStepsDistance&&ii(e,"width",t.progressStepsDistance),e},xB=(t,e)=>{const n=AS();n&&(bv(n),tc(n,!!(e.title||e.titleText),"block"),e.title&&Iv(e.title,n),e.titleText&&(n.innerText=e.titleText),vn(n,e,"title"))},BS=(t,e)=>{var n;gB(t,e),Xz(t,e),yB(t,e),cB(t,e),fB(t,e),xB(t,e),Yz(t,e),oB(t,e),qz(t,e),lB(t,e);const s=Ae();typeof e.didRender=="function"&&s&&e.didRender(s),(n=ne.eventEmitter)===null||n===void 0||n.emit("didRender",s)},bB=()=>on(Ae()),$S=()=>{var t;return(t=is())===null||t===void 0?void 0:t.click()},EB=()=>{var t;return(t=ki())===null||t===void 0?void 0:t.click()},IB=()=>{var t;return(t=Ka())===null||t===void 0?void 0:t.click()},Ya=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),WS=t=>{if(t.keydownTarget&&t.keydownHandlerAdded&&t.keydownHandler){const e=t.keydownHandler;t.keydownTarget.removeEventListener("keydown",e,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1}},TB=(t,e,n)=>{if(WS(t),!e.toast){const s=i=>NB(e,i,n);t.keydownHandler=s;const r=e.keydownListenerCapture?window:Ae();if(r){t.keydownTarget=r,t.keydownListenerCapture=e.keydownListenerCapture;const i=s;t.keydownTarget.addEventListener("keydown",i,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0}}},cp=(t,e)=>{var n;const s=_v();if(s.length){t=t+e,t===-2&&(t=s.length-1),t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=Ae())===null||n===void 0||n.focus()},GS=["ArrowRight","ArrowDown"],SB=["ArrowLeft","ArrowUp"],NB=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?CB(e,t):e.key==="Tab"?AB(e):[...GS,...SB].includes(e.key)?jB(e.key):e.key==="Escape"&&PB(e,t,n)))},CB=(t,e)=>{if(!ph(e.allowEnterKey))return;const n=Ae();if(!n||!e.input)return;const s=wh(n,e.input);if(t.target&&s&&t.target instanceof HTMLElement&&t.target.outerHTML===s.outerHTML){if(["textarea","file"].includes(e.input))return;$S(),t.preventDefault()}},AB=t=>{const e=t.target,n=_v();let s=-1;for(let r=0;r<n.length;r++)if(e===n[r]){s=r;break}t.shiftKey?cp(s,-1):cp(s,1),t.stopPropagation(),t.preventDefault()},jB=t=>{const e=ec(),n=is(),s=ki(),r=Ka();if(!e||!n||!s||!r)return;const i=[n,s,r];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const a=GS.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<e.children.length;c++){if(l=l[a],!l)return;if(l instanceof HTMLButtonElement&&on(l))break}l instanceof HTMLButtonElement&&l.focus()}},PB=(t,e,n)=>{t.preventDefault(),ph(e.allowEscapeKey)&&n(Ya.esc)};var ka={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const kB=()=>{const t=Zt();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},HS=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},qS=typeof window<"u"&&!!window.GestureEvent,RB=()=>{if(qS&&!Ts(document.body,$.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Ce(document.body,$.iosfix),DB()}},DB=()=>{const t=Zt();if(!t)return;let e;t.ontouchstart=n=>{e=OB(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},OB=t=>{const e=t.target,n=Zt(),s=vv();return!n||!s||MB(t)||LB(t)?!1:e===n||!lp(n)&&e instanceof HTMLElement&&!Oz(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(lp(s)&&s.contains(e))},MB=t=>!!(t.touches&&t.touches.length&&t.touches[0].touchType==="stylus"),LB=t=>t.touches&&t.touches.length>1,VB=()=>{if(Ts(document.body,$.iosfix)){const t=parseInt(document.body.style.top,10);jn(document.body,$.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},FB=()=>{const t=document.createElement("div");t.className=$["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let ma=null;const UB=t=>{ma===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(ma=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ma+FB()}px`)},zB=()=>{ma!==null&&(document.body.style.paddingRight=`${ma}px`,ma=null)};function KS(t,e,n,s){yh()?Ix(t,s):(Tz(n).then(()=>Ix(t,s)),WS(ne)),qS?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),xv()&&(zB(),VB(),HS()),BB()}function BB(){jn([document.documentElement,document.body],[$.shown,$["height-auto"],$["no-backdrop"],$["toast-shown"]])}function cr(t){t=WB(t);const e=ka.swalPromiseResolve.get(this),n=$B(this);this.isAwaitingPromise?t.isDismissed||(sc(this),e(t)):n&&e(t)}const $B=t=>{const e=Ae();if(!e)return!1;const n=Ve.innerParams.get(t);if(!n||Ts(e,n.hideClass.popup))return!1;jn(e,n.showClass.popup),Ce(e,n.hideClass.popup);const s=Zt();return jn(s,n.showClass.backdrop),Ce(s,n.hideClass.backdrop),GB(t,e,n),!0};function QS(t){const e=ka.swalPromiseReject.get(this);sc(this),e&&e(t)}const sc=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Ve.innerParams.get(t)||t._destroy())},WB=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),GB=(t,e,n)=>{var s;const r=Zt(),i=DS(e);typeof n.willClose=="function"&&n.willClose(e),(s=ne.eventEmitter)===null||s===void 0||s.emit("willClose",e),i&&r?HB(t,e,r,!!n.returnFocus,n.didClose):r&&KS(t,r,!!n.returnFocus,n.didClose)},HB=(t,e,n,s,r)=>{ne.swalCloseEventFinishedCallback=KS.bind(null,t,n,s,r);const i=function(a){if(a.target===e){var l;(l=ne.swalCloseEventFinishedCallback)===null||l===void 0||l.call(ne),delete ne.swalCloseEventFinishedCallback,e.removeEventListener("animationend",i),e.removeEventListener("transitionend",i)}};e.addEventListener("animationend",i),e.addEventListener("transitionend",i)},Ix=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=ne.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Ra=t=>{let e=Ae();if(e||new Vn,e=Ae(),!e)return;const n=Qa();yh()?zt(qa()):qB(e,t),xt(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},qB=(t,e)=>{const n=ec(),s=Qa();!n||!s||(!e&&on(is())&&(e=is()),xt(n),e&&(zt(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),Ce([t,n],$.loading))},KB=(t,e)=>{e.input==="select"||e.input==="radio"?ZB(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(pv(e.inputValue)||gv(e.inputValue))&&(Ra(is()),e4(t,e))},QB=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return YB(n);case"radio":return XB(n);case"file":return JB(n);default:return e.inputAutoTrim?n.value.trim():n.value}},YB=t=>t.checked?1:0,XB=t=>t.checked?t.value:null,JB=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,ZB=(t,e)=>{const n=Ae();if(!n)return;const s=r=>{e.input==="select"?t4(n,hd(r),e):e.input==="radio"&&n4(n,hd(r),e)};pv(e.inputOptions)||gv(e.inputOptions)?(Ra(is()),Jl(e.inputOptions).then(r=>{t.hideLoading(),s(r)})):typeof e.inputOptions=="object"?s(e.inputOptions):Pi(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},e4=(t,e)=>{const n=t.getInput();n&&(zt(n),Jl(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,xt(n),n.focus(),t.hideLoading()}).catch(s=>{Pi(`Error in inputValue promise: ${s}`),n.value="",xt(n),n.focus(),t.hideLoading()}))};function t4(t,e,n){const s=lr(t,$.select);if(!s)return;const r=(i,a,l)=>{const c=document.createElement("option");c.value=l,xn(c,a),c.selected=YS(l,n.inputValue),i.appendChild(c)};e.forEach(i=>{const a=i[0],l=i[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=a,c.disabled=!1,s.appendChild(c),l.forEach(d=>r(c,d[1],d[0]))}else r(s,l,a)}),s.focus()}function n4(t,e,n){const s=lr(t,$.radio);if(!s)return;e.forEach(i=>{const a=i[0],l=i[1],c=document.createElement("input"),d=document.createElement("label");c.type="radio",c.name=$.radio,c.value=a,YS(a,n.inputValue)&&(c.checked=!0);const h=document.createElement("span");xn(h,l),h.className=$.label,d.appendChild(c),d.appendChild(h),s.appendChild(d)});const r=s.querySelectorAll("input");r.length&&r[0].focus()}const hd=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let r=n;typeof r=="object"&&(r=hd(r)),e.push([s,r])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=hd(s)),e.push([n,s])}),e},YS=(t,e)=>!!e&&e!==null&&e!==void 0&&e.toString()===t.toString(),s4=t=>{const e=Ve.innerParams.get(t);t.disableButtons(),e.input?XS(t,"confirm"):Cv(t,!0)},r4=t=>{const e=Ve.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?XS(t,"deny"):Nv(t,!1)},i4=(t,e)=>{t.disableButtons(),e(Ya.cancel)},XS=(t,e)=>{const n=Ve.innerParams.get(t);if(!n.input){Pi(`The "input" parameter is needed to be set when using returnInputValueOn${mv(e)}`);return}const s=t.getInput(),r=QB(t,n);n.inputValidator?a4(t,r,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?Nv(t,r):Cv(t,r)},a4=(t,e,n)=>{const s=Ve.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Jl(s.inputValidator(e,s.validationMessage))).then(i=>{t.enableButtons(),t.enableInput(),i?t.showValidationMessage(i):n==="deny"?Nv(t,e):Cv(t,e)})},Nv=(t,e)=>{const n=Ve.innerParams.get(t);n.showLoaderOnDeny&&Ra(ki()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Jl(n.preDeny(e,n.validationMessage))).then(r=>{r===!1?(t.hideLoading(),sc(t)):t.close({isDenied:!0,value:typeof r>"u"?e:r})}).catch(r=>JS(t,r))):t.close({isDenied:!0,value:e})},Tx=(t,e)=>{t.close({isConfirmed:!0,value:e})},JS=(t,e)=>{t.rejectPromise(e)},Cv=(t,e)=>{const n=Ve.innerParams.get(t);n.showLoaderOnConfirm&&Ra(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Jl(n.preConfirm(e,n.validationMessage))).then(r=>{on(gh())||r===!1?(t.hideLoading(),sc(t)):Tx(t,typeof r>"u"?e:r)}).catch(r=>JS(t,r))):Tx(t,e)};function fd(){const t=Ve.innerParams.get(this);if(!t)return;const e=Ve.domCache.get(this);zt(e.loader),yh()?t.icon&&xt(qa()):o4(e),jn([e.popup,e.actions],$.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const o4=t=>{const e=t.loader.getAttribute("data-button-to-replace"),n=e?t.popup.getElementsByClassName(e):[];n.length?xt(n[0],"inline-block"):Dz()&&zt(t.actions)};function ZS(){const t=Ve.innerParams.get(this),e=Ve.domCache.get(this);return e?wh(e.popup,t.input):null}function eN(t,e,n){const s=Ve.domCache.get(t);e.forEach(r=>{s[r].disabled=n})}function tN(t,e){const n=Ae();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${$.radio}"]`);for(let r=0;r<s.length;r++)s[r].disabled=e}else t.disabled=e}function nN(){eN(this,["confirmButton","denyButton","cancelButton"],!1)}function sN(){eN(this,["confirmButton","denyButton","cancelButton"],!0)}function rN(){tN(this.getInput(),!1)}function iN(){tN(this.getInput(),!0)}function aN(t){const e=Ve.domCache.get(this),n=Ve.innerParams.get(this);xn(e.validationMessage,t),e.validationMessage.className=$["validation-message"],n.customClass&&n.customClass.validationMessage&&Ce(e.validationMessage,n.customClass.validationMessage),xt(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",$["validation-message"]),kS(s),Ce(s,$.inputerror))}function oN(){const t=Ve.domCache.get(this);t.validationMessage&&zt(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),jn(e,$.inputerror))}const ur={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},l4=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],c4={allowEnterKey:void 0},u4=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],lN=t=>Object.prototype.hasOwnProperty.call(ur,t),cN=t=>l4.indexOf(t)!==-1,uN=t=>c4[t],d4=t=>{lN(t)||Qt(`Unknown parameter "${t}"`)},h4=t=>{u4.includes(t)&&Qt(`The parameter "${t}" is incompatible with toasts`)},f4=t=>{const e=uN(t);e&&CS(t,e)},dN=t=>{t.backdrop===!1&&t.allowOutsideClick&&Qt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Qt(`Invalid theme "${t.theme}"`);for(const e in t)d4(e),t.toast&&h4(e),f4(e)};function hN(t){const e=Zt(),n=Ae(),s=Ve.innerParams.get(this);if(!n||Ts(n,s.hideClass.popup)){Qt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=m4(t),i=Object.assign({},s,r);dN(i),e&&(e.dataset.swal2Theme=i.theme),BS(this,i),Ve.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const m4=t=>{const e={};return Object.keys(t).forEach(n=>{if(cN(n)){const s=t;e[n]=s[n]}else Qt(`Invalid parameter to update: ${n}`)}),e};function fN(){var t;const e=Ve.domCache.get(this),n=Ve.innerParams.get(this);if(!n){mN(this);return}e.popup&&ne.swalCloseEventFinishedCallback&&(ne.swalCloseEventFinishedCallback(),delete ne.swalCloseEventFinishedCallback),typeof n.didDestroy=="function"&&n.didDestroy(),(t=ne.eventEmitter)===null||t===void 0||t.emit("didDestroy"),p4(this)}const p4=t=>{mN(t),delete t.params,delete ne.keydownHandler,delete ne.keydownTarget,delete ne.currentInstance},mN=t=>{t.isAwaitingPromise?(Of(Ve,t),t.isAwaitingPromise=!0):(Of(ka,t),Of(Ve,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Of=(t,e)=>{for(const n in t)t[n].delete(e)};var g4=Object.freeze({__proto__:null,_destroy:fN,close:cr,closeModal:cr,closePopup:cr,closeToast:cr,disableButtons:sN,disableInput:iN,disableLoading:fd,enableButtons:nN,enableInput:rN,getInput:ZS,handleAwaitingPromise:sc,hideLoading:fd,rejectPromise:QS,resetValidationMessage:oN,showValidationMessage:aN,update:hN});const v4=(t,e,n)=>{t.toast?y4(t,e,n):(_4(e),x4(e),b4(t,e,n))},y4=(t,e,n)=>{e.popup.onclick=()=>{t&&(w4(t)||t.timer||t.input)||n(Ya.close)}},w4=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let md=!1;const _4=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(md=!0)}}},x4=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(md=!0)}}},b4=(t,e,n)=>{e.container.onclick=s=>{if(md){md=!1;return}s.target===e.container&&ph(t.allowOutsideClick)&&n(Ya.backdrop)}},E4=t=>typeof t=="object"&&t.jquery,Sx=t=>t instanceof Element||E4(t),I4=t=>{const e={};return typeof t[0]=="object"&&!Sx(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const r=t[s];typeof r=="string"||Sx(r)?e[n]=r:r!==void 0&&Pi(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof r}`)}),e};function T4(...t){return new this(...t)}function S4(t){class e extends this{_main(s,r){return super._main(s,Object.assign({},t,r))}}return e}const N4=()=>ne.timeout&&ne.timeout.getTimerLeft(),pN=()=>{if(ne.timeout)return Mz(),ne.timeout.stop()},gN=()=>{if(ne.timeout){const t=ne.timeout.start();return Ev(t),t}},C4=()=>{const t=ne.timeout;return t&&(t.running?pN():gN())},A4=t=>{if(ne.timeout){const e=ne.timeout.increase(t);return Ev(e,!0),e}},j4=()=>!!(ne.timeout&&ne.timeout.isRunning());let Nx=!1;const up={};function P4(t="data-swal-template"){up[t]=this,Nx||(document.body.addEventListener("click",k4),Nx=!0)}const k4=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in up){const s=e.getAttribute&&e.getAttribute(n);if(s){up[n].fire({template:s});return}}};class R4{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){const s=(...r)=>{this.removeListener(e,s),n.apply(this,r)};this.on(e,s)}emit(e,...n){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,n)}catch(r){console.error(r)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),r=s.indexOf(n);r>-1&&s.splice(r,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}ne.eventEmitter=new R4;const D4=(t,e)=>{ne.eventEmitter&&ne.eventEmitter.on(t,e)},O4=(t,e)=>{ne.eventEmitter&&ne.eventEmitter.once(t,e)},M4=(t,e)=>{if(ne.eventEmitter){if(!t){ne.eventEmitter.reset();return}e?ne.eventEmitter.removeListener(t,e):ne.eventEmitter.removeAllListeners(t)}};var L4=Object.freeze({__proto__:null,argsToParams:I4,bindClickHandler:P4,clickCancel:IB,clickConfirm:$S,clickDeny:EB,enableLoading:Ra,fire:T4,getActions:ec,getCancelButton:Ka,getCloseButton:wv,getConfirmButton:is,getContainer:Zt,getDenyButton:ki,getFocusableElements:_v,getFooter:PS,getHtmlContainer:vv,getIcon:qa,getIconContent:Az,getImage:jS,getInputLabel:jz,getLoader:Qa,getPopup:Ae,getProgressSteps:yv,getTimerLeft:N4,getTimerProgressBar:vh,getTitle:AS,getValidationMessage:gh,increaseTimer:A4,isDeprecatedParameter:uN,isLoading:kz,isTimerRunning:j4,isUpdatableParameter:cN,isValidParameter:lN,isVisible:bB,mixin:S4,off:M4,on:D4,once:O4,resumeTimer:gN,showLoading:Ra,stopTimer:pN,toggleTimer:C4});class V4{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const vN=["swal-title","swal-html","swal-footer"],F4=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return q4(n),Object.assign(U4(n),z4(n),B4(n),$4(n),W4(n),G4(n),H4(n,vN))},U4=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{_i(s,["name","value"]);const r=s.getAttribute("name"),i=s.getAttribute("value");!r||!i||(r in ur&&typeof ur[r]=="boolean"?e[r]=i!=="false":r in ur&&typeof ur[r]=="object"?e[r]=JSON.parse(i):e[r]=i)}),e},z4=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const r=s.getAttribute("name"),i=s.getAttribute("value");!r||!i||(e[r]=new Function(`return ${i}`)())}),e},B4=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{_i(s,["type","color","aria-label"]);const r=s.getAttribute("type");if(!(!r||!["confirm","cancel","deny"].includes(r))){if(e[`${r}ButtonText`]=s.innerHTML,e[`show${mv(r)}Button`]=!0,s.hasAttribute("color")){const i=s.getAttribute("color");i!==null&&(e[`${r}ButtonColor`]=i)}if(s.hasAttribute("aria-label")){const i=s.getAttribute("aria-label");i!==null&&(e[`${r}ButtonAriaLabel`]=i)}}}),e},$4=t=>{const e={},n=t.querySelector("swal-image");return n&&(_i(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},W4=t=>{const e={},n=t.querySelector("swal-icon");return n&&(_i(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},G4=t=>{const e={},n=t.querySelector("swal-input");n&&(_i(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(r=>{_i(r,["value"]);const i=r.getAttribute("value");if(!i)return;const a=r.innerHTML;e.inputOptions[i]=a})),e},H4=(t,e)=>{const n={};for(const s in e){const r=e[s],i=t.querySelector(r);i&&(_i(i,[]),n[r.replace(/^swal-/,"")]=i.innerHTML.trim())}return n},q4=t=>{const e=vN.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||Qt(`Unrecognized element <${s}>`)})},_i=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Qt([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},yN=10,K4=t=>{var e,n;const s=Zt(),r=Ae();if(!s||!r)return;typeof t.willOpen=="function"&&t.willOpen(r),(e=ne.eventEmitter)===null||e===void 0||e.emit("willOpen",r);const a=window.getComputedStyle(document.body).overflowY;if(X4(s,r,t),setTimeout(()=>{Q4(s,r)},yN),xv()&&(Y4(s,t.scrollbarPadding!==void 0?t.scrollbarPadding:!1,a),kB()),!yh()&&!ne.previousActiveElement&&(ne.previousActiveElement=document.activeElement),typeof t.didOpen=="function"){const l=t.didOpen;setTimeout(()=>l(r))}(n=ne.eventEmitter)===null||n===void 0||n.emit("didOpen",r)},pd=t=>{const e=Ae();if(!e||t.target!==e)return;const n=Zt();n&&(e.removeEventListener("animationend",pd),e.removeEventListener("transitionend",pd),n.style.overflowY="auto",jn(n,$["no-transition"]))},Q4=(t,e)=>{DS(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",pd),e.addEventListener("transitionend",pd)):t.style.overflowY="auto"},Y4=(t,e,n)=>{RB(),e&&n!=="hidden"&&UB(n),setTimeout(()=>{t.scrollTop=0})},X4=(t,e,n)=>{var s;(s=n.showClass)!==null&&s!==void 0&&s.backdrop&&Ce(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),xt(e,"grid"),setTimeout(()=>{var r;(r=n.showClass)!==null&&r!==void 0&&r.popup&&Ce(e,n.showClass.popup),e.style.removeProperty("opacity")},yN)):xt(e,"grid"),Ce([document.documentElement,document.body],$.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ce([document.documentElement,document.body],$["height-auto"])};var Cx={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function J4(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Cx.email),t.input==="url"&&(t.inputValidator=Cx.url))}function Z4(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Qt('Target parameter is not valid, defaulting to "body"'),t.target="body")}function e$(t){J4(t),t.showLoaderOnConfirm&&!t.preConfirm&&Qt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),Z4(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),Wz(t)}let Qn;var Hc=new WeakMap;class it{constructor(...e){if(xz(this,Hc,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;Qn=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,bz(Hc,this,this._main(Qn.params))}_main(e,n={}){if(dN(Object.assign({},n,e)),ne.currentInstance){const i=ka.swalPromiseResolve.get(ne.currentInstance),{isAwaitingPromise:a}=ne.currentInstance;ne.currentInstance._destroy(),a||i({isDismissed:!0}),xv()&&HS()}ne.currentInstance=Qn;const s=n$(e,n);e$(s),Object.freeze(s),ne.timeout&&(ne.timeout.stop(),delete ne.timeout),clearTimeout(ne.restoreFocusTimeout);const r=s$(Qn);return BS(Qn,s),Ve.innerParams.set(Qn,s),t$(Qn,r,s)}then(e){return yx(Hc,this).then(e)}finally(e){return yx(Hc,this).finally(e)}}const t$=(t,e,n)=>new Promise((s,r)=>{const i=a=>{t.close({isDismissed:!0,dismiss:a,isConfirmed:!1,isDenied:!1})};ka.swalPromiseResolve.set(t,s),ka.swalPromiseReject.set(t,r),e.confirmButton.onclick=()=>{s4(t)},e.denyButton.onclick=()=>{r4(t)},e.cancelButton.onclick=()=>{i4(t,i)},e.closeButton.onclick=()=>{i(Ya.close)},v4(n,e,i),TB(ne,n,i),KB(t,n),K4(n),r$(ne,n,i),i$(e,n),setTimeout(()=>{e.container.scrollTop=0})}),n$=(t,e)=>{const n=F4(t),s=Object.assign({},ur,e,n,t);return s.showClass=Object.assign({},ur.showClass,s.showClass),s.hideClass=Object.assign({},ur.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},s$=t=>{const e={popup:Ae(),container:Zt(),actions:ec(),confirmButton:is(),denyButton:ki(),cancelButton:Ka(),loader:Qa(),closeButton:wv(),validationMessage:gh(),progressSteps:yv()};return Ve.domCache.set(t,e),e},r$=(t,e,n)=>{const s=vh();zt(s),e.timer&&(t.timeout=new V4(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&s&&(xt(s),vn(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Ev(e.timer)})))},i$=(t,e)=>{if(!e.toast){if(!ph(e.allowEnterKey)){CS("allowEnterKey"),l$();return}a$(t)||o$(t,e)||cp(-1,1)}},a$=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&on(n))return n.focus(),!0;return!1},o$=(t,e)=>e.focusDeny&&on(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&on(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&on(t.confirmButton)?(t.confirmButton.focus(),!0):!1,l$=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};it.prototype.disableButtons=sN;it.prototype.enableButtons=nN;it.prototype.getInput=ZS;it.prototype.disableInput=iN;it.prototype.enableInput=rN;it.prototype.hideLoading=fd;it.prototype.disableLoading=fd;it.prototype.showValidationMessage=aN;it.prototype.resetValidationMessage=oN;it.prototype.close=cr;it.prototype.closePopup=cr;it.prototype.closeModal=cr;it.prototype.closeToast=cr;it.prototype.rejectPromise=QS;it.prototype.update=hN;it.prototype._destroy=fN;Object.assign(it,L4);Object.keys(g4).forEach(t=>{it[t]=function(...e){if(Qn&&Qn[t])return Qn[t](...e)}});it.DismissReason=Ya;it.version="11.26.17";const Vn=it;Vn.default=Vn;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function c$({isOpen:t,onClose:e,onSuccess:n}){const{t:s}=ft(),[r,i]=R.useState({name:"",description:"",body:"",type:"fixed",category:"",riskLevel:"medium",expectedROI:"",durationMonths:"",targetAmount:"",minInvestment:"",maxInvestment:"",drawdown:"",performance:"",manualControl:!0}),[a,l]=R.useState(!1),[c,d]=R.useState(null),[h,f]=R.useState(!1),[m,p]=R.useState(!1),[y,b]=R.useState(""),[T,x]=R.useState([]),w=["Energa","Trading","Crypto","Inmobiliario"],S=()=>{i({name:"",description:"",body:"",type:"fixed",category:"",riskLevel:"medium",expectedROI:"",durationMonths:"",targetAmount:"",minInvestment:"",maxInvestment:"",drawdown:"",performance:"",manualControl:!0}),d(null),x(v=>{for(const C of v)try{C!=null&&C.previewUrl&&URL.revokeObjectURL(C.previewUrl)}catch{}return[]})};R.useEffect(()=>{if(t)return()=>{x(v=>{for(const C of v)try{C!=null&&C.previewUrl&&URL.revokeObjectURL(C.previewUrl)}catch{}return v})}},[t]);const j=v=>{const E=[];for(const A of Array.from(v||[])){if(!String((A==null?void 0:A.type)||"").startsWith("image/")||A.size>5242880)continue;const D=URL.createObjectURL(A);E.push({file:A,previewUrl:D})}E.length>0&&x(A=>[...A,...E])},P=v=>{x(C=>{const E=C[v];try{E!=null&&E.previewUrl&&URL.revokeObjectURL(E.previewUrl)}catch{}return C.filter((A,D)=>D!==v)})},O=()=>{S(),e()},_=async(v,C="draft")=>{var F,L;if(v.preventDefault(),!r.name){d(s("projectForm.errors.nameRequired"));return}const E=r.type==="fixed",A=E?Number(r.targetAmount):null,D=E&&r.minInvestment!==""?Number(r.minInvestment):null,N=E&&r.maxInvestment!==""?Number(r.maxInvestment):null;if(E){if(!Number.isFinite(A)||A<=0){d(s("projectForm.errors.targetRequired"));return}if(D!==null){if(!Number.isFinite(D)||D<=0){d(s("projectForm.errors.minInvestmentPositive"));return}if(D>A){d(s("projectForm.errors.minGreaterThanTarget"));return}}if(N!==null){if(!Number.isFinite(N)||N<=0){d(s("projectForm.errors.maxInvestmentPositive"));return}if(N>A){d(s("projectForm.errors.maxGreaterThanTarget"));return}}if(D!==null&&N!==null&&D>N){d(s("projectForm.errors.minGreaterThanMax"));return}}try{l(!0),d(null);const ee={name:r.name,description:(F=r.description)!=null&&F.trim()?r.description.trim():null,body:(L=r.body)!=null&&L.trim()?r.body.trim():null,type:r.type,category:r.category||null,riskLevel:r.riskLevel||"medium",expectedROI:r.expectedROI?Number(r.expectedROI):null,duration:r.durationMonths?Number(r.durationMonths):null,status:"draft",targetAmount:E?A:null,totalInvested:0,totalInvestment:0,minInvestment:E?D:null,maxInvestment:E?N:null,autoLockOnTarget:E?!0:null,drawdown:!E&&r.drawdown?Number(r.drawdown):null,performance:!E&&r.performance?Number(r.performance):null,manualControl:r.manualControl,investable:C==="active",createdAt:se(),updatedAt:se()},z=await nd(de(Q,"projects"),ee);if(T.length>0){const M=[];for(const U of T){const te=U==null?void 0:U.file;if(!te)continue;const he=String(te.name||"image").replace(/[^a-zA-Z0-9._-]/g,"_").slice(0,80),Fe=`projects/${z.id}/images/${Date.now()}_${he}`,je=ar(_s,Fe);await Al(je,te,{contentType:te.type||"image/*"});const et=await jl(je);M.push({url:et,path:Fe})}const W=M.map(U=>U.url).filter(Boolean),K=M.map(U=>U.path).filter(Boolean);await Vs(z,{images:W,imagePaths:K,imageUrl:W[0]||null,imagePath:K[0]||null,imageUpdatedAt:se(),updatedAt:se()})}await Vn.fire({title:s("projectForm.alerts.successTitle"),text:s("projectForm.alerts.successText").replace("{name}",r.name),icon:"success",confirmButtonColor:"#10b981",background:"#1a1f2e",color:"#ffffff",timer:2500,timerProgressBar:!0,customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}}),S(),n==null||n(),e()}catch(ee){console.error("Error creando proyecto",ee),await Vn.fire({title:s("projectForm.alerts.errorTitle"),text:s("projectForm.errors.createFailed"),icon:"error",confirmButtonColor:"#ef4444",background:"#1a1f2e",color:"#ffffff",customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}})}finally{l(!1)}};return t?o.jsx("div",{className:"project-modal-overlay",onClick:O,children:o.jsxs("div",{className:"project-modal",onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h2",{children:s("projectForm.title")}),o.jsx("button",{className:"close-btn",onClick:O,children:""})]}),o.jsxs("form",{className:"modal-form",onSubmit:v=>_(v,"draft"),children:[o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-section-header",children:[o.jsx("h3",{children:s("projectForm.generalInfo")}),o.jsx("p",{children:s("projectForm.generalInfoDesc")})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("div",{className:"form-section-header",children:[o.jsxs("h3",{children:[" ",s("projectForm.images")]}),o.jsx("p",{children:s("projectForm.imagesDesc")})]}),o.jsx("div",{className:"form-row",children:o.jsxs("label",{children:[s("projectForm.addImages"),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:v=>{j(v.target.files),v.target.value=""}}),o.jsx("span",{className:"field-hint",children:s("projectForm.imageHint")})]})}),T.length>0&&o.jsx("div",{className:"project-images-carousel","aria-label":"Previsualizacin de imgenes",children:o.jsx(mh,{modules:[fv],freeMode:!0,slidesPerView:"auto",spaceBetween:12,className:"project-images-swiper",children:T.map((v,C)=>o.jsx(Pa,{className:"project-images-slide",children:o.jsxs("div",{className:"project-images-thumb",children:[o.jsx("img",{src:v.previewUrl,alt:`Imagen ${C+1}`,loading:"lazy"}),o.jsx("button",{type:"button",className:"project-images-remove",onClick:()=>P(C),"aria-label":"Eliminar imagen",children:""})]})},`new-img-${C}`))})})]}),o.jsx("div",{className:"form-row",children:o.jsxs("label",{children:[s("projectForm.projectName")," *",o.jsx("input",{type:"text",value:r.name,onChange:v=>i({...r,name:v.target.value}),placeholder:s("projectForm.projectNamePlaceholder"),required:!0})]})}),o.jsx("div",{className:"form-row",children:o.jsxs("label",{children:[s("projectForm.subtitle"),o.jsx("input",{type:"text",value:r.description,onChange:v=>i({...r,description:v.target.value}),placeholder:s("projectForm.subtitlePlaceholder")})]})}),o.jsx("div",{className:"form-row",children:o.jsxs("label",{children:[s("projectForm.longDescription"),o.jsx("textarea",{value:r.body,onChange:v=>i({...r,body:v.target.value}),placeholder:s("projectForm.longDescriptionPlaceholder"),rows:5})]})}),o.jsxs("div",{className:"form-row form-row-2",children:[o.jsxs("label",{children:[s("projectForm.projectType")," *",o.jsxs("select",{value:r.type,onChange:v=>i({...r,type:v.target.value}),children:[o.jsx("option",{value:"fixed",children:s("projectForm.typeFixed")}),o.jsx("option",{value:"variable",children:s("projectForm.typeVariable")})]})]}),o.jsxs("label",{children:[o.jsxs("span",{className:"label-with-badge",children:[s("projectForm.category"),o.jsx("span",{className:"label-badge",children:s("projectForm.categoryBadge")})]}),o.jsxs("div",{className:"category-select",onClick:()=>f(v=>!v),children:[o.jsxs("div",{className:"category-control",role:"button",tabIndex:0,children:[o.jsx("div",{className:"category-value",children:r.category||s("projectForm.categoryPlaceholder")}),o.jsx("div",{className:"category-caret",children:""})]}),h&&o.jsxs("div",{className:"category-dropdown",onClick:v=>v.stopPropagation(),children:[o.jsx("div",{className:"dropdown-search",children:o.jsx("input",{type:"text",placeholder:s("projectForm.searchCategories"),value:r.category,onChange:v=>i({...r,category:v.target.value})})}),o.jsx("div",{className:"dropdown-section",children:w.map(v=>o.jsx("button",{type:"button",className:`dropdown-item ${r.category===v?"selected":""}`,onClick:()=>{i({...r,category:v}),p(!1),f(!1)},children:v},v))}),o.jsxs("div",{className:"dropdown-section create-section",children:[o.jsxs("button",{type:"button",className:"dropdown-item create-item",onClick:()=>{p(!0)},children:[" ",s("projectForm.createCategory")]}),m&&o.jsxs("div",{className:"inline-create",children:[o.jsxs("label",{children:[s("projectForm.categoryNameLabel"),o.jsx("input",{type:"text",value:y,onChange:v=>b(v.target.value),placeholder:s("projectForm.categoryNamePlaceholder")})]}),o.jsxs("div",{className:"inline-actions",children:[o.jsx("button",{type:"button",className:"draft-btn ghost",onClick:()=>{p(!1),b("")},children:s("common.cancel")}),o.jsx("button",{type:"button",className:"submit-btn compact",onClick:()=>{y.trim()&&(i({...r,category:y.trim()}),p(!1),f(!1),b(""))},children:s("projectForm.createAndSelect")})]})]})]})]})]}),o.jsx("span",{className:"field-hint",children:s("projectForm.categoryHint")})]})]}),o.jsxs("div",{className:"form-row form-row-3",children:[o.jsxs("label",{children:[s("projectForm.riskLevel")," *",o.jsxs("select",{value:r.riskLevel,onChange:v=>i({...r,riskLevel:v.target.value}),children:[o.jsx("option",{value:"low",children:s("projectForm.riskLow")}),o.jsx("option",{value:"medium",children:s("projectForm.riskMedium")}),o.jsx("option",{value:"high",children:s("projectForm.riskHigh")})]})]}),o.jsxs("label",{children:[s("projectForm.expectedROI"),o.jsx("input",{type:"number",step:"0.01",value:r.expectedROI,onChange:v=>i({...r,expectedROI:v.target.value}),placeholder:"12"})]}),o.jsxs("label",{children:[s("projectForm.duration"),o.jsx("input",{type:"number",value:r.durationMonths,onChange:v=>i({...r,durationMonths:v.target.value}),placeholder:"12"})]})]}),r.type==="fixed"&&o.jsxs("div",{className:"form-section form-section-financial",children:[o.jsxs("div",{className:"form-section-header",children:[o.jsxs("h3",{children:[" ",s("projectForm.fixedConfig")]}),o.jsx("p",{children:s("projectForm.fixedConfigDesc")})]}),o.jsxs("div",{className:"form-row form-row-3",children:[o.jsxs("label",{children:[s("projectForm.targetAmount"),o.jsx("input",{type:"number",value:r.targetAmount,onChange:v=>i({...r,targetAmount:v.target.value}),placeholder:"500000"})]}),o.jsxs("label",{children:[s("projectForm.minInvestment"),o.jsx("input",{type:"number",value:r.minInvestment,onChange:v=>i({...r,minInvestment:v.target.value}),placeholder:"1000"})]}),o.jsxs("label",{children:[s("projectForm.maxInvestment"),o.jsx("input",{type:"number",value:r.maxInvestment,onChange:v=>i({...r,maxInvestment:v.target.value}),placeholder:"50000"})]})]})]}),r.type==="variable"&&o.jsxs("div",{className:"form-section form-section-financial",children:[o.jsxs("div",{className:"form-section-header",children:[o.jsxs("h3",{children:[" ",s("projectForm.variableConfig")]}),o.jsx("p",{children:s("projectForm.variableConfigDesc")})]}),o.jsxs("div",{className:"form-row form-row-2",children:[o.jsxs("label",{children:[s("projectForm.drawdown"),o.jsx("input",{type:"number",step:"0.01",value:r.drawdown,onChange:v=>i({...r,drawdown:v.target.value}),placeholder:"-5"})]}),o.jsxs("label",{children:[s("projectForm.performance"),o.jsx("input",{type:"number",step:"0.01",value:r.performance,onChange:v=>i({...r,performance:v.target.value}),placeholder:"8"})]})]}),o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:r.manualControl,onChange:v=>i({...r,manualControl:v.target.checked})}),s("projectForm.manualControl")]})]}),o.jsxs("div",{className:"form-section form-section-advanced",children:[o.jsxs("div",{className:"form-section-header",children:[o.jsxs("h3",{children:[" ",s("projectForm.advancedConfig")]}),o.jsx("p",{children:s("projectForm.advancedConfigDesc")})]}),o.jsx("div",{className:"placeholder-box",children:o.jsx("p",{children:s("projectForm.advancedPlaceholder")})})]}),c&&o.jsx("div",{className:"form-error",children:c})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"cancel-btn",onClick:O,disabled:a,children:s("common.cancel")}),o.jsx("button",{type:"submit",className:"draft-btn",disabled:a,children:s(a?"projectForm.saving":"projectForm.createDraft")}),o.jsx("button",{type:"button",className:"submit-btn",onClick:v=>_(v,"active"),disabled:a,children:s(a?"projectForm.publishing":"projectForm.createAndPublish")})]})]})]})}):null}function wN(t){const[e,n]=R.useState([]),[s,r]=R.useState(!0),[i,a]=R.useState(null),l=async()=>{if(!t){n([]),r(!1);return}try{r(!0),a(null);const f=de(Q,"projects",t,"timeline"),m=Pe(f,Gn("createdAt","desc")),y=(await ke(m)).docs.map(b=>({id:b.id,...b.data()}));n(y)}catch(f){console.error("Error en useProjectTimeline:",f),a(f.message)}finally{r(!1)}};R.useEffect(()=>{l()},[t]);const c=async f=>{if(!t)return null;try{const m=de(Q,"projects",t,"timeline"),p={type:f.type||"update",title:f.title||"",description:f.description||"",visibility:f.visibility||"admin",createdBy:f.createdBy||null,metadata:f.metadata||null,createdAt:se()},y=await nd(m,p);return(p.visibility==="investors"||p.visibility==="all")&&await d(t,y.id,p),await l(),y.id}catch(m){throw console.error("Error creando evento timeline:",m),m}},d=async(f,m,p)=>{try{let y=null;try{const j=await Kt(ae(Q,"projects",f)),P=j.exists()?j.data():null;y=(P==null?void 0:P.name)||(P==null?void 0:P.title)||(P==null?void 0:P.projectName)||null}catch{}const b=de(Q,"investments"),T=Pe(b),x=await ke(T),w=new Set;x.docs.forEach(j=>{const P=j.data();P.projectId===f&&(P.status==="active"||P.status==="completed")&&w.add(P.userId)});const S=Array.from(w).map(j=>nd(de(Q,"users",j,"notifications"),{userId:j,projectId:f,projectName:y,eventId:m,type:"project_update",title:p.title,message:p.description||p.title,read:!1,createdAt:se()}));await Promise.all(S)}catch(y){console.error("Error creando notificaciones:",y)}};return{events:e,loading:s,error:i,addEvent:c,refetch:()=>l()}}function u$({project:t,isOpen:e,onClose:n,onSuccess:s,onTimelineEvent:r}){const{t:i}=ft(),[a,l]=R.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",body:(t==null?void 0:t.body)||"",category:(t==null?void 0:t.category)||"",expectedROI:(t==null?void 0:t.expectedROI)||"",duration:(t==null?void 0:t.duration)||"",drawdown:(t==null?void 0:t.drawdown)||"",performance:(t==null?void 0:t.performance)||""}),[c,d]=R.useState([]),[h,f]=R.useState([]),[m,p]=R.useState([]),[y,b]=R.useState(!1),[T,x]=R.useState(null);R.useEffect(()=>{if(t){l({name:t.name||"",description:t.description||"",body:t.body||"",category:t.category||"",expectedROI:t.expectedROI||"",duration:t.duration||"",drawdown:t.drawdown||"",performance:t.performance||""});const _=Array.isArray(t.images)?t.images.filter(C=>typeof C=="string"&&C.trim()):t.imageUrl?[t.imageUrl]:[],v=Array.isArray(t.imagePaths)?t.imagePaths.filter(C=>typeof C=="string"&&C.trim()):t.imagePath?[t.imagePath]:[];d(_.map((C,E)=>({url:C,path:v[E]||null}))),p([]),f(C=>{for(const E of C)try{E!=null&&E.previewUrl&&URL.revokeObjectURL(E.previewUrl)}catch{}return[]})}},[t]);const w=_=>{const C=[];for(const E of Array.from(_||[])){if(!String((E==null?void 0:E.type)||"").startsWith("image/")||E.size>5242880)continue;const A=URL.createObjectURL(E);C.push({file:E,previewUrl:A})}C.length>0&&f(E=>[...E,...C])},S=_=>{d(v=>{const C=v[_];return C!=null&&C.path&&p(E=>[...E,C.path]),v.filter((E,A)=>A!==_)})},j=_=>{f(v=>{const C=v[_];try{C!=null&&C.previewUrl&&URL.revokeObjectURL(C.previewUrl)}catch{}return v.filter((E,A)=>A!==_)})};R.useMemo(()=>{var C,E;const _=(C=c==null?void 0:c[0])==null?void 0:C.url;return((E=h==null?void 0:h[0])==null?void 0:E.previewUrl)||_||(t==null?void 0:t.imageUrl)||null},[c,h,t==null?void 0:t.imageUrl]);const P=()=>{x(null),n()},O=async _=>{var v,C;if(_.preventDefault(),!!(t!=null&&t.id))try{b(!0),x(null);const E=[];a.name!==t.name&&E.push(`${i("projectEdit.timeline.nameChange")}: "${t.name}"  "${a.name}"`),(a.description||"")!==(t.description||"")&&E.push(i("projectEdit.timeline.subtitleUpdated")),(a.body||"")!==(t.body||"")&&E.push(i("projectEdit.timeline.descriptionUpdated")),a.category!==t.category&&E.push(`${i("projectEdit.timeline.categoryChange")}: "${t.category||"N/A"}"  "${a.category}"`),Number(a.expectedROI)!==Number(t.expectedROI)&&E.push(`${i("projectEdit.timeline.roiChange")}: ${t.expectedROI}%  ${a.expectedROI}%`),Number(a.duration)!==Number(t.duration)&&E.push(`${i("projectEdit.timeline.durationChange")}: ${t.duration}  ${a.duration} ${i("projectEdit.months")}`),t.type==="variable"&&(Number(a.drawdown)!==Number(t.drawdown)&&E.push(`${i("projectEdit.timeline.drawdownChange")}: ${t.drawdown}%  ${a.drawdown}%`),Number(a.performance)!==Number(t.performance)&&E.push(`${i("projectEdit.timeline.performanceChange")}: ${t.performance}%  ${a.performance}%`));const A={name:a.name,description:(v=a.description)!=null&&v.trim()?a.description.trim():null,body:(C=a.body)!=null&&C.trim()?a.body.trim():null,category:a.category||null,expectedROI:a.expectedROI?Number(a.expectedROI):null,duration:a.duration?Number(a.duration):null,updatedAt:se()};if(t.type==="variable"&&(A.drawdown=a.drawdown?Number(a.drawdown):null,A.performance=a.performance?Number(a.performance):null),m.length>0){for(const L of m)try{await rd(ar(_s,L))}catch{}E.push(`${i("projectEdit.timeline.imagesDeleted")} (${m.length})`)}const D=[];if(h.length>0){for(const L of h){const ee=L==null?void 0:L.file;if(!ee)continue;const z=String(ee.name||"image").replace(/[^a-zA-Z0-9._-]/g,"_").slice(0,80),M=`projects/${t.id}/images/${Date.now()}_${z}`,W=ar(_s,M);await Al(W,ee,{contentType:ee.type||"image/*"});const K=await jl(W);D.push({url:K,path:M})}D.length>0&&E.push(`${i("projectEdit.timeline.imagesAdded")} (${D.length})`)}const N=[...c.map(L=>L.url).filter(Boolean),...D.map(L=>L.url).filter(Boolean)],F=[...c.map(L=>L.path).filter(Boolean),...D.map(L=>L.path).filter(Boolean)];if(A.images=N,A.imagePaths=F,A.imageUrl=N[0]||null,A.imagePath=F[0]||null,A.imageUpdatedAt=se(),await Vs(ae(Q,"projects",t.id),A),E.length>0&&r)try{await r({type:"system",title:i("projectEdit.timeline.projectUpdated"),description:`${i("projectEdit.timeline.fieldsEdited")}
${E.join(`
`)}`,visibility:"admin",metadata:{changes:E}})}catch(L){console.warn("No se pudo registrar evento en timeline:",L)}await Vn.fire({title:i("projectEdit.alerts.successTitle"),text:i("projectEdit.alerts.successText"),icon:"success",confirmButtonColor:"#10b981",background:"#1a1f2e",color:"#ffffff",timer:2e3,timerProgressBar:!0,customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}}),s==null||s(),P()}catch(E){console.error("Error actualizando proyecto:",E),await Vn.fire({title:i("projectEdit.alerts.errorTitle"),text:(E==null?void 0:E.code)==="permission-denied"?i("projectEdit.alerts.permissionDenied"):i("projectEdit.alerts.updateFailed"),icon:"error",confirmButtonColor:"#ef4444",background:"#1a1f2e",color:"#ffffff",customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}})}finally{b(!1)}};return!e||!t?null:o.jsx("div",{className:"edit-modal-overlay",onClick:P,children:o.jsxs("div",{className:"edit-modal",onClick:_=>_.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsxs("div",{className:"modal-header-content",children:[o.jsxs("h2",{children:[" ",i("projectEdit.title")]}),o.jsx("p",{className:"modal-subtitle",children:i("projectEdit.subtitle")})]}),o.jsx("button",{className:"close-btn",onClick:P,"aria-label":i("common.close"),children:""})]}),o.jsxs("form",{className:"modal-form",onSubmit:O,children:[o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",i("projectEdit.images")]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-images",children:i("projectEdit.addImages")}),o.jsx("input",{id:"project-images",type:"file",className:"form-input",accept:"image/*",multiple:!0,onChange:_=>{w(_.target.files),_.target.value=""}}),o.jsx("div",{className:"edit-modal-hint",children:i("projectEdit.imageHint")})]}),(c.length>0||h.length>0)&&o.jsx("div",{className:"edit-modal-images","aria-label":"Carrusel de imgenes",children:o.jsxs(mh,{modules:[fv],freeMode:!0,slidesPerView:"auto",spaceBetween:12,className:"edit-modal-images-swiper",children:[c.map((_,v)=>o.jsx(Pa,{className:"edit-modal-images-slide",children:o.jsxs("div",{className:"edit-modal-thumb",children:[o.jsx("img",{src:_.url,alt:`Imagen existente ${v+1}`,loading:"lazy"}),o.jsx("button",{type:"button",className:"edit-modal-thumb-remove",onClick:()=>S(v),"aria-label":"Eliminar imagen",children:""})]})},`existing-${v}`)),h.map((_,v)=>o.jsx(Pa,{className:"edit-modal-images-slide",children:o.jsxs("div",{className:"edit-modal-thumb",children:[o.jsx("img",{src:_.previewUrl,alt:`Nueva imagen ${v+1}`,loading:"lazy"}),o.jsx("button",{type:"button",className:"edit-modal-thumb-remove",onClick:()=>j(v),"aria-label":"Eliminar imagen",children:""})]})},`new-${v}`))]})})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",i("projectEdit.generalInfo")]}),o.jsxs("div",{className:"form-field",children:[o.jsxs("label",{htmlFor:"project-name",children:[i("projectEdit.projectName")," ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("input",{id:"project-name",type:"text",className:"form-input",value:a.name,onChange:_=>l({...a,name:_.target.value}),placeholder:i("projectEdit.projectNamePlaceholder"),required:!0})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-subtitle",children:i("projectEdit.subtitleLabel")}),o.jsx("input",{id:"project-subtitle",type:"text",className:"form-input",value:a.description,onChange:_=>l({...a,description:_.target.value}),placeholder:i("projectEdit.subtitlePlaceholder")})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-body",children:i("projectEdit.longDescription")}),o.jsx("textarea",{id:"project-body",className:"form-input",rows:6,value:a.body,onChange:_=>l({...a,body:_.target.value}),placeholder:i("projectEdit.longDescriptionPlaceholder")})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-category",children:i("projectEdit.category")}),o.jsx("input",{id:"project-category",type:"text",className:"form-input",value:a.category,onChange:_=>l({...a,category:_.target.value}),placeholder:i("projectEdit.categoryPlaceholder")})]})]}),o.jsxs("div",{className:"form-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",i("projectEdit.financialMetrics")]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-roi",children:i("projectEdit.expectedROI")}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{id:"project-roi",type:"number",className:"form-input",step:"0.01",value:a.expectedROI,onChange:_=>l({...a,expectedROI:_.target.value}),placeholder:"0.00"}),o.jsx("span",{className:"input-icon",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-duration",children:i("projectEdit.duration")}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{id:"project-duration",type:"number",className:"form-input",value:a.duration,onChange:_=>l({...a,duration:_.target.value}),placeholder:"12"}),o.jsx("span",{className:"input-icon",children:i("projectEdit.months")})]})]})]})]}),t.type==="variable"&&o.jsxs("div",{className:"form-section variable-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",i("projectEdit.variableMetrics")]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-drawdown",children:i("projectEdit.drawdown")}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{id:"project-drawdown",type:"number",className:"form-input",step:"0.01",value:a.drawdown,onChange:_=>l({...a,drawdown:_.target.value}),placeholder:"0.00"}),o.jsx("span",{className:"input-icon negative",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-performance",children:i("projectEdit.performance")}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{id:"project-performance",type:"number",className:"form-input",step:"0.01",value:a.performance,onChange:_=>l({...a,performance:_.target.value}),placeholder:"0.00"}),o.jsx("span",{className:"input-icon positive",children:"%"})]})]})]})]}),o.jsxs("div",{className:"info-box",children:[o.jsx("div",{className:"info-icon",children:""}),o.jsxs("div",{className:"info-content",children:[o.jsx("strong",{children:i("projectEdit.nonEditableFields")}),o.jsx("p",{children:i("projectEdit.nonEditableDesc")}),o.jsx("p",{className:"info-note",children:i("projectEdit.nonEditableNote")})]})]}),T&&o.jsxs("div",{className:"form-error",children:[o.jsx("span",{className:"error-icon",children:""}),o.jsx("span",{children:T})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{type:"button",className:"cancel-btn",onClick:P,disabled:y,children:i("common.cancel")}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:y,children:y?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),i("projectForm.saving")]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),i("projectEdit.saveChanges")]})})]})]})]})})}const Ax=5*1024*1024,d$=[{id:"general",label:"General",icon:""},{id:"location",label:"Ubicacin",icon:""},{id:"finance",label:"Finanzas",icon:""},{id:"metrics",label:"Retorno",icon:""},{id:"risks",label:"Riesgos",icon:""},{id:"restrictions",label:"Restricciones",icon:""},{id:"projections",label:"Proyeccin",icon:""},{id:"charts",label:"Grficas",icon:""},{id:"documents",label:"Documentos",icon:""}],gd=t=>{if(!t)return"";if(typeof t=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const e=new Date(t);if(!Number.isNaN(e.getTime()))return e.toISOString().slice(0,10)}return t instanceof Date&&!Number.isNaN(t.getTime())?t.toISOString().slice(0,10):""},Mf=(t="id")=>`${t}_${Date.now()}_${Math.random().toString(16).slice(2)}`,jx=t=>{const e=Number(t);if(!Number.isFinite(e)||e<=0)return"";const n=e/(1024*1024);if(n>=1)return`${n.toFixed(n>=10?0:1)} MB`;const s=e/1024;return`${s.toFixed(s>=10?0:1)} KB`},Lf=t=>{var e,n,s,r,i,a,l,c,d,h,f,m,p,y,b,T,x,w,S,j,P,O,_,v,C,E,A,D,N,F,L,ee,z,M,W,K,U,te,he,Fe,je;return{name:(t==null?void 0:t.name)||"",category:(t==null?void 0:t.category)||"",status:(t==null?void 0:t.status)||"draft",visibleToUsers:(t==null?void 0:t.visibleToUsers)??!0,location:{country:((e=t==null?void 0:t.location)==null?void 0:e.country)||"",region:((n=t==null?void 0:t.location)==null?void 0:n.region)||"",city:((s=t==null?void 0:t.location)==null?void 0:s.city)||"",assetType:((r=t==null?void 0:t.location)==null?void 0:r.assetType)||"",operator:((i=t==null?void 0:t.location)==null?void 0:i.operator)||""},finance:{targetAmount:((a=t==null?void 0:t.finance)==null?void 0:a.targetAmount)||(t==null?void 0:t.targetAmount)||"",minViableCapital:((l=t==null?void 0:t.finance)==null?void 0:l.minViableCapital)||"",initialCapex:((c=t==null?void 0:t.finance)==null?void 0:c.initialCapex)||"",monthlyOperatingCost:((d=t==null?void 0:t.finance)==null?void 0:d.monthlyOperatingCost)||""},metrics:{expectedROI:((h=t==null?void 0:t.metrics)==null?void 0:h.expectedROI)||(t==null?void 0:t.expectedROI)||"",totalROI:((f=t==null?void 0:t.metrics)==null?void 0:f.totalROI)||"",duration:((m=t==null?void 0:t.metrics)==null?void 0:m.duration)||(t==null?void 0:t.duration)||"",paymentFrequency:((p=t==null?void 0:t.metrics)==null?void 0:p.paymentFrequency)||"monthly",estimatedIRR:((y=t==null?void 0:t.metrics)==null?void 0:y.estimatedIRR)||"",paybackPeriod:((b=t==null?void 0:t.metrics)==null?void 0:b.paybackPeriod)||""},risks:{riskLevel:((T=t==null?void 0:t.risks)==null?void 0:T.riskLevel)||(t==null?void 0:t.riskLevel)||"medium",countryRisk:((x=t==null?void 0:t.risks)==null?void 0:x.countryRisk)??!1,regulatoryRisk:((w=t==null?void 0:t.risks)==null?void 0:w.regulatoryRisk)??!1,hasGuarantee:((S=t==null?void 0:t.risks)==null?void 0:S.hasGuarantee)??!1,guaranteeType:((j=t==null?void 0:t.risks)==null?void 0:j.guaranteeType)||"",guaranteeValue:((P=t==null?void 0:t.risks)==null?void 0:P.guaranteeValue)||""},restrictions:{minInvestment:((O=t==null?void 0:t.restrictions)==null?void 0:O.minInvestment)||(t==null?void 0:t.minInvestment)||"",maxInvestment:((_=t==null?void 0:t.restrictions)==null?void 0:_.maxInvestment)||"",maxPercentPerInvestor:((v=t==null?void 0:t.restrictions)==null?void 0:v.maxPercentPerInvestor)||"",maxInvestors:((C=t==null?void 0:t.restrictions)==null?void 0:C.maxInvestors)||"",kycRequired:((E=t==null?void 0:t.restrictions)==null?void 0:E.kycRequired)??!0},projections:{monthlyRevenue:((A=t==null?void 0:t.projections)==null?void 0:A.monthlyRevenue)||"",monthlyCosts:((D=t==null?void 0:t.projections)==null?void 0:D.monthlyCosts)||"",operatingMargin:((N=t==null?void 0:t.projections)==null?void 0:N.operatingMargin)||"",contingencyFund:((F=t==null?void 0:t.projections)==null?void 0:F.contingencyFund)||"",scenario:((L=t==null?void 0:t.projections)==null?void 0:L.scenario)||"base"},charts:{capitalObjetivo:((ee=t==null?void 0:t.charts)==null?void 0:ee.capitalObjetivo)||(t==null?void 0:t.targetAmount)||"",capitalRecaudado:((z=t==null?void 0:t.charts)==null?void 0:z.capitalRecaudado)||(t==null?void 0:t.totalInvested)||"",porcentajeCompletado:((M=t==null?void 0:t.charts)==null?void 0:M.porcentajeCompletado)||(t==null?void 0:t.progress)||"",roiAnual:((W=t==null?void 0:t.charts)==null?void 0:W.roiAnual)||"",roiAcumulado:((K=t==null?void 0:t.charts)==null?void 0:K.roiAcumulado)||"",duracionMeses:((U=t==null?void 0:t.charts)==null?void 0:U.duracionMeses)||"",capitalDistribution:((te=t==null?void 0:t.charts)==null?void 0:te.capitalDistribution)||{operacion:25,infraestructura:35,reserva:15,beneficio:25},paymentCalendar:((he=t==null?void 0:t.charts)==null?void 0:he.paymentCalendar)||[],riskLevel:((Fe=t==null?void 0:t.charts)==null?void 0:Fe.riskLevel)||3,returnExpected:((je=t==null?void 0:t.charts)==null?void 0:je.returnExpected)||""}}};function h$({form:t,updateField:e,existingImages:n,newImageItems:s,addImagesFromFiles:r,removeExistingAt:i,removeNewAt:a}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Informacin General"}),o.jsxs("div",{className:"images-section",children:[o.jsx("h4",{className:"subsection-title",children:" Imgenes del Proyecto"}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-images",children:"Agregar imgenes"}),o.jsx("input",{id:"project-images",type:"file",className:"form-input",accept:"image/*",multiple:!0,onChange:l=>{r(l.target.files),l.target.value=""}}),o.jsx("div",{className:"form-hint",children:"Mx. 5MB por imagen. Puedes eliminar imgenes antes de guardar."})]}),(n.length>0||s.length>0)&&o.jsx("div",{className:"images-gallery","aria-label":"Carrusel de imgenes",children:o.jsxs(mh,{modules:[fv],freeMode:!0,slidesPerView:"auto",spaceBetween:12,className:"images-swiper",children:[n.map((l,c)=>o.jsx(Pa,{className:"image-slide",children:o.jsxs("div",{className:"image-thumb",children:[o.jsx("img",{src:l.url,alt:`Imagen existente ${c+1}`,loading:"lazy"}),o.jsx("button",{type:"button",className:"image-remove-btn",onClick:()=>i(c),"aria-label":"Eliminar imagen",children:""})]})},`existing-${c}`)),s.map((l,c)=>o.jsx(Pa,{className:"image-slide",children:o.jsxs("div",{className:"image-thumb new-image",children:[o.jsx("img",{src:l.previewUrl,alt:`Nueva imagen ${c+1}`,loading:"lazy"}),o.jsx("span",{className:"new-badge",children:"Nueva"}),o.jsx("button",{type:"button",className:"image-remove-btn",onClick:()=>a(c),"aria-label":"Eliminar imagen",children:""})]})},`new-${c}`))]})})]}),o.jsx("div",{className:"form-divider"}),o.jsxs("div",{className:"form-field",children:[o.jsxs("label",{children:["Nombre del proyecto ",o.jsx("span",{className:"required",children:"*"})]}),o.jsx("input",{type:"text",className:"form-input",value:t.name,onChange:l=>e(null,"name",l.target.value),placeholder:"Ej: Proyecto Solar Valle Verde"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Categora"}),o.jsx("input",{type:"text",className:"form-input",value:t.category,onChange:l=>e(null,"category",l.target.value),placeholder:"Ej: Energa, Minera, Inmobiliario"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Estado del proyecto"}),o.jsxs("select",{className:"form-input",value:t.status,onChange:l=>e(null,"status",l.target.value),children:[o.jsx("option",{value:"draft",children:" Borrador"}),o.jsx("option",{value:"active",children:" Activo"}),o.jsx("option",{value:"paused",children:" Pausado"}),o.jsx("option",{value:"funded",children:" Fondeado"}),o.jsx("option",{value:"closed",children:" Cerrado"})]})]}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:t.visibleToUsers,onChange:l=>e(null,"visibleToUsers",l.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Visible para usuarios"})]})})]})}function f$({form:t,updateField:e}){const n=[{value:"",label:"Seleccionar..."},{value:"oil_gas",label:"Petrleo / Gas"},{value:"energy",label:"Energa"},{value:"mining",label:"Minera"},{value:"real_estate",label:"Inmobiliario"},{value:"infrastructure",label:"Infraestructura"}];return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Ubicacin & Activo"}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Pas"}),o.jsx("input",{type:"text",className:"form-input",value:t.location.country,onChange:s=>e("location","country",s.target.value),placeholder:"Ej: Mxico"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Regin / Estado"}),o.jsx("input",{type:"text",className:"form-input",value:t.location.region,onChange:s=>e("location","region",s.target.value),placeholder:"Ej: Nuevo Len"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Ciudad / Zona"}),o.jsx("input",{type:"text",className:"form-input",value:t.location.city,onChange:s=>e("location","city",s.target.value),placeholder:"Ej: Monterrey"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Tipo de Activo"}),o.jsx("select",{className:"form-input",value:t.location.assetType,onChange:s=>e("location","assetType",s.target.value),children:n.map(s=>o.jsx("option",{value:s.value,children:s.label},s.value))})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Operador del Proyecto"}),o.jsx("input",{type:"text",className:"form-input",value:t.location.operator,onChange:s=>e("location","operator",s.target.value),placeholder:"Nombre de la empresa operadora"})]})]})}function m$({form:t,updateField:e}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Finanzas"}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Capital Objetivo (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.finance.targetAmount,onChange:n=>e("finance","targetAmount",n.target.value),placeholder:"1,000,000"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Capital Mnimo Viable (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.finance.minViableCapital,onChange:n=>e("finance","minViableCapital",n.target.value),placeholder:"500,000"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"CapEx Inicial (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.finance.initialCapex,onChange:n=>e("finance","initialCapex",n.target.value),placeholder:"200,000"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Coste Operativo Mensual (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.finance.monthlyOperatingCost,onChange:n=>e("finance","monthlyOperatingCost",n.target.value),placeholder:"15,000"})]})]})]})]})}function p$({form:t,updateField:e}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Retorno & Mtricas"}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"ROI Anual Esperado (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.metrics.expectedROI,onChange:n=>e("metrics","expectedROI",n.target.value),placeholder:"12.5"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"ROI Total Estimado (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.metrics.totalROI,onChange:n=>e("metrics","totalROI",n.target.value),placeholder:"25"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Duracin (meses)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:t.metrics.duration,onChange:n=>e("metrics","duration",n.target.value),placeholder:"24"}),o.jsx("span",{className:"input-suffix",children:"meses"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Periodicidad de Pagos"}),o.jsxs("select",{className:"form-input",value:t.metrics.paymentFrequency,onChange:n=>e("metrics","paymentFrequency",n.target.value),children:[o.jsx("option",{value:"monthly",children:"Mensual"}),o.jsx("option",{value:"quarterly",children:"Trimestral"}),o.jsx("option",{value:"end",children:"Al final"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"IRR Estimada (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.metrics.estimatedIRR,onChange:n=>e("metrics","estimatedIRR",n.target.value),placeholder:"15"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Payback (meses)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:t.metrics.paybackPeriod,onChange:n=>e("metrics","paybackPeriod",n.target.value),placeholder:"18"}),o.jsx("span",{className:"input-suffix",children:"meses"})]})]})]})]})}function g$({form:t,updateField:e}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Riesgos & Garantas"}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Nivel de Riesgo"}),o.jsxs("select",{className:"form-input",value:t.risks.riskLevel,onChange:n=>e("risks","riskLevel",n.target.value),children:[o.jsx("option",{value:"low",children:" Bajo"}),o.jsx("option",{value:"medium",children:" Medio"}),o.jsx("option",{value:"high",children:" Alto"})]})]}),o.jsxs("div",{className:"checkbox-group",children:[o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:t.risks.countryRisk,onChange:n=>e("risks","countryRisk",n.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Riesgo pas"})]})}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:t.risks.regulatoryRisk,onChange:n=>e("risks","regulatoryRisk",n.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Riesgo regulatorio"})]})}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:t.risks.hasGuarantee,onChange:n=>e("risks","hasGuarantee",n.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Tiene garanta"})]})})]}),t.risks.hasGuarantee&&o.jsxs("div",{className:"guarantee-fields",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Tipo de Garanta"}),o.jsx("input",{type:"text",className:"form-input",value:t.risks.guaranteeType,onChange:n=>e("risks","guaranteeType",n.target.value),placeholder:"Ej: Hipoteca, Prenda, Fianza"})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Valor Estimado de la Garanta (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.risks.guaranteeValue,onChange:n=>e("risks","guaranteeValue",n.target.value),placeholder:"500,000"})]})]})]})]})}function v$({form:t,updateField:e}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Restricciones"}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Inversin Mnima por Usuario (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.restrictions.minInvestment,onChange:n=>e("restrictions","minInvestment",n.target.value),placeholder:"100"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Inversin Mxima por Usuario (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.restrictions.maxInvestment,onChange:n=>e("restrictions","maxInvestment",n.target.value),placeholder:"50,000"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Mximo % por Inversor"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",max:"100",value:t.restrictions.maxPercentPerInvestor,onChange:n=>e("restrictions","maxPercentPerInvestor",n.target.value),placeholder:"10"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Nmero Mximo de Inversores"}),o.jsx("input",{type:"number",className:"form-input",value:t.restrictions.maxInvestors,onChange:n=>e("restrictions","maxInvestors",n.target.value),placeholder:"100"})]})]}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:t.restrictions.kycRequired,onChange:n=>e("restrictions","kycRequired",n.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"KYC requerido"})]})})]})}function y$({form:t,updateField:e}){return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Proyeccin Financiera (Interno)"}),o.jsx("p",{className:"section-hint",children:"Esta informacin es solo para referencia interna del administrador."}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Ingresos Mensuales Estimados (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.projections.monthlyRevenue,onChange:n=>e("projections","monthlyRevenue",n.target.value),placeholder:"50,000"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Costes Mensuales Estimados (USD)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.projections.monthlyCosts,onChange:n=>e("projections","monthlyCosts",n.target.value),placeholder:"30,000"})]})]})]}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Margen Operativo Esperado (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.projections.operatingMargin,onChange:n=>e("projections","operatingMargin",n.target.value),placeholder:"40"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Fondo de Contingencia (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.projections.contingencyFund,onChange:n=>e("projections","contingencyFund",n.target.value),placeholder:"10"}),o.jsx("span",{className:"input-suffix",children:"%"})]})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Escenario"}),o.jsxs("select",{className:"form-input",value:t.projections.scenario,onChange:n=>e("projections","scenario",n.target.value),children:[o.jsx("option",{value:"conservative",children:" Conservador"}),o.jsx("option",{value:"base",children:" Base"}),o.jsx("option",{value:"optimistic",children:" Optimista"})]})]})]})}function w$({form:t,setForm:e,updateField:n}){var c,d,h,f;const s=(m,p)=>{const y=Number(p)||0;e(b=>({...b,charts:{...b.charts,capitalDistribution:{...b.charts.capitalDistribution,[m]:y}}}))},r=Object.values(t.charts.capitalDistribution||{}).reduce((m,p)=>m+(Number(p)||0),0),i=()=>{const m={id:Date.now(),month:"",year:new Date().getFullYear(),percent:"",status:"estimated"};e(p=>({...p,charts:{...p.charts,paymentCalendar:[...p.charts.paymentCalendar||[],m]}}))},a=(m,p,y)=>{e(b=>({...b,charts:{...b.charts,paymentCalendar:(b.charts.paymentCalendar||[]).map(T=>T.id===m?{...T,[p]:y}:T)}}))},l=m=>{e(p=>({...p,charts:{...p.charts,paymentCalendar:(p.charts.paymentCalendar||[]).filter(y=>y.id!==m)}}))};return o.jsxs("div",{className:"tab-content-section charts-section",children:[o.jsx("h3",{className:"section-title",children:" Datos para Grficas (Usuario)"}),o.jsx("p",{className:"section-hint",children:"Estos datos sern visibles para los usuarios en las grficas del proyecto."}),o.jsxs("div",{className:"chart-config-card",children:[o.jsx("h4",{children:" Grfica 1  Progreso del Proyecto"}),o.jsxs("div",{className:"form-row-3",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Capital Objetivo"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.charts.capitalObjetivo,onChange:m=>n("charts","capitalObjetivo",m.target.value)})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Capital Recaudado"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("span",{className:"input-prefix",children:"$"}),o.jsx("input",{type:"number",className:"form-input with-prefix",value:t.charts.capitalRecaudado,onChange:m=>n("charts","capitalRecaudado",m.target.value)})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"% Completado"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:t.charts.porcentajeCompletado,onChange:m=>n("charts","porcentajeCompletado",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]})]})]}),o.jsxs("div",{className:"chart-config-card",children:[o.jsx("h4",{children:" Grfica 2  Retorno Esperado"}),o.jsxs("div",{className:"form-row-3",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"ROI Anual (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.charts.roiAnual,onChange:m=>n("charts","roiAnual",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"ROI Acumulado (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.charts.roiAcumulado,onChange:m=>n("charts","roiAcumulado",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Duracin (meses)"}),o.jsx("input",{type:"number",className:"form-input",value:t.charts.duracionMeses,onChange:m=>n("charts","duracionMeses",m.target.value)})]})]})]}),o.jsxs("div",{className:"chart-config-card",children:[o.jsx("h4",{children:" Grfica 3  Distribucin del Capital"}),o.jsxs("p",{className:"chart-hint",children:["La suma debe ser 100%. Actual:"," ",o.jsxs("span",{className:r===100?"valid":"invalid",children:[r,"%"]})]}),o.jsxs("div",{className:"form-row-4",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Operacin"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:((c=t.charts.capitalDistribution)==null?void 0:c.operacion)||"",onChange:m=>s("operacion",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Infraestructura"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:((d=t.charts.capitalDistribution)==null?void 0:d.infraestructura)||"",onChange:m=>s("infraestructura",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Reserva"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:((h=t.charts.capitalDistribution)==null?void 0:h.reserva)||"",onChange:m=>s("reserva",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Beneficio"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",value:((f=t.charts.capitalDistribution)==null?void 0:f.beneficio)||"",onChange:m=>s("beneficio",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]})]})]}),o.jsxs("div",{className:"chart-config-card",children:[o.jsx("h4",{children:" Grfica 4  Calendario de Pagos"}),o.jsx("div",{className:"payment-calendar-list",children:(t.charts.paymentCalendar||[]).map((m,p)=>o.jsxs("div",{className:"payment-item",children:[o.jsxs("span",{className:"payment-index",children:["#",p+1]}),o.jsxs("select",{className:"form-input payment-month",value:m.month,onChange:y=>a(m.id,"month",y.target.value),children:[o.jsx("option",{value:"",children:"Mes"}),["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"].map((y,b)=>o.jsx("option",{value:b+1,children:y},b))]}),o.jsx("input",{type:"number",className:"form-input payment-year",value:m.year,onChange:y=>a(m.id,"year",y.target.value),placeholder:"Ao"}),o.jsxs("div",{className:"input-with-icon payment-percent",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:m.percent,onChange:y=>a(m.id,"percent",y.target.value),placeholder:"% Retorno"}),o.jsx("span",{className:"input-suffix",children:"%"})]}),o.jsxs("select",{className:"form-input payment-status",value:m.status,onChange:y=>a(m.id,"status",y.target.value),children:[o.jsx("option",{value:"estimated",children:" Estimado"}),o.jsx("option",{value:"paid",children:" Pagado"})]}),o.jsx("button",{type:"button",className:"remove-payment-btn",onClick:()=>l(m.id),children:""})]},m.id))}),o.jsx("button",{type:"button",className:"add-payment-btn",onClick:i,children:"+ Agregar pago"})]}),o.jsxs("div",{className:"chart-config-card",children:[o.jsx("h4",{children:" Grfica 5  Riesgo vs Retorno"}),o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Nivel de Riesgo (1-5)"}),o.jsx("input",{type:"range",min:"1",max:"5",value:t.charts.riskLevel||3,onChange:m=>n("charts","riskLevel",Number(m.target.value)),className:"risk-slider"}),o.jsxs("div",{className:"risk-labels",children:[o.jsx("span",{children:"1 - Muy bajo"}),o.jsxs("span",{className:"current-risk",children:["Actual: ",t.charts.riskLevel||3]}),o.jsx("span",{children:"5 - Muy alto"})]})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Retorno Esperado (%)"}),o.jsxs("div",{className:"input-with-icon",children:[o.jsx("input",{type:"number",className:"form-input",step:"0.01",value:t.charts.returnExpected,onChange:m=>n("charts","returnExpected",m.target.value)}),o.jsx("span",{className:"input-suffix",children:"%"})]})]})]})]})]})}function _$({project:t,existingDocuments:e,newDocumentItems:n,addDocumentsFromFiles:s,removeExistingDocumentAt:r,removeNewDocumentAt:i,updateExistingDocumentMeta:a,updateNewDocumentMeta:l}){const c=[{value:"",label:"Seleccionar..."},{value:"prospecto",label:"Prospecto"},{value:"contrato",label:"Contrato"},{value:"estudio_tecnico",label:"Estudio tcnico"},{value:"otro",label:"Otro"}];return o.jsxs("div",{className:"tab-content-section",children:[o.jsx("h3",{className:"section-title",children:" Documentos"}),o.jsx("div",{className:"documents-uploader",children:o.jsxs("div",{className:"form-field",children:[o.jsx("label",{htmlFor:"project-documents",children:"Subir documentos"}),o.jsx("input",{id:"project-documents",type:"file",className:"form-input",accept:"*/*",multiple:!0,onChange:async d=>{await s(d.target.files),d.target.value=""}}),o.jsx("div",{className:"form-hint",children:"Mx. 5MB por archivo. Se aceptan cualquier tipo de archivos."})]})}),e.length===0&&n.length===0?o.jsxs("div",{className:"documents-placeholder",children:[o.jsx("div",{className:"placeholder-icon",children:""}),o.jsx("p",{children:"An no hay documentos para este proyecto."})]}):o.jsxs("div",{className:"documents-list",children:[e.map((d,h)=>o.jsxs("div",{className:"document-item",children:[o.jsxs("div",{className:"document-main",children:[o.jsxs("div",{className:"document-name",children:[o.jsx("span",{className:"document-badge",children:"Existente"}),o.jsx("span",{className:"document-filename",children:d.fileName||"Documento"})]}),o.jsxs("div",{className:"document-sub",children:[d.size?o.jsx("span",{children:jx(d.size)}):null,d.mimeType?o.jsx("span",{children:d.mimeType}):null,d.url?o.jsx("a",{className:"document-link",href:d.url,target:"_blank",rel:"noreferrer",children:"Abrir"}):null]})]}),o.jsxs("div",{className:"document-meta",children:[o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Tipo"}),o.jsx("select",{className:"form-input",value:d.docType||"",onChange:f=>a(h,"docType",f.target.value),children:c.map(f=>o.jsx("option",{value:f.value,children:f.label},f.value))})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Fecha"}),o.jsx("input",{type:"date",className:"form-input",value:gd(d.date),onChange:f=>a(h,"date",f.target.value)})]})]}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:d.visibleToUsers??!0,onChange:f=>a(h,"visibleToUsers",f.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Visible para usuarios"})]})})]}),o.jsx("div",{className:"document-actions",children:o.jsx("button",{type:"button",className:"document-remove-btn",onClick:()=>r(h),children:" Eliminar"})})]},d.id||`existing-doc-${h}`)),n.map((d,h)=>{var f;return o.jsxs("div",{className:"document-item new",children:[o.jsxs("div",{className:"document-main",children:[o.jsxs("div",{className:"document-name",children:[o.jsx("span",{className:"document-badge new",children:"Nuevo"}),o.jsx("span",{className:"document-filename",children:d.fileName||((f=d==null?void 0:d.file)==null?void 0:f.name)||"Archivo"})]}),o.jsxs("div",{className:"document-sub",children:[d.size?o.jsx("span",{children:jx(d.size)}):null,d.mimeType?o.jsx("span",{children:d.mimeType}):null]})]}),o.jsxs("div",{className:"document-meta",children:[o.jsxs("div",{className:"form-row-2",children:[o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Tipo"}),o.jsx("select",{className:"form-input",value:d.docType||"",onChange:m=>l(h,"docType",m.target.value),children:c.map(m=>o.jsx("option",{value:m.value,children:m.label},m.value))})]}),o.jsxs("div",{className:"form-field",children:[o.jsx("label",{children:"Fecha"}),o.jsx("input",{type:"date",className:"form-input",value:gd(d.date),onChange:m=>l(h,"date",m.target.value)})]})]}),o.jsx("div",{className:"form-field checkbox-field",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:d.visibleToUsers??!0,onChange:m=>l(h,"visibleToUsers",m.target.checked)}),o.jsx("span",{className:"checkbox-text",children:"Visible para usuarios"})]})})]}),o.jsx("div",{className:"document-actions",children:o.jsx("button",{type:"button",className:"document-remove-btn",onClick:()=>i(h),children:" Quitar"})})]},d.id||`new-doc-${h}`)})]})]})}const Px=(t,e)=>JSON.stringify(t)===JSON.stringify(e);function x$({project:t,isOpen:e,onClose:n,onSuccess:s,onTimelineEvent:r}){const{t:i}=ft(),[a,l]=R.useState("general"),[c,d]=R.useState(()=>Lf(t)),[h,f]=R.useState(()=>Lf(t)),[m,p]=R.useState(!1),[y,b]=R.useState(null),[T,x]=R.useState([]),[w,S]=R.useState([]),[j,P]=R.useState([]),[O,_]=R.useState([]),[v,C]=R.useState([]),[E,A]=R.useState([]),[D,N]=R.useState([]),[F,L]=R.useState([]);R.useEffect(()=>{var ie;if(t){const pe=Lf(t);d(pe),f(pe),l("general"),b(null);const fe=Array.isArray(t.images)?t.images.filter(we=>typeof we=="string"&&we.trim()):t.imageUrl?[t.imageUrl]:[],ge=Array.isArray(t.imagePaths)?t.imagePaths.filter(we=>typeof we=="string"&&we.trim()):t.imagePath?[t.imagePath]:[],Ie=fe.map((we,ve)=>({url:we,path:ge[ve]||null}));x(Ie),_(Ie),P([]),S(we=>{for(const ve of we)try{ve!=null&&ve.previewUrl&&URL.revokeObjectURL(ve.previewUrl)}catch{}return[]});const Fs=((Array.isArray(t.documents)?t.documents:Array.isArray((ie=t==null?void 0:t.documents)==null?void 0:ie.items)?t.documents.items:[])||[]).filter(we=>we&&typeof we=="object").map((we,ve)=>({id:we.id||Mf(`doc_${ve}`),fileName:we.fileName||we.name||we.filename||"Documento",url:we.url||we.downloadUrl||null,path:we.path||we.storagePath||null,size:we.size??null,mimeType:we.mimeType||we.type||null,docType:we.docType||we.tipo||"",date:gd(we.date||we.fecha||""),visibleToUsers:we.visibleToUsers??we.visible??!0}));C(Fs),L(Fs),N([]),A([])}},[t]);const ee=R.useMemo(()=>{const ie=!Px(c,h),pe=w.length>0||j.length>0,fe=E.length>0||D.length>0||!Px(v,F);return ie||pe||fe},[c,h,w,j,E,D,v,F]),z=R.useCallback((ie,pe,fe)=>{d(ge=>ie?{...ge,[ie]:{...ge[ie],[pe]:fe}}:{...ge,[pe]:fe})},[]),M=ie=>{const fe=[];for(const ge of Array.from(ie||[])){if(!String((ge==null?void 0:ge.type)||"").startsWith("image/")||ge.size>5242880)continue;const Ie=URL.createObjectURL(ge);fe.push({file:ge,previewUrl:Ie})}fe.length>0&&S(ge=>[...ge,...fe])},W=ie=>{x(pe=>{const fe=pe[ie];return fe!=null&&fe.path&&P(ge=>[...ge,fe.path]),pe.filter((ge,Ie)=>Ie!==ie)})},K=ie=>{S(pe=>{const fe=pe[ie];try{fe!=null&&fe.previewUrl&&URL.revokeObjectURL(fe.previewUrl)}catch{}return pe.filter((ge,Ie)=>Ie!==ie)})},U=R.useCallback(()=>{d(h),x([...O]),P([]);for(const ie of w)try{ie!=null&&ie.previewUrl&&URL.revokeObjectURL(ie.previewUrl)}catch{}S([]),C([...F]),N([]),A([])},[h,O,w,F]),te=async ie=>{const pe=[],fe=[],ge=new Date().toISOString().slice(0,10);for(const Ie of Array.from(ie||[]))if(Ie){if(Ie.size>Ax){pe.push(Ie.name);continue}fe.push({id:Mf("newdoc"),file:Ie,fileName:Ie.name||"Archivo",size:Ie.size,mimeType:Ie.type||"application/octet-stream",docType:"",date:ge,visibleToUsers:!0})}pe.length>0&&await Vn.fire({title:i("fixedProjectEdit.fileTooLarge"),text:`${i("fixedProjectEdit.fileTooLargeText")} ${pe.slice(0,3).join(", ")}${pe.length>3?"":""}`,icon:"error",confirmButtonColor:"#ef4444",background:"#1a1f2e",color:"#ffffff",customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}}),fe.length>0&&A(Ie=>[...Ie,...fe])},he=ie=>{C(pe=>{const fe=pe[ie];return fe!=null&&fe.path&&N(ge=>[...ge,fe.path]),pe.filter((ge,Ie)=>Ie!==ie)})},Fe=ie=>{A(pe=>pe.filter((fe,ge)=>ge!==ie))},je=(ie,pe,fe)=>{C(ge=>ge.map((Ie,Hn)=>Hn===ie?{...Ie,[pe]:fe}:Ie))},et=(ie,pe,fe)=>{A(ge=>ge.map((Ie,Hn)=>Hn===ie?{...Ie,[pe]:fe}:Ie))},Ee=async()=>{m||ee&&!(await Vn.fire({title:i("fixedProjectEdit.discardChanges"),text:i("fixedProjectEdit.discardChangesText"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:i("fixedProjectEdit.yesDiscard"),cancelButtonText:i("fixedProjectEdit.keepEditing"),background:"#1a1f2e",color:"#ffffff",customClass:{popup:"swal-dark-popup",title:"swal-dark-title",htmlContainer:"swal-dark-content",container:"swal-above-modal"}})).isConfirmed||(U(),b(null),n())},mt=async()=>{if(!(!(t!=null&&t.id)||!ee))try{if(p(!0),b(null),j.length>0)for(const ve of j)try{await rd(ar(_s,ve))}catch{}const ie=[];if(w.length>0)for(const ve of w){const At=ve==null?void 0:ve.file;if(!At)continue;const Us=String(At.name||"image").replace(/[^a-zA-Z0-9._-]/g,"_").slice(0,80),zs=`projects/${t.id}/images/${Date.now()}_${Us}`,Lr=ar(_s,zs);await Al(Lr,At,{contentType:At.type||"image/*"});const Vr=await jl(Lr);ie.push({url:Vr,path:zs})}if(D.length>0)for(const ve of D)try{await rd(ar(_s,ve))}catch{}const pe=[];if(E.length>0)for(const ve of E){const At=ve==null?void 0:ve.file;if(!At||At.size>Ax)continue;const Us=String(At.name||"file").replace(/[^a-zA-Z0-9._-]/g,"_").slice(0,120),zs=`projects/${t.id}/documents/${Date.now()}_${Us}`,Lr=ar(_s,zs);await Al(Lr,At,{contentType:At.type||"application/octet-stream"});const Vr=await jl(Lr);pe.push({id:ve.id||Mf("doc"),fileName:At.name||Us,url:Vr,path:zs,size:At.size,mimeType:At.type||"application/octet-stream",docType:ve.docType||"",date:gd(ve.date)||"",visibleToUsers:ve.visibleToUsers??!0})}const fe=[...T.map(ve=>ve.url).filter(Boolean),...ie.map(ve=>ve.url).filter(Boolean)],ge=[...T.map(ve=>ve.path).filter(Boolean),...ie.map(ve=>ve.path).filter(Boolean)],Ie=[...v,...pe],Hn={name:c.name,category:c.category||null,status:c.status,visibleToUsers:c.visibleToUsers,images:fe,imagePaths:ge,imageUrl:fe[0]||null,imagePath:ge[0]||null,imageUpdatedAt:se(),location:c.location,finance:c.finance,metrics:c.metrics,risks:c.risks,restrictions:c.restrictions,projections:c.projections,charts:c.charts,documents:Ie,documentsUpdatedAt:se(),targetAmount:c.finance.targetAmount?Number(c.finance.targetAmount):null,expectedROI:c.metrics.expectedROI?Number(c.metrics.expectedROI):null,duration:c.metrics.duration?Number(c.metrics.duration):null,riskLevel:c.risks.riskLevel,minInvestment:c.restrictions.minInvestment?Number(c.restrictions.minInvestment):null,updatedAt:se()};if(await Vs(ae(Q,"projects",t.id),Hn),r)try{await r({type:"system",title:i("projectEdit.timeline.projectUpdated"),description:i("projectEdit.timeline.fieldsEdited"),visibility:"admin"})}catch(ve){console.warn("No se pudo registrar evento en timeline:",ve)}f(c);const Fs=[...T,...ie];_(Fs),x(Fs),S([]),P([]);const we=[...Ie];L(we),C(we),A([]),N([]),await Vn.fire({title:i("fixedProjectEdit.alerts.successTitle"),text:i("fixedProjectEdit.alerts.successText"),icon:"success",confirmButtonColor:"#10b981",background:"#1a1f2e",color:"#ffffff",timer:2e3,timerProgressBar:!0,customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}}),s==null||s(),n()}catch(ie){console.error("Error actualizando proyecto:",ie),await Vn.fire({title:i("fixedProjectEdit.alerts.errorTitle"),text:(ie==null?void 0:ie.code)==="permission-denied"?i("fixedProjectEdit.alerts.permissionDenied"):i("fixedProjectEdit.alerts.updateFailed"),icon:"error",confirmButtonColor:"#ef4444",background:"#1a1f2e",color:"#ffffff",customClass:{popup:"swal-dark-popup",container:"swal-above-modal"}})}finally{p(!1)}};if(!e||!t)return null;const Ri=()=>{switch(a){case"general":return o.jsx(h$,{form:c,updateField:z,existingImages:T,newImageItems:w,addImagesFromFiles:M,removeExistingAt:W,removeNewAt:K});case"location":return o.jsx(f$,{form:c,updateField:z});case"finance":return o.jsx(m$,{form:c,updateField:z});case"metrics":return o.jsx(p$,{form:c,updateField:z});case"risks":return o.jsx(g$,{form:c,updateField:z});case"restrictions":return o.jsx(v$,{form:c,updateField:z});case"projections":return o.jsx(y$,{form:c,updateField:z});case"charts":return o.jsx(w$,{form:c,setForm:d,updateField:z});case"documents":return o.jsx(_$,{project:t,existingDocuments:v,newDocumentItems:E,addDocumentsFromFiles:te,removeExistingDocumentAt:he,removeNewDocumentAt:Fe,updateExistingDocumentMeta:je,updateNewDocumentMeta:et});default:return null}};return o.jsxs("div",{className:"fixed-edit-overlay",children:[o.jsxs("div",{className:"fixed-edit-modal",onClick:ie=>ie.stopPropagation(),children:[o.jsxs("div",{className:"fixed-edit-header",children:[o.jsxs("div",{className:"fixed-edit-title",children:[o.jsxs("h2",{children:[" ",i("fixedProjectEdit.title")]}),o.jsx("span",{className:"project-name-badge",children:t.name})]}),o.jsx("button",{className:"fixed-edit-close",onClick:Ee,"aria-label":i("common.close"),disabled:m,children:""})]}),o.jsx("div",{className:"fixed-edit-tabs",children:d$.map(ie=>o.jsxs("button",{className:`fixed-edit-tab ${a===ie.id?"active":""}`,onClick:()=>l(ie.id),children:[o.jsx("span",{className:"tab-icon",children:ie.icon}),o.jsx("span",{className:"tab-label",children:i(`fixedProjectEdit.tabs.${ie.id}`)})]},ie.id))}),o.jsx("div",{className:"fixed-edit-content",children:Ri()}),y&&o.jsxs("div",{className:"fixed-edit-error",children:[o.jsx("span",{className:"error-icon",children:""}),o.jsx("span",{children:y})]})]}),o.jsxs("div",{className:"fixed-edit-floating-actions",children:[o.jsxs("button",{type:"button",className:"floating-btn cancel-btn",onClick:Ee,disabled:m,children:[" ",i("common.cancel")]}),ee&&o.jsx("button",{type:"button",className:"floating-btn save-btn",onClick:mt,disabled:m,children:m?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"spinner"}),i("fixedProjectEdit.saving")]}):o.jsxs(o.Fragment,{children:[" ",i("fixedProjectEdit.saveChanges")]})})]})]})}function b$({projectId:t,adminData:e}){const{events:n,loading:s,addEvent:r}=wN(t),[i,a]=R.useState(!1),[l,c]=R.useState({type:"update",title:"",description:"",visibility:"admin"}),[d,h]=R.useState(!1),f=async b=>{if(b.preventDefault(),!!l.title)try{h(!0),await r({...l,createdBy:(e==null?void 0:e.uid)||null}),c({type:"update",title:"",description:"",visibility:"admin"}),a(!1)}catch(T){console.error("Error creando evento:",T)}finally{h(!1)}},m=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",p=b=>({milestone:"",update:"",notice:"",system:""})[b]||"",y=b=>{const T={investors:{label:"Inversionistas",class:"badge-investors"},all:{label:"Pblico",class:"badge-all"},admin:{label:"Admin",class:"badge-admin"}};return T[b]||T.admin};return o.jsxs("div",{className:"project-timeline",children:[o.jsxs("div",{className:"timeline-header",children:[o.jsx("h3",{children:"Lnea de Tiempo"}),!i&&o.jsx("button",{className:"add-event-btn",onClick:()=>a(!0),children:"+ Agregar evento"})]}),i&&o.jsxs("form",{className:"event-form",onSubmit:f,children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("label",{children:["Tipo de evento",o.jsxs("select",{value:l.type,onChange:b=>c({...l,type:b.target.value}),children:[o.jsx("option",{value:"milestone",children:"Hito (Milestone)"}),o.jsx("option",{value:"update",children:"Actualizacin"}),o.jsx("option",{value:"notice",children:"Aviso"}),o.jsx("option",{value:"system",children:"Sistema"})]})]}),o.jsxs("label",{children:["Visibilidad",o.jsxs("select",{value:l.visibility,onChange:b=>c({...l,visibility:b.target.value}),children:[o.jsx("option",{value:"admin",children:"Solo admin"}),o.jsx("option",{value:"investors",children:"Inversionistas"}),o.jsx("option",{value:"all",children:"Todos"})]})]})]}),o.jsxs("label",{children:["Ttulo",o.jsx("input",{type:"text",value:l.title,onChange:b=>c({...l,title:b.target.value}),placeholder:"Ej: Primer desembolso realizado",required:!0})]}),o.jsxs("label",{children:["Descripcin",o.jsx("textarea",{value:l.description,onChange:b=>c({...l,description:b.target.value}),placeholder:"Detalla el evento...",rows:3})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>a(!1),disabled:d,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:d,children:d?"Guardando...":"Publicar"})]})]}),s?o.jsx("div",{className:"timeline-loading",children:"Cargando eventos..."}):n.length===0?o.jsx("div",{className:"timeline-empty",children:"No hay eventos en la lnea de tiempo"}):o.jsx("div",{className:"timeline-list",children:n.map(b=>{const T=y(b.visibility);return o.jsxs("div",{className:"timeline-item",children:[o.jsx("div",{className:"timeline-icon",children:p(b.type)}),o.jsxs("div",{className:"timeline-content",children:[o.jsxs("div",{className:"timeline-header-row",children:[o.jsx("h4",{className:"timeline-title",children:b.title}),o.jsx("span",{className:`visibility-badge ${T.class}`,children:T.label})]}),b.description&&o.jsx("p",{className:"timeline-description",children:b.description}),o.jsxs("div",{className:"timeline-meta",children:[o.jsx("span",{className:"timeline-date",children:m(b.createdAt)}),b.type&&o.jsx("span",{className:"timeline-type",children:b.type})]})]})]},b.id)})})]})}function E$(t){const[e,n]=R.useState(null),[s,r]=R.useState(null),[i,a]=R.useState(null),[l,c]=R.useState([]),[d,h]=R.useState([]),[f,m]=R.useState(!0),[p,y]=R.useState(null),b=async()=>{if(!t){m(!1);return}try{m(!0),y(null);const w=ae(Q,"investments",t),S=await Kt(w);if(!S.exists())throw new Error(ut("errors.investmentNotFound"));const j={id:S.id,...S.data()};let P=null;if(j.userId){const N=ae(Q,"users",j.userId),F=await Kt(N);F.exists()&&(P={id:F.id,...F.data()})}let O=null;if(j.projectId){const N=ae(Q,"projects",j.projectId),F=await Kt(N);F.exists()&&(O={id:F.id,...F.data()})}let _=[];if(j.projectId){const N=de(Q,"projects",j.projectId,"timeline"),F=Pe(N,Gn("createdAt","desc"));_=(await ke(F)).docs.map(ee=>({id:ee.id,...ee.data()}))}let v=[];const C=de(Q,"investments",t,"auditLog"),E=Pe(C,Gn("timestamp","desc"));v=(await ke(E)).docs.map(N=>({id:N.id,...N.data()}));const D=T(j,O);n(D),r(P),a(O),c(_),h(v)}catch(w){console.error("Error en useInvestmentDetail:",w),y(w.message)}finally{m(!1)}},T=(w,S)=>{const j=Number(w.amount||0),P=Number(w.expectedReturn||0),O=Number(w.actualReturn||w.realizedReturn||w.payout||0),_=Number((S==null?void 0:S.totalInvested)||0),v=j>0?((P-j)/j*100).toFixed(2):null,C=j>0&&O>0?((O-j)/j*100).toFixed(2):null,E=_>0?(j/_*100).toFixed(2):null,A=P-j,D=O>0?O-j:null;return{...w,expectedROI:Number(v),actualROI:C?Number(C):null,projectionOfTotal:Number(E),expectedGain:A,actualGain:D}},x=()=>b();return R.useEffect(()=>{b()},[t]),{investment:e,user:s,project:i,projectEvents:l,auditLog:d,loading:f,error:p,refetch:x}}async function I$(t,e,n=""){try{const s=ae(Q,"investments",t),r={action:"status_change",previousStatus:null,newStatus:e,reason:n,changedBy:"admin",timestamp:se()};return await Vs(s,{status:e,updatedAt:se(),auditLog:dh(r)}),{success:!0,message:`Inversin actualizada a ${e}`}}catch(s){throw console.error("Error actualizando estado de inversin:",s),s}}async function T$(t,e,n="",s={}){try{const r=ae(Q,"investments",t),i={action:"system_event",eventTitle:e,eventDescription:n,metadata:s,recordedBy:"admin",timestamp:se()};return await Vs(r,{auditLog:dh(i),updatedAt:se()}),{success:!0,message:"Evento registrado"}}catch(r){throw console.error("Error registrando evento de sistema:",r),r}}async function S$(t,e,n=""){try{const s=ae(Q,"investments",t),r={action:"return_update",previousValue:null,newValue:e,notes:n,updatedBy:"admin",timestamp:se()};return await Vs(s,{realizedReturn:Number(e),payout:Number(e),auditLog:dh(r),updatedAt:se()}),{success:!0,message:"Retorno actualizado"}}catch(s){throw console.error("Error actualizando retorno:",s),s}}function N$({investmentId:t,isOpen:e,onClose:n,onUpdate:s}){const{t:r}=ft(),{investment:i,user:a,project:l,projectEvents:c,auditLog:d,loading:h,error:f,refetch:m}=E$(t),[p,y]=R.useState("overview"),[b,T]=R.useState(!1),[x,w]=R.useState(null),[S,j]=R.useState(null),[P,O]=R.useState(!1),[_,v]=R.useState(!1),[C,E]=R.useState(!1),A=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(z||0),D=z=>z?(z.toDate?z.toDate():new Date(z)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",N=z=>z?(z.toDate?z.toDate():new Date(z)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",F=async(z,M)=>{try{T(!0),w(null),await I$(t,z,M),j(`${r("investments.investmentUpdatedTo")} ${z}`),await m(),s==null||s(),O(!1),setTimeout(()=>j(null),3e3)}catch(W){w(W.message)}finally{T(!1)}},L=async(z,M,W)=>{try{T(!0),w(null),await T$(t,z,M,W),j(r("investments.eventRecorded")),await m(),s==null||s(),E(!1),setTimeout(()=>j(null),3e3)}catch(K){w(K.message)}finally{T(!1)}},ee=async(z,M)=>{try{T(!0),w(null),await S$(t,z,M),j(r("investments.returnUpdated")),await m(),s==null||s(),v(!1),setTimeout(()=>j(null),3e3)}catch(W){w(W.message)}finally{T(!1)}};return e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"investment-drawer-overlay",onClick:n}),o.jsxs("div",{className:"investment-drawer",children:[o.jsxs("div",{className:"investment-drawer-header",children:[o.jsxs("div",{className:"header-top",children:[o.jsxs("button",{className:"close-btn",onClick:n,children:[" ",r("investments.back")]}),o.jsx("h2",{className:"header-title",children:r("investments.investmentDetail")})]}),h?o.jsx("div",{className:"loading-state",children:r("investments.loading")}):f?o.jsx("div",{className:"error-state",children:f}):i?o.jsxs("div",{className:"header-info",children:[o.jsxs("div",{className:"header-investor",children:[o.jsxs("div",{className:"investor-info",children:[o.jsx("span",{className:"investor-name",children:(a==null?void 0:a.displayName)||(a==null?void 0:a.fullName)||r("investments.user")}),o.jsx("span",{className:"investor-email",children:(a==null?void 0:a.email)||""})]}),o.jsxs("span",{className:`status-badge status-${i.status}`,children:[i.status==="active"&&r("investments.active"),i.status==="completed"&&r("investments.completed"),i.status==="cancelled"&&r("investments.cancelled"),i.status==="paused"&&r("investments.paused")]})]}),o.jsxs("div",{className:"header-meta",children:[o.jsxs("div",{className:"meta-item",children:[o.jsx("span",{className:"meta-label",children:r("investments.amountInvested")}),o.jsx("span",{className:"meta-value bold",children:A(i.amount)})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("span",{className:"meta-label",children:r("investments.project")}),o.jsx("span",{className:"meta-value",children:(l==null?void 0:l.name)||""})]}),o.jsxs("div",{className:"meta-item",children:[o.jsx("span",{className:"meta-label",children:r("investments.date")}),o.jsx("span",{className:"meta-value",children:D(i.createdAt)})]})]})]}):null]}),i&&o.jsxs("div",{className:"investment-tabs",children:[o.jsx("button",{className:`tab ${p==="overview"?"active":""}`,onClick:()=>y("overview"),children:r("investments.overview")}),o.jsx("button",{className:`tab ${p==="financial"?"active":""}`,onClick:()=>y("financial"),children:r("investments.financial")}),o.jsxs("button",{className:`tab ${p==="project"?"active":""}`,onClick:()=>y("project"),children:[r("investments.project")," (",c.length,")"]}),o.jsxs("button",{className:`tab ${p==="audit"?"active":""}`,onClick:()=>y("audit"),children:[r("investments.audit")," (",d.length,")"]})]}),S&&o.jsxs("div",{className:"success-message",children:[" ",S]}),x&&o.jsxs("div",{className:"error-message",children:[" ",x]}),o.jsx("div",{className:"investment-content",children:h?o.jsx("div",{className:"content-loading",children:r("investments.loadingDetails")}):i?p==="overview"?o.jsx(C$,{investment:i,project:l,user:a,formatCurrency:A,formatDate:D,t:r}):p==="financial"?o.jsx(A$,{investment:i,project:l,formatCurrency:A,onUpdateReturn:()=>v(!0),t:r}):p==="project"?o.jsx(j$,{projectEvents:c,formatDateTime:N,t:r}):p==="audit"?o.jsx(P$,{auditLog:d,formatDateTime:N,formatCurrency:A,t:r}):null:o.jsx("div",{className:"content-empty",children:r("investments.couldNotLoad")})}),i&&o.jsxs("div",{className:"investment-actions",children:[o.jsx("button",{className:"action-btn primary",onClick:()=>O(!0),disabled:b,children:r("investments.changeStatus")}),o.jsx("button",{className:"action-btn secondary",onClick:()=>E(!0),disabled:b,children:r("investments.recordEvent")}),i.status==="active"&&o.jsx("button",{className:"action-btn secondary",onClick:()=>v(!0),disabled:b,children:r("investments.updateReturn")})]}),P&&o.jsx(k$,{currentStatus:i.status,onConfirm:F,onClose:()=>O(!1),isLoading:b,t:r}),_&&o.jsx(R$,{currentReturn:i.realizedReturn||i.payout,expectedReturn:i.expectedReturn,amount:i.amount,onConfirm:ee,onClose:()=>v(!1),isLoading:b,formatCurrency:A,t:r}),C&&o.jsx(D$,{onConfirm:L,onClose:()=>E(!1),isLoading:b,t:r})]})]}):null}function C$({investment:t,project:e,user:n,formatCurrency:s,formatDate:r,t:i}){return o.jsxs("div",{className:"tab-content overview-tab",children:[o.jsxs("div",{className:"info-cards",children:[o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-label",children:i("investments.investor")}),o.jsx("div",{className:"card-value",children:(n==null?void 0:n.displayName)||(n==null?void 0:n.fullName)||i("investments.user")}),o.jsx("div",{className:"card-sublabel",children:n==null?void 0:n.email})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-label",children:i("investments.amountInvested")}),o.jsx("div",{className:"card-value",children:s(t.amount)})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-label",children:i("investments.projectPercent")}),o.jsxs("div",{className:"card-value",children:[t.projectionOfTotal,"%"]})]}),o.jsxs("div",{className:"info-card",children:[o.jsx("div",{className:"card-label",children:i("investments.status")}),o.jsxs("div",{className:`card-value status-${t.status}`,children:[t.status==="active"&&i("investments.active"),t.status==="completed"&&i("investments.completed"),t.status==="cancelled"&&i("investments.cancelled"),t.status==="paused"&&i("investments.paused")]})]})]}),o.jsxs("div",{className:"info-section",children:[o.jsx("h3",{className:"section-title",children:i("investments.generalInfo")}),o.jsxs("div",{className:"info-items",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"label",children:i("investments.project")}),o.jsx("span",{className:"value",children:(e==null?void 0:e.name)||""})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"label",children:i("investments.projectType")}),o.jsx("span",{className:"value",children:(e==null?void 0:e.type)==="fixed"?i("projects.fixed"):i("projects.variable")})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"label",children:i("investments.projectRisk")}),o.jsxs("span",{className:`value risk-${e==null?void 0:e.riskLevel}`,children:[(e==null?void 0:e.riskLevel)==="low"&&i("investments.riskLow"),(e==null?void 0:e.riskLevel)==="medium"&&i("investments.riskMedium"),(e==null?void 0:e.riskLevel)==="high"&&i("investments.riskHigh")]})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"label",children:i("investments.investmentDate")}),o.jsx("span",{className:"value",children:r(t.createdAt)})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"label",children:i("investments.projectStatus")}),o.jsx("span",{className:"value",children:(e==null?void 0:e.computedStatus)||(e==null?void 0:e.status)||""})]})]})]})]})}function A$({investment:t,project:e,formatCurrency:n,onUpdateReturn:s,t:r}){const i=t.amount&&t.expectedReturn?t.expectedReturn-t.amount:0,a=t.amount&&t.realizedReturn?t.realizedReturn-t.amount:null;return o.jsxs("div",{className:"tab-content financial-tab",children:[o.jsxs("div",{className:"financial-grid",children:[o.jsxs("div",{className:"fin-card roi",children:[o.jsx("div",{className:"fin-label",children:r("investments.expectedROILabel")}),o.jsx("div",{className:`fin-value ${t.expectedROI>=0?"positive":"negative"}`,children:t.expectedROI!==null?`${t.expectedROI}%`:""})]}),o.jsxs("div",{className:"fin-card roi",children:[o.jsx("div",{className:"fin-label",children:r("investments.actualROILabel")}),o.jsx("div",{className:`fin-value ${t.actualROI>=0?"positive":"negative"}`,children:t.actualROI!==null?`${t.actualROI}%`:r("investments.pendingValue")})]}),o.jsxs("div",{className:"fin-card gain",children:[o.jsx("div",{className:"fin-label",children:r("investments.expectedGain")}),o.jsx("div",{className:`fin-value ${i>=0?"positive":"negative"}`,children:n(i)})]}),o.jsxs("div",{className:"fin-card gain",children:[o.jsx("div",{className:"fin-label",children:r("investments.realizedGain")}),o.jsx("div",{className:`fin-value ${a>=0?"positive":"negative"}`,children:a!==null?n(a):r("investments.pendingValue")})]})]}),o.jsxs("div",{className:"financial-details",children:[o.jsxs("div",{className:"fin-detail-section",children:[o.jsx("h3",{className:"section-title",children:r("investments.financialDetails")}),o.jsxs("div",{className:"fin-items",children:[o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.amountInvested")}),o.jsx("span",{className:"value bold",children:n(t.amount)})]}),o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.expectedReturn")}),o.jsx("span",{className:"value",children:n(t.expectedReturn)})]}),o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.realizedReturn")}),o.jsx("span",{className:"value",children:n(t.realizedReturn||t.payout||0)})]}),t.status==="active"&&o.jsx("div",{className:"fin-item action",children:o.jsx("button",{className:"update-btn",onClick:s,children:r("investments.updateReturn")})})]})]}),o.jsxs("div",{className:"fin-detail-section",children:[o.jsx("h3",{className:"section-title",children:r("investments.projectRelation")}),o.jsxs("div",{className:"fin-items",children:[o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.totalCapitalPercent")}),o.jsxs("span",{className:"value",children:[t.projectionOfTotal,"%"]})]}),o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.projectTotalCapital")}),o.jsx("span",{className:"value",children:n((e==null?void 0:e.totalInvested)||0)})]}),o.jsxs("div",{className:"fin-item",children:[o.jsx("span",{className:"label",children:r("investments.projectGoal")}),o.jsx("span",{className:"value",children:(e==null?void 0:e.type)==="fixed"?n(e==null?void 0:e.targetAmount):r("projects.variable")})]})]})]})]})]})}function j$({projectEvents:t,formatDateTime:e,t:n}){const s=t.filter(r=>r.type==="system"||r.visibility==="investors"||r.visibility==="all");return o.jsx("div",{className:"tab-content project-tab",children:s.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("div",{className:"empty-title",children:n("investments.noProjectEvents")}),o.jsx("div",{className:"empty-subtitle",children:n("investments.noRelatedUpdates")})]}):o.jsx("div",{className:"events-list",children:s.map(r=>o.jsxs("div",{className:"event-item",children:[o.jsxs("div",{className:"event-header",children:[o.jsx("span",{className:"event-title",children:r.title}),o.jsx("span",{className:"event-date",children:e(r.createdAt)})]}),r.description&&o.jsx("div",{className:"event-description",children:r.description}),o.jsx("div",{className:"event-meta",children:o.jsxs("span",{className:`badge visibility-${r.visibility}`,children:[r.visibility==="admin"&&n("investments.adminOnly"),r.visibility==="investors"&&n("investments.investorsOnly"),r.visibility==="all"&&n("investments.allVisibility")]})})]},r.id))})})}function P$({auditLog:t,formatDateTime:e,formatCurrency:n,t:s}){return o.jsx("div",{className:"tab-content audit-tab",children:t.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("div",{className:"empty-title",children:s("investments.noChangeHistory")}),o.jsx("div",{className:"empty-subtitle",children:s("investments.noChangesRecorded")})]}):o.jsx("div",{className:"audit-list",children:t.map((r,i)=>o.jsxs("div",{className:"audit-entry",children:[o.jsxs("div",{className:"audit-header",children:[o.jsx("span",{className:"audit-action",children:O$(r.action,s)}),o.jsx("span",{className:"audit-date",children:e(r.timestamp)})]}),r.action==="status_change"&&o.jsxs("div",{className:"audit-details",children:[o.jsxs("span",{children:[s("investments.from")," ",o.jsx("strong",{children:r.previousStatus})," ",s("investments.to")," ",o.jsx("strong",{children:r.newStatus})]}),r.reason&&o.jsxs("span",{className:"reason",children:[s("investments.reason"),": ",r.reason]})]}),r.action==="system_event"&&o.jsxs("div",{className:"audit-details",children:[o.jsx("span",{className:"title",children:r.eventTitle}),r.eventDescription&&o.jsx("span",{className:"desc",children:r.eventDescription})]}),r.action==="return_update"&&o.jsxs("div",{className:"audit-details",children:[o.jsxs("span",{children:[s("investments.returnUpdatedTo")," ",o.jsx("strong",{children:n(Number(r.newValue)||0)})]}),r.notes&&o.jsxs("span",{className:"notes",children:[s("investments.notes"),": ",r.notes]})]})]},r.id||i))})})}function k$({currentStatus:t,onConfirm:e,onClose:n,isLoading:s,t:r}){const[i,a]=R.useState(t),[l,c]=R.useState(""),d=[{value:"active",label:r("investments.active")},{value:"paused",label:r("investments.paused")},{value:"completed",label:r("investments.completed")},{value:"cancelled",label:r("investments.cancelled")}];return o.jsx("div",{className:"modal-overlay",onClick:n,children:o.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:r("investments.changeInvestmentStatus")}),o.jsx("button",{className:"close-modal-btn",onClick:n,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:r("investments.newStatus")}),o.jsx("select",{value:i,onChange:h=>a(h.target.value),disabled:s,children:d.map(h=>o.jsx("option",{value:h.value,children:h.label},h.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:r("investments.reasonOptional")}),o.jsx("textarea",{value:l,onChange:h=>c(h.target.value),placeholder:r("investments.explainChange"),disabled:s,rows:3})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn secondary",onClick:n,disabled:s,children:r("investments.cancel")}),o.jsx("button",{className:"btn primary",onClick:()=>e(i,l),disabled:s,children:r(s?"investments.updating":"investments.confirm")})]})]})})}function R$({currentReturn:t,expectedReturn:e,amount:n,onConfirm:s,onClose:r,isLoading:i,formatCurrency:a,t:l}){const[c,d]=R.useState(t||e||""),[h,f]=R.useState(""),m=c?Number(c)-n:0,p=n>0&&c?(m/n*100).toFixed(2):0;return o.jsx("div",{className:"modal-overlay",onClick:r,children:o.jsxs("div",{className:"modal-content",onClick:y=>y.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:l("investments.updateInvestmentReturn")}),o.jsx("button",{className:"close-modal-btn",onClick:r,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:l("investments.realizedReturnUSD")}),o.jsx("input",{type:"number",value:c,onChange:y=>d(y.target.value),placeholder:l("investments.amountReceived"),disabled:i}),o.jsxs("div",{className:"form-hint",children:[l("investments.investedAmount"),": ",a(n)]})]}),c&&o.jsxs("div",{className:"return-preview",children:[o.jsxs("div",{className:"preview-item",children:[o.jsx("span",{children:l("investments.gainLoss")}),o.jsx("span",{className:m>=0?"positive":"negative",children:a(m)})]}),o.jsxs("div",{className:"preview-item",children:[o.jsx("span",{children:l("investments.roi")}),o.jsxs("span",{className:p>=0?"positive":"negative",children:[p,"%"]})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:l("investments.notesOptional")}),o.jsx("textarea",{value:h,onChange:y=>f(y.target.value),placeholder:l("investments.returnDetails"),disabled:i,rows:3})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn secondary",onClick:r,disabled:i,children:l("investments.cancel")}),o.jsx("button",{className:"btn primary",onClick:()=>s(c,h),disabled:i||!c,children:l(i?"investments.updating":"investments.saveReturn")})]})]})})}function D$({onConfirm:t,onClose:e,isLoading:n,t:s}){const[r,i]=R.useState(""),[a,l]=R.useState("");return o.jsx("div",{className:"modal-overlay",onClick:e,children:o.jsxs("div",{className:"modal-content",onClick:c=>c.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:s("investments.registerSystemEvent")}),o.jsx("button",{className:"close-modal-btn",onClick:e,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:s("investments.eventTitle")}),o.jsx("input",{type:"text",value:r,onChange:c=>i(c.target.value),placeholder:s("investments.eventTitlePlaceholder"),disabled:n})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:s("investments.descriptionOptional")}),o.jsx("textarea",{value:a,onChange:c=>l(c.target.value),placeholder:s("investments.additionalDetails"),disabled:n,rows:4})]})]}),o.jsxs("div",{className:"modal-actions",children:[o.jsx("button",{className:"btn secondary",onClick:e,disabled:n,children:s("investments.cancel")}),o.jsx("button",{className:"btn primary",onClick:()=>t(r,a,{}),disabled:n||!r,children:s(n?"investments.registering":"investments.registerEvent")})]})]})})}function O$(t,e){return{status_change:e("investments.statusChange"),system_event:e("investments.systemEvent"),return_update:e("investments.returnUpdate")}[t]||t}function M$({project:t,isOpen:e,onClose:n,onRefresh:s,adminData:r,activeTab:i="overview",onTabChange:a=null}){const[l,c]=R.useState("overview"),[d,h]=R.useState(!1),[f,m]=R.useState(null),{t:p}=ft(),y=a?i:l,b=a||c,{investments:T,loading:x}=lS({projectId:t==null?void 0:t.id}),{events:w,addEvent:S,refetch:j}=wN(t==null?void 0:t.id),P=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(N||0),O=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",_=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",v=()=>{s(),j()},C=async N=>{await S(N),j()},E=R.useMemo(()=>w.filter(N=>N.type==="system"||N.visibility==="admin"),[w]),A=R.useMemo(()=>{const N=T.length,F=T.filter(ee=>ee.status==="active").length,L=T.reduce((ee,z)=>ee+(z.amount||0),0);return{total:N,active:F,totalAmount:L}},[T]);if(!t||!e)return null;const D=o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`drawer-overlay ${e?"open":""}`,onClick:n}),o.jsxs("div",{className:`project-drawer ${e?"open":""}`,children:[o.jsxs("div",{className:"drawer-header",children:[o.jsxs("div",{className:"drawer-header-top",children:[o.jsxs("button",{className:"close-drawer-btn",onClick:n,children:[" ",p("projects.backToProjects")]}),o.jsxs("div",{className:"drawer-actions",children:[o.jsxs("button",{className:"action-btn secondary",onClick:()=>h(!0),children:[" ",p("common.edit")]}),o.jsxs("button",{className:"action-btn primary",onClick:()=>b("timeline"),children:[" ",p("projects.publishEvent")]})]})]}),o.jsxs("div",{className:"drawer-header-content",children:[o.jsxs("div",{className:"project-title-section",children:[o.jsx("h1",{className:"drawer-title",children:t.name}),o.jsxs("div",{className:"drawer-badges",children:[o.jsx("span",{className:`badge type-badge type-${t.type}`,children:t.type==="variable"?` ${p("projects.variable")}`:` ${p("projects.fixed")}`}),o.jsxs("span",{className:`badge risk-badge risk-${t.riskLevel}`,children:[t.riskLevel==="low"&&` ${p("projects.riskLow")}`,t.riskLevel==="medium"&&` ${p("projects.riskMedium")}`,t.riskLevel==="high"&&` ${p("projects.riskHigh")}`]}),o.jsxs("span",{className:`badge status-badge status-${t.computedStatus}`,children:[t.computedStatus==="funded"&&` ${p("status.funded")}`,t.computedStatus==="active"&&` ${p("status.active")}`,t.computedStatus==="paused"&&` ${p("status.paused")}`,t.computedStatus==="closed"&&` ${p("status.closed")}`,t.computedStatus==="draft"&&` ${p("status.draft")}`]})]}),t.category&&o.jsxs("div",{className:"project-meta",children:[" ",t.category]})]}),t.type==="fixed"&&t.targetAmount&&o.jsxs("div",{className:"header-progress",children:[o.jsxs("div",{className:"progress-header-row",children:[o.jsxs("span",{className:"progress-label-text",children:[" ",p("projects.capitalRaised")]}),o.jsxs("span",{className:"progress-percent",children:[t.progress||0,"%"]})]}),o.jsx("div",{className:"progress-bar-header",children:o.jsx("div",{className:"progress-fill-header",style:{width:`${t.progress||0}%`}})}),o.jsxs("div",{className:"progress-stats-row",children:[o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"stat-label",children:p("projects.raised")}),o.jsx("span",{className:"stat-value",children:P(t.totalInvested)})]}),o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"stat-label",children:p("projects.target")}),o.jsx("span",{className:"stat-value",children:P(t.targetAmount)})]})]})]})]}),o.jsxs("div",{className:"drawer-tabs",children:[o.jsxs("button",{className:`drawer-tab ${y==="overview"?"active":""}`,onClick:()=>b("overview"),children:[" ",p("projects.overview")]}),o.jsxs("button",{className:`drawer-tab ${y==="investments"?"active":""}`,onClick:()=>b("investments"),children:[" ",p("nav.investments")," (",A.total,")"]}),o.jsxs("button",{className:`drawer-tab ${y==="timeline"?"active":""}`,onClick:()=>b("timeline"),children:[" ",p("projects.timeline")," (",w.length,")"]}),o.jsxs("button",{className:`drawer-tab ${y==="activity"?"active":""}`,onClick:()=>b("activity"),children:[" ",p("projects.activity")," (",E.length,")"]})]})]}),o.jsxs("div",{className:"drawer-content",children:[y==="overview"&&o.jsxs("div",{className:"overview-section",children:[o.jsxs("div",{className:"overview-grid",children:[o.jsxs("div",{className:"kpi-box",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-data",children:[o.jsx("div",{className:"kpi-label",children:p("projects.totalInvested")}),o.jsx("div",{className:"kpi-value",children:P(A.totalAmount)})]})]}),o.jsxs("div",{className:"kpi-box",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-data",children:[o.jsx("div",{className:"kpi-label",children:p("projects.investors")}),o.jsx("div",{className:"kpi-value",children:A.total}),o.jsxs("div",{className:"kpi-sublabel",children:[A.active," ",p("projects.activeInvestorsCount")]})]})]}),o.jsxs("div",{className:"kpi-box",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-data",children:[o.jsx("div",{className:"kpi-label",children:p("projects.expectedROI")}),o.jsx("div",{className:"kpi-value",children:t.expectedROI?`${t.expectedROI}%`:""})]})]}),o.jsxs("div",{className:"kpi-box",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-data",children:[o.jsx("div",{className:"kpi-label",children:p("projects.duration")}),o.jsx("div",{className:"kpi-value",children:t.duration?`${t.duration}m`:""})]})]})]}),o.jsxs("div",{className:"info-sections",children:[o.jsxs("div",{className:"info-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",p("projects.generalInfo")]}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.creationDate")}),o.jsx("span",{className:"info-val",children:O(t.createdAt)})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.lastUpdate")}),o.jsx("span",{className:"info-val",children:O(t.updatedAt)})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.baseCurrency")}),o.jsx("span",{className:"info-val",children:"USD "})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.investmentStatus")}),o.jsx("span",{className:"info-val",children:t.investable?` ${p("projects.openInvestment")}`:` ${p("projects.closedInvestment")}`})]})]})]}),t.type==="fixed"&&o.jsxs("div",{className:"info-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",p("projects.fixedConfig")]}),o.jsxs("div",{className:"info-grid",children:[o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.targetCapital")}),o.jsx("span",{className:"info-val bold",children:P(t.targetAmount)})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.minInvestment")}),o.jsx("span",{className:"info-val",children:P(t.minInvestment)})]}),t.maxInvestment&&o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.maxInvestment")}),o.jsx("span",{className:"info-val",children:P(t.maxInvestment)})]}),o.jsxs("div",{className:"info-item",children:[o.jsx("span",{className:"info-key",children:p("projects.autoLockOnTarget")}),o.jsx("span",{className:"info-val",children:o.jsx("span",{className:`pill ${t.autoLockOnTarget?"pill-on":"pill-off"}`,children:t.autoLockOnTarget?` ${p("projects.activated")}`:` ${p("projects.deactivated")}`})})]})]})]}),t.type==="variable"&&o.jsxs("div",{className:"info-section",children:[o.jsxs("h3",{className:"section-title",children:[" ",p("projects.variableMetrics")]}),o.jsxs("div",{className:"metrics-cards",children:[o.jsxs("div",{className:"metric-card performance",children:[o.jsx("div",{className:"metric-icon",children:""}),o.jsx("div",{className:"metric-label",children:p("projects.performance")}),o.jsx("div",{className:"metric-value positive",children:t.performance!==void 0?`${t.performance}%`:""})]}),o.jsxs("div",{className:"metric-card drawdown",children:[o.jsx("div",{className:"metric-icon",children:""}),o.jsx("div",{className:"metric-label",children:p("projects.drawdown")}),o.jsx("div",{className:"metric-value negative",children:t.drawdown!==void 0?`${t.drawdown}%`:""})]})]})]})]})]}),y==="investments"&&o.jsx("div",{className:"investments-section",children:x?o.jsx("div",{className:"loading-state",children:p("investments.loadingInvestments")}):T.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("div",{className:"empty-title",children:p("projects.noInvestmentsTitle")}),o.jsx("div",{className:"empty-subtitle",children:p("projects.noInvestmentsSubtitle")})]}):o.jsx("div",{className:"investments-table-wrapper",children:o.jsxs("table",{className:"investments-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:p("projects.investor")}),o.jsx("th",{children:p("investments.amount")}),o.jsx("th",{children:p("investments.expectedROI")}),o.jsx("th",{children:p("investments.status")}),o.jsx("th",{children:p("investments.date")})]})}),o.jsx("tbody",{children:T.map(N=>o.jsxs("tr",{onClick:()=>m(N.id),className:"clickable-row",children:[o.jsx("td",{children:o.jsxs("div",{className:"investor-cell",children:[o.jsx("div",{className:"investor-name",children:N.userName||p("users.user")}),o.jsx("div",{className:"investor-email",children:N.userEmail})]})}),o.jsx("td",{className:"amount-cell",children:P(N.amount)}),o.jsx("td",{children:o.jsx("span",{className:"roi-badge",children:N.expectedROI!==null?`${N.expectedROI}%`:""})}),o.jsx("td",{children:o.jsxs("span",{className:`badge status-badge status-${N.status}`,children:[N.status==="active"&&` ${p("investments.active")}`,N.status==="completed"&&` ${p("investments.completed")}`,N.status==="cancelled"&&` ${p("investments.cancelled")}`]})}),o.jsx("td",{className:"date-cell",children:O(N.createdAt)})]},N.id))})]})})}),y==="timeline"&&o.jsx("div",{className:"timeline-section",children:o.jsx(b$,{projectId:t.id,adminData:r})}),y==="activity"&&o.jsx("div",{className:"activity-section",children:E.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-icon",children:""}),o.jsx("div",{className:"empty-title",children:p("projects.noActivityTitle")}),o.jsx("div",{className:"empty-subtitle",children:p("projects.noActivitySubtitle")})]}):o.jsx("div",{className:"activity-list",children:E.map(N=>o.jsxs("div",{className:"activity-item",children:[o.jsx("div",{className:"activity-icon",children:N.type==="system"?"":""}),o.jsxs("div",{className:"activity-content",children:[o.jsxs("div",{className:"activity-header",children:[o.jsx("span",{className:"activity-title",children:N.title}),o.jsx("span",{className:"activity-date",children:_(N.createdAt)})]}),N.description&&o.jsx("div",{className:"activity-description",children:N.description}),o.jsx("div",{className:"activity-meta",children:o.jsxs("span",{className:`badge visibility-badge visibility-${N.visibility}`,children:[N.visibility==="admin"&&p("projects.adminOnly"),N.visibility==="investors"&&p("projects.investorsOnly"),N.visibility==="all"&&p("common.all")]})})]})]},N.id))})})]})]}),t.type==="fixed"?o.jsx(x$,{project:t,isOpen:d,onClose:()=>h(!1),onSuccess:v,onTimelineEvent:C}):o.jsx(u$,{project:t,isOpen:d,onClose:()=>h(!1),onSuccess:v,onTimelineEvent:C}),o.jsx(N$,{investmentId:f,isOpen:!!f,onClose:()=>m(null),onUpdate:()=>{s(),T.length>0}})]});return WE.createPortal(D,document.body)}function L$({adminData:t}){const e=Ms(),[n]=og(),s=n.get("projectId")||"",{projects:r,loading:i,refetch:a}=cS(),{t:l}=ft(),[c,d]=R.useState(!1),[h,f]=R.useState(!1),[m,p]=R.useState(null),[y,b]=R.useState("overview"),[T,x]=R.useState({type:"all",category:"all",status:"all",risk:"all"}),[w,S]=R.useState(null),[j,P]=R.useState({page:1,perPage:20}),[O,_]=R.useState(null);R.useEffect(()=>{h?document.body.style.overflow="hidden":(p(null),b("overview"),document.body.style.overflow="")},[h]),R.useEffect(()=>{if(!h||!(m!=null&&m.id))return;const U=r.find(te=>te.id===m.id);U&&U!==m&&p(U)},[r,h,m==null?void 0:m.id]);const v=()=>{a()},C=async(U,te)=>{if(!(!U||!te))try{S(U),await Vs(ae(Q,"projects",U),{status:te,updatedAt:se()}),a()}catch(he){console.error("Error actualizando estado",he)}finally{S(null)}},E=U=>{U&&e(`/admin/operaciones/inversiones?projectId=${U}`)},A=U=>{p(U),b("overview"),f(!0)},D=()=>{f(!1)},N=R.useMemo(()=>{const U=new Set;return r.forEach(te=>te.category&&U.add(te.category)),["all",...Array.from(U)]},[r]),F=R.useMemo(()=>r.filter(U=>!(T.type!=="all"&&U.type!==T.type||T.category!=="all"&&U.category!==T.category||T.status!=="all"&&U.computedStatus!==T.status||T.risk!=="all"&&U.riskLevel!==T.risk)),[r,T]),L=R.useMemo(()=>{const U=(j.page-1)*j.perPage,te=U+j.perPage;return F.slice(U,te)},[F,j]),ee=Math.ceil(F.length/j.perPage),z=U=>{P({...j,page:U}),window.scrollTo({top:0,behavior:"smooth"})},M=U=>{P({page:1,perPage:U})},W=R.useMemo(()=>{const U=r.length,te=r.filter(je=>je.computedStatus==="active").length,he=r.filter(je=>je.computedStatus==="funded").length,Fe=r.filter(je=>je.type==="fixed").reduce((je,et)=>je+Number(et.totalInvested||0),0);return{total:U,active:te,funded:he,totalCapital:Fe}},[r]),K=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(U||0);return o.jsxs("div",{className:"proyectos-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"page-title",children:l("projects.title")}),o.jsx("p",{className:"page-subtitle",children:l("projects.subtitle")})]}),o.jsxs("button",{className:"create-btn",onClick:()=>d(!0),children:["+ ",l("projects.createProject")]})]}),o.jsxs("div",{className:"kpis-section",children:[o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:l("projects.totalProjects")}),o.jsx("div",{className:"kpi-value",children:W.total})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:l("projects.activeProjects")}),o.jsx("div",{className:"kpi-value kpi-success",children:W.active})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:l("projects.fundedProjects")}),o.jsx("div",{className:"kpi-value kpi-info",children:W.funded})]}),o.jsxs("div",{className:"kpi-card",children:[o.jsx("div",{className:"kpi-label",children:l("projects.totalCapital")}),o.jsx("div",{className:"kpi-value kpi-currency",children:K(W.totalCapital)})]})]}),o.jsx("div",{className:"filters-bar",children:o.jsxs("div",{className:"filters-row",children:[o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{className:"filter-label",children:l("projects.type")}),o.jsxs("select",{className:"filter-select",value:T.type,onChange:U=>x({...T,type:U.target.value}),children:[o.jsx("option",{value:"all",children:l("common.all")}),o.jsx("option",{value:"fixed",children:l("projects.fixed")}),o.jsx("option",{value:"variable",children:l("projects.variable")})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{className:"filter-label",children:l("projects.category")}),o.jsxs("select",{className:"filter-select",value:T.category,onChange:U=>x({...T,category:U.target.value}),children:[o.jsx("option",{value:"all",children:l("projects.allCategories")}),N.filter(U=>U!=="all").map(U=>o.jsx("option",{value:U,children:U},U))]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{className:"filter-label",children:l("projects.status")}),o.jsxs("select",{className:"filter-select",value:T.status,onChange:U=>x({...T,status:U.target.value}),children:[o.jsx("option",{value:"all",children:l("common.all")}),o.jsx("option",{value:"draft",children:l("status.draft")}),o.jsx("option",{value:"active",children:l("status.active")}),o.jsx("option",{value:"paused",children:l("status.paused")}),o.jsx("option",{value:"funded",children:l("status.funded")}),o.jsx("option",{value:"closed",children:l("status.closed")})]})]}),o.jsxs("div",{className:"filter-group",children:[o.jsx("label",{className:"filter-label",children:l("projects.risk")}),o.jsxs("select",{className:"filter-select",value:T.risk,onChange:U=>x({...T,risk:U.target.value}),children:[o.jsx("option",{value:"all",children:l("common.all")}),o.jsx("option",{value:"low",children:l("projects.riskLow")}),o.jsx("option",{value:"medium",children:l("projects.riskMedium")}),o.jsx("option",{value:"high",children:l("projects.riskHigh")})]})]})]})}),o.jsxs("div",{className:"proyectos-card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("div",{className:"card-header-left",children:o.jsxs("h3",{children:[F.length," ",l("projects.projectsFound")]})}),o.jsx("div",{className:"card-header-right",children:o.jsxs("label",{className:"per-page-label",children:[l("common.show"),":",o.jsxs("select",{className:"per-page-select",value:j.perPage,onChange:U=>M(Number(U.target.value)),children:[o.jsx("option",{value:10,children:"10"}),o.jsx("option",{value:20,children:"20"}),o.jsx("option",{value:50,children:"50"})]})]})})]}),i?o.jsx("div",{className:"loading-state",children:l("projects.loadingProjects")}):F.length===0?o.jsx("div",{className:"empty-state",children:l("projects.noProjects")}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"table-wrapper",children:o.jsxs("table",{className:"proyectos-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:l("projects.project")}),o.jsx("th",{children:l("projects.type")}),o.jsx("th",{children:l("projects.risk")}),o.jsx("th",{children:l("projects.status")}),o.jsx("th",{children:l("projects.capitalMetrics")}),o.jsx("th",{className:"actions-header",children:l("projects.actions")})]})}),o.jsx("tbody",{children:L.map(U=>o.jsxs("tr",{className:U.id===s?"highlight":"",children:[o.jsxs("td",{children:[o.jsx("div",{className:"cell-title",children:U.name||l("projects.projectNoName")}),o.jsx("div",{className:"cell-subtle",children:U.createdAt?l("common.created"):l("common.noDate")})]}),o.jsx("td",{children:o.jsx("span",{className:`type-badge type-${U.type||"fixed"}`,children:U.type==="variable"?l("projects.variable"):l("projects.fixed")})}),o.jsx("td",{children:o.jsxs("span",{className:`risk-badge risk-${U.riskLevel||"medium"}`,children:[U.riskLevel==="low"&&l("projects.riskLow"),U.riskLevel==="medium"&&l("projects.riskMedium"),U.riskLevel==="high"&&l("projects.riskHigh")]})}),o.jsx("td",{children:o.jsxs("span",{className:`status-badge status-${U.computedStatus||"draft"}`,children:[U.computedStatus==="funded"&&l("status.funded"),U.computedStatus==="active"&&l("status.active"),U.computedStatus==="paused"&&l("status.paused"),U.computedStatus==="closed"&&l("status.closed"),U.computedStatus==="draft"&&l("status.draft")]})}),o.jsx("td",{children:U.type==="fixed"?o.jsxs("div",{className:"progress-col",children:[o.jsx("div",{className:"progress-top",children:U.totalInvested?`$${Pl(U.totalInvested)} USD`:l("projects.noInvestments")}),U.targetAmount?o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill",style:{width:`${U.progress||0}%`}})}):o.jsx("div",{className:"cell-subtle",children:l("projects.noTargetDefined")}),U.targetAmount&&o.jsxs("div",{className:"progress-foot",children:[U.progress||0,"% ",l("projects.ofTarget")," $",Pl(U.targetAmount)," USD"]})]}):o.jsxs("div",{className:"metrics-col",children:[o.jsxs("div",{className:"metric-line",children:[l("projects.performance"),": ",U.performance!==void 0&&U.performance!==null?`${U.performance}%`:""]}),o.jsxs("div",{className:"metric-line",children:[l("projects.drawdown"),": ",U.drawdown!==void 0&&U.drawdown!==null?`${U.drawdown}%`:""]})]})}),o.jsx("td",{className:"actions-cell",children:o.jsxs("div",{className:"actions-wrapper",children:[o.jsx("button",{className:"action-btn-icon",onClick:()=>A(U),title:l("projects.viewDetail"),children:""}),o.jsxs("div",{className:"action-menu-wrapper",children:[o.jsx("button",{className:"action-menu-btn",onClick:()=>_(O===U.id?null:U.id),title:l("projects.moreActions"),children:""}),O===U.id&&o.jsxs("div",{className:"action-menu",children:[o.jsx("button",{className:"action-menu-item",onClick:()=>{E(U.id),_(null)},children:l("projects.viewInvestments")}),U.computedStatus==="draft"&&o.jsxs("button",{className:"action-menu-item",disabled:!!w,onClick:()=>{C(U.id,"active"),_(null)},children:[" ",l("projects.activate")]}),U.computedStatus==="active"&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"action-menu-item",disabled:!!w,onClick:()=>{C(U.id,"paused"),_(null)},children:[" ",l("projects.pause")]}),o.jsxs("button",{className:"action-menu-item danger",disabled:!!w,onClick:()=>{C(U.id,"closed"),_(null)},children:[" ",l("projects.close")]})]}),U.computedStatus==="paused"&&o.jsxs("button",{className:"action-menu-item",disabled:!!w,onClick:()=>{C(U.id,"active"),_(null)},children:[" ",l("projects.resume")]}),U.computedStatus==="funded"&&o.jsxs("button",{className:"action-menu-item danger",disabled:!!w,onClick:()=>{C(U.id,"closed"),_(null)},children:[" ",l("projects.close")]})]})]})]})})]},U.id))})]})}),ee>1&&o.jsxs("div",{className:"pagination",children:[o.jsxs("button",{className:"pagination-btn",onClick:()=>z(j.page-1),disabled:j.page===1,children:[" ",l("common.previous")]}),o.jsxs("div",{className:"pagination-info",children:[l("common.page")," ",j.page," ",l("common.of")," ",ee]}),o.jsxs("button",{className:"pagination-btn",onClick:()=>z(j.page+1),disabled:j.page===ee,children:[l("common.next")," "]})]})]})]}),o.jsx(M$,{project:m,isOpen:h,onClose:D,onRefresh:a,adminData:t,activeTab:y,onTabChange:b}),o.jsx(c$,{isOpen:c,onClose:()=>d(!1),onSuccess:v})]})}function V$(){const{loading:t,isAdmin:e,user:n}=bL();return t?o.jsxs("div",{className:"admin-router-loading",children:[o.jsx("div",{className:"admin-router-loading-message",children:"Verificando permisos"}),o.jsx("div",{className:"admin-router-loading-submessage",children:"Validando credenciales en Firestore"})]}):o.jsxs(aP,{children:[o.jsx(bn,{path:"/login",element:o.jsx(_F,{})}),o.jsx(bn,{path:"/register",element:o.jsx(xF,{})}),o.jsx(bn,{path:"/admin",element:e?o.jsx($r,{admin:n,children:o.jsx(bF,{})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/usuarios",element:e?o.jsx($r,{admin:n,children:o.jsx(CF,{adminData:n})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/operaciones/recargas",element:e?o.jsx($r,{admin:n,children:o.jsx(DF,{adminData:n})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/operaciones/retiros",element:e?o.jsx($r,{admin:n,children:o.jsx(zF,{adminData:n})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/operaciones/inversiones",element:e?o.jsx($r,{admin:n,children:o.jsx(WF,{adminData:n})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/proyectos",element:e?o.jsx($r,{admin:n,children:o.jsx(L$,{adminData:n})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/topups",element:e?o.jsx($r,{admin:n,children:o.jsx(yF,{})}):o.jsx(Hs,{to:"/admin/not-authorized",replace:!0})}),o.jsx(bn,{path:"/admin/not-authorized",element:o.jsx(wF,{})}),o.jsx(bn,{path:"/",element:o.jsx(Hs,{to:"/login",replace:!0})})]})}function F$(){return o.jsx(pP,{children:o.jsx(V$,{})})}GE(document.getElementById("root")).render(o.jsx(nt.StrictMode,{children:o.jsx(cF,{children:o.jsx(F$,{})})}));
